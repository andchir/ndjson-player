/**
 * Author : A.Lepe (dev@alepe.com)
 * License: MIT
 * Version: 0.1.8
 * Updated: 2022-04-26
 * Content: ndjson-player.min.js (Bundle Minimized)
 */

class NdJsonPlayer{fps;loop;showfirst;autoplay;path;playing=!1;loaded=!1;backwards=!1;started=!1;onStart;onLoad;onRender;onFinish;onError;player=null;canvas=null;ctx=null;timer=null;src="";frame=0;multiplier=1;_numFrames=0;_totTime=0;_frames=[];_frameBase="";_startTimeStamp=0;constructor(t,e,s,n,o,i,a,r){const c=this;c.src=t,window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame),c.onStart=n||function(){},c.onLoad=o||function(){},c.onRender=i||function(){},c.onFinish=a||function(){},c.onError=r||function(t){console.log(t)};let l=null;if(e instanceof Node)l=e;else{if("object"==typeof e)s=e,e="canvas";else if("string"!=typeof e)throw"Incorrect parameter passed to constructor of NdJsonPlayer";l=document.querySelector(e||"canvas")}if(!l)throw"Canvas element was not found in DOM: "+e;if("CANVAS"===l.tagName){c.canvas=l;const t=document.createElement("div");l.parentNode.insertBefore(t,l),t.prepend(l),l=t}else if(l.hasChildNodes()){if(c.canvas=l.querySelector("canvas"),!c.canvas)throw"No canvas found in element"}else c.canvas=document.createElement("CANVAS"),l.prepend(c.canvas);c.player=l,c.canvas.height=c.canvas.clientHeight,c.canvas.width=c.canvas.clientWidth,l.classList.add("ndjp"),c.ctx=c.canvas.getContext("2d"),c.fps=s.fps||24,c.loop=s.loop||!1,c.autoplay=s.autoplay||!1,c.showfirst=!1!==s.showfirst,c.path=s.path||"",c.timer=new TimerSrc(1e3/c.fps),c.load((function(t){void 0!==t.w&&(c.canvas.width=t.w),void 0!==t.h&&(c.canvas.height=t.h),void 0!==t.fb&&(c._frameBase=t.fb),void 0!==t.tf&&(c._numFrames=t.tf),void 0!==t.tt&&(c._totTime=t.tt),void 0!==t.ts&&(c._startTimeStamp||(c._startTimeStamp=t.ts)),void 0!==t.fps&&(c.fps=t.fps,c.timer=new TimerSrc(1e3/c.fps)),void 0!==t.f?(c._frames.push(t),c.loaded||(c.loaded=!0,c.autoplay?c.play():c.showfirst&&c.step())):c.onRender(t),c.started||(c.onStart(c),c.started=!0)}))}load(t,e){const s=this;void 0!==e&&(this.src=e,this._frames=[]);const n=new TextDecoder;let o="";return fetch(s.src).then((t=>t.body.getReader())).then((e=>e.read().then((function i({value:a,done:r}){if(r)return t(JSON.parse(o)),void s.onLoad(s);const c=(o+n.decode(a,{stream:!0})).split(/[\r\n](?=.)/);return o=c.pop(),c.map(JSON.parse).forEach(t),e.read().then(i)})))).catch((t=>this.onError(t)))}_render(t){if(null==this.timer)throw"TimerSrc was not initialized";if(0===this._frames.length)throw"Video is empty or no frames were found";this.frame>=this._frames.length&&(this.frame=this.loop?0:this._frames.length-1),this.frame<0&&(this.frame=this.loop?this._frames.length-1:0),this._displayImg(t)}_displayImg(t){const e=this,s=e._frames[e.frame],n=function(){e.onRender(s),e.timer.call((function(){t||(e._increment(),e.timer.nocall()),e._displayImg()}))};if(void 0!==s.f){const t=e._frameBase+s.f;e._image(t,n)}else e.onRender(s),n()}_increment(){this.frame+=this.multiplier*(this.backwards?-1:1),this.frame<0&&(this.loop?this.frame=this._frames.length-1:(this.frame=0,this.pause(),this.onFinish(this))),this.frame>this._frames.length-1&&(this.loop?this.frame=0:(this.frame=this._frames.length-1,this.pause(),this.onFinish(this)))}_draw=function(t,e){const s=this;return 0===t.width&&0===t.height?(t.onerror(),void 0!==e&&e(!1)):(s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height),s.ctx.drawImage(t,0,0,t.width,t.height,0,0,s.canvas.width,s.canvas.height),void 0!==e&&e(!0)),this};_image=function(t,e){const s=this,n=new Image;return n.crossOrigin="",n.onload=function(){s._draw(n,(function(t){t&&void 0!==e&&e(n)}))},n.onerror=function(){const t=s.onError();t&&(n.src=t)},n.src="/"===t[0]||t.match(/^https?:/)||t.match(/^data:image/)?t:s.path+t,this};frameBase(){return this._frameBase}currentFrame(){return this.frame}totalFrames(){return this._numFrames||this._frames.length}totalTime(){return this._totTime||this.currentFrame()/this.fps}frameAt(t){const e=this;let s=t<this.totalFrames()?e._frames[t]:null;return s&&(s.fb=e._frameBase),s}indexAt(t){return~~(t*this.totalFrames()/100)}playerNode(){return this.player}play(t){t<0?t=0:t>this._frames.length?t=this._frames.length-1:void 0!==t&&(this.frame=1*t),this.playing=!0,this.timer.play(),this._render(!1)}playForward(t){this.backwards=!1,this.play(t)}playBackwards(t){this.backwards=!0,this.play(t)}pause(){this.playing=!1,this.timer.pause()}stop(){this.playing=!1,this.frame=0,this.timer.pause(),this._displayImg(!0)}step(t){t<0?t=0:t>this._frames.length?t=this._frames.length-1:void 0!==t&&(this.frame=1*t),this.playing=!1,this.timer.step(),this._render(!0)}stepForwards(){this.backwards=!1,this.step()}stepBackwards(){this.backwards=!0,this.step()}reset(){return void 0!==this.ctx.reset&&(this.ctx.reset(),this.ctx.clear(),this.stop(),this.canvas.width=this.canvas.width),this}}class NDJPlayer{ndjp;options;ui;onAction;constructor(t,e,s,n){const o=this;this.options=Object.assign({controls:!1,resize:!0},s||{}),this.onAction=n||function(){},this._create(e),this.ndjp=new NdJsonPlayer(t,e,s,(function(t){o._adjustSize(),void 0!==o.options.onstart&&o.options.onstart(t)}),(function(t){void 0!==o.options.onload&&o.options.onload(t)}),(function(t){o._onUpdate(t),void 0!==o.options.onrender&&o.options.onrender(t)}),(function(t){}),(function(t){}))}_onUpdate(t){const e=this;if(void 0!==e.ui&&void 0!==e.ui.controls){if(void 0!==e.ui.controls.frames&&(e.ui.controls.frames.text=e.ndjp.currentFrame()+1+"/"+e.ndjp.totalFrames()),void 0!==e.ui.controls.lapse){let s="";const n=e.ndjp._startTimeStamp&&void 0!==t.ts,o=void 0!==t.t,i=e.ndjp._totTime>0;t.d&&(s=t.d+" "),n?s+=e._formatMillis(t.ts-e.ndjp._startTimeStamp):o&&(s+=t.t.indexOf(":")>0?t.t:e._fmtTime(t.t)),i&&(s+="/"+e.ndjp.totalTime()),e.ui.controls.lapse.text=s}void 0!==e.ui.controls.progress&&(e.ui.controls.progress.value=(e.ndjp.currentFrame()+1)/e.ndjp.totalFrames()*100)}}_adjustSize(){if(this.options.resize){let t=this.ndjp.player,e=this.ndjp.player.parentElement;if(t.clientHeight>e.clientHeight){let s=this.ndjp.canvas.height/this.ndjp.canvas.width,n=1/s;this.ndjp.canvas.height=e.clientHeight-(this.options.controls?t.querySelector(".controls").clientHeight:0),this.ndjp.canvas.width=e.clientWidth*(s<1?s:n)}}}_create(t){this.ui=m2d2(t,this._getUI(t))}_getUI(t){const e=this;let s={html:t.innerHTML||""};const n={tagName:"a",className:"play",show:!0,title:"Play",text:"▶️",href:"#",onclick:function(){return e.onAction("play",e.ndjp,e),e.ndjp.play(),e.ui.controls.play.show=!1,e.ui.controls.pause.show=!0,!1}},o={tagName:"a",className:"pause",show:!1,title:"Pause",text:"⏸️",href:"#",onclick:function(){return e.onAction("pause",e.ndjp,e),e.ndjp.pause(),e.ui.controls.play.show=!0,e.ui.controls.pause.show=!1,!1}},i={tagName:"a",className:"stop",title:"Stop",text:"⏹️",href:"#",onclick:function(){return e.onAction("stop",e.ndjp,e),e.ndjp.stop(),!1}};document.addEventListener("fullscreenchange",(t=>{const s=e.ndjp.player;document.fullscreenElement?s.classList.add("fullscreen"):s.classList.remove("fullscreen")}));const a={tagName:"a",className:"fullscreen",title:"Full Screen",text:"⛶",href:"#",onclick:function(t){const s=e.ndjp.player;return s.classList.contains("fullscreen")?document.exitFullscreen():s.requestFullscreen(),!1}},r={tagName:"label",className:"lapse",show:!0,title:"Time elapsed / Time Total",text:"0:00"},c={tagName:"label",className:"frames",show:!0,title:"Current Frame / Total Frames",text:"0"},l={show:!0,value:0,max:100,onmousemove:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.ndjp.frameAt(e.ndjp.indexAt(s));if(n){e.ui.controls.thumb.show=!0,e.ui.controls.thumb.img.src=e.ndjp.frameBase()+(n.th||n.f),void 0!==n.tc&&(e.ui.controls.thumb.caption=n.tc);let s=e.ui.controls.thumb._node;s.style.left=this.offsetLeft+t.offsetX-s.clientWidth/2+"px"}else e.ui.controls.thumb.show=!1},onmouseleave:function(){e.ui.controls.thumb.show=!1},onclick:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.ndjp.indexAt(s);e.ndjp.step(n),e.onAction("progress",e.ndjp,e)}};if(this.options.controls){const t="full"===this.options.controls,e="common"===this.options.controls;s=this._getBasicUI(),s.controls.play=n,s.controls.pause=o,t&&(s.controls.stop=i),s.controls.lapse=r,s.controls.progress=l,(e||t)&&(s.controls.frames=c),t&&(s.controls.fullscreen=a)}this.options.controls;let h=t instanceof Node?t:document.querySelector(t);if(h){h.querySelector("canvas")||(s=Object.assign({canvas:""},s))}else console.log("Root element: "+t+" was not found in document"),s=Object.assign({canvas:""},s);return s}_getBasicUI(){return{caption:"",controls:{tagName:"div",className:"controls",thumb:{tagName:"figure",className:"thumb",show:!1,img:{src:""},caption:{tagName:"figCaption",className:"caption",show:!1}}}}}_fmtTime(t){let e=(t=t.toFixed(2)).split(".")[1]||"00";return(~~(t/60)+"").padStart(2,"0")+":"+(~~(t/60%1*60)+"").padStart(2,"0")+"."+e}_formatMillis(t){function e(t,e){return("00"+t).slice(-1*(e||2))}const s=Math.floor(t/1e3/60/60),n=Math.floor(60*(t/1e3/60/60-s)),o=Math.floor(60*(60*(t/1e3/60/60-s)-n)),i=parseInt(t%1e3/100);return e(s)+":"+e(n)+":"+e(o)+"."+e(i,3)}}function TimerSrc(t,e){let s,n,o,i,a={};a.interval=t,a.checker=50,a.status="init";let r=(new Date).getTime();return s=r-t,a.call=function(t){return e=t,a},a.nocall=function(){return e=null,a},a.exec=function(){return e&&e(),s=(new Date).getTime(),a},a.check=function(){return o&&o(),a},a.play=function(){return o=a.step,a.status="running",a},a.pause=function(){return o=null,a.status="paused",a},a.destroy=function(){for(var t in o=null,clearInterval(n),n=null,a)a[t]=null,delete a[t];a.status="destroyed"},a.step=function(){return r=(new Date).getTime(),i=Math.max(0,a.interval-(r-s)),0===i&&(i=a.interval,s=(new Date).getTime(),e&&e()),a},a.slow=function(){return a.interval=1e3,a},a.fast=function(){return a.interval=t,a},n=setInterval(a.check,a.checker),a}class VideoND extends HTMLElement{constructor(){super();const t={autoplay:!1,controls:!1,loop:!1,width:"auto",height:"auto",poster:"",preload:"auto",src:"",cc:"auto",caption:"",fullscreen:!1,fps:"",speed:!1,autosize:"auto",sizes:{}||[],thumbs:"auto"},e={};for(let s in t)e[s]=this.getAttribute(s)||this.hasAttribute(s)||t[s];e.onstart=function(t){s.onstart&&s.onstart(t)},e.onload=function(t){s.onload&&s.onload(t)},e.onrender=function(t){s.onrender&&s.onrender(t,n.ndjp,n,n.ndjp.canvas,n.ndjp.ctx)},this.style.display="block",this.className="ndjp",this._root=this;const s=this,n=new NDJPlayer(e.src,this,e,(function(t,e,n){s.onaction&&s.onaction(t,e,n)}))}setCaption(t){this._root.querySelector("caption").innerText=t}static get observedAttributes(){return["width","height","caption"]}attributeChangedCallback(t,e,s){"caption"===t&&this.setCaption(s)}}document.addEventListener("DOMContentLoaded",(function(){window.customElements.define("video-nd",VideoND)}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5kanNvbi1wbGF5ZXIuc3JjLmpzIiwibmRqc29uLXVpLnNyYy5qcyIsInRpbWVyLnNyYy5qcyIsInZpZGVvLW5kLnNyYy5qcyJdLCJuYW1lcyI6WyJOZEpzb25QbGF5ZXIiLCJmcHMiLCJsb29wIiwic2hvd2ZpcnN0IiwiYXV0b3BsYXkiLCJwYXRoIiwicGxheWluZyIsImxvYWRlZCIsImJhY2t3YXJkcyIsInN0YXJ0ZWQiLCJvblN0YXJ0Iiwib25Mb2FkIiwib25SZW5kZXIiLCJvbkZpbmlzaCIsIm9uRXJyb3IiLCJwbGF5ZXIiLCJjYW52YXMiLCJjdHgiLCJ0aW1lciIsInNyYyIsImZyYW1lIiwibXVsdGlwbGllciIsIl9udW1GcmFtZXMiLCJfdG90VGltZSIsIl9mcmFtZXMiLCJfZnJhbWVCYXNlIiwiX3N0YXJ0VGltZVN0YW1wIiwiY29uc3RydWN0b3IiLCJlbGVtZW50Iiwib3B0aW9ucyIsIm9uc3RhcnQiLCJvbmxvYWQiLCJvbnJlbmRlciIsIm9uZmluaXNoIiwib25lcnJvciIsIl90aGlzIiwidGhpcyIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsImUiLCJjb25zb2xlIiwibG9nIiwiTm9kZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRhZ05hbWUiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJwcmVwZW5kIiwiaGFzQ2hpbGROb2RlcyIsImhlaWdodCIsImNsaWVudEhlaWdodCIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJjbGFzc0xpc3QiLCJhZGQiLCJnZXRDb250ZXh0IiwiVGltZXJTcmMiLCJsb2FkIiwiaXRlbSIsInVuZGVmaW5lZCIsInciLCJoIiwiZmIiLCJ0ZiIsInR0IiwidHMiLCJmIiwicHVzaCIsInBsYXkiLCJzdGVwIiwiY2FsbGJhY2siLCJuZXdTcmMiLCJkZWNvZGVyIiwiVGV4dERlY29kZXIiLCJidWZmZXIiLCJmZXRjaCIsInRoZW4iLCJyZXNwIiwiYm9keSIsImdldFJlYWRlciIsInJlYWRlciIsInJlYWQiLCJwcm9jZXNzIiwidmFsdWUiLCJkb25lIiwiSlNPTiIsInBhcnNlIiwibGluZXMiLCJkZWNvZGUiLCJzdHJlYW0iLCJzcGxpdCIsInBvcCIsIm1hcCIsImZvckVhY2giLCJjYXRjaCIsInJlYXNvbiIsIl9yZW5kZXIiLCJvbmNlIiwibGVuZ3RoIiwiX2Rpc3BsYXlJbWciLCJuZXh0IiwiY2FsbCIsIl9pbmNyZW1lbnQiLCJub2NhbGwiLCJfaW1hZ2UiLCJwYXVzZSIsIl9kcmF3IiwiaW1nIiwiY2xlYXJSZWN0IiwiZHJhd0ltYWdlIiwiaW1hZ2UiLCJJbWFnZSIsImNyb3NzT3JpZ2luIiwiZHJhd24iLCJlcnIiLCJtYXRjaCIsImZyYW1lQmFzZSIsImN1cnJlbnRGcmFtZSIsInRvdGFsRnJhbWVzIiwidG90YWxUaW1lIiwiZnJhbWVBdCIsImluZGV4IiwiaW5kZXhBdCIsInBlcmNlbnRhZ2UiLCJwbGF5ZXJOb2RlIiwic3RhcnRGcmFtZSIsInBsYXlGb3J3YXJkIiwicGxheUJhY2t3YXJkcyIsInN0b3AiLCJzdGVwRm9yd2FyZHMiLCJzdGVwQmFja3dhcmRzIiwicmVzZXQiLCJjbGVhciIsIk5ESlBsYXllciIsIm5kanAiLCJ1aSIsIm9uQWN0aW9uIiwib25hY3Rpb24iLCJPYmplY3QiLCJhc3NpZ24iLCJjb250cm9scyIsInJlc2l6ZSIsIl9jcmVhdGUiLCJfYWRqdXN0U2l6ZSIsIl9vblVwZGF0ZSIsImZyYW1lcyIsInRleHQiLCJsYXBzZSIsInQiLCJkIiwiX2Zvcm1hdE1pbGxpcyIsImluZGV4T2YiLCJfZm10VGltZSIsInByb2dyZXNzIiwicGFyZW50IiwicGFyZW50RWxlbWVudCIsInJhdGlvVyIsInJhdGlvSCIsIm0yZDIiLCJfZ2V0VUkiLCJodG1sIiwiaW5uZXJIVE1MIiwiY2xhc3NOYW1lIiwic2hvdyIsInRpdGxlIiwiaHJlZiIsIm9uY2xpY2siLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJmdWxsc2NyZWVuRWxlbWVudCIsInJlbW92ZSIsImZ1bGxzY3JlZW4iLCJldiIsImNvbnRhaW5zIiwiZXhpdEZ1bGxzY3JlZW4iLCJyZXF1ZXN0RnVsbHNjcmVlbiIsIm1heCIsIm9ubW91c2Vtb3ZlIiwicG9zaXRpb24iLCJvZmZzZXRXaWR0aCIsInRodW1iIiwidGgiLCJ0YyIsImNhcHRpb24iLCJfbm9kZSIsInN0eWxlIiwibGVmdCIsIm9mZnNldExlZnQiLCJvZmZzZXRYIiwib25tb3VzZWxlYXZlIiwiZnVsbCIsImNvbW1vbiIsIl9nZXRCYXNpY1VJIiwicm9vdCIsInRpbWUiLCJkZWNpbWFsIiwidG9GaXhlZCIsInBhZFN0YXJ0IiwibWlsbGlzIiwicGFkIiwibnVtIiwiZGlnaXRzIiwic2xpY2UiLCJNYXRoIiwiZmxvb3IiLCJtIiwicyIsIm1zIiwicGFyc2VJbnQiLCJvcmlnaW5hbF9tcyIsInN0YXJ0VGltZSIsImFjdGlvbiIsIm9iaiIsImludGVydmFsIiwiY2hlY2tlciIsInN0YXR1cyIsIm5vd1RpbWUiLCJEYXRlIiwiZ2V0VGltZSIsImZ1bmMiLCJleGVjIiwiY2hlY2siLCJkZXN0cm95IiwibyIsImNsZWFySW50ZXJ2YWwiLCJzbG93IiwiZmFzdCIsInNldEludGVydmFsIiwiVmlkZW9ORCIsIkhUTUxFbGVtZW50Iiwic3VwZXIiLCJkZWZhdWx0T3B0aW9ucyIsInBvc3RlciIsInByZWxvYWQiLCJjYyIsInNwZWVkIiwiYXV0b3NpemUiLCJzaXplcyIsInRodW1icyIsImdldEF0dHJpYnV0ZSIsImhhc0F0dHJpYnV0ZSIsIm5kalBsYXllciIsImRpc3BsYXkiLCJfcm9vdCIsInNldENhcHRpb24iLCJpbm5lclRleHQiLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siLCJuYW1lIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIl0s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RUEsTUFBQWtLLEVBQUFsSyxLQUNBa04sRUFBQSxJQUFBNUcsVUFBQTdHLEVBQUFWLElBQUFpQixLQUFBUCxHQUNBLFNBQUEyTCxFQUFBek0sRUFBQTZILEdBQ0EwRCxFQUFBeEQsVUFDQXdELEVBQUF4RCxTQUFBMEUsRUFBQXpNLEVBQUE2SCxNQUtBNkcsV0FBQTdELEdBQ0F4SixLQUFBb04sTUFBQTFNLGNBQUEsV0FBQTRNLFVBQUE5RCxFQUdBK0QsZ0NBQ0EsTUFBQSxDQUFBLFFBQUEsU0FBQSxXQUdBQyx5QkFBQUMsRUFBQUMsRUFBQUMsR0FDQSxZQUFBRixHQUNBek4sS0FBQXFOLFdBQUFNLElBSUFsTixTQUFBK0gsaUJBQUEsb0JBQUEsV0FDQXZJLE9BQUEyTixlQUFBQyxPQUFBLFdBQUF4QiIsImZpbGUiOiJuZGpzb24tcGxheWVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICBUaGlzIHBsYXllciB1c2VzIE5ESlNPTiBmaWxlcyB0byBwbGF5IGluIHNlcXVlbmNlIGFzIGEgdmlkZW9cbiAgQWRkaXRpb25hbGx5LCBpdCBtYXkgY29udGFpbiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZnJhbWVcbiAgSW5zcGlyZWQgaW4gaHR0cHM6Ly9naXRodWIuY29tL2xlcGUvZnJhbWUtcGxheWVyLyAoYnkgVmFnbmVyIFNhbnRhbmEpXG5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXBlL25kanNvbi1wbGF5ZXJcbiAqIEBhdXRob3IgQS5MZXBlXG4gKiBAU2luY2UgMjAyMC0wNC0xOVxuICovXG5jbGFzcyBOZEpzb25QbGF5ZXIge1xuICAgIC8vIE9wdGlvbnNcbiAgICBmcHM7ICAgICAgICAvL2RlZmF1bHQ6IDI0RlBTXG4gICAgbG9vcDsgICAgICAgLy9kZWZhdWx0OiBmYWxzZVxuICAgIHNob3dmaXJzdDsgIC8vZGVmYXVsdDogdHJ1ZSA6IHNob3cgZmlyc3QgaW1hZ2VcbiAgICBhdXRvcGxheTsgICAvL2RlZmF1bHQ6IGZhbHNlXG4gICAgcGF0aDsgICAgICAgLy9kZWZhdWx0OiBcIlwiIDogU3BlY2lmeSBjb21tb24gcGF0aCBmb3IgaW1hZ2VzIGluIGNhc2UgVVJMIGlzIHVzZWQuXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgIEZvciBleGFtcGxlOiBwYXRoID0gXCJodHRwOi8vbG9jYWxob3N0OjgwODAvaW1hZ2VzL1wiXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgIHRoZW4sIHVzZSBcImltZzEyMzM0LmpwZ1wiIGFzIGZyYW1lIGluIE5ESlNPTiAodG8gcmVkdWNlIHNpemUgb2YgZmlsZSlcblxuICAgIC8vIFN0YXR1c1xuICAgIHBsYXlpbmcgPSBmYWxzZTsgICAvLyBTdGF0dXNcbiAgICBsb2FkZWQgID0gZmFsc2U7ICAgLy8gSWYgYSBmcmFtZSBoYXMgYmVlbiBsb2FkZWQgb3Igbm90XG4gICAgYmFja3dhcmRzID0gZmFsc2U7IC8vIElmIHBsYXlpbmcgYmFja3dhcmRzXG4gICAgc3RhcnRlZCA9IGZhbHNlOyAvLyBJZiB0aGUgcGxheWVyIGFscmVhZHkgc3RhcnQgcGxheWluZyBhdCBsZWFzdCAxIGZyYW1lXG5cbiAgICAvLyBFdmVudHNcbiAgICBvblN0YXJ0OyAgICAvLyBDYWxsYmFjayB3aGVuIHdlIHByb2Nlc3NlZCBmaXJzdCBpbWFnZVxuICAgIG9uTG9hZDsgICAgIC8vIENhbGxiYWNrIHdoZW4gZGF0YSBpcyBjb21wbGV0ZWQgbG9hZGluZ1xuICAgIG9uUmVuZGVyOyAgIC8vIENhbGxiYWNrIHRvIHJldHVybiBtZXRhZGF0YSB3aGVuIGEgZnJhbWUgaXMgcmVuZGVyZWRcbiAgICBvbkZpbmlzaDsgICAvLyBDYWxsYmFjayB3aGVuIHZpZGVvIHJlYWNoZXMgdGhlIGxhc3QgZnJhbWVcbiAgICBvbkVycm9yOyAgICAvLyBDYWxsYmFjayB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIHdpdGggdGhlIHNvdXJjZVxuXG4gICAgLy8gSW50ZXJuYWwgdXNlIG1haW5seVxuICAgIHBsYXllciA9IG51bGw7ICAgICAvLyBET00gZWxlbWVudCB3aGljaCBjb250YWlucyB0aGUgPGNhbnZhcz4gbm9kZVxuICAgIGNhbnZhcyA9IG51bGw7ICAgICAvLyA8Y2FudmFzPiBET00gb2JqZWN0XG4gICAgY3R4ID0gbnVsbDsgICAgICAgIC8vIGNhbnZhcy5jdHggb2JqZWN0XG4gICAgdGltZXIgPSBudWxsOyAgICAgIC8vIFRpbWVyU3JjIHVzZWQgdG8gbWFuYWdlIEZQU1xuICAgIHNyYyA9IFwiXCI7ICAgICAgICAgIC8vIFZpZGVvIHNvdXJjZSBVUkkgKE5ESlNPTilcbiAgICBmcmFtZSA9IDA7ICAgICAgICAgLy8gQ3VycmVudCBmcmFtZSBiZWluZyBwbGF5ZWRcbiAgICBtdWx0aXBsaWVyID0gMTsgICAgLy8gTXVsdGlwbGllciB0byBjb250cm9sIHNwZWVkXG5cbiAgICAvLyBQcml2YXRlXG4gICAgX251bUZyYW1lcyA9IDA7ICAgICAvLyBOdW1iZXIgb2YgdG90YWwgZnJhbWVzIChpbiBoZWFkZXIpXG4gICAgX3RvdFRpbWUgICA9IDA7ICAgICAvLyBOdW1iZXIgb2YgdG90YWwgdGltZSAoaW4gaGVhZGVyKVxuICAgIF9mcmFtZXMgPSBbXTsgICAgICAgLy8gVmlkZW8gY29udGVudCBpbmNsdWRpbmcgbWV0YWRhdGEgKGFycmF5KVxuICAgIF9mcmFtZUJhc2UgPSBcIlwiICAgICAvLyBCYXNlIGZvciBhbGwgZnJhbWVzICdmYidcbiAgICBfc3RhcnRUaW1lU3RhbXAgPSAwOy8vIFN0YXJ0aW5nIHRpbWUgc3RhbXBcblxuICAgIC8qKlxuICAgICAqIEV4YW1wbGVzOlxuICAgICAqIG5ldyBOZEpzb25QbGF5ZXIoXCIvdmlkZW9zL3Rlc3QubmRqc29uXCIsXCJjYW52YXNcIiwgeyBsb29wOiB0cnVlIH0pXG4gICAgICogbmV3IE5kSnNvblBsYXllcihcIi92aWRlb3MvdGVzdC5uZGpzb25cIiwgeyBsb29wOiB0cnVlIH0pXG4gICAgICogbmV3IE5kSnNvblBsYXllcihcIi92aWRlb3MvdGVzdC5uZGpzb25cIilcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcmMgICAgIC5uZGpzb24gZmlsZSAoc2VlIGZvcm1hdClcbiAgICAgKiBAcGFyYW0gZWxlbWVudCA6IE5vZGUsIEhUTUwgZWxlbWVudCAobXVzdCBiZSBhIGNhbnZhcykuIElmIG5vdCBzZXQsIGl0IHdpbGwgdXNlICc8Y2FudmFzPidcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyA6IE9iamVjdCByZXBsYWNpbmcgZGVmYXVsdCB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gb25zdGFydCA6IGNhbGxiYWNrIG9uIGZpcnN0IGltYWdlIGRpc3BsYXllZFxuICAgICAqIEBwYXJhbSBvbmxvYWQgOiBjYWxsYmFjayB3aGVuIGRhdGEgaGFzIGJlZW4gY29tcGxldGVseSBsb2FkZWRcbiAgICAgKiBAcGFyYW0gb25yZW5kZXIgOiBjYWxsYmFjayB3aGVuIGEgZnJhbWUgaXMgdXBkYXRlZFxuICAgICAqIEBwYXJhbSBvbmZpbmlzaCA6IGNhbGxiYWNrIHdoZW4gdGhlIHZpZGVvIGlzIGZpbmlzaGVkXG4gICAgICogQHBhcmFtIG9uZXJyb3IgOiBjYWxsYmFjayB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIHRvIHJhaXNlXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3JjLCBlbGVtZW50LCBvcHRpb25zLCBvbnN0YXJ0LCBvbmxvYWQsIG9ucmVuZGVyLCBvbmZpbmlzaCwgb25lcnJvcikge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIF90aGlzLnNyYyA9IHNyYztcbiAgICAgICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCBldmVudHM6XG4gICAgICAgIF90aGlzLm9uU3RhcnQgICAgPSBvbnN0YXJ0ICB8fCBmdW5jdGlvbiAoKSB7fVxuICAgICAgICBfdGhpcy5vbkxvYWQgICAgID0gb25sb2FkICAgfHwgZnVuY3Rpb24gKCkge31cbiAgICAgICAgX3RoaXMub25SZW5kZXIgICA9IG9ucmVuZGVyIHx8IGZ1bmN0aW9uICgpIHt9XG4gICAgICAgIF90aGlzLm9uRmluaXNoICAgPSBvbmZpbmlzaCB8fCBmdW5jdGlvbiAoKSB7fVxuICAgICAgICBfdGhpcy5vbkVycm9yICAgID0gb25lcnJvciAgfHwgZnVuY3Rpb24gKGUpIHsgY29uc29sZS5sb2coZSk7IH1cbiAgICAgICAgLy8gRml4IGFuZCBjaGVjayBhcmd1bWVudHNcbiAgICAgICAgbGV0IHBsYXllciA9IG51bGw7XG4gICAgICAgIGlmKGVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgICBwbGF5ZXIgPSBlbGVtZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gXCJjYW52YXNcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVsZW1lbnQgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHRocm93IFwiSW5jb3JyZWN0IHBhcmFtZXRlciBwYXNzZWQgdG8gY29uc3RydWN0b3Igb2YgTmRKc29uUGxheWVyXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBMb29rIGZvciBjYW52YXNcbiAgICAgICAgICAgIHBsYXllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCB8fCBcImNhbnZhc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGxheWVyKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyLnRhZ05hbWUgPT09IFwiQ0FOVkFTXCIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jYW52YXMgPSBwbGF5ZXI7XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIHdyYXBwZXIgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHBsYXllci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLCBwbGF5ZXIpO1xuICAgICAgICAgICAgICAgIHdyYXBwZXIucHJlcGVuZChwbGF5ZXIpO1xuICAgICAgICAgICAgICAgIHBsYXllciA9IHdyYXBwZXI7XG4gICAgICAgICAgICB9IGVsc2UgaWYocGxheWVyLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbnZhcyA9IHBsYXllci5xdWVyeVNlbGVjdG9yKFwiY2FudmFzXCIpO1xuICAgICAgICAgICAgICAgIGlmKCFfdGhpcy5jYW52YXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJObyBjYW52YXMgZm91bmQgaW4gZWxlbWVudFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkNBTlZBU1wiKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucHJlcGVuZChfdGhpcy5jYW52YXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgXCJDYW52YXMgZWxlbWVudCB3YXMgbm90IGZvdW5kIGluIERPTTogXCIgKyBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnBsYXllciA9IHBsYXllcjtcbiAgICAgICAgX3RoaXMuY2FudmFzLmhlaWdodCA9IF90aGlzLmNhbnZhcy5jbGllbnRIZWlnaHQ7XG4gICAgICAgIF90aGlzLmNhbnZhcy53aWR0aCAgPSBfdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XG4gICAgICAgIC8vIFNldCBjbGFzc25hbWUgZm9yIHN0eWxlXG4gICAgICAgIHBsYXllci5jbGFzc0xpc3QuYWRkKFwibmRqcFwiKTtcblxuICAgICAgICAvLyBTZXQgY29udGV4dFxuICAgICAgICBfdGhpcy5jdHggPSBfdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIC8vIE9wdGlvbnM6XG4gICAgICAgIF90aGlzLmZwcyAgICAgICAgPSBvcHRpb25zLmZwcyB8fCAyNDtcbiAgICAgICAgX3RoaXMubG9vcCAgICAgICA9IG9wdGlvbnMubG9vcCB8fCBmYWxzZTtcbiAgICAgICAgX3RoaXMuYXV0b3BsYXkgICA9IG9wdGlvbnMuYXV0b3BsYXkgfHwgZmFsc2U7XG4gICAgICAgIF90aGlzLnNob3dmaXJzdCAgPSBvcHRpb25zLnNob3dmaXJzdCAhPT0gZmFsc2U7XG4gICAgICAgIF90aGlzLnBhdGggICAgICAgPSBvcHRpb25zLnBhdGggfHwgXCJcIjtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHRpbWVyOlxuICAgICAgICBfdGhpcy50aW1lciA9IG5ldyBUaW1lclNyYygxMDAwIC8gX3RoaXMuZnBzKTtcblxuICAgICAgICAvLyBMb2FkIHZpZGVvOlxuICAgICAgICBfdGhpcy5sb2FkKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZihpdGVtLncgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbnZhcy53aWR0aCAgPSBpdGVtLnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihpdGVtLmggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbnZhcy5oZWlnaHQgPSBpdGVtLmg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihpdGVtLmZiICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fZnJhbWVCYXNlID0gaXRlbS5mYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGl0ZW0udGYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9udW1GcmFtZXMgPSBpdGVtLnRmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoaXRlbS50dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3RvdFRpbWUgPSBpdGVtLnR0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoaXRlbS50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYoIV90aGlzLl9zdGFydFRpbWVTdGFtcCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fc3RhcnRUaW1lU3RhbXAgPSBpdGVtLnRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGl0ZW0uZnBzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5mcHM9IGl0ZW0uZnBzO1xuICAgICAgICAgICAgICAgIF90aGlzLnRpbWVyID0gbmV3IFRpbWVyU3JjKDEwMDAgLyBfdGhpcy5mcHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoaXRlbS5mICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fZnJhbWVzLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgLy8gQXV0b1BsYXk6XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmF1dG9wbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuc2hvd2ZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLm9uUmVuZGVyKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIV90aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vblN0YXJ0KF90aGlzKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCBhIHZpZGVvIGZpbGUgb3IgY2hhbmdlIGN1cnJlbnQgdmlkZW8gZmlsZS5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgd2hlbiBlYWNoIGZyYW1lIGlzIHJlYWR5XG4gICAgICogQHBhcmFtIG5ld1NyYyBvcHRpb25hbCAoaWYgbm90IHNldCB3aWxsIHJlYWQgXCJzcmNcIiBwYXNzZWQgaW4gY29uc3RydWN0b3IpXG4gICAgICovXG4gICAgbG9hZChjYWxsYmFjaywgbmV3U3JjKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgaWYobmV3U3JjICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3JjID0gbmV3U3JjO1xuICAgICAgICAgICAgdGhpcy5fZnJhbWVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgICBsZXQgYnVmZmVyID0gJyc7XG4gICAgICAgIHJldHVybiBmZXRjaChfdGhpcy5zcmMpXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHJlc3AuYm9keS5nZXRSZWFkZXIoKSlcbiAgICAgICAgICAgIC50aGVuKHJlYWRlciA9PiByZWFkZXIucmVhZCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gcHJvY2VzcyAoeyB2YWx1ZSwgZG9uZSB9KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhKU09OLnBhcnNlKGJ1ZmZlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgYXJlIGRvbmUgbG9hZGluZyBhbGwgZnJhbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkxvYWQoX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyICsgZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICAgICkuc3BsaXQoL1tcXHJcXG5dKD89LikvKTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gbGluZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVzLm1hcChKU09OLnBhcnNlKS5mb3JFYWNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKHByb2Nlc3MpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKHJlYXNvbiA9PiB0aGlzLm9uRXJyb3IocmVhc29uKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIHZpZGVvXG4gICAgICogQHBhcmFtIG9uY2Ugc2luZ2xlIHN0ZXBcbiAgICAgKi9cbiAgICBfcmVuZGVyKG9uY2UpIHtcbiAgICAgICAgaWYgKHRoaXMudGltZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgXCJUaW1lclNyYyB3YXMgbm90IGluaXRpYWxpemVkXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5fZnJhbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgXCJWaWRlbyBpcyBlbXB0eSBvciBubyBmcmFtZXMgd2VyZSBmb3VuZFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5mcmFtZSA+PSB0aGlzLl9mcmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5sb29wID8gMCA6IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuZnJhbWUgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5sb29wID8gdGhpcy5fZnJhbWVzLmxlbmd0aCAtIDE6IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlzcGxheUltZyhvbmNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwbGF5IG5leHQgaW1hZ2VcbiAgICAgKiBAcGFyYW0gb25jZSBzaW5nbGUgc3RlcFxuICAgICAqL1xuICAgIF9kaXNwbGF5SW1nKG9uY2UpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjb25zdCBpdGVtID0gX3RoaXMuX2ZyYW1lc1tfdGhpcy5mcmFtZV07XG4gICAgICAgIGNvbnN0IG5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF90aGlzLm9uUmVuZGVyKGl0ZW0pO1xuICAgICAgICAgICAgX3RoaXMudGltZXIuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9pbmNyZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy9EbyBub3QgZXhlY3V0ZSBhbnl0aGluZyB1bnRpbCBpdHMgbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRpbWVyLm5vY2FsbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5fZGlzcGxheUltZygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS5mICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gX3RoaXMuX2ZyYW1lQmFzZSArIGl0ZW0uZjtcbiAgICAgICAgICAgIF90aGlzLl9pbWFnZShmcmFtZSwgbmV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5vblJlbmRlcihpdGVtKTtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCBmcmFtZVxuICAgICAqL1xuICAgIF9pbmNyZW1lbnQoKSB7XG4gICAgICAgIHRoaXMuZnJhbWUgKz0gKHRoaXMubXVsdGlwbGllciAqICh0aGlzLmJhY2t3YXJkcyA/IC0xIDogMSkpO1xuICAgICAgICBpZih0aGlzLmZyYW1lIDwgMCkge1xuICAgICAgICAgICAgaWYodGhpcy5sb29wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbmlzaCh0aGlzKTsgLy9CYWNrd2FyZHMgcGxheWluZ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuZnJhbWUgPiB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgaWYodGhpcy5sb29wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJhbWUgPSB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbmlzaCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXdzIGFuIGltYWdlIG9iamVjdFxuICAgICAqIEBwYXJhbSBpbWdcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgc2VuZHMgXCJ0cnVlXCIgb24gc3VjY2Vzc1xuICAgICAqIEByZXR1cm4gdGhpc1xuICAgICAqL1xuICAgIF9kcmF3ID0gZnVuY3Rpb24oaW1nLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vLyBzZXQgc2l6ZSBwcm9wb3J0aW9uYWwgdG8gaW1hZ2VcbiAgICAgICAgaWYoaW1nLndpZHRoID09PSAwICYmIGltZy5oZWlnaHQgPT09IDApIHtcbiAgICAgICAgICAgIGltZy5vbmVycm9yKCk7XG4gICAgICAgICAgICBpZihjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCBfdGhpcy5jYW52YXMud2lkdGgsIF90aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgLy9fdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgICAgICAgX3RoaXMuY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCwgMCwgMCwgX3RoaXMuY2FudmFzLndpZHRoLCBfdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIC8vX3RoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIGlmKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZCBhbiBpbWFnZSBpbnRvIGNhbnZhcy5cbiAgICAgKiBAcGFyYW0gaW1hZ2UgcGF0aCBvciB1cmwgb2YgaW1hZ2VcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgcmV0dXJucyBpbWcgb2JqZWN0XG4gICAgICogQHJldHVybiB0aGlzXG4gICAgICovXG4gICAgX2ltYWdlID0gZnVuY3Rpb24oaW1hZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICcnO1xuICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIF90aGlzLl9kcmF3KGltZyxmdW5jdGlvbihkcmF3bil7XG4gICAgICAgICAgICAgICAgaWYoZHJhd24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soaW1nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgZXJyID0gX3RoaXMub25FcnJvcigpO1xuICAgICAgICAgICAgaWYoZXJyKSB7XG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaW1nLnNyYyA9IGltYWdlWzBdID09PSBcIi9cIiB8fCBpbWFnZS5tYXRjaCgvXmh0dHBzPzovKSB8fCBpbWFnZS5tYXRjaCgvXmRhdGE6aW1hZ2UvKSA/IGltYWdlIDogX3RoaXMucGF0aCArIGltYWdlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZnJhbWUgYmFzZVxuICAgICAqL1xuICAgIGZyYW1lQmFzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZyYW1lQmFzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwb3NlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IGZyYW1lXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGN1cnJlbnRGcmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJhbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIG51bWJlciBvZiBmcmFtZXNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdG90YWxGcmFtZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9udW1GcmFtZXMgfHwgdGhpcy5fZnJhbWVzLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdG90YWwgdGltZSBvZiB2aWRlb1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0b3RhbFRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90b3RUaW1lIHx8IHRoaXMuY3VycmVudEZyYW1lKCkgLyB0aGlzLmZwcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBmcmFtZSBpbiBwb3NpdGlvblxuICAgICAqIEBwYXJhbSBpbmRleCA6IHBvc2l0aW9uXG4gICAgICovXG4gICAgZnJhbWVBdChpbmRleCkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGxldCBmcmFtZSA9IChpbmRleCA8IHRoaXMudG90YWxGcmFtZXMoKSkgPyBfdGhpcy5fZnJhbWVzW2luZGV4XSA6IG51bGw7XG4gICAgICAgIGlmKGZyYW1lKSB7XG4gICAgICAgICAgICBmcmFtZS5mYiA9IF90aGlzLl9mcmFtZUJhc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBpbmRleCBudW1iZXIgYXQgcGVyY2VudGFnZSBvZiB2aWRlb1xuICAgICAqIEBwYXJhbSBwZXJjZW50YWdlXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBpbmRleEF0KHBlcmNlbnRhZ2UpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gfn4oKHBlcmNlbnRhZ2UgKiBfdGhpcy50b3RhbEZyYW1lcygpKSAvIDEwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHBsYXllciBOb2RlXG4gICAgICogQHJldHVybnMgRE9NIG5vZGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHBsYXllck5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBsYXllcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5IHZpZGVvIGluIGN1cnJlbnQgZGlyZWN0aW9uXG4gICAgICogQHBhcmFtIHN0YXJ0RnJhbWVcbiAgICAgKi9cbiAgICBwbGF5KHN0YXJ0RnJhbWUpIHtcbiAgICAgICAgaWYgKHN0YXJ0RnJhbWUgPCAwKSB7XG4gICAgICAgICAgICBzdGFydEZyYW1lID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChzdGFydEZyYW1lID4gdGhpcy5fZnJhbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3RhcnRGcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0RnJhbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHN0YXJ0RnJhbWUgKiAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGxheWluZyA9IHRydWU7XG4gICAgICAgIHRoaXMudGltZXIucGxheSgpO1xuICAgICAgICB0aGlzLl9yZW5kZXIoZmFsc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYXkgdmlkZW8gaW4gZm9yd2FyZCBkaXJlY3Rpb25cbiAgICAgKiAodXNlZCBtYWlubHkgdG8gY2hhbmdlIGRpcmVjdGlvbilcbiAgICAgKiBAcGFyYW0gc3RhcnRGcmFtZVxuICAgICAqL1xuICAgIHBsYXlGb3J3YXJkKHN0YXJ0RnJhbWUpIHtcbiAgICAgICAgdGhpcy5iYWNrd2FyZHMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wbGF5KHN0YXJ0RnJhbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYXkgdmlkZW8gaW4gYmFja3dhcmRzIGRpcmVjdGlvblxuICAgICAqIEBwYXJhbSBzdGFydEZyYW1lXG4gICAgICovXG4gICAgcGxheUJhY2t3YXJkcyhzdGFydEZyYW1lKSB7XG4gICAgICAgIHRoaXMuYmFja3dhcmRzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wbGF5KHN0YXJ0RnJhbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhdXNlIHRoZSB2aWRlb1xuICAgICAqL1xuICAgIHBhdXNlKCkge1xuICAgICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aW1lci5wYXVzZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b3AgdGhlIHZpZGVvIChhbmQgZ28gYmFjayB0byB0aGUgYmVnaW5uaW5nKVxuICAgICAqL1xuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgdGhpcy50aW1lci5wYXVzZSgpO1xuICAgICAgICB0aGlzLl9kaXNwbGF5SW1nKHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmUgdGhlIHZpZGVvIG9uZSBmcmFtZSBpbiB0aGUgY3VycmVudCBkaXJlY3Rpb25cbiAgICAgKi9cbiAgICBzdGVwKHN0YXJ0RnJhbWUpIHtcbiAgICAgICAgaWYgKHN0YXJ0RnJhbWUgPCAwKSB7XG4gICAgICAgICAgICBzdGFydEZyYW1lID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChzdGFydEZyYW1lID4gdGhpcy5fZnJhbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3RhcnRGcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0RnJhbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHN0YXJ0RnJhbWUgKiAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRpbWVyLnN0ZXAoKTtcbiAgICAgICAgdGhpcy5fcmVuZGVyKHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmUgb25lIGZyYW1lIGZvcndhcmRzIChhbmQgY2hhbmdlIGRpcmVjdGlvbilcbiAgICAgKi9cbiAgICBzdGVwRm9yd2FyZHMoKSB7XG4gICAgICAgIHRoaXMuYmFja3dhcmRzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RlcCgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZSBvbmUgZnJhbWUgYmFja3dhcmRzIChhbmQgY2hhbmdlIGRpcmVjdGlvbilcbiAgICAgKi9cbiAgICBzdGVwQmFja3dhcmRzKCkge1xuICAgICAgICB0aGlzLmJhY2t3YXJkcyA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RlcCgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhpcyBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7TmRKc29uUGxheWVyfVxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICBpZiAodGhpcy5jdHgucmVzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jdHgucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICAgIC8vUmVzZXQgYWxsOiBUaGUgZm9sbG93aW5nIGxpbmUgaXMgYSBcImhhY2tcIiB0byBmb3JjZSBpdCB0byByZXNldDpcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBUaGlzIGNsYXNzIGNyZWF0ZXMgdGhlIHBsYXllciBVSVxuICogaHR0cHM6Ly9naXRodWIuY29tL2xlcGUvbmRqc29uLXBsYXllclxuICogQGF1dGhvciBBLkxlcGVcbiAqIEBzaW5jZSAwNC8yMDIwXG4gKi9cbmNsYXNzIE5ESlBsYXllciB7XG4gICAgbmRqcDsgICAgICAvL05kSnNvblBsYXllciBvYmplY3RcbiAgICBvcHRpb25zOyAgIC8vT3B0aW9ucyBmb3IgdGhlIFVJXG4gICAgdWk7ICAgICAgICAvL1RoZSBVSVxuXG4gICAgLy8gRXZlbnRzXG4gICAgb25BY3Rpb247ICAgLy8gQ2FsbGJhY2sgd2hlbiB1c2VyIHBlcmZvcm1zIGFuIGFjdGlvbiAoZWcuIHBsYXksIHN0b3AuLi4pXG5cbiAgICBjb25zdHJ1Y3RvcihzcmMsIGVsZW1lbnQsIG9wdGlvbnMsIG9uYWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBjb250cm9sczogZmFsc2UsXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgY29udHJvbHMgOiB7IC8vRXhhbXBsZSBvbiBob3cgdG8gc2hvdy9oaWRlIGVsZW1lbnRzIFRPRE9cbiAgICAgICAgICAgICAgICBiYXNlIDogXCJmdWxsXCIsIC8vV2hpY2ggb25lIHRvIHVzZSBhcyBiYXNlXG4gICAgICAgICAgICAgICAgcGxheTogdHJ1ZSwgLy9zaG93IHBsYXkvcGF1c2VcbiAgICAgICAgICAgICAgICBzdG9wOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzdGVwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0aHVtYnM6IHRydWUsXG4gICAgICAgICAgICAgICAgZnVsbHNjcmVlbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxhcHNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZyYW1lczogdHJ1ZVxuICAgICAgICAgICAgfSwqL1xuICAgICAgICAgICAgcmVzaXplOiB0cnVlIC8vc2V0IGl0IHRvIGZhbHNlIHRvIGRpc2FibGUgYWRqdXN0aW5nIHRoZSBzaXplIGJlZm9yZSBzdGFydGluZ1xuICAgICAgICB9LCBvcHRpb25zIHx8IHt9KTtcblxuICAgICAgICB0aGlzLm9uQWN0aW9uID0gb25hY3Rpb24gfHwgZnVuY3Rpb24gKCkge1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBVSVxuICAgICAgICB0aGlzLl9jcmVhdGUoZWxlbWVudCk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgcGxheWVyXG4gICAgICAgIHRoaXMubmRqcCA9IG5ldyBOZEpzb25QbGF5ZXIoc3JjLCBlbGVtZW50LCBvcHRpb25zXG4gICAgICAgICAgICAsIGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fYWRqdXN0U2l6ZSgpXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMub25zdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25zdGFydChwbGF5ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYoX3RoaXMub3B0aW9ucy5vbmxvYWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9ubG9hZChwbGF5ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChmcmFtZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9vblVwZGF0ZShmcmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMub25yZW5kZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9ucmVuZGVyKGZyYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgLy9wbGF5ZXIuc3RvcCgpXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgIC8vRGlzcGxheSBlcnJvciBpbiBwbGF5ZXJcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgVUlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9vblVwZGF0ZShmcmFtZSkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmKF90aGlzLnVpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmKF90aGlzLnVpLmNvbnRyb2xzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZihfdGhpcy51aS5jb250cm9scy5mcmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5jb250cm9scy5mcmFtZXMudGV4dCA9IChfdGhpcy5uZGpwLmN1cnJlbnRGcmFtZSgpICsgMSkgKyBcIi9cIiArIF90aGlzLm5kanAudG90YWxGcmFtZXMoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihfdGhpcy51aS5jb250cm9scy5sYXBzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHMgPSBfdGhpcy5uZGpwLl9zdGFydFRpbWVTdGFtcCAmJiBmcmFtZS50cyAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnJhbWUudCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dCA9IF90aGlzLm5kanAuX3RvdFRpbWUgPiAwO1xuICAgICAgICAgICAgICAgICAgICBpZihmcmFtZS5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gZnJhbWUuZCArIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IF90aGlzLl9mb3JtYXRNaWxsaXMoZnJhbWUudHMgLSBfdGhpcy5uZGpwLl9zdGFydFRpbWVTdGFtcCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IGZyYW1lLnQuaW5kZXhPZihcIjpcIikgPiAwID8gZnJhbWUudCA6IF90aGlzLl9mbXRUaW1lKGZyYW1lLnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHR0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IFwiL1wiICsgX3RoaXMubmRqcC50b3RhbFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLmNvbnRyb2xzLmxhcHNlLnRleHQgPSB0ZXh0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKF90aGlzLnVpLmNvbnRyb2xzLnByb2dyZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkuY29udHJvbHMucHJvZ3Jlc3MudmFsdWUgPSAoKF90aGlzLm5kanAuY3VycmVudEZyYW1lKCkgKyAxKSAvIChfdGhpcy5uZGpwLnRvdGFsRnJhbWVzKCkpKSAqIDEwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdCB3aWxsIGFkanVzdCB0aGUgdmlkZW8gYW5kIGNhbnZhcyBzaXplXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfYWRqdXN0U2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZXNpemUpIHtcbiAgICAgICAgICAgIGxldCBwbGF5ZXIgPSB0aGlzLm5kanAucGxheWVyXG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5uZGpwLnBsYXllci5wYXJlbnRFbGVtZW50XG4gICAgICAgICAgICBpZiAocGxheWVyLmNsaWVudEhlaWdodCA+IHBhcmVudC5jbGllbnRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmF0aW9XID0gdGhpcy5uZGpwLmNhbnZhcy5oZWlnaHQgLyB0aGlzLm5kanAuY2FudmFzLndpZHRoO1xuICAgICAgICAgICAgICAgIGxldCByYXRpb0ggPSAxIC8gcmF0aW9XO1xuICAgICAgICAgICAgICAgIHRoaXMubmRqcC5jYW52YXMuaGVpZ2h0ID0gcGFyZW50LmNsaWVudEhlaWdodCAtICh0aGlzLm9wdGlvbnMuY29udHJvbHMgPyBwbGF5ZXIucXVlcnlTZWxlY3RvcihcIi5jb250cm9sc1wiKS5jbGllbnRIZWlnaHQgOiAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5kanAuY2FudmFzLndpZHRoID0gcGFyZW50LmNsaWVudFdpZHRoICogKHJhdGlvVyA8IDEgPyByYXRpb1cgOiByYXRpb0gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgVUlcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBTZWxlY3RvclxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2NyZWF0ZShlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgX3RoaXMudWkgPSBtMmQyKGVsZW1lbnQsIF90aGlzLl9nZXRVSShlbGVtZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hvb3NlIHRoZSBVSSB0byBkaXNwbGF5XG4gICAgICogQHBhcmFtIGVsZW1lbnQgU2VsZWN0b3JcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0VUkoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGxldCB1aSA9IHsgaHRtbCA6IChlbGVtZW50LmlubmVySFRNTCB8fCBcIlwiKSB9O1xuICAgICAgICAvLyBCdXR0b25zXG4gICAgICAgIGNvbnN0IHBsYXkgPSB7XG4gICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICBjbGFzc05hbWUgOiBcInBsYXlcIixcbiAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICB0aXRsZTogXCJQbGF5XCIsXG4gICAgICAgICAgICB0ZXh0OiBcIuKWtu+4j1wiLFxuICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub25BY3Rpb24oXCJwbGF5XCIsIF90aGlzLm5kanAsIF90aGlzKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5uZGpwLnBsYXkoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5jb250cm9scy5wbGF5LnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5jb250cm9scy5wYXVzZS5zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF1c2UgPSB7XG4gICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICBjbGFzc05hbWUgOiBcInBhdXNlXCIsXG4gICAgICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgICAgIHRpdGxlOiBcIlBhdXNlXCIsXG4gICAgICAgICAgICB0ZXh0OiBcIuKPuO+4j1wiLFxuICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub25BY3Rpb24oXCJwYXVzZVwiLCBfdGhpcy5uZGpwLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgX3RoaXMubmRqcC5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIF90aGlzLnVpLmNvbnRyb2xzLnBsYXkuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMudWkuY29udHJvbHMucGF1c2Uuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdG9wID0ge1xuICAgICAgICAgICAgdGFnTmFtZSA6IFwiYVwiLFxuICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJzdG9wXCIsXG4gICAgICAgICAgICB0aXRsZTogXCJTdG9wXCIsXG4gICAgICAgICAgICB0ZXh0OiBcIuKPue+4j1wiLFxuICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub25BY3Rpb24oXCJzdG9wXCIsIF90aGlzLm5kanAsIF90aGlzKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5uZGpwLnN0b3AoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGxheWVyID0gX3RoaXMubmRqcC5wbGF5ZXI7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY2xhc3NMaXN0LmFkZChcImZ1bGxzY3JlZW5cIilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLmNsYXNzTGlzdC5yZW1vdmUoXCJmdWxsc2NyZWVuXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmdWxsc2NyZWVuID0ge1xuICAgICAgICAgICAgdGFnTmFtZSA6IFwiYVwiLFxuICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJmdWxsc2NyZWVuXCIsXG4gICAgICAgICAgICB0aXRsZTogXCJGdWxsIFNjcmVlblwiLFxuICAgICAgICAgICAgdGV4dDogXCLim7ZcIixcbiAgICAgICAgICAgIGhyZWY6IFwiI1wiLFxuICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGxheWVyID0gX3RoaXMubmRqcC5wbGF5ZXI7XG4gICAgICAgICAgICAgICAgaWYocGxheWVyLmNsYXNzTGlzdC5jb250YWlucyhcImZ1bGxzY3JlZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIExhYmVsc1xuICAgICAgICBjb25zdCBsYXBzZSA9IHtcbiAgICAgICAgICAgIHRhZ05hbWUgOiBcImxhYmVsXCIsXG4gICAgICAgICAgICBjbGFzc05hbWUgOiBcImxhcHNlXCIsXG4gICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgdGl0bGU6IFwiVGltZSBlbGFwc2VkIC8gVGltZSBUb3RhbFwiLFxuICAgICAgICAgICAgdGV4dDogXCIwOjAwXCJcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmcmFtZXMgPSB7XG4gICAgICAgICAgICB0YWdOYW1lIDogXCJsYWJlbFwiLFxuICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJmcmFtZXNcIixcbiAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICB0aXRsZTogXCJDdXJyZW50IEZyYW1lIC8gVG90YWwgRnJhbWVzXCIsXG4gICAgICAgICAgICB0ZXh0OiBcIjBcIlxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0ge1xuICAgICAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgbWF4OiAxMDAsXG4gICAgICAgICAgICBvbm1vdXNlbW92ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSB+figoKGUub2Zmc2V0WCkgLyB0aGlzLm9mZnNldFdpZHRoKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgbGV0IGZyYW1lID0gX3RoaXMubmRqcC5mcmFtZUF0KF90aGlzLm5kanAuaW5kZXhBdChwb3NpdGlvbikpO1xuICAgICAgICAgICAgICAgIGlmIChmcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5jb250cm9scy50aHVtYi5zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkuY29udHJvbHMudGh1bWIuaW1nLnNyYyA9IF90aGlzLm5kanAuZnJhbWVCYXNlKCkgKyAoZnJhbWUudGggfHwgZnJhbWUuZik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZS50YyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5jb250cm9scy50aHVtYi5jYXB0aW9uID0gZnJhbWUudGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IHRodW1iID0gX3RoaXMudWkuY29udHJvbHMudGh1bWIuX25vZGU7XG4gICAgICAgICAgICAgICAgICAgIHRodW1iLnN0eWxlLmxlZnQgPSAodGhpcy5vZmZzZXRMZWZ0ICsgZS5vZmZzZXRYIC0gKHRodW1iLmNsaWVudFdpZHRoIC8gMikpICsgXCJweFwiXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkuY29udHJvbHMudGh1bWIuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbm1vdXNlbGVhdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5jb250cm9scy50aHVtYi5zaG93ID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSB+figoKGUub2Zmc2V0WCkgLyB0aGlzLm9mZnNldFdpZHRoKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gX3RoaXMubmRqcC5pbmRleEF0KHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5uZGpwLnN0ZXAoaW5kZXgpO1xuICAgICAgICAgICAgICAgIF90aGlzLm9uQWN0aW9uKFwicHJvZ3Jlc3NcIiwgX3RoaXMubmRqcCwgX3RoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vc2l6ZXMgOiBbXCJTRFwiLCBcIkhEXCIsIFwiNEtcIl0sXG5cbiAgICAgICAgLy8gbm9pbnNwZWN0aW9uIEZhbGxUaHJvdWdoSW5Td2l0Y2hTdGF0ZW1lbnRKU1xuICAgICAgICBpZih0aGlzLm9wdGlvbnMuY29udHJvbHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGwgPSB0aGlzLm9wdGlvbnMuY29udHJvbHMgPT09IFwiZnVsbFwiO1xuICAgICAgICAgICAgY29uc3QgY29tbW9uID0gdGhpcy5vcHRpb25zLmNvbnRyb2xzID09PSBcImNvbW1vblwiO1xuICAgICAgICAgICAgdWkgPSB0aGlzLl9nZXRCYXNpY1VJKCk7XG4gICAgICAgICAgICB1aS5jb250cm9scy5wbGF5ID0gcGxheTtcbiAgICAgICAgICAgIHVpLmNvbnRyb2xzLnBhdXNlID0gcGF1c2U7XG4gICAgICAgICAgICBpZihmdWxsKSB7XG4gICAgICAgICAgICAgICAgdWkuY29udHJvbHMuc3RvcCA9IHN0b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1aS5jb250cm9scy5sYXBzZSA9IGxhcHNlO1xuICAgICAgICAgICAgdWkuY29udHJvbHMucHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICAgICAgICAgIGlmKGNvbW1vbiB8fCBmdWxsKSB7XG4gICAgICAgICAgICAgICAgdWkuY29udHJvbHMuZnJhbWVzID0gZnJhbWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZnVsbCkge1xuICAgICAgICAgICAgICAgIHVpLmNvbnRyb2xzLmZ1bGxzY3JlZW4gPSBmdWxsc2NyZWVuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmNvbnRyb2xzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgLy9UT0RPOiB3aGF0IHRvIHNob3cgYW5kIHdoYXQgbm90IHRvIHNob3dcbiAgICAgICAgfVxuICAgICAgICBsZXQgcm9vdCA9IGVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlID8gZWxlbWVudCA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7XG4gICAgICAgIGlmIChyb290KSB7XG4gICAgICAgICAgICBsZXQgY2FudmFzID0gcm9vdC5xdWVyeVNlbGVjdG9yKFwiY2FudmFzXCIpO1xuICAgICAgICAgICAgaWYgKCFjYW52YXMpIHtcbiAgICAgICAgICAgICAgICB1aSA9IE9iamVjdC5hc3NpZ24oeyBjYW52YXMgOiBcIlwiIH0sIHVpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUm9vdCBlbGVtZW50OiBcIiArIGVsZW1lbnQgKyBcIiB3YXMgbm90IGZvdW5kIGluIGRvY3VtZW50XCIpO1xuICAgICAgICAgICAgdWkgPSBPYmplY3QuYXNzaWduKHsgY2FudmFzIDogXCJcIiB9LCB1aSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJhc2ljIFVJXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9nZXRCYXNpY1VJKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FwdGlvbiA6IFwiXCIsXG4gICAgICAgICAgICBjb250cm9scyA6IHtcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwiY29udHJvbHNcIixcbiAgICAgICAgICAgICAgICB0aHVtYiA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZmlndXJlXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwidGh1bWJcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvdyA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpbWcgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhcHRpb24gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJmaWdDYXB0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2FwdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdyA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGb3JtYXQgYSB0aW1lLCBmb3IgZXhhbXBsZTogMTIwLjM0IHdpbGwgYmUgY29udmVydGVkIGludG86IDAyOjAwLjM0XG4gICAgICogQHBhcmFtIHRpbWUgaW50XG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9mbXRUaW1lKHRpbWUpIHtcbiAgICAgICAgdGltZSA9IHRpbWUudG9GaXhlZCgyKTtcbiAgICAgICAgbGV0IGRlY2ltYWwgPSB0aW1lLnNwbGl0KFwiLlwiKVsxXSB8fCBcIjAwXCI7XG4gICAgICAgIHJldHVybiAofn4odGltZSAvIDYwKSArIFwiXCIpLnBhZFN0YXJ0KDIsICcwJykgKyBcIjpcIiArICh+figodGltZSAvIDYwKSAlIDEgKiA2MCkgKyBcIlwiKS5wYWRTdGFydCgyLCAnMCcpICsgXCIuXCIgKyBkZWNpbWFsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXQgbWlsbGlzZWNvbmRzLCBmb3IgZXhhbXBsZTogOTAwMDAgd2lsbCBiZSBjb252ZXJ0ZWQgaW50bzogMDA6MDE6MzAuMDAwXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZm9ybWF0TWlsbGlzKG1pbGxpcykge1xuICAgICAgICBmdW5jdGlvbiBwYWQobnVtLCBkaWdpdHMpIHtcbiAgICAgICAgICAgIHJldHVybiAoXCIwMFwiICsgbnVtKS5zbGljZSgoZGlnaXRzIHx8IDIpICogLTEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGggPSBNYXRoLmZsb29yKG1pbGxpcy8xMDAwLzYwLzYwKTtcbiAgICAgICAgY29uc3QgbSA9IE1hdGguZmxvb3IoKG1pbGxpcy8xMDAwLzYwLzYwIC0gaCkqNjApO1xuICAgICAgICBjb25zdCBzID0gTWF0aC5mbG9vcigoKG1pbGxpcy8xMDAwLzYwLzYwIC0gaCkqNjAgLSBtKSo2MCk7XG4gICAgICAgIGNvbnN0IG1zID0gcGFyc2VJbnQoKG1pbGxpcyAlIDEwMDApIC8gMTAwKTtcbiAgICAgICAgcmV0dXJuIHBhZChoKSArIFwiOlwiICsgcGFkKG0pICsgXCI6XCIgKyBwYWQocykgKyBcIi5cIiArIHBhZChtcywgMyk7XG4gICAgfVxufSIsIi8qKlxuICogQGF1dGhvcjogQS4gTGVwZVxuICogTWFuYWdlIFRpbWVyc1xuICogVXNhZ2U6XG4gKiB2YXIgdCA9IG5ldyBUaW1lclNyYygxMDAwKTtcbiAqIHQuY2FsbChmdW5jdGlvbigpIHsgPGRvPiB9KTtcbiAqIG9yOlxuICogdmFyIHQgPSBuZXcgVGltZXJTcmMoMTAwMCxmdW5jdGlvbigpeyA8ZG8+IH0pO1xuICogdC5wYXVzZSgpO1xuICogdC5kZXN0cm95KCk7XG4gKi9cbmZ1bmN0aW9uIFRpbWVyU3JjKG9yaWdpbmFsX21zLCBjYWxsYmFjaykge1xuXHRsZXQgc3RhcnRUaW1lLCB0aW1lciwgb2JqID0ge30sIGFjdGlvbiwgbXM7XG5cdG9iai5pbnRlcnZhbCA9IG9yaWdpbmFsX21zOyAvL1B1YmxpYy4gQ2FuIGJlIHVwZGF0ZWRcblx0b2JqLmNoZWNrZXIgPSA1MDsgLy8gYWRqdXN0IHRoaXMgbnVtYmVyIHRvIGFmZmVjdCBncmFudWxhcml0eVxuXHRvYmouc3RhdHVzID0gXCJpbml0XCI7XG5cdGxldCBub3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdHN0YXJ0VGltZSA9IG5vd1RpbWUgLSBvcmlnaW5hbF9tczsgLy9zdGFydCByaWdodCBhd2F5XG5cdG9iai5jYWxsID0gZnVuY3Rpb24oZnVuYykge1xuXHRcdGNhbGxiYWNrID0gZnVuYztcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuXHRvYmoubm9jYWxsID0gZnVuY3Rpb24oKSB7XG5cdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG5cdC8vRXhlY3V0ZSB0aGUgY2FsbGJhY2sgbWFudWFsbHkgYW5kIHJlc2V0IHRoZSB0aW1lclxuXHRvYmouZXhlYyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuXHRcdHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG5cdC8vIENoZWNrcyB0aGUgc3RhdHVzIG9mIHRoZSB0aW1lclxuXHRvYmouY2hlY2sgPSBmdW5jdGlvbigpIHtcblx0XHRpZihhY3Rpb24pIGFjdGlvbigpO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG4gICAgb2JqLnBsYXkgPSBmdW5jdGlvbigpIHtcblx0XHRhY3Rpb24gPSBvYmouc3RlcDtcblx0XHRvYmouc3RhdHVzID0gXCJydW5uaW5nXCI7XG5cdFx0cmV0dXJuIG9iajtcbiAgICB9O1xuICAgIG9iai5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFjdGlvbiA9IG51bGw7XG5cdFx0b2JqLnN0YXR1cyA9IFwicGF1c2VkXCI7XG5cdFx0cmV0dXJuIG9iajtcbiAgICB9O1xuXHRvYmouZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFjdGlvbiA9IG51bGw7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuXHRcdHRpbWVyID0gbnVsbDtcblx0XHRmb3IodmFyIG8gaW4gb2JqKSB7XG5cdFx0XHRvYmpbb10gPSBudWxsO1xuXHRcdFx0ZGVsZXRlIG9ialtvXTtcblx0XHR9XG5cdFx0b2JqLnN0YXR1cyA9IFwiZGVzdHJveWVkXCI7XG5cdH07XG4gICAgb2JqLnN0ZXAgPSBmdW5jdGlvbigpIHtcblx0XHRub3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIG1zID0gTWF0aC5tYXgoMCwgb2JqLmludGVydmFsIC0gKG5vd1RpbWUgLSBzdGFydFRpbWUpKTtcbiAgICAgICAgaWYobXMgPT09IDApIHtcblx0XHRcdG1zID0gb2JqLmludGVydmFsO1xuXHRcdFx0c3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdFx0XHRpZihjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG5cdG9iai5zbG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0b2JqLmludGVydmFsID0gMTAwMDtcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuXHRvYmouZmFzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdG9iai5pbnRlcnZhbCA9IG9yaWdpbmFsX21zO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG4gICAgdGltZXIgPSBzZXRJbnRlcnZhbChvYmouY2hlY2ssIG9iai5jaGVja2VyKTtcbiAgICByZXR1cm4gb2JqO1xufVxuIiwiLyoqXG4gKiBIVE1MIGltcGxlbWVudGF0aW9uIG9mIG5kanNvbi1wbGF5ZXJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXBlL25kanNvbi1wbGF5ZXJcbiAqIEBhdXRob3IgQS5MZXBlXG4gKiBAc2luY2UgMDQvMjAyMFxuICpcbiAqIEV4YW1wbGUgc3BlY2lmeWluZyBtdWx0aXBsZSBzaXplczpcbiAqIDx2aWRlby1uZCBzcmM9XCIvdmlkZW8vZGVtby5uZGpzb25cIiBjb250cm9scyBsb29wIGF1dG9wbGF5PlxuICogICAgICA8c291cmNlIHNyYz1cIi92aWRlby9kZW1vLVFWR0EubmRqc29uXCIgd2lkdGg9XCIzMjBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby1WR0EubmRqc29uXCIgd2lkdGg9XCI2NDBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby1TVkdBLm5kanNvblwiIHdpZHRoPVwiODAwXCI+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tSEQubmRqc29uXCIgd2lkdGg9XCIxMjgwXCIgaGVpZ2h0PVwiNzIwXCI+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tRnVsbEhELm5kanNvblwiIHdpZHRoPVwiMTkyMFwiIGhlaWdodD1cIjEwODBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby00Sy5uZGpzb25cIiB3aWR0aD1cIjM4NDBcIiBoZWlnaHQ9XCIyMTYwXCI+XG4gKiA8L3ZpZGVvLW5kPlxuICpcbiAqIEV4YW1wbGUgc3BlY2lmeWluZyB0cmFja3M6XG4gKiAgKHRyeWluZyB0byBiZSBhcyBjbG9zZSB0bzogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L3RyYWNrKVxuICogTk9URTogVlRUIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkIGFzIGl0IGlzIGJhc2VkIGluIHRpbWVkIHRleHQsIHdoaWxlXG4gKiB3ZSBuZWVkIHRvIGJlIHN1cmUgdGhleSBhcmUgc3luYyB3aXRoIGltYWdlcyB1c2luZyBmcmFtZXMgaW5zdGVhZCBvZiB0aW1lLlxuICpcbiAqIDx2aWRlby1uZCBzcmM9XCIvdmlkZW8vZGVtby5uZGpzb25cIiBjb250cm9scyBsb29wIGF1dG9wbGF5PlxuICogICAgPHRyYWNrIHNyYz1cIi9pbmZvL2RhdGEudHh0XCIga2luZD1cImRlc2NyaXB0aW9uc1wiIGxhYmVsPVwiRGF0YVwiPlxuICogPC92aWRlby1uZD5cbiAqXG4gKiBUcmFjayB0eXBlczpcbiAqIGNhcHRpb25zICAgICA6IERpc3BsYXllZCBvbiB0aGUgY2VudGVyXG4gKiBjaGFwdGVycyAgICAgOiBJdCB3aWxsIGJlIGRpc3BsYXllZCBpbiB0aGUgdG9wIChhbHNvIHVzZWZ1bCBmb3IgbmF2aWdhdGlvbilcbiAqIGRlc2NyaXB0aW9ucyA6IERpc3BsYXllZCBvbiB0b3AgbGVmdCBjb3JuZXJcbiAqIG1ldGFkYXRhICAgICA6IERpc3BsYXllZCBvbiB0b3AgcmlnaHQgY29ybmVyXG4gKiBzdWJ0aXRsZXMgICAgOiBEaXNwbGF5ZWQgb24gdGhlIGJvdHRvbVxuICpcbiAqIFRoZSBmb3JtYXQgb2YgdGhlIFRYVCBmaWxlIGlzIFwiZnJhbWUtb3ItcmFuZ2UjIHNwYWNlLW9yLXRhYiB0ZXh0XCIsIGZvciBleGFtcGxlOlxuICogMjAtMzAgICAgT2JqZWN0czxicj5ieSBjb2xvcjpcbiAqIDM1ICAgQmx1ZTogMiwgUmVkOiAxXG4gKiAzNiAgIEJsdWU6IDMsIFJlZDogMVxuICogMzcgICBCbHVlOiAyLCBSZWQ6IDJcbiAqXG4gKiBBYm91dCBjaGFwdGVyczpcbiAqIEFkZGl0aW9uYWxseSB0byBiZWluZyBkaXNwbGF5ZWQgb24gdGhlIHRvcCBhcyBhIHRpdGxlLCBpZiB1c2VkLCBpdCB3aWxsIGRpc3BsYXkgbmV4dCBhbmQgcHJldiBidXR0b25zLlxuICogRm9yIGV4YW1wbGU6XG4gKiBgPHRyYWNrIHNyYz1cIi9jaGFwdGVycy9maWxlLnR4dFwiIGtpbmQ9XCJjaGFwdGVyc1wiPmBcbiAqXG4gKiBmaWxlLnR4dDpcbiAqIDAtMTAgQ2hhcHRlciAxOjxicj5UaGUgYmVnaW5uaW5nXG4gKiAzNTItMzYwIENoYXB0ZXIgMjo8YnI+VGhlIG1vbWVudFxuICogNjg5LTcxMCBMYXN0IENoYXB0ZXI6PGJyPlRoZSBlbmRcbiAqXG4gKiBXaGVuZXZlciB5b3UgY2xpY2sgb24gJ3ByZXYnIG9yICduZXh0JyBpdCB3aWxsIHVzZSB0aGUgYmVnaW5uaW5nIG9mIGVhY2ggY2hhcHRlciB0byBqdW1wIGludG8gc2NlbmVzLlxuICogVGhlIHJhbmdlIGlzIHVzZWQgdG8gZGlzcGxheSBpdC4gSWYgeW91IGRvbid0IHNldCBhIHJhbmdlIChqdXN0IGEgZnJhbWUgbnVtYmVyKSwgaXQgd2lsbCBiZSBkaXNwbGF5ZWQgZm9yIDNzLlxuICovXG5jbGFzcyBWaWRlb05EIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICAgICAgLy8gQXR0cmlidXRlcyBzaW1pbGFyIHRvIDx2aWRlbz4gdGFnOlxuICAgICAgICAgICAgYXV0b3BsYXkgOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRyb2xzIDogZmFsc2Us44CALy90cnVlOiBtb3N0IGJhc2ljIFVJLCAnY29tbW9uJywgJ2Z1bGwnLCBvciBsaXN0LCBmb3IgZXhhbXBsZTogJ3BsYXkgcHJvZ3Jlc3MgbGFwc2UgZnJhbWVzJ1xuICAgICAgICAgICAgbG9vcCAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgIHdpZHRoICAgIDogJ2F1dG8nLFxuICAgICAgICAgICAgaGVpZ2h0ICAgOiAnYXV0bycsXG4gICAgICAgICAgICBwb3N0ZXIgICA6ICcnLFxuICAgICAgICAgICAgcHJlbG9hZCAgOiAnYXV0bycsIC8vT3B0aW9ucyBhcmU6ICdtZXRhZGF0YScsICdub25lJyxcbiAgICAgICAgICAgIHNyYyAgICAgIDogJycsICAgICAvL1VSTCAhaW1wb3J0YW50XG4gICAgICAgICAgICAvLyBBZGRpdGlvbmFsIGF0dHJpYnV0ZXM6XG4gICAgICAgICAgICBjYyAgICAgICAgICA6ICdhdXRvJywgLy9FbmFibGUgQ0MgYnV0dG9uXG4gICAgICAgICAgICBjYXB0aW9uICAgICA6ICcnLCAvL1NldCBzb21lIGNhcHRpb24gb3ZlciB0aGUgdmlkZW9cbiAgICAgICAgICAgIGZ1bGxzY3JlZW4gIDogZmFsc2UsIC8vVXNlICdhdXRvJyB0byBvbmx5IGRpc3BsYXkgYnV0dG9uLiB0cnVlID0gc3RhcnQgYXMgZnVsbHNjcmVlblxuICAgICAgICAgICAgZnBzICAgICAgICAgOiAnJywgLy9zcGVjaWZ5IHZpZGVvIGZwcyAoaWYgaXRzIG5vdCBpbiB0aGUgbWV0YWRhdGEpXG4gICAgICAgICAgICBzcGVlZCAgICAgICA6IGZhbHNlLCAvL0Rpc3BsYXkgc3BlZWQgbWVudVxuICAgICAgICAgICAgYXV0b3NpemUgICAgOiAnYXV0bycsIC8vQXV0b21hdGljYWxseSBjaG9vc2UgYmVzdCBzaXplIGZyb20gc2l6ZXNcbiAgICAgICAgICAgIHNpemVzICAgICAgIDoge30gfHwgW10sIC8vU3BlY2lmeSBhdmFpbGFibGUgc2l6ZXMuIEV4YW1wbGU6IHsgSEQgOiAxMjAwIH0gb3IgWzgwMCwgMTIwMCwgMTgwMF1cbiAgICAgICAgICAgIHRodW1icyAgICAgIDogJ2F1dG8nLCAvL1Nob3cgdGh1bWJuYWlscyB3aGVuIHBsYWNpbmcgbW91c2Ugb3ZlciBwcm9ncmVzc1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge307XG4gICAgICAgIGZvcihsZXQgZCBpbiBkZWZhdWx0T3B0aW9ucykge1xuICAgICAgICAgICAgb3B0aW9uc1tkXSA9IHRoaXMuZ2V0QXR0cmlidXRlKGQpIHx8IHRoaXMuaGFzQXR0cmlidXRlKGQpIHx8IGRlZmF1bHRPcHRpb25zW2RdO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMub25zdGFydCA9IGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgIGlmKHJvb3Qub25zdGFydCkge1xuICAgICAgICAgICAgICAgIHJvb3Qub25zdGFydChwbGF5ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMub25sb2FkID0gZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgaWYocm9vdC5vbmxvYWQpIHtcbiAgICAgICAgICAgICAgICByb290Lm9ubG9hZChwbGF5ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMub25yZW5kZXIgPSBmdW5jdGlvbihmcmFtZSkge1xuICAgICAgICAgICAgaWYocm9vdC5vbnJlbmRlcikge1xuICAgICAgICAgICAgICAgIHJvb3Qub25yZW5kZXIoZnJhbWUsIG5kalBsYXllci5uZGpwLCBuZGpQbGF5ZXIsIG5kalBsYXllci5uZGpwLmNhbnZhcywgbmRqUGxheWVyLm5kanAuY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBcIm5kanBcIjtcbiAgICAgICAgLy8gY3JlYXRlIHNoYWRvdyBkb20gcm9vdFxuICAgICAgICB0aGlzLl9yb290ID0gdGhpczsgLy90aGlzLmF0dGFjaFNoYWRvdyh7bW9kZTogJ29wZW4nfSk7XG4gICAgICAgIC8vdGhpcy5fcm9vdC5pbm5lckhUTUwgPSBgYDtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXM7XG4gICAgICAgIGNvbnN0IG5kalBsYXllciA9IG5ldyBOREpQbGF5ZXIob3B0aW9ucy5zcmMsIHRoaXMsIG9wdGlvbnMsXG4gICAgICAgIGZ1bmN0aW9uIChhY3Rpb24sIHBsYXllciwgdWkpIHtcbiAgICAgICAgICAgIGlmKHJvb3Qub25hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByb290Lm9uYWN0aW9uKGFjdGlvbiwgcGxheWVyLCB1aSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc2V0Q2FwdGlvbihjYXB0aW9uKSB7XG4gICAgICAgIHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvcihcImNhcHRpb25cIikuaW5uZXJUZXh0ID0gY2FwdGlvbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFsgJ3dpZHRoJywgJ2hlaWdodCcsICdjYXB0aW9uJyBdO1xuICAgIH1cblxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdjYXB0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5zZXRDYXB0aW9uKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3ZpZGVvLW5kJywgVmlkZW9ORCk7XG59KTtcbiJdfQ==

//# sourceMappingURL=ndjson-player.min.js.map
