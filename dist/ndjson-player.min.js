/**
 * Author : A.Lepe (dev@alepe.com)
 * License: MIT
 * Version: 0.1.8
 * Updated: 2022-05-11
 * Content: ndjson-player.min.js (Bundle Minimized)
 */

!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.m2d2=t()}(this,(function(){"use strict";class e{isString(e){return"string"==typeof e}isBool(e){return"boolean"==typeof e}isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}isSelectorID(e){return 0===(e+"").trim().indexOf("#")}isPlainObject(e){return"Object"===e.constructor.name}isObject(e){return"object"==typeof e}isArray(e){return Array.isArray(e)}isFunction(e){return"function"==typeof e}isElement(e){return e instanceof HTMLElement}isNode(e){return e instanceof Node||e instanceof DocumentFragment}isHtml(e){return-1!==(e+"").trim().indexOf("<")}isEmpty(e){return void 0===e||this.isObject(e)&&0===Object.keys(e).length||""===e}isVisible(e){if(!this.isElement(e))return console.log("(isVisible) Not an element: "),console.log(e),!1;const t="none"!==e.style.display,s="hidden"!==e.style.visibility;return t&&s}inView(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.width>0&&t.height>0}cleanArray(e){return e.filter((function(e){return 0===e||e}))}isValidElement(e){const t=this.newElement(e);return"template"!==e&&"HTMLUnknownElement"!==t.constructor.name}exists(e){return null!==document.querySelector(e)}getAttrOrProp(e,t){let s="";return this.hasAttrOrProp(e,t)&&(s=this.hasAttr(e,t)?e.getAttribute(t):e[t]),s}hasAttrOrProp(e,t){return this.hasAttr(e,t)||this.hasProp(e,t)}hasAttr(e,t){let s=!1;if(e&&!this.isNumeric(t))if("checked"===t)s=void 0!==e.type&&("radio"===e.type||"checkbox"===e.type);else s=void 0!==e.hasAttribute&&e.hasAttribute(t);return s}hasProp(e,t){let s=!1;if(e&&!this.isNumeric(t)){let n=void 0!==e[t];n&&null===e[t]&&"value"===t&&(n=!1),s=n&&!(e[t]instanceof Node)&&!e.hasAttribute(t)}return s}setPropOrAttr(e,t,s){if(this.hasProp(e,t))try{e[t]=s}catch(n){this.setAttr(e,t,s)}else this.setAttr(e,t,s)}setAttr(e,t,s){s?e.setAttribute(t,s):e.removeAttribute(t)}defineProp(e,t,s){this.isObject(e)&&void 0===e[t]&&(Object.defineProperty(e,t,{enumerable:!1,writable:!0}),e[t]=s)}htmlElement(e){const t=this.newElement("template");return t.innerHTML=e.trim(),t.content.firstChild}newElement(e){return document.createElement(e)}newEmptyNode(){return new DocumentFragment}getMethods(e){const t=Reflect.getPrototypeOf(e),s=Reflect.getPrototypeOf(t);return Reflect.ownKeys(t).filter((e=>Reflect.ownKeys(s).indexOf(e)<0))}appendAllChild(e,t){for(;e.firstChild;)t.append(e.firstChild)}prependAllChild(e,t){for(;e.firstChild;)t.prepend(e.firstChild)}}class t{"use strict";_stored={events:[],datasetNodes:[],datasets:[],styleNodes:[],styles:[]};static storedEventsTimeout=50;static short=!0;static updates=!0;static utils=new e;constructor(){}static instance=new t;static extensions={};static main=(()=>{const e=(e,s)=>{const n=this.instance.getProxyNode(e,s);return n&&n.onready&&t.utils.isFunction(n.onready)&&(n.addEventListener("ready",n.onready,{once:!0}),setTimeout((()=>{n.dispatchEvent(new CustomEvent("ready"))}),10)),["dataset","style"].forEach((e=>{n&&n[e]&&(this.instance._stored[e+"s"].push(n[e]),this.instance._stored[e+"Nodes"].push(n))})),n};return t.utils.getMethods(t.utils).forEach((s=>{e[s]=t.utils[s]})),e})();static ready(e){document.addEventListener("DOMContentLoaded",(()=>{e(t.main)}))}static load(e){if(void 0!==e){const s=e(t.main);t.utils.isObject(s)&&!t.utils.isEmpty(s)&&Object.keys(s).forEach((e=>{if(t.utils.isValidElement(e)){void 0===t.extensions[e]&&(t.extensions[e]={});const n=t.utils.newElement(e);Object.keys(s[e]).forEach((s=>{t.utils.hasProp(n,s)&&console.log("Warning: property ["+s+"] already exists in node: ["+e+"] while trying to extend it. Unexpected behaviour may happen.")})),Object.assign(t.extensions[e],s[e])}else{void 0===t.extensions["*"]&&(t.extensions["*"]={});const n=t.utils.newElement("div");Object.keys(s[e]).forEach((e=>{t.utils.hasProp(n,e)&&console.log("Warning: property ["+e+"] already exists in Node while trying to extend it. Unexpected behaviour may happen.")})),Object.assign(t.extensions["*"],s[e])}}))}return t.main}extDom(e,s){if(!e)return console.error("Selector was empty"),null;void 0===s&&(s=document);const n=t.utils.isNode(e)?e:s.querySelector(e);if(!n)return t.utils.isString(e)?(console.error("Selector: "+e+" didn't match any element in node:"),console.log(s)):console.error("Node was null"),null;if(void 0===n._m2d2){n._m2d2=!0,["parent","sibling","next","prev","find","findAll","onupdate","onready","show","onshow","inView","css","text","html","getData","index"].forEach((e=>{n.hasOwnProperty(e)&&(console.log("Node already had ["+e+"] property. It might cause unexpected behaviour."),console.log("You may need to update the M2D2 version or report it to: github.com/intellisrc/m2d2/"))})),Object.defineProperty(n,"text",{get(){return this.childNodes.length?this.innerText:this.textContent},set(e){if(this.childNodes.length){let t=!1;this.childNodes.forEach((s=>{"Text"===s.constructor.name&&(s.nodeValue=e,t=!0)})),t||this.prepend(document.createTextNode(e))}else this.textContent=e}}),Object.defineProperty(n,"html",{get(){return this.innerHTML},set(e){this.innerHTML=e}}),Object.defineProperty(n,"css",{get(){return this.classList},set(e){t.utils.isArray(e)?this.className=e.join(" "):t.utils.isString(e)?this.className=e:t.utils.isPlainObject(e)?Object.keys(e).forEach((t=>{e[t]?this.classList.add(t):this.classList.remove(t)})):console.error("Trying to assign a wrong value to css : "+e)}}),Object.defineProperty(n,"show",{get(){return t.utils.isVisible(this)},set(e){const s=()=>getComputedStyle(this,null).display,n=()=>{const e=document.getElementsByTagName("body")[0],t=document.createElement("template"),s=document.createElement(this.tagName);t.append(s),e.append(t);const n=getComputedStyle(s,null).display;return t.remove(),n};if(e){if("none"===s()){if(this._m2d2_display)this.style.display=this._m2d2_display;else if(this.style.removeProperty("display"),"none"===s()){const e=n();this.style.display=this.dataset.display||("none"!==e?e:"block")}void 0!==this.onshow&&t.utils.isFunction(this.onshow)&&this.onshow(this)}}else{const e="none"!==this.style.display?this.style.display:s();"none"!==e&&(this._m2d2_display=e),this.style.display="none"}}});let e={};return void 0!==t.extensions["*"]&&Object.assign(e,t.extensions["*"]),void 0!==t.extensions[n.tagName]&&Object.assign(e,t.extensions[n.tagName]),Object.assign(n,{inView:()=>t.utils.inView(n),next:()=>n.nextElementSibling,prev:()=>n.previousElementSibling,parent:()=>this.extDom(n.parentElement),sibling:e=>n.parentElement.find(e),find:e=>{const t=n.querySelector(e);return t?this.extDom(t):null},findAll:e=>{const t=void 0===e?Array.from(n.children):n.querySelectorAll(e);return t.forEach((e=>{this.extDom(e)})),t}},e),void 0===n.index&&(n.index=()=>Array.from(n.parentNode.children).indexOf(n)),["INPUT","TEXTAREA","SELECT"].indexOf(n.tagName)>=0&&t.utils.hasAttrOrProp(n,"value")&&(n.oninput=function(){this.setAttribute("value",this.value)}),"FORM"===n.tagName&&(n.getData=function(e){const t={},s=new FormData(this),o=e||!1;for(let e of s.entries()){const s=n.find("[name='"+e[0]+"']");(o||"hidden"===s.type||s.show)&&(t[e[0]]="file"===s.type?s.files:e[1])}return t}),n}return n}doDom(e,s){if(t.utils.isObject(e)&&void 0===s&&(s=e,e=t.utils.newEmptyNode(),void 0===s.warn&&(s.warn=!1)),!(t.utils.isString(e)||t.utils.isElement(e)||t.utils.isNode(e)))return console.error("Selector is not a string or a Node:"),console.log(e),null;if(t.utils.isString(e)&&!document.querySelector(e))return console.log("Selected element doesn't exists: "+e),null;const n=this.extDom(e);if(void 0===s)return n;if(s=this.plainToObject(n,s),Object.keys(s).filter((e=>!["tagName"].includes(e))).forEach((e=>{let o=s[e];null==o&&(console.log("Value was not set for key: "+e+", 'empty' was used in object: "),console.log(s),console.log("In node:"),console.log(n),o="");let i=this.updateValue(n,e,o),a=t.utils.hasProp(n,e),r=!1;if(t.utils.hasAttr(n,e)||a)switch(!0){case"value"===e&&t.utils.hasProp(n,"valueAsDate")&&i instanceof Date:e="valueAsDate";case"css"===e:case typeof i==typeof n[e]:case t.utils.isString(n[e])&&t.utils.isNumeric(i):case t.utils.isFunction(i)&&t.utils.isObject(n[e]):case t.utils.isBool(i)&&t.utils.isString(n[e]):case"object"==typeof n[e]&&"INPUT"===n.tagName:r=!0}if(r){let s=!1;switch(e){case"classList":t.utils.isArray(i)?i.forEach((t=>{n[e].add(t)})):t.utils.isString(i)?n[e].add(i):s=!0;break;case"style":case"dataset":t.utils.isPlainObject(i)?Object.keys(i).forEach((t=>{n[e][t]=this.updateValue(n[e],t,i[t])})):s=!0;break;default:switch(!0){case t.utils.isBool(i):case t.utils.hasAttrOrProp(n,e):t.utils.setPropOrAttr(n,e,i);break;default:n[e]=i}}s&&(console.error("Invalid value passed to '"+e+"': "),console.log(i),console.log("Into Node:"),console.log(n))}else{const a=[];try{if("template"!==e&&!t.utils.isFunction(i)){if(e&&e.match(/^\w/)){let t=n.find("#"+e);t&&-1===a.indexOf(t)&&a.push(t),t=n.find("[name='"+e+"']"),t&&-1===a.indexOf(t)&&a.push(t);const s=Array.from(n.findAll("."+e)).filter((e=>a.indexOf(e)<0));s.length>0&&s.forEach((e=>a.push(e)))}const t=Array.from(n.findAll(e)).filter((e=>a.indexOf(e)<0));t.length>0&&t.forEach((e=>a.push(e)))}}catch(t){return console.error("Invalid selector: "+e),void console.log(t)}if(a.length>1){const t=[];a.forEach((s=>{t.push(this.render(s,e,i))})),this.linkNode(n,e,t),void 0!==i.warn&&!1===i.warn||(console.log("Multiple elements were assigned with key: ["+e+"] under node: "),console.log(n),console.log("It might be what we expect, but if it is not expected it could result on some elements mistakenly rendered. You can specify 'warn : false' under that element to hide this message."))}else if(1===a.length){const r=a[0];if(t.utils.isElement(r)){const a=this.plainToObject(r,i),l=t.utils.isPlainObject(a)&&Object.keys(a).length>=1?Object.keys(a)[0]:null;if(l&&(i=this.updateValue(r,l,o)),t.utils.isArray(i)){const t=s.template;this.doItems(r,i,t),this.linkNode(n,e,r)}else this.renderAndLink(n,r,e,i)}else console.error("BUG: It should have been a node but got: "),console.log(r),console.log("Parent node:"),console.log(n)}else if(0===a.length){"template"===e&&void 0===s.items&&(e="items",i=[]);const o=t.utils.isFunction(i);if(void 0!==i.tagName){const t=this.appendElement(n,i.tagName);this.renderAndLink(n,t,e,i)}else if(t.utils.isValidElement(e)&&!o){const t=this.appendElement(n,e);this.renderAndLink(n,t,e,i)}else if("items"===e){const e=s.template;if(t.utils.isPlainObject(i)){const e=[];Object.keys(i).forEach((s=>{let o;"DL"===n.tagName?o={dt:s,dd:i[s]}:(o={text:i[s]},t.utils.hasAttrOrProp(n,"value")?o.value=s:o.dataset={id:s}),e.push(o)})),i=e}t.utils.isArray(i)?this.doItems(n,i,e):(console.log("Warning: 'items' specified but value is not and array, in element: "),console.log(n),console.log("Passed values are: "),console.log(i))}else o?(t.updates&&"onupdate"===e&&n.addEventListener("update",i,!0),n[e]=i):"template"!==e&&"warn"!==e&&!1!==i&&(void 0!==s.warn&&!1===s.warn||(console.error("Not sure what you want to do with key: "+e+" under element: "),console.log(n),console.log("And object:"),console.log(s),console.log("Most likely the element's property or child no longer exists or the value passed to it is incorrect."),console.log("You can set 'warn : false' property to the element to dismiss this message.")),n[e]=i)}}})),n.onload){const e=["BODY","FRAME","IFRAME","IMG","LINK","SCRIPT","STYLE"].indexOf(n.tagName)>=0,t="INPUT"===n.tagName&&"image"===n.type;e||t||n.dispatchEvent(new CustomEvent("load"))}return n}isUpdateLink(e){let s=!1;if(t.utils.isArray(e)&&(2===e.length||3===e.length)){const n=2===e.length,o=t.utils.isNode(e[0])||e[0]instanceof DOMStringMap||e[0]instanceof CSSStyleDeclaration,i=n?t.utils.isString(e[1]):t.utils.isString(e[1])&&t.utils.isFunction(e[2]);s=o&&i,s&&n&&e.push((e=>e))}return s}plainToObject(e,s){if(!t.utils.isPlainObject(s)&&!t.utils.isFunction(s)&&!t.utils.isElement(s))if(t.utils.isHtml(s))s={html:s};else if(this.isUpdateLink(s)){const n=s[0],o=s[1],i=s[2];let a=this.plainToObject(e,i(n[o]));if(t.utils.isPlainObject(a)){const e={};Object.keys(a).forEach((t=>{e[t]=s})),s=e}}else t.utils.isArray(s)?s={items:s}:t.utils.hasAttrOrProp(e,"value")?s="SELECT"===e.tagName?{value:s,text:s}:"BUTTON"===e.tagName?{text:s}:{value:s}:t.utils.isString(s)&&"IMG"===e.tagName?s={src:s}:(t.utils.isString(s)||t.utils.isNumeric(s))&&(s={text:s});return s}renderAndLink(e,t,s,n){const o=this.render(t,s,n);this.linkNode(e,s,o)}render(e,t,s){return s=this.plainToObject(e,s),this.doDom(e,s)}linkNode(e,s,n){if(e[s]===n){const t=this.proxy(n);try{e[s]=t}catch(e){}e["$"+s]=t}else t.utils.hasAttrOrProp(e,s)?(e["$"+s]=n,console.log("Property : "+s+" existed in node: "+e.tagName+". Using $"+s+" instead for node: "+n.tagName+".")):e[s]=this.proxy(n)}appendElement(e,s){const n=t.utils.newElement(s);return e.append(n),n}getItem(e,t,s,n){n||(n=this.getTemplate(e));const o=n.cloneNode(!0);this.addTemplatesToItem(n,o),o.dataset.id=t,this.setUniqueAttrib(o,"selected");let i=this.doDom(o,s);return this.getItemWithEvents(e,i)}addTemplatesToItem(e,t){["_template","__template"].forEach((s=>{void 0!==e[s]&&(t[s]=e[s])}))}getItemWithEvents(e,s){if(void 0!==e.__template){const n=(e,s)=>(s=s||{},Object.keys(e).forEach((o=>{t.utils.isPlainObject(e[o])?s[o]=n(e[o]):t.utils.isFunction(e[o])&&(s[o]=e[o])})),s);let o=n(e.__template);t.utils.isEmpty(o)||(o=o[Object.keys(o)[0]],s=this.doDom(s,o))}return s}doItems(e,t,s){const n=this.getTemplate(e,s);if(void 0===n)return console.error("Template not found. Probably an array is being used where it is not expected. Node:"),console.log(e),console.log("Value (mistaken?):"),void console.log(t);let o=0;t.forEach((t=>{t=this.plainToObject(e,t);const s=this.getItem(e,o++,t,n);s&&e.append(s)}));const i=e.find("template");i&&e.removeChild(i),e.items=e.children,this.extendItems(e)}getTemplate(e,s){if(void 0!==e._template&&""!==e._template)return e._template;{let n;const o=e.querySelector("template");if(o)n=t.utils.htmlElement(o.innerHTML.trim());else switch(e.tagName){case"SELECT":case"DATALIST":n=t.utils.newElement("option");break;case"UL":case"OL":n=t.utils.newElement("li");break;case"NAV":n=t.utils.newElement("a");break;case"DL":n=t.utils.newElement("dd");break;default:if(s){const o=Object.keys(s).length;if(o){if(o>1)if(void 0!==s.tagName){let e={};e[s.tagName]=s,s=e}else console.log("Template has more than one top elements. Using the first one. In: "),console.log(s),console.log("Node: "),console.log(e);const i=Object.keys(s)[0],a=s[i];t.utils.isValidElement(i)?n=t.utils.newElement(i):void 0!==a.tagName?(n=t.utils.newElement(a.tagName),s[a.tagName]=a,delete s[i]):(console.error("Template defined an element which can not be identified: ["+i+"], using <span> in:"),console.log(s),console.log("Node: "),console.log(e),n=t.utils.newElement("span"))}else console.error("Template has no definition, and it can not be guessed. Using <span>. Template: "),console.log(s),console.log("Node: "),console.log(e),n=t.utils.newElement("span")}else e.childElementCount>0&&(n=t.utils.htmlElement(e.innerHTML.trim()))}if(s)if(t.utils.isPlainObject(s)){const o=t.utils.newEmptyNode();o.append(n);n=this.doDom(o,s).children[0],t.utils.defineProp(e,"__template",s)}else n=t.utils.isHtml(s)?t.utils.htmlElement(s):t.utils.isSelectorID(s)?t.utils.htmlElement(document.querySelector(s).innerHTML):t.utils.newElement(s);if(n.childrenElementCount>1){console.log("Templates only supports a single child. Multiple children were detected, wrapping them with <span>. Template:"),console.log(n);const e=t.utils.newElement("span");e.append(n),n=e}return n&&t.utils.defineProp(e,"_template",n),n}}setUniqueAttrib(e,s){e.hasOwnProperty(s)||Object.defineProperty(e,s,{get:function(){return this.hasAttribute(s)},set:function(e){const n=this.parentNode?this.parentNode.find("["+s+"]"):null;n&&n.removeAttribute(s),t.utils.setAttr(this,s,e)}})}updateValue(e,s,n){if(this.isUpdateLink(n)){const o=this,i=n[0],a=n[1],r=n[2];if(n=i[a],i instanceof CSSStyleDeclaration&&this._stored.styles.includes(i)){const n=this._stored.styleNodes[this._stored.styles.indexOf(i)];t.updates&&(n.onupdate=function(t){t.detail&&"style"===t.detail.property&&t.detail.newValue.startsWith(a+":")&&o.setShortValue(e,s,r(this.style[a]))})}else if(i instanceof DOMStringMap&&this._stored.datasets.includes(i)){const n=this._stored.datasetNodes[this._stored.datasets.indexOf(i)];t.updates&&(n.onupdate=t=>{t.detail&&t.detail.property==="data-"+a&&o.setShortValue(e,s,r(t.detail.newValue))})}else t.updates&&(i.onupdate=n=>{n.detail&&n.detail.property===a&&(t.utils.isObject(e[s])||o.setShortValue(e,s,r(n.detail.newValue)))})}return n}setShortValue(e,s,n){if(t.utils.isNode(e[s]))if(t.short){const o=this.plainToObject(e[s],n),i=t.utils.isPlainObject(o)&&Object.keys(o).length>=1?Object.keys(o)[0]:null;i&&(e[s][i]=n)}else console.log("Short is disabled. Trying to set a value ("+n+") in a node:"),console.log(e[s]),console.log("Either turn on 'short' functionality, or be sure you specify the property, like: 'node.text'");else e[s]=n}getShortValue(e,s,n){let o=null;if(t.utils.isNode(e[s]))if(t.short){const i=this.plainToObject(e[s],n||""),a=t.utils.isPlainObject(i)&&Object.keys(i).length>=1?Object.keys(i)[0]:null;a&&(o=e[s][a])}else console.log("Short is disabled. Trying to get a value from node:"),console.log(e[s]),console.log("Either turn on 'short' functionality, or be sure you specify the property, like: 'node.text'");else o=e[s];return o}proxy(e,s){if(!t.short||null===e||void 0!==e._proxy&&void 0===s)return e;e._proxy=e;return new Proxy(e,{get:(e,s)=>{const n=e[s];switch(!0){case null==n:return null;case t.utils.isFunction(n):return n.bind(e);case n._proxy&&void 0!==e["$"+s]:return e["$"+s];case void 0===n._proxy&&t.utils.isElement(n):return this.proxy(n);default:return n}},set:(e,s,n)=>{let o="";return t.utils.isElement(e[s])?(o=this.getShortValue(e,s,n),this.setShortValue(e,s,n)):"onupdate"===s?t.updates?t.utils.isFunction(n)?(e.addEventListener("update",n,!0),o=e[s],e[s]=n):(console.error("Value passed to 'onupdate' is incorrect, in node:"),console.log(e),console.log("Value: (not a function)"),console.log(n)):(console.log("Updates are not available when `m2d2.updates == false`:"),console.log(e)):"items"===s?(e.items.clear(),this.doItems(e,n)):(o=e[s],n=this.updateValue(e,s,n),e[s]=n),t.updates&&void 0!==e.onupdate&&n!==o&&e.dispatchEvent(new CustomEvent("update",{detail:{type:typeof n,property:s,newValue:n,oldValue:o}})),!0}})}onObserve(e,s){e.forEach((e=>{const s=e.target;if(!(this._stored.events.indexOf(e)>=0)&&(this._stored.events.push(e),setTimeout((()=>{const t=this._stored.events.indexOf(e);t>=0&&this._stored.events.splice(t,1)}),t.storedEventsTimeout),void 0!==s.onupdate))if("attributes"===e.type){const n=t.utils.getAttrOrProp(s,e.attributeName);n!==e.oldValue&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof n,property:e.attributeName,newValue:n,oldValue:e.oldValue}}))}else if("childList"===e.type){if("#text"===(e.addedNodes[0]||e.removedNodes[0]).nodeName){const t=e.addedNodes[0].textContent,n=e.removedNodes.length?e.removedNodes[0].textContent:null;t!==n&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof t,property:"text",newValue:t,oldValue:n}}))}else if(void 0!==s.items){const t=e.addedNodes,n=e.removedNodes;t!==n&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof t,property:"items",newValue:t,oldValue:n}}))}}}))}observe(e){if(t.updates){const t=new MutationObserver(this.onObserve.bind(this)),s={attributeOldValue:!0,subtree:!0,childList:!0},n=e._proxy||e;t.observe(n,s)}}getProxyNode(e,t){const s=this.doDom(e,t);if(s)return this.observe(s),this.proxy(s)}extendItems(e){function s(t){t.forEach((t=>{const s=t.parentNode.removeChild(t);e.append(s)}))}const n=e.items;Object.getOwnPropertyNames(Array.prototype).concat(["clear","get","remove","selected","first","last","findAll"]).forEach((o=>{if(void 0===n[o]){let i=null;const a=this;switch(o){case"copyWithin":case"fill":case"splice":i=function(){console.log("Not available yet: "+o)};break;case"reverse":i=function(...e){if(this.items.length){const t=Array.from(this.items),n=t[o](...e);return s(t),n}};break;case"clear":i=function(){for(;this.items[0];)this.items[0].remove()};break;case"get":i=function(e){let s=null;return this.items.length&&this.items.some((n=>{const o=t.utils.isNumeric(e)?1*n.dataset.id==1*e:n.dataset.id===e;if(n.dataset&&o)return s=n,!0})),s};break;case"selected":i=function(){return a.proxy(this.find(":scope > [selected]"))};break;case"first":i=function(){return a.proxy(this.items[0])};break;case"last":i=function(){return a.proxy(this.items[this.items.length-1])};break;case"pop":i=function(){if(this.items.length){const e=this[0].parentNode;return a.proxy(e.removeChild(this.items[this.items.length-1]))}};break;case"push":i=function(e){if(e=a.plainToObject(this,e),t.utils.isElement(e))this.append(e);else if(t.utils.isPlainObject(e)){const t=this.items.length,s=a.getItem(this,t,e);this.appendChild(s)}else console.log("Trying to push an unknown value into a list:"),console.log(e)};break;case"remove":i=function(e){if(this.items.length){const t=this.items.get(e);1===t.length&&t.remove()}};break;case"shift":i=function(){if(this.items.length){const e=this.items[0].parentNode;return a.proxy(e.removeChild(this.items[0]))}};break;case"sort":i=function(e){if(this.items.length){const t=Array.from(this.items);t.sort(e||((e,t)=>e.text.localeCompare(t.text))),s(t)}};break;case"unshift":i=function(e){if(e=a.plainToObject(this,e),t.utils.isElement(e))this.prepend(e);else if(t.utils.isPlainObject(e)){const t=this.items.length,s=a.getItem(this,t,e);this.prepend(s)}else console.log("Trying to unshift an unknown value into a list:"),console.log(e)};break;default:let n=o;switch(!0){case"findAll"===o:n="filter";case t.utils.isFunction(Array.prototype[o]):const s=function(...t){const s=[];return Array.from(e.items).forEach((e=>{s.push(a.proxy(e))})),Array.from(s)[n](...t)};switch(o){case"find":i=function(...e){return t.utils.isString(e[0])?this.find(e[0]):s(...e)};break;case"findAll":i=function(...e){return 0===e.length?this.findAll():t.utils.isString(e[0])?this.findAll(e[0]):s(...e)};break;case"concat":i=function(...e){for(let s=0;s<e.length;s++)if(t.utils.isArray(e[s]))for(let n=0;n<e[s].length;n++){let o=e[s][n];if(!t.utils.isElement(o)&&(o=a.plainToObject(this,e[s][n]),t.utils.isPlainObject(o))){const e=this.items.length;o=a.getItem(this,e,o)}this.items.push(o)}};break;default:i=s}}}i&&t.utils.defineProp(n,o,i.bind(e))}}))}}return t.load((e=>{function t(t){if(e.exists("#m2d2-alert .m2d2-alert-front")){e("#m2d2-alert .m2d2-alert-front").css.add("vanish"),setTimeout((()=>{e.exists("#m2d2-alert .m2d2-alert-front")&&e("#m2d2-alert").remove(),t&&t()}),400)}else t&&t()}const s={wrap:!1,question:["fa","fa-question-circle"],info:["fa","fa-exclamation-circle"],error:["fa","fa-exclamation-triangle"],ok:["fa","fa-check"],input:["fa","fa-edit"],wait:["fa","fa-cog","fa-spin"]},n={wrap:"material-icons",question:"help",info:"info",error:"error",ok:"done",input:"edit",wait:"pending"},o={wrap:!1,question:"icon_question",info:"icon_info",error:"icon_error",ok:"icon_ok",input:"icon_input",wait:"icon_wait"};e.message=function(i){let a=o;switch(e.messageIcons){case"fa":a=s;break;case"material":a=n;break;default:e.isObject(e.messageIcons)&&(a=e.messageIcons)}i&&(e.isFunction(i.callback)||(i.callback&&!i.text&&(i.text=i.callback),i.callback=()=>{}),i.text||(i.text="")),t((()=>{e("body",{m2d2Alert:{tagName:"div",id:"m2d2-alert",back:{tagName:"div",css:"m2d2-alert-back",style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"#0005",display:"flex",justifyContent:"center",alignItems:"center"},front:Object.assign({tagName:"form",css:(i.css?e.isArray(i.css)?i.css:[i.css]:[]).concat(["m2d2-alert-front","popup",i.icon]),style:{zIndex:100},icon:{tagName:"span",css:["icon",i.icon].concat(a.wrap?[a.wrap]:a[i.icon]).concat("wait"===i.icon?"spin":""),text:a.wrap?a[i.icon]:""},message:{tagName:"div",css:"m2d2-alert-title",span:i.title},submsg:(()=>{let t;return t="input"!==i.icon||i.text?e.isPlainObject(i.text)?{fieldset:Object.assign({css:"m2d2-alert-field"},i.text)}:{span:i.text.replace("\n","<br>")}:{fieldset:{css:"m2d2-alert-field",input:{type:"text",name:"answer",onload:function(){this.focus()}}}},Object.assign({tagName:"div",css:"m2d2-alert-text"},t)})(i.icon),onsubmit:function(){const e=this.getData();let s;switch(e.button){case"ok":case"yes":s=()=>{i.callback(!0,e)};break;case"no":s=()=>{i.callback(!1,e)};break;case"cancel":s=()=>{i.callback(null,e)};break;case"send":s=1===Object.keys(e).length?()=>{i.callback(e[Object.keys(e)[0]],e)}:2===Object.keys(e).length?()=>{i.callback(e[Object.keys(e).find((e=>"button"!==e))],e)}:()=>{i.callback(e,e)};break;default:s=()=>{i.callback(e,e)}}return t(s),!1},onload:function(){const e=this.find("[autofocus]");e&&e.focus()}},function(t){let s={};return t.length&&(s={buttons:{tagName:"div",css:"m2d2-alert-buttons"}},t.forEach((t=>{const n=t.toLowerCase().replace(/[^a-z ]/g,"").replace(" ","_");s.buttons[n]={tagName:"button",type:"submit",value:n,css:["color",n],text:void 0!==e.dict?e.dict(t):t,autofocus:["ok","yes"].includes(t),formNoValidate:["cancel"].includes(t),onclick:function(){e(this.closest("form"),{hide:{tagName:"input",type:"hidden",name:"button",value:this.value}})}}}))),s}(i.buttons))}}})}));let r=1;return e("#m2d2-alert .m2d2-alert-front").findAll("input, select, textarea").forEach((e=>{""===e.name&&(e.name="field_"+r++)})),{close:t}},e.wait=(t,s,n)=>e.message({icon:"wait",title:t,buttons:[],text:void 0===n?null:s,callback:void 0===n?s:n}),e.alert=(t,s,n)=>e.message({icon:"info",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.success=(t,s,n)=>e.message({icon:"ok",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.failure=(t,s,n)=>e.message({icon:"error",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.confirm=(t,s,n)=>e.message({icon:"question",title:t,buttons:["yes","no"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.prompt=(t,s,n)=>e.message({icon:"input",title:t,buttons:["cancel","send"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.closeAll=()=>{t()}})),t.load((e=>{let t=localStorage.getItem("m2d2.lang")||""||navigator.language;e.dict=new function(t){const s=function(e,t){if(void 0===e)return"";let n=s.val(e,!0);if(void 0!==t){if("string"==typeof t&&""!==t){const e=(t=t.replace(/;$/,"")).split(";");t={},e.forEach((s=>{const n=e[s].split(":");t[n[0]]=n[1]}))}"object"==typeof t&&t.forEach((e=>{let o=t[e]+"";o=s.val(o,!1),n=n.replace(e,o)}))}return n};return s.lang=t||"en",s.data={},s.set=function(e){return this.data=e,this},s.has=function(e,t){return void 0===t?void 0!==this.data[e]:void 0!==this.data[e][t]},s.val=function(t,n){if(e.isEmpty(s.data))return console.error("Dictionary is empty. You need to add a dictionary, for example: `$.dict.set({\nsave   : { en : 'Save', es : 'Guardar' },\ncancel : { en : 'Cancel', es : 'Cancelar' }\nyes    : { en : 'Yes', es : 'Si' },\nno     : { en : 'No', es : 'No' }\n})`"),"";if(!t)return console.error("No keyword specified."),"";let o=t;if(void 0===n&&(n=!1),t=t.toLowerCase(),this.has(t)){const e=this.lang.split("-")[0];this.has(t,this.lang)?o=this.data[t][this.lang]:this.has(t,e)?o=this.data[t][e]:n&&console.log("Missing translation for lang ["+this.lang+"]: "+t)}else n&&console.log("Missing keyword: "+t);return o},s}(t);const s=[];e.lang=function(t){t&&(e.dict.lang=t,localStorage.setItem("m2d2.lang",e.dict.lang)),e("body").findAll("[lang]").forEach((t=>{let s=t.text;if(s&&!t.classList.contains("notxt")){void 0===t.dataset.kw&&(t.dataset.kw=e.lang.getKeyword(s)),t.text=e.dict(t.dataset.kw);const n=t.dataset.kw+"_title";let o=e.dict.has(n)?e.dict(n):"";o&&(t.title=o)}else if(t.title){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.title)),s=e.dict(t.dataset.kw),s&&(t.title=s)}else if(t.placeholder){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.placeholder)),s=e.dict(t.dataset.kw),s&&(t.placeholder=s)}else if(t.value){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.value)),s=e.dict(t.dataset.kw),s&&(t.value=s)}})),s.forEach((e=>{e(t)}))},e.lang.getKeyword=function(e){return e.toLowerCase().trim().replace(/ /g,"_").replace(/[^\w]/g,"").replace(/_$/,"")},Object.defineProperty(e.lang,"onchange",{get(){return this},set(t){e.isFunction(t)?s.push(t):(console.log("Unable to set lang.onchange, because it is not a function: "),console.log(t))}})})),t.ready((e=>{const t=localStorage.getItem("m2d2.lang")||"",s=e("body").find("[lang]"),n=e("html").lang||(s?s.lang:null)||"en";(t?n!==t:n!==navigator.language.split("-")[0])&&e.lang()})),t.load((e=>{function t(e){switch(e){case"local":window.localStorage&&(this.store=localStorage);break;case"session":window.sessionStorage&&(this.store=sessionStorage)}null==this.store&&(this.store=localStorage),this.set=function(e,t){"string"==typeof t&&(t={$:t}),this.store.setItem(e,JSON.stringify(t))},this.get=function(e){let t;try{t=JSON.parse(this.store.getItem(e))||{}}catch(s){t=this.store.getItem(e)}return void 0!==t.$?t=t.$:0===Object.keys(t).length&&t.constructor===Object&&(t=null),t},this.del=function(e){this.store.removeItem(e)},this.keys=function(){return Object.keys(this.store).sort()},this.clear=function(){this.store.clear()},this.exists=function(e){return this.store.hasOwnProperty(e)},this.log=function(e,t,s){null==s&&(s=10);const n=this.get(e)||[];for(n.push(t);n.length>s;)n.shift();this.set(e,n)}}e.local=new t("local"),e.session=new t("session")})),t.load((e=>{function t(e,t,s){const n=[];return e=e||{},t.forEach((o=>{const i="Array"==typeof e?e.length==t.length?e[s]:e:void 0!==e[o.name]?e[o.name]:e;n.push({file:o,data:i,index:s++})})),n}function s(e,t,s,n,o){const i=new XMLHttpRequest;t=Array.from(t),i.upload.addEventListener("progress",(function(e){if(e.lengthComputable)if(n.oneByOne){const o=Math.round(100*e.loaded/e.total);n.onUpdate(o,t[0],s)}else{let s=0,o=0;t.some((t=>{s+=t.size;const i=e.loaded>=s?100:100-Math.round(100*(s-e.loaded)/t.size);return n.onUpdate(i,t,o++),s>=e.loaded}))}}),!1),i.addEventListener("load",(function(e){let a={};try{a=i.responseText?JSON.parse(i.responseText):{error:{type:"Unknown",reason:"Unknown Error"}}}catch(e){a.error={type:"Parse Error",reason:e.message}}i.status>=200&&i.status<400?o(n.onResponse(a),t,s):("string"==typeof a.error&&(a.error={type:"Exception",reason:a.error}),n.onError(a.error))}),!1),i.open("POST",n.upload);const a=Array(t.length).fill(!1),r=function(e,t){const s=new FormData;return t.forEach((t=>{s.append(e,t,t.name)})),s}(e,t);let l=0;t.forEach((e=>{const t=new FileReader;t.onload=function(e){a[l++]=!0,-1===a.indexOf(!1)&&i.send(r)},t.readAsBinaryString(e)}))}e.upload=function(e,n){const o=Object.assign({},{accept:"*/*",parallel:!1,field:"file",multiple:!0,maxFiles:0,maxSizeMb:0},n);n=null;let i=window._protected_reference=document.createElement("INPUT");i.name=o.field,i.type="file",1==o.multiple&&(i.multiple="multiple"),o.upload||(console.log("Upload not specified. Using current page."),o.upload=""),null==o.onDone&&(o.onDone=(e,t)=>{console.log(e)}),null==o.onError&&(o.onError=e=>{console.log("Error : "),console.log(e)}),null==o.onUpdate&&(o.onUpdate=(e,t,s)=>{console.log("Uploading : "+e+"% "+(o.oneByOne?"[ "+t.name+" ]":""))}),null==o.onResponse&&(o.onResponse=e=>e),i.addEventListener("change",(()=>{if(i.files.length){if(!(0===o.maxFiles|i.files.length<=o.maxFiles))return o.onError("Max file limit exceeded. Maximum files: "+o.maxFiles),!1;if(o.onSelect){const e=[];let t=0;Array.from(i.files).forEach((s=>{e.push(URL.createObjectURL(s)),t+=s.size}));const s=t/1048576;if(o.maxSizeMb&&s>o.maxSizeMb)return o.onError("Maximum size exceeded: "+Math.ceil(s)+"MB > "+o.maxSizeMb+"MB"),!1;o.onSelect(i.files,e)}new Promise((e=>{if(o.oneByOne){let n=0;const a=Array(i.files.length).fill(!1);Array.from(i.files).forEach((r=>{new s(i.name,[r],n++,o,((s,n,i)=>{a[i]=!0;const r=-1===a.indexOf(!1);o.onDone(t(s,n,i),r),r&&e()}))}))}else new s(i.name,i.files,0,o,((s,n,i)=>{o.onDone(t(s,n,i),!0),e()}))})).then((()=>{i=window._protected_reference=void 0}))}})),i.click()}})),t.load((e=>{e.ws=new class{request(e){if(e)try{this.webSocket.send(JSON.stringify(e))}catch(e){this.webSocket.onerror(e)}}getSocket(e,t,s){const n=new WebSocket(this.path);return n.onopen=t,n.onclose=s,n.onmessage=t=>{if(t.data)try{e(JSON.parse(t.data))}catch(e){n.onerror(e)}},n.onerror=e=>{console.error("Socket encountered error: ",e?e.message:"Unknown","Closing socket");const t=n||this;1===t.readyState&&t.close()},n}connect(e,t){this.initRequest=e.request||null,this.onConnect=e.connected||(()=>{}),this.onDisconnect=e.disconnected||(()=>{}),this.reconnect=!1!==e.reconnect,this.host=e.host||window.location.hostname,this.secure=!0===e.secure,this.port=e.port||(this.secure?443:80),this.path="ws"+(this.secure?"s":"")+"://"+this.host+":"+this.port+"/"+(e.path||""),this.connected=!1,this.interval=null;const s=e=>{this.connected=!0,this.request(this.initRequest),this.onConnect()},n=e=>{this.connected=!1,this.onDisconnect(),!this.interval&&this.reconnect&&(this.interval=setInterval((()=>{if(this.connected)console.log("Reconnected..."),clearInterval(this.interval),this.interval=null;else try{this.webSocket.close(),console.log("Reconnecting..."),this.webSocket=this.getSocket(t,s,n)}catch(e){}}),2e3))};this.webSocket=this.getSocket(t,s,n)}disconnect(){this.reconnect=!1,this.webSocket.close()}}})),t.load((e=>{const t=function(e,t,s,n,o,i){const a=new XMLHttpRequest;if(void 0===i&&(i=!1),void 0===o&&(o=function(e){console.log(e)}),s&&0===Object.entries(s).length&&(s=""),s)if(i)s=JSON.stringify(s);else if("GET"===e.toUpperCase())t+=(-1!==t.indexOf("?")?"&":"?")+Object.keys(s).map((e=>e+"="+s[e])).join("&"),s="";else s=Object.keys(s).map((e=>e+"="+s[e])).join("&");return a.open(e,t,!0),i?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onerror=function(e){o({type:"Connection",reason:"Connection Refused"})},a.onload=function(){let e={};try{e=a.responseText?JSON.parse(a.responseText):{error:{type:"Unknown",reason:"Unknown Error"}}}catch(t){e.error={type:"Parse Error",reason:t.message}}a.status>=200&&a.status<400?void 0!==n&&n(e):void 0!==o&&("string"==typeof e.error&&(e.error={type:"Exception",reason:e.error}),o(e.error))},a.send(s),a},s={};["get","post","put","delete","connect","options","trace","patch"].forEach((function(e){s[e]=function(){let s,n,o,i,a;switch(arguments.length){case 5:"boolean"==typeof arguments[4]?a=arguments[4]:console.log("Passed JSON argument: "+arguments[4]+" is not boolean.");case 4:"function"==typeof arguments[3]?i=arguments[3]:4===arguments.length&&"boolean"==typeof arguments[3]?a=arguments[3]:console.log("Passed argument 4: "+arguments[3]+" is mistaken");case 3:"function"==typeof arguments[2]?"function"==typeof arguments[1]&&arguments.length<5?i=arguments[2]:o=arguments[2]:3===arguments.length&&"boolean"==typeof arguments[2]?a=arguments[2]:console.log("Passed argument 3: "+arguments[2]+" is mistaken");case 2:"object"==typeof arguments[1]||"string"==typeof arguments[1]?n=arguments[1]:"function"==typeof arguments[1]?o=arguments[1]:console.log("Passed argument 2: "+arguments[1]+" is mistaken");case 1:"string"==typeof arguments[0]?s=arguments[0]:Array.isArray(arguments[0])?s=arguments[0].join("/"):console.log("Passed URL: "+arguments[0]+" was not a string.");break;default:console.log("Incorrect number of arguments passed to xhr")}return void 0===n&&(n={}),t(e.toUpperCase(),s,n,o,i,a)}})),Object.assign(e,s)})),t}));class NdJsonPlayer{fps;loop;showfirst;autoplay;live;path;playing=!1;loaded=!1;backwards=!1;started=!1;onStart;onLoad;onRender;onPlay;onStop;onFinish;onError;wrapper=null;canvas=null;ctx=null;timer=null;src="";frame=0;multiplier=1;_numFrames=0;_totTime=0;_frames=[];_frameBase="";_thumbBase="";_startTimeStamp=0;constructor(e,t,s,n){const o=this;o.src=e,window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame);const i=()=>{};n=Object.assign({},n),o.onStart=n.onstart||i,o.onLoad=n.onload||i,o.onRender=n.onrender||i,o.onPlay=n.onplay||i,o.onStop=n.onstop||i,o.onFinish=n.onfinish||i,o.onError=n.onerror||(e=>{console.log(e)});let a=null;if(t instanceof Node)a=t;else{if("object"==typeof t)s=t,t="canvas";else if("string"!=typeof t)throw"Incorrect parameter passed to constructor of NdJsonPlayer";a=document.querySelector(t||"canvas")}if(!a)throw"Canvas element was not found in DOM: "+t;if("CANVAS"===a.tagName){o.canvas=a;const e=document.createElement("div");a.parentNode.insertBefore(e,a),e.prepend(a),a=e}else if(a.hasChildNodes()){if(o.canvas=a.querySelector("canvas"),!o.canvas)throw"No canvas found in element"}else o.canvas=document.createElement("CANVAS"),a.prepend(o.canvas);o.wrapper=a,o.canvas.width=o.wrapper.parent().clientWidth,o.canvas.height=o.wrapper.parent().clientHeight,a.classList.add("ndjp"),o.ctx=o.canvas.getContext("2d"),o.fps=s.fps||24,o.loop=s.loop||!1,o.live=s.live||!1,o.autoplay=s.autoplay||o.live||!1,o.showfirst=!1!==s.showfirst,o.path=s.path||"","auto"===s.width&&(s.width=0),"auto"===s.height&&(s.height=0),o.timer=new TimerSrc(1e3/o.fps),o.live?new TimerSrc(1e3/o.fps,(()=>{fetch(o.src).then((e=>e.json())).then((e=>{o.reload(e)}))})).play():o.src?o.load():console.log("Initializing without source...")}_reset(){this._frames=[],this._totTime=0,this._numFrames=0,this._startTimeStamp=0,this.loaded=!1}load(e,t){const s=this;void 0!==t&&(this.src=t,this._reset());const n=new TextDecoder;let o="";return fetch(s.src).then((e=>e.body.getReader())).then((t=>t.read().then((function i({value:a,done:r}){if(r){const t=JSON.parse(o);return s.processFrame(t),e&&e(t),void s.onLoad(s)}const l=(o+n.decode(a,{stream:!0})).split(/[\r\n](?=.)/);return o=l.pop(),l.map(JSON.parse).forEach((t=>{s.processFrame(t),e&&e(t)})),t.read().then(i)})))).catch((e=>this.onError(e)))}reload(e,t){const s=this,n=[];switch(s._reset(),!0){case"string"==typeof e:n=e.split(/[\r\n](?=.)/.map(JSON.parse));break;case Array.isArray(e):n=e;break;case"Object"===e.constructor.name:n.push(e);break;default:return void console.log("Unable to reload frames. ")}n.forEach((e=>{s.processFrame(e),t&&t(e)}))}append(e){this._frames.push(e)}prepend(e){this._frames.unshift(e),this.frame++}processFrame(e){const t=this;void 0!==e.w&&(t.canvas.width=e.w),void 0!==e.h&&(t.canvas.height=e.h),void 0!==e.fb&&(t._frameBase=e.fb),void 0!==e.thb&&(t._thumbBase=e.thb),void 0!==e.tf&&(t._numFrames=e.tf),void 0!==e.tt&&(t._totTime=e.tt),void 0!==e.ts&&(t._startTimeStamp||(t._startTimeStamp=e.ts)),void 0!==e.fps&&(t.fps=e.fps,t.timer=new TimerSrc(1e3/t.fps)),void 0!==e.f?(t._frames.push(e),t.loaded||(t.loaded=!0,t.autoplay?t.play():t.showfirst&&t.step())):t.onRender(e),t.started||(t.onStart(t),t.started=!0)}_render(e){if(null==this.timer)throw"TimerSrc was not initialized";if(0===this._frames.length)throw"Video is empty or no frames were found";this.frame>=this._frames.length-1&&(this.frame=this.loop?0:this._frames.length-1),this.frame<0&&(this.frame=this.loop?this._frames.length-1:0),this._displayImg(e)}_displayImg(e){const t=this,s=t._frames[t.frame],n=function(){t.onRender(s),t.timer.call((function(){t._increment(),e||t.timer.nocall(),t._displayImg()}))};if(void 0!==s.f){const e=t._frameBase+s.f;t._image(e,n)}else t.onRender(s),n()}_increment(){this.frame+=this.multiplier*(this.backwards?-1:1),this.frame<0&&(this.loop?this.frame=this._frames.length-1:(this.frame=0,this.pause(),this.onFinish(this))),this.frame>this.totalFrames()-1&&(this.loop?this.frame=0:(this.frame=this._frames.length-1,this.pause(),this.onFinish(this)))}_draw=function(e,t){const s=this;return 0===e.width&&0===e.height?(e.onerror(),void 0!==t&&t(!1)):(s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height),s.ctx.drawImage(e,0,0,e.width,e.height,0,0,s.canvas.width,s.canvas.height),void 0!==t&&t(!0)),this};_image=function(e,t){const s=this,n=new Image;return n.crossOrigin="",n.onload=function(){s._draw(n,(function(e){e&&void 0!==t&&t(n)}))},n.onerror=function(){const e=s.onError();e&&(n.src=e)},n.src="/"===e[0]||e.match(/^https?:/)||e.match(/^data:image/)?e:s.path+e,this};frameBase(){return this._frameBase}currentFrame(){return this.frame}totalFrames(){return this._numFrames||this._frames.length}totalTime(){return this._totTime||this.currentFrame()/this.fps}frameAt(e){const t=this;let s=e<this.totalFrames()?t._frames[e]:null;return s&&(s.fb=t._frameBase),s}indexAt(e){return~~(e*this.totalFrames()/100)}playerNode(){return this.wrapper}play(e){e<0?e=0:e>this._frames.length?e=this._frames.length-1:void 0!==e&&(this.frame=1*e),this.playing=!0,this.timer.play(),this._render(!1),this.onPlay(this)}playForward(e){this.backwards=!1,this.play(e)}playBackwards(e){this.backwards=!0,this.play(e)}pause(){this.playing=!1,this.timer.pause(),this.onStop(this)}stop(){this.playing=!1,this.frame=0,this.timer.pause(),this._displayImg(!0),this.onStop(this)}step(){this.onPlay(this),this.playing=!1,this.timer.step(),this._render(!0),this.onStop(this)}jumpTo(e){e<0?e=0:e>this._frames.length?e=this._frames.length-1:void 0!==e&&(this.frame=1*e),this._render(!0)}stepForwards(){this.backwards=!1,this.step()}stepBackwards(){this.backwards=!0,this.step()}reset(){return void 0!==this.ctx.reset&&(this.ctx.reset(),this.ctx.clear(),this.stop(),this.canvas.width=this.canvas.width),this}}class NDJPlayer{player;options;ui;constructor(e,t,s){const n=this;function o(e){return e.indexOf(".")>0||-1!==e.indexOf("/")}function i(e){return"."===e[0]||"#"===e[0]||null!==document.querySelector(e)}switch(arguments.length){case 2:"Object"===arguments[1].constructor.name&&(s=arguments[1],o(arguments[0])?t=null:(arguments[0]instanceof HTMLElement||i(arguments[0]))&&(t=arguments[0],e=null));break;case 1:switch(!0){case"Object"===arguments[0].constructor.name:s=arguments[0],e=null,t=null;break;case o(arguments[0]):e=arguments[0],t=null,s={};break;case arguments[0]instanceof HTMLElement||i(arguments[0]):t=arguments[0],e=null,s={};break;default:console.log("Unknown parameter was passed to NDJPlayer constructor."),e=null,t=null,s={}}break;case 0:s={}}n.options=Object.assign({controls:!1,resize:!0,onaction:(e,t,s)=>{},onplay:e=>{},onstop:e=>{}},s||{}),this._create(t),this.player=new NdJsonPlayer(e,t,n.options,{onstart:function(e){n._adjustSize(),void 0!==n.options.onstart&&n.options.onstart(e)},onload:function(e){void 0!==n.options.onload&&n.options.onload(e)},onrender:function(e){n._onUpdate(e),void 0!==n.options.onrender&&n.options.onrender(e)},onplay:function(e){n.ui.panel&&(n.ui.play.show=!1,n.ui.step.css.contains("disabled")||(n.ui.step.show=!1),n.ui.pause.show=!0),n.options.onplay(e)},onstop:function(e){n.ui.panel&&(n.ui.play.show=!0,n.ui.step.css.contains("disabled")||(n.ui.step.show=!0),n.ui.pause.show=!1),n.options.onstop(e)},onfinish:function(e){},onerror:function(e){console.log(e)}}),window.addEventListener("resize",(function(e){n._adjustSize()}),!0)}_onUpdate(e){const t=this;if(t.ui){if(t.ui.frames&&(t.ui.frames.text=t.player.currentFrame()+1+"/"+t.player.totalFrames()),t.ui.lapse){let s="";const n=t.player._startTimeStamp&&void 0!==e.ts,o=void 0!==e.t,i=t.player._totTime>0;e.d&&(s=e.d+" "),n?s+=t._formatMillis(e.ts-t.player._startTimeStamp):o&&(s+=e.t.indexOf(":")>0?e.t:t._fmtTime(e.t)),i&&(s+="/"+t.player.totalTime()),t.ui.lapse.text=s}t.ui.progress&&(t.ui.progress.value=(t.player.currentFrame()+1)/t.player.totalFrames()*100)}}_adjustSize(){if(this.options.resize){let e=this.player.wrapper,t=e.parent(),s=(this.options.height||this.player.canvas.height)/(this.options.width||this.player.canvas.width);this.player.canvas.height=t.clientHeight-(this.options.controls?e.querySelector(".panel").clientHeight:0),this.player.canvas.width=this.player.canvas.height/s}}_create(e){const t=this,s=m2d2.load();t.ui=s(e,t._getUI(e)),t.ui.panel&&["thumb","play","step","pause","stop","lapse","progress","frames","fullscreen"].forEach((e=>{t.ui[e]=t.ui.panel[e]}))}_getUI(e){const t=this;let s={html:e.innerHTML||""};if(t.options.controls&&(s=this._getBasicUI(),"full"===t.options.controls))s.panel.step.css.remove("disabled");this.options.controls;let n=e instanceof Node?e:document.querySelector(e);if(n){n.querySelector("canvas")||(s=Object.assign({canvas:""},s))}else console.log("Root element: "+e+" was not found in document"),s=Object.assign({canvas:""},s);return s}_getBasicUI(){const e=this;return document.addEventListener("fullscreenchange",(t=>{const s=e.player.wrapper;document.fullscreenElement?s.classList.add("fullscreen"):s.classList.remove("fullscreen")})),{caption:"",css:e.options.controls,panel:{tagName:"div",className:"panel",thumb:{tagName:"figure",className:"thumb",img:{src:""},caption:{tagName:"figCaption",className:"caption"}},rec:{tagName:"a",className:"rec",title:"Live",href:"#"},play:{tagName:"a",className:"play",title:"Play",href:"#",onclick:function(){return e.ui.onaction("play",e.player,e),e.player.play(),!1}},pause:{tagName:"a",className:"pause",title:"Pause",href:"#",onclick:function(){return e.ui.onaction("pause",e.player,e),e.player.pause(),!1}},step:{tagName:"a",css:["step","disabled"],title:"Step",href:"#",onclick:function(){return e.ui.onaction("step",e.player,e),e.player.step(),!1}},stop:{tagName:"a",className:"stop",title:"Stop",href:"#",onclick:function(){return e.ui.onaction("stop",e.player,e),e.player.stop(),!1}},lapse:{tagName:"label",className:"lapse",title:"Time elapsed / Time Total",text:"0:00"},live:{tagName:"label",className:"live",text:"Live Feed"},progress:{value:0,max:100,onmousemove:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.player.frameAt(e.player.indexAt(s));n?(e.ui.thumb.show=!0,e.ui.thumb.img.src=e.player.frameBase()+(n.th||n.f),e.ui.thumb.img.onload=function(){const t=e.ui.thumb.img.naturalWidth||e.ui.thumb.img.width;e.ui.thumb.style.width=t+"px"},void 0!==n.tc&&(e.ui.thumb.caption=n.tc),e.ui.thumb.style.left=this.offsetLeft+t.offsetX-e.ui.thumb.clientWidth/2+"px"):e.ui.thumb.show=!1},onmouseleave:function(){e.ui.thumb.show=!1},onclick:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.player.indexAt(s);e.player.jumpTo(n),e.ui.onaction("progress",e.player,e)}},frames:{tagName:"label",className:"frames",title:"Current Frame / Total Frames",text:"0"},fullscreen:{tagName:"a",className:"fullscreen",title:"Full Screen",href:"#",onclick:function(t){const s=e.player.wrapper;return s.classList.contains("fullscreen")?(e.ui.onaction("exit-fullscreen",e.player,e),document.exitFullscreen()):(e.ui.onaction("fullscreen",e.player,e),s.requestFullscreen()),!1}}},onaction:function(t,s,n){e.options.onaction(t,s,n)},onplay:function(t){e.options.onplay(t)},onstop:function(t){e.options.onstop(t,uiPlayer)}}}_fmtTime(e){let t=(e=e.toFixed(2)).split(".")[1]||"00";return(~~(e/60)+"").padStart(2,"0")+":"+(~~(e/60%1*60)+"").padStart(2,"0")+"."+t}_formatMillis(e){function t(e,t){return("00"+e).slice(-1*(t||2))}const s=Math.floor(e/1e3/60/60),n=Math.floor(60*(e/1e3/60/60-s)),o=Math.floor(60*(60*(e/1e3/60/60-s)-n)),i=parseInt(e%1e3/100);return t(s)+":"+t(n)+":"+t(o)+"."+t(i,3)}}function TimerSrc(e,t){let s,n,o,i,a={};a.interval=e,a.checker=50,a.status="init";let r=(new Date).getTime();return s=r-e,a.call=function(e){return t=e,a},a.nocall=function(){return t=null,a},a.exec=function(){return t&&t(),s=(new Date).getTime(),a},a.check=function(){return o&&o(),a},a.play=function(){return o=a.step,a.status="running",a},a.pause=function(){return o=null,a.status="paused",a},a.destroy=function(){for(var e in o=null,clearInterval(n),n=null,a)a[e]=null,delete a[e];a.status="destroyed"},a.step=function(){return r=(new Date).getTime(),i=Math.max(0,a.interval-(r-s)),0===i&&(i=a.interval,s=(new Date).getTime(),t&&t()),a},a.slow=function(){return a.interval=1e3,a},a.fast=function(){return a.interval=e,a},n=setInterval(a.check,a.checker),a}class VideoND extends HTMLElement{constructor(){super(),this._root=this;const e=this,t={autoplay:!1,controls:!1,loop:!1,live:!1,width:"auto",height:"auto",poster:"",preload:"auto",src:"",cc:"auto",caption:"",fullscreen:!1,fps:"",speed:!1,autosize:"auto",sizes:{}||[],thumbs:"auto"},s={};for(let e in t)s[e]=this.getAttribute(e)||this.hasAttribute(e)||t[e];s.onstart=function(t){e.onstart&&e.onstart(t)},s.onload=function(t){e.onload&&e.onload(t)},s.onrender=function(t){e.onrender&&e.onrender(t,n.wrapper,n,n.player.canvas,n.player.ctx)},this.style.display="block",this.className="ndjp";const n=new NDJPlayer(s.src,this,s)}setCaption(e){this._root.querySelector("caption").innerText=e}static get observedAttributes(){return["width","height","caption"]}attributeChangedCallback(e,t,s){"caption"===e&&this.setCaption(s)}}document.addEventListener("DOMContentLoaded",(function(){window.customElements.define("video-nd",VideoND)}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm0yZDIuYWxsLnNyYy5qcyIsIm5kanNvbi1wbGF5ZXIuc3JjLmpzIiwibmRqc29uLXVpLnNyYy5qcyIsInRpbWVyLnNyYy5qcyIsInZpZGVvLW5kLnNyYy5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJtMmQyIiwidGhpcyIsIlV0aWxzIiwiaXNTdHJpbmciLCJ2IiwiaXNCb29sIiwiYiIsImlzTnVtZXJpYyIsIm4iLCJpc05hTiIsInBhcnNlRmxvYXQiLCJpc0Zpbml0ZSIsImlzU2VsZWN0b3JJRCIsInMiLCJ0cmltIiwiaW5kZXhPZiIsImlzUGxhaW5PYmplY3QiLCJvIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaXNPYmplY3QiLCJvYSIsImlzQXJyYXkiLCJhIiwiQXJyYXkiLCJpc0Z1bmN0aW9uIiwiZiIsImlzRWxlbWVudCIsIkhUTUxFbGVtZW50IiwiaXNOb2RlIiwiTm9kZSIsIkRvY3VtZW50RnJhZ21lbnQiLCJpc0h0bWwiLCJpc0VtcHR5Iiwib2JqIiwidW5kZWZpbmVkIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImlzVmlzaWJsZSIsImVsZW0iLCJjb25zb2xlIiwibG9nIiwiZGlzcGxheSIsInN0eWxlIiwibm90SGlkZGVuIiwidmlzaWJpbGl0eSIsImluVmlldyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJsZWZ0IiwiYm90dG9tIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsInJpZ2h0IiwiaW5uZXJXaWR0aCIsImNsaWVudFdpZHRoIiwid2lkdGgiLCJoZWlnaHQiLCJjbGVhbkFycmF5IiwiZmlsdGVyIiwiZSIsImlzVmFsaWRFbGVtZW50IiwidGFnTmFtZSIsIiRub2RlIiwibmV3RWxlbWVudCIsImV4aXN0cyIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImdldEF0dHJPclByb3AiLCJrZXkiLCJ2YWx1ZSIsImhhc0F0dHJPclByb3AiLCJoYXNBdHRyIiwiZ2V0QXR0cmlidXRlIiwiaGFzUHJvcCIsImF0dHIiLCJ0eXBlIiwiaGFzQXR0cmlidXRlIiwicHJvcCIsImhhcyIsInNldFByb3BPckF0dHIiLCJpZ25vcmUiLCJzZXRBdHRyIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiZGVmaW5lUHJvcCIsImRlZiIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiaHRtbEVsZW1lbnQiLCJodG1sIiwidGVtcGxhdGUiLCJpbm5lckhUTUwiLCJjb250ZW50IiwiZmlyc3RDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJuZXdFbXB0eU5vZGUiLCJnZXRNZXRob2RzIiwiUmVmbGVjdCIsImdldFByb3RvdHlwZU9mIiwieCIsIm93bktleXMiLCJpdCIsImFwcGVuZEFsbENoaWxkIiwiJHNyY05vZGUiLCIkdGd0Tm9kZSIsImFwcGVuZCIsInByZXBlbmRBbGxDaGlsZCIsInByZXBlbmQiLCJfc3RvcmVkIiwiZXZlbnRzIiwiZGF0YXNldE5vZGVzIiwiZGF0YXNldHMiLCJzdHlsZU5vZGVzIiwic3R5bGVzIiwic3RhdGljIiwib2JqZWN0Iiwibm9kZSIsImluc3RhbmNlIiwiZ2V0UHJveHlOb2RlIiwib25yZWFkeSIsInV0aWxzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uY2UiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZm9yRWFjaCIsImkiLCJwdXNoIiwiayIsImNhbGxiYWNrIiwibWFpbiIsImV4dCIsImV4dGVuc2lvbnMiLCJhc3NpZ24iLCJleHREb20iLCIkcm9vdCIsImVycm9yIiwiX20yZDIiLCJoYXNPd25Qcm9wZXJ0eSIsImdldCIsImNoaWxkTm9kZXMiLCJpbm5lclRleHQiLCJ0ZXh0Q29udGVudCIsInNldCIsImZvdW5kIiwibm9kZVZhbHVlIiwiY3JlYXRlVGV4dE5vZGUiLCJjbGFzc0xpc3QiLCJjbGFzc05hbWUiLCJqb2luIiwiYyIsImFkZCIsInJlbW92ZSIsInNob3ciLCJjc3NEaXNwbGF5IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRlZmF1bHREaXNwbGF5IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0IiwiX20yZDJfZGlzcGxheSIsInJlbW92ZVByb3BlcnR5IiwiZGVmYXVsdFNob3ciLCJkYXRhc2V0Iiwib25zaG93Iiwic3RvcmVkIiwiZXh0ZW5kIiwibmV4dCIsIm5leHRFbGVtZW50U2libGluZyIsInByZXYiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwicGFyZW50IiwicGFyZW50RWxlbWVudCIsInNpYmxpbmciLCJzZWwiLCJmaW5kIiwiZmluZEFsbCIsIm5vZGVMaXN0IiwiZnJvbSIsImNoaWxkcmVuIiwicXVlcnlTZWxlY3RvckFsbCIsImluZGV4IiwicGFyZW50Tm9kZSIsIm9uaW5wdXQiLCJnZXREYXRhIiwiaW5jbHVkZU5vdFZpc2libGUiLCJkYXRhIiwiZmQiLCJGb3JtRGF0YSIsImluY2x1ZGUiLCJwYWlyIiwiZW50cmllcyIsImZpbGVzIiwiZG9Eb20iLCJ3YXJuIiwicGxhaW5Ub09iamVjdCIsImluY2x1ZGVzIiwib3JpZ1ZhbHVlIiwidXBkYXRlVmFsdWUiLCJpc1Byb3AiLCJmb3VuZE1hdGNoIiwiRGF0ZSIsIm9wdGlvbnMiLCJtYXRjaCIsImVsZW1zIiwiaXRlbXMiLCJpdGVtIiwicmVuZGVyIiwibGlua05vZGUiLCJvcHQiLCJvcHRfa2V5IiwiZG9JdGVtcyIsInJlbmRlckFuZExpbmsiLCJpc0Z1bmMiLCIkbmV3Tm9kZSIsImFwcGVuZEVsZW1lbnQiLCJ2YWxUbXAiLCJkdCIsImRkIiwidGV4dCIsImlkIiwidXBkYXRlcyIsIm9ubG9hZCIsIm5hdGl2ZSIsImlucHV0SW1hZ2UiLCJpc1VwZGF0ZUxpbmsiLCJpc0xpbmsiLCJ0d29BcmdzIiwiYWNjZXB0ZWRUeXBlIiwiRE9NU3RyaW5nTWFwIiwiQ1NTU3R5bGVEZWNsYXJhdGlvbiIsIm90aGVyVHlwZXMiLCJ0bXBWYWwiLCJuZXdWYWx1ZSIsInNyYyIsIiRjaGlsZCIsIiRwcm94eSIsInByb3h5IiwiJG5ld0VsZW0iLCJnZXRJdGVtIiwiJHRlbXBsYXRlIiwiZ2V0VGVtcGxhdGUiLCIkbmV3SXRlbSIsImNsb25lTm9kZSIsImFkZFRlbXBsYXRlc1RvSXRlbSIsInNldFVuaXF1ZUF0dHJpYiIsImdldEl0ZW1XaXRoRXZlbnRzIiwiX190ZW1wbGF0ZSIsInNjYW4iLCJyZXN1bHQiLCJ0cmVlIiwidmFsdWVzIiwidmFsIiwiJHRlbXAiLCJyZW1vdmVDaGlsZCIsImV4dGVuZEl0ZW1zIiwiX3RlbXBsYXRlIiwiJGh0bWxUZW1wbGF0ZSIsIndyYXAiLCJjaGlsZEVsZW1lbnRDb3VudCIsIiR3cmFwIiwiY2hpbGRyZW5FbGVtZW50Q291bnQiLCIkc3BhbiIsInByZXZTZWwiLCJfdGhpcyIsIm9udXBkYXRlIiwiZXYiLCJkZXRhaWwiLCJwcm9wZXJ0eSIsInN0YXJ0c1dpdGgiLCJzZXRTaG9ydFZhbHVlIiwic2hvcnQiLCJnZXRTaG9ydFZhbHVlIiwic2FtcGxlIiwiZm9yY2UiLCJfcHJveHkiLCJQcm94eSIsInRhcmdldCIsImJpbmQiLCJvbGRWYWx1ZSIsImNsZWFyIiwib25PYnNlcnZlIiwibXV0YXRpb25zTGlzdCIsIm9ic2VydmVyIiwibSIsInNwbGljZSIsInN0b3JlZEV2ZW50c1RpbWVvdXQiLCJhdHRyaWJ1dGVOYW1lIiwiYWRkZWROb2RlcyIsInJlbW92ZWROb2RlcyIsIm5vZGVOYW1lIiwib2JzZXJ2ZSIsIm11dGF0aW9uT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiYXR0cmlidXRlT2xkVmFsdWUiLCJ0b09ic2VydmUiLCJyZWF0dGFjaCIsIml0bSIsImRldGF0Y2hlZEl0ZW0iLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJvdG90eXBlIiwiY29uY2F0IiwibWV0aG9kIiwiZnVuYyIsImFyZ3MiLCJyZXRPYmoiLCJzb21lIiwic2FtZUlkIiwiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRnVuYyIsInNvcnQiLCJsb2NhbGVDb21wYXJlIiwiYXJyTWV0aG9kIiwiYXJyRnVuYyIsInByb3hpZXMiLCJqIiwibG9hZCIsIiQiLCJjbG9zZSIsImFmdGVyQ2xvc2UiLCJjc3MiLCJmYUljb25zIiwicXVlc3Rpb24iLCJpbmZvIiwib2siLCJpbnB1dCIsIndhaXQiLCJtYXRlcmlhbCIsImRlZmF1bHRDc3MiLCJtZXNzYWdlIiwibWVzc2FnZUljb25zIiwibTJkMkFsZXJ0IiwiYmFjayIsInBvc2l0aW9uIiwiYmFja2dyb3VuZENvbG9yIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwiZnJvbnQiLCJpY29uIiwiekluZGV4Iiwic3BhbiIsInRpdGxlIiwic3VibXNnIiwiZmllbGRzZXQiLCJyZXBsYWNlIiwiZm9jdXMiLCJvbnN1Ym1pdCIsImJ1dHRvbiIsIm9iIiwibmV3QnV0dG9ucyIsImJ1dHRvbnMiLCJ0b0xvd2VyQ2FzZSIsImRpY3QiLCJhdXRvZm9jdXMiLCJmb3JtTm9WYWxpZGF0ZSIsIm9uY2xpY2siLCJjbG9zZXN0IiwiaGlkZSIsImFsZXJ0Iiwic3VjY2VzcyIsImZhaWx1cmUiLCJjb25maXJtIiwicHJvbXB0IiwiY2xvc2VBbGwiLCJsYW5ndWFnZSIsImxvY2FsU3RvcmFnZSIsIm5hdmlnYXRvciIsImxhbmciLCJrZXl3b3JkIiwidmFycyIsIm1zZyIsInBhaXJzIiwic3BsaXQiLCJwIiwicGFydCIsImt3ZCIsImRpY3Rpb25hcnkiLCJyZXBvcnQiLCJ0cmFuc2xhdGlvbiIsImJhc2VMYW5nIiwibGFuZ0V2ZW50cyIsIm5ld0xhbmciLCJzZXRJdGVtIiwidHh0IiwiY29udGFpbnMiLCJrdyIsImdldEtleXdvcmQiLCJ0aXRsZUt3IiwicGxhY2Vob2xkZXIiLCJyZWFkeSIsIm1hbnVhbExhbmciLCJib2R5TGFuZyIsImh0bWxMYW5nIiwiU3RvcmFnZSIsInN0b3JlIiwic2Vzc2lvblN0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJkZWwiLCJyZW1vdmVJdGVtIiwidG1wIiwic2hpZnQiLCJsb2NhbCIsInNlc3Npb24iLCJnZXRSZXNwb25zZSIsInJlc3BvbnNlIiwicm93IiwiZmlsZSIsIkZpbGVVcGxvYWQiLCJmaWVsZE5hbWUiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInVwbG9hZCIsImxlbmd0aENvbXB1dGFibGUiLCJvbmVCeU9uZSIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJsb2FkZWQiLCJ0b3RhbCIsIm9uVXBkYXRlIiwic2l6ZUFjY3VtIiwic2l6ZSIsInJlc3BvbnNlVGV4dCIsInJlYXNvbiIsImVyciIsInN0YXR1cyIsIm9uUmVzcG9uc2UiLCJvbkVycm9yIiwib3BlbiIsImZpbGwiLCJmb3JtIiwiZ2V0RmlsZUZvcm0iLCJsb2FkSW5kZXgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiZXZ0Iiwic2VuZCIsInJlYWRBc0JpbmFyeVN0cmluZyIsIm9wdHMiLCJhY2NlcHQiLCJwYXJhbGxlbCIsImZpZWxkIiwibXVsdGlwbGUiLCJtYXhGaWxlcyIsIm1heFNpemVNYiIsImVsIiwiX3Byb3RlY3RlZF9yZWZlcmVuY2UiLCJvbkRvbmUiLCJhbGxEb25lIiwicGN0IiwicmVzIiwib25TZWxlY3QiLCJzcmNzIiwidG90U2l6ZSIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm1icyIsImNlaWwiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZpbGVEb25lIiwidGhlbiIsImNsaWNrIiwid3MiLCJyZXF1ZXN0Iiwid2ViU29ja2V0Iiwib25lcnJvciIsImdldFNvY2tldCIsIm9uTWVzc2FnZSIsIm9uT3BlbiIsIm9uQ2xvc2UiLCJXZWJTb2NrZXQiLCJwYXRoIiwib25vcGVuIiwib25jbG9zZSIsIm9ubWVzc2FnZSIsIndzayIsInJlYWR5U3RhdGUiLCJjb25uZWN0IiwiaW5pdFJlcXVlc3QiLCJvbkNvbm5lY3QiLCJjb25uZWN0ZWQiLCJvbkRpc2Nvbm5lY3QiLCJkaXNjb25uZWN0ZWQiLCJyZWNvbm5lY3QiLCJob3N0IiwibG9jYXRpb24iLCJob3N0bmFtZSIsInNlY3VyZSIsInBvcnQiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImRpc2Nvbm5lY3QiLCJYSFIiLCJ1cmwiLCJlcnJvcl9jYWxsYmFjayIsImpzb24iLCJ0b1VwcGVyQ2FzZSIsIm1hcCIsInNldFJlcXVlc3RIZWFkZXIiLCJhcmd1bWVudHMiLCJOZEpzb25QbGF5ZXIiLCJmcHMiLCJsb29wIiwic2hvd2ZpcnN0IiwiYXV0b3BsYXkiLCJsaXZlIiwicGxheWluZyIsImJhY2t3YXJkcyIsInN0YXJ0ZWQiLCJvblN0YXJ0Iiwib25Mb2FkIiwib25SZW5kZXIiLCJvblBsYXkiLCJvblN0b3AiLCJvbkZpbmlzaCIsIndyYXBwZXIiLCJjYW52YXMiLCJjdHgiLCJ0aW1lciIsImZyYW1lIiwibXVsdGlwbGllciIsIl9udW1GcmFtZXMiLCJfdG90VGltZSIsIl9mcmFtZXMiLCJfZnJhbWVCYXNlIiwiX3RodW1iQmFzZSIsIl9zdGFydFRpbWVTdGFtcCIsImVsZW1lbnQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJub0V2ZW50Iiwib25zdGFydCIsIm9ucmVuZGVyIiwib25wbGF5Iiwib25zdG9wIiwib25maW5pc2giLCJwbGF5ZXIiLCJpbnNlcnRCZWZvcmUiLCJoYXNDaGlsZE5vZGVzIiwiZ2V0Q29udGV4dCIsIlRpbWVyU3JjIiwiZmV0Y2giLCJyZWxvYWQiLCJwbGF5IiwiX3Jlc2V0IiwibmV3U3JjIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiYnVmZmVyIiwicmVzcCIsImJvZHkiLCJnZXRSZWFkZXIiLCJyZWFkIiwicHJvY2VzcyIsImRvbmUiLCJsYXN0IiwicHJvY2Vzc0ZyYW1lIiwibGluZXMiLCJkZWNvZGUiLCJzdHJlYW0iLCJwb3AiLCJjYXRjaCIsImZyYW1lcyIsImZzIiwidW5zaGlmdCIsInciLCJoIiwiZmIiLCJ0aGIiLCJ0ZiIsInR0IiwidHMiLCJzdGVwIiwiX3JlbmRlciIsIl9kaXNwbGF5SW1nIiwiY2FsbCIsIl9pbmNyZW1lbnQiLCJub2NhbGwiLCJfaW1hZ2UiLCJwYXVzZSIsInRvdGFsRnJhbWVzIiwiX2RyYXciLCJpbWciLCJjbGVhclJlY3QiLCJkcmF3SW1hZ2UiLCJpbWFnZSIsIkltYWdlIiwiY3Jvc3NPcmlnaW4iLCJkcmF3biIsImZyYW1lQmFzZSIsImN1cnJlbnRGcmFtZSIsInRvdGFsVGltZSIsImZyYW1lQXQiLCJpbmRleEF0IiwicGxheWVyTm9kZSIsInN0YXJ0RnJhbWUiLCJwbGF5Rm9yd2FyZCIsInBsYXlCYWNrd2FyZHMiLCJzdG9wIiwianVtcFRvIiwic3RlcEZvcndhcmRzIiwic3RlcEJhY2t3YXJkcyIsInJlc2V0IiwiTkRKUGxheWVyIiwidWkiLCJpc01lZGlhIiwic3RyIiwiaXNTZWxlY3RvciIsImNvbnRyb2xzIiwicmVzaXplIiwib25hY3Rpb24iLCJhY3Rpb24iLCJuZGpQbGF5ZXIiLCJ1aVBsYXllciIsIl9jcmVhdGUiLCJfYWRqdXN0U2l6ZSIsIl9vblVwZGF0ZSIsInBhbmVsIiwiZXZlbnQiLCJsYXBzZSIsImQiLCJfZm9ybWF0TWlsbGlzIiwiX2ZtdFRpbWUiLCJwcm9ncmVzcyIsInJhdGlvVyIsIl9nZXRVSSIsIl9nZXRCYXNpY1VJIiwiZnVsbHNjcmVlbkVsZW1lbnQiLCJjYXB0aW9uIiwidGh1bWIiLCJyZWMiLCJocmVmIiwibWF4Iiwib25tb3VzZW1vdmUiLCJvZmZzZXRXaWR0aCIsInRoIiwibmF0dXJhbFdpZHRoIiwidGMiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0WCIsIm9ubW91c2VsZWF2ZSIsImZ1bGxzY3JlZW4iLCJleGl0RnVsbHNjcmVlbiIsInJlcXVlc3RGdWxsc2NyZWVuIiwidGltZSIsImRlY2ltYWwiLCJ0b0ZpeGVkIiwicGFkU3RhcnQiLCJtaWxsaXMiLCJwYWQiLCJudW0iLCJkaWdpdHMiLCJzbGljZSIsImZsb29yIiwibXMiLCJwYXJzZUludCIsIm9yaWdpbmFsX21zIiwic3RhcnRUaW1lIiwiY2hlY2tlciIsIm5vd1RpbWUiLCJnZXRUaW1lIiwiZXhlYyIsImNoZWNrIiwiZGVzdHJveSIsInNsb3ciLCJmYXN0IiwiVmlkZW9ORCIsInN1cGVyIiwiX3Jvb3QiLCJkZWZhdWx0T3B0aW9ucyIsInBvc3RlciIsInByZWxvYWQiLCJjYyIsInNwZWVkIiwiYXV0b3NpemUiLCJzaXplcyIsInRodW1icyIsInNldENhcHRpb24iLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siLCJjdXN0b21FbGVtZW50cyJdLCJtYXBwaW5ncyI6IkNBUUEsU0FBQUEsRUFBQUMsR0FDQSxtQkFBQUMsUUFBQUEsT0FBQUMsSUFDQUQsT0FBQSxHQUFBRCxHQUNBLGlCQUFBRyxRQUNBQyxPQUFBRCxRQUFBSCxJQUVBRCxFQUFBTSxLQUFBTCxJQU5BLENBUUFNLE1BQUEsV0FFQSxhQXVDQSxNQUFBQyxFQU1BQyxTQUFBQyxHQUNBLE1BQUEsaUJBQUFBLEVBT0FDLE9BQUFDLEdBQ0EsTUFBQSxrQkFBQUEsRUFPQUMsVUFBQUMsR0FDQSxPQUFBQyxNQUFBQyxXQUFBRixLQUFBRyxTQUFBSCxHQU9BSSxhQUFBQyxHQUNBLE9BQUEsS0FBQUEsRUFBQSxJQUFBQyxPQUFBQyxRQUFBLEtBT0FDLGNBQUFDLEdBQ0EsTUFBQSxXQUFBQSxFQUFBQyxZQUFBQyxLQU9BQyxTQUFBQyxHQUNBLE1BQUEsaUJBQUFBLEVBT0FDLFFBQUFDLEdBQ0EsT0FBQUMsTUFBQUYsUUFBQUMsR0FPQUUsV0FBQUMsR0FDQSxNQUFBLG1CQUFBQSxFQU9BQyxVQUFBbkIsR0FDQSxPQUFBQSxhQUFBb0IsWUFRQUMsT0FBQXJCLEdBQ0EsT0FBQUEsYUFBQXNCLE1BQUF0QixhQUFBdUIsaUJBT0FDLE9BQUFuQixHQUNBLE9BQUEsS0FBQUEsRUFBQSxJQUFBQyxPQUFBQyxRQUFBLEtBT0FrQixRQUFBQyxHQUNBLFlBQUFDLElBQUFELEdBQUFqQyxLQUFBbUIsU0FBQWMsSUFBQSxJQUFBRSxPQUFBQyxLQUFBSCxH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QUE4RixFQUFBbEcsUUFBQWtHLEVBQUFBLEVBQUE1RSxPQUFBckIsT0FBQWlHLEVBQUE1RSxPQUFBcEIsTUFJQS9nQixLQUFBMkMsTUFBQUQsUUFBQSxRQUNBMUMsS0FBQTJKLFVBQUEsT0FDQSxNQUFBb2QsRUFBQSxJQUFBVCxVQUFBdFosRUFBQWdDLElBQUFoUCxLQUFBZ04sR0FHQWdlLFdBQUFqRCxHQUNBL25CLEtBQUF1cUIsTUFBQWhtQixjQUFBLFdBQUE2RSxVQUFBMmUsRUFHQWtELGdDQUNBLE1BQUEsQ0FBQSxRQUFBLFNBQUEsV0FHQUMseUJBQUFocUIsRUFBQTJRLEVBQUE5QyxHQUNBLFlBQUE3TixHQUNBbEIsS0FBQWdyQixXQUFBamMsSUFJQXpMLFNBQUF5RSxpQkFBQSxvQkFBQSxXQUNBM0UsT0FBQStuQixlQUFBeHJCLE9BQUEsV0FBQTBxQiIsImZpbGUiOiJuZGpzb24tcGxheWVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXV0aG9yIDogQS5MZXBlIChkZXZAYWxlcGUuY29tKSAtIGludGVsbGlzcmMuY29tXG4gKiBMaWNlbnNlOiBNSVRcbiAqIFZlcnNpb246IDIuMS4xXG4gKiBVcGRhdGVkOiAyMDIyLTAyLTI0XG4gKiBDb250ZW50OiBGdWxsIEJ1bmRsZSAoRGVidWcpXG4gKi9cblxuOyhmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIHJvb3QubTJkMiA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpIHtcbi8vIC0tLS0tLS0gRnVuY3Rpb25zIC0tLS0tLS1cblwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBGdW5jdGlvbnMgdXNlZnVsIHRvIHdvcmsgd2l0aCBKYXZhc2NyaXB0IGRhdGEgYW5kIERPTVxuICogVXNlZCBtYWlubHkgaW4gTTJEMiBjb3JlIGxpYnJhcnkgYnV0IGV4cG9zZWQgdG8gdGhlXG4gKiBjb25zdW1lci5cbiAqIEBBdXRob3I6IEEuTGVwZSA8ZGV2QGFsZXBlLmNvbT5cbiAqXG4gKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAqICQuaXNTdHJpbmdcbiAqICQuaXNCb29sXG4gKiAkLmlzTnVtZXJpY1xuICogJC5pc1NlbGVjdG9ySURcbiAqICQuaXNQbGFpbk9iamVjdFxuICogJC5pc09iamVjdFxuICogJC5pc0FycmF5XG4gKiAkLmlzRnVuY3Rpb25cbiAqICQuaXNFbGVtZW50XG4gKiAkLmlzTm9kZVxuICogJC5pc0h0bWxcbiAqICQuaXNFbXB0eVxuICogJC5pc1Zpc2libGVcbiAqICQuaW5WaWV3XG4gKiAkLmNsZWFuQXJyYXlcbiAqICQuaXNWYWxpZEVsZW1lbnRcbiAqICQuZXhpc3RzXG4gKiAkLmdldEF0dHJPclByb3BcbiAqICQuaGFzQXR0ck9yUHJvcFxuICogJC5oYXNBdHRyXG4gKiAkLmhhc1Byb3BcbiAqICQuc2V0UHJvcE9yQXR0clxuICogJC5zZXRBdHRyXG4gKiAkLmRlZmluZVByb3BcbiAqICQuaHRtbEVsZW1lbnRcbiAqICQubmV3RWxlbWVudFxuICogJC5uZXdFbXB0eU5vZGVcbiAqICQuZ2V0TWV0aG9kc1xuICogJC5hcHBlbmRBbGxDaGlsZFxuICogJC5wcmVwZW5kQWxsQ2hpbGRcbiAqL1xuY2xhc3MgVXRpbHMge1xuXHQvKipcblx0ICogUmV0dXJuIHRydWUgaWYgdmFyaWFibGUgaXMgc3RyaW5nXG5cdCAqIEBwYXJhbSB7Kn0gdlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNTdHJpbmcodikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdzdHJpbmcnO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm4gdHJ1ZSBpZiB2YXJpYWJsZSBpcyBhIGJvb2xlYW5cblx0ICogQHBhcmFtIHsqfSBiXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc0Jvb2woYikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGIgPT09ICdib29sZWFuJztcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJuIHRydWUgaWYgdmFyaWFibGUgaXMgYSBudW1iZXJcblx0ICogQHBhcmFtIHsqfSBuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc051bWVyaWMobikge1xuICAgICAgICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQobikpICYmIGlzRmluaXRlKG4pO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm4gdHJ1ZSBpZiBzZWxlY3RvciB1cyBhbiBpZCBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc1xuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNTZWxlY3RvcklEKHMpIHtcbiAgICAgICAgcmV0dXJuIChzICsgXCJcIikudHJpbSgpLmluZGV4T2YoXCIjXCIpID09PSAwO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgXCJwbGFpblwiIG9iamVjdCAobm90IGFuIGFycmF5KVxuXHQgKiBAcGFyYW0gb1xuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNQbGFpbk9iamVjdChvKSB7XG4gICAgICAgIHJldHVybiBvLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiT2JqZWN0XCI7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB2YXJpYWJsZSBpcyBhbiBvYmplY3QgKGFueSBraW5kLCBlLmcuIEFycmF5KVxuXHQgKiBAcGFyYW0geyp9IG9hXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc09iamVjdChvYSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9hID09PSAnb2JqZWN0JztcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhbiBhcnJheVxuXHQgKiBAcGFyYW0ge29iamVjdH0gYVxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNBcnJheShhKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGEpO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgZnVuY3Rpb25cblx0ICogQHBhcmFtIHtvYmplY3R9IGZcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzRnVuY3Rpb24oZikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGYgPT09ICdmdW5jdGlvbic7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYW4gSFRNTEVsZW1lbnRcblx0ICogQHBhcmFtIHtvYmplY3R9IG5cblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzRWxlbWVudChuKSB7XG4gICAgICAgIHJldHVybiBuIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG4gICAgfTtcblxuXHQvKipcblx0ICogUmV0dXJuIHRydWUgaWYgb2JqZWN0IGlzIGEgTm9kZSBvciBEb2N1bWVudEZyYWdtZW50XG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc05vZGUobikge1xuICAgIFx0cmV0dXJuIChuIGluc3RhbmNlb2YgTm9kZSB8fCBuIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCk7XG5cdH1cblx0LyoqXG5cdCAqIFJldHVybiB0cnVlIGlmIHN0cmluZyBzZWVtcyB0byBiZSBhbiBIVE1MIGNvZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHNcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzSHRtbChzKSB7XG4gICAgICAgIHJldHVybiAocyArIFwiXCIpLnRyaW0oKS5pbmRleE9mKFwiPFwiKSAhPT0gLTE7XG4gICAgfTtcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhbiBvYmplY3QgaXMgZW1wdHlcblx0ICogQHBhcmFtIHtvYmplY3R9IG9ialxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNFbXB0eShvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkIHx8ICh0aGlzLmlzT2JqZWN0KG9iaikgJiYgT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDApIHx8IG9iaiA9PT0gXCJcIjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhbiBlbGVtZW50IGlzIHZpc2libGVcbiAgICAgKiBAcGFyYW0ge0h0bWxFbGVtZW50fVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzVmlzaWJsZShlbGVtKSB7XG4gICAgICAgIGlmKCEgdGhpcy5pc0VsZW1lbnQoZWxlbSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiKGlzVmlzaWJsZSkgTm90IGFuIGVsZW1lbnQ6IFwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVsZW0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXkgIT09IFwibm9uZVwiO1xuICAgICAgICBjb25zdCBub3RIaWRkZW4gPSBlbGVtLnN0eWxlLnZpc2liaWxpdHkgIT09IFwiaGlkZGVuXCI7XG4gICAgICAgIHJldHVybiBkaXNwbGF5ICYmIG5vdEhpZGRlbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBlbGVtZW50IGlzIGluIHZpZXdcbiAgICAgKiBAcGFyYW0ge0h0bWxFbGVtZW50fVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGluVmlldyhlbGVtKSB7XG4gICAgICAgIGNvbnN0IHJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4gcmVjdC50b3AgPj0gMCAmJiByZWN0LmxlZnQgPj0gMCAmJlxuICAgICAgICAgICAgICAgcmVjdC5ib3R0b20gPD0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSAmJlxuICAgICAgICAgICAgICAgcmVjdC5yaWdodCA8PSAod2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSAmJlxuICAgICAgICAgICAgICAgcmVjdC53aWR0aCA+IDAgJiYgcmVjdC5oZWlnaHQgPiAwXG4gICAgfVxuXHQvKipcblx0ICogUmVtb3ZlIG51bGwsIGVtcHR5IG9yIHVuZGVmaW5lZCB2YWx1ZXMgZnJvbSBhbiBhcnJheVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhXG5cdCAqIEByZXR1cm5zIHtBcnJheX1cblx0ICovXG4gICAgY2xlYW5BcnJheShhKSB7XG4gICAgICAgIHJldHVybiBhLmZpbHRlcihmdW5jdGlvbihlKXsgcmV0dXJuIGUgPT09IDAgfHwgZSB9KTtcbiAgICB9O1xuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgdGFnIG5hbWUgaXMgYSB2YWxpZCBIVE1MIGVsZW1lbnRcblx0ICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzVmFsaWRFbGVtZW50KHRhZ05hbWUpIHtcbiAgICAgICAgY29uc3QgJG5vZGUgPSB0aGlzLm5ld0VsZW1lbnQodGFnTmFtZSk7XG4gICAgICAgIHJldHVybiB0YWdOYW1lICE9PSBcInRlbXBsYXRlXCIgJiYgJG5vZGUuY29uc3RydWN0b3IubmFtZSAhPT0gXCJIVE1MVW5rbm93bkVsZW1lbnRcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGVsZW1lbnQgZXhpc3RzIGluIERPTSBiYXNlZCBvbiBzZWxlY3RvclxuICAgICAqL1xuICAgIGV4aXN0cyhzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgIT09IG51bGw7XG4gICAgfVxuXHQvKipcblx0ICogR2V0IGF0dHJpYnV0ZSBvciBwcm9wZXJ0eVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqIEByZXR1cm5zIHsqfVxuXHQgKi9cblx0Z2V0QXR0ck9yUHJvcCAoJG5vZGUsIGtleSkge1xuXHRcdGxldCB2YWx1ZSA9IFwiXCI7XG5cdFx0aWYodGhpcy5oYXNBdHRyT3JQcm9wKCRub2RlLCAga2V5KSkge1xuXHRcdFx0dmFsdWUgPSB0aGlzLmhhc0F0dHIoJG5vZGUsIGtleSkgPyAkbm9kZS5nZXRBdHRyaWJ1dGUoa2V5KTogJG5vZGVba2V5XTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlXG5cdH1cblx0LyoqXG5cdCAqIElmIGEgbm9kZSBjb250YWlucyBlaXRoZXIgYSBwcm9wZXJ0eSBvciBhbiBhdHRyaWJ1dGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcmV0dXJuIHtib29sZWFufVxuXHQgKi9cblx0aGFzQXR0ck9yUHJvcCAoJG5vZGUsIGtleSkge1xuXHRcdHJldHVybiB0aGlzLmhhc0F0dHIoJG5vZGUsIGtleSkgfHwgdGhpcy5oYXNQcm9wKCRub2RlLCBrZXkpO1xuXHR9XG5cdC8qKlxuXHQgKiBJZiBhIG5vZGUgaGFzIGFuIGF0dHJpYnV0ZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gYXR0clxuXHQgKiBAcmV0dXJuIHtib29sZWFufVxuXHQgKi9cblx0aGFzQXR0ciAoJG5vZGUsIGF0dHIpIHtcblx0XHRsZXQgaGFzQXR0ciA9IGZhbHNlO1xuXHRcdGlmKCRub2RlICYmICF0aGlzLmlzTnVtZXJpYyhhdHRyKSkge1xuXHRcdFx0c3dpdGNoKGF0dHIpIHtcblx0XHRcdFx0Y2FzZSBcImNoZWNrZWRcIjpcblx0XHRcdFx0XHRoYXNBdHRyID0gKCRub2RlLnR5cGUgIT09IHVuZGVmaW5lZCAmJiAoJG5vZGUudHlwZSA9PT0gXCJyYWRpb1wiIHx8ICRub2RlLnR5cGUgPT09IFwiY2hlY2tib3hcIikpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGhhc0F0dHIgPSAkbm9kZS5oYXNBdHRyaWJ1dGUgIT09IHVuZGVmaW5lZCA/ICRub2RlLmhhc0F0dHJpYnV0ZShhdHRyKSA6IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gaGFzQXR0cjtcblx0fVxuXHQvKipcblx0ICogSWYgYSBub2RlIGhhcyBhIHByb3BlcnR5IHdoaWNoIGlzIG5vdCBhbiBhdHRyaWJ1dGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHByb3Bcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuXHRoYXNQcm9wICgkbm9kZSwgcHJvcCkge1xuXHRcdGxldCBoYXNQcm9wID0gZmFsc2U7XG5cdFx0aWYoJG5vZGUgJiYgIXRoaXMuaXNOdW1lcmljKHByb3ApKSB7XG5cdFx0ICAgIGxldCBoYXMgPSAkbm9kZVtwcm9wXSAhPT0gdW5kZWZpbmVkO1xuXHRcdCAgICBpZihoYXMgJiYgJG5vZGVbcHJvcF0gPT09IG51bGwgJiYgcHJvcCA9PT0gXCJ2YWx1ZVwiKSB7XG5cdFx0XHRcdGhhcyA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aGFzUHJvcCA9IChoYXMgJiYhICgkbm9kZVtwcm9wXSBpbnN0YW5jZW9mIE5vZGUpKSAmJiEgJG5vZGUuaGFzQXR0cmlidXRlKHByb3ApO1xuXHRcdH1cblx0XHRyZXR1cm4gaGFzUHJvcDtcblx0fVxuXG5cdC8qKlxuXHQgKiBTZXQgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgd2hpY2ggaXMgdHJ1ZS9mYWxzZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdHNldFByb3BPckF0dHIgKCRub2RlLCBrZXksIHZhbHVlKSB7XG5cdCAgICBpZih0aGlzLmhhc1Byb3AoJG5vZGUsIGtleSkpIHtcblx0ICAgIFx0dHJ5IHtcblx0XHRcdFx0JG5vZGVba2V5XSA9IHZhbHVlO1xuXHRcdFx0fSBjYXRjaChpZ25vcmUpIHsgLy9JZiBmYWlscywgc2V0IGl0IGFzIGF0dHJpYnV0ZTogKGUuZy4gaW5wdXQubGlzdClcblx0XHRcdFx0dGhpcy5zZXRBdHRyKCRub2RlLCBrZXksIHZhbHVlKTtcblx0XHRcdH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyKCRub2RlLCBrZXksIHZhbHVlKTtcbiAgICBcdH1cblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0IGF0dHJpYnV0ZSB0byBub2RlLiBJZiB2YWx1ZSBpcyBmYWxzZSwgd2lsbCByZW1vdmUgaXQuXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqL1xuXHRzZXRBdHRyICgkbm9kZSwga2V5LCB2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSkge1xuICAgICAgICAgICAgJG5vZGUuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGUucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgIH1cblx0fVxuXHQvKipcblx0ICogRGVmaW5lIGEgcHJvcGVydHkgdG8gYW4gb2JqZWN0XG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHByb3Bcblx0ICogQHBhcmFtIHtzdHJpbmd9IGRlZlxuXHQgKi9cblx0ZGVmaW5lUHJvcCAob2JqLCBwcm9wLCBkZWYpIHtcblx0XHRpZih0aGlzLmlzT2JqZWN0KG9iaikpIHtcblx0XHRcdGlmKG9ialtwcm9wXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIHtcblx0XHRcdFx0XHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0XHRcdFx0XHR3cml0YWJsZTogdHJ1ZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0b2JqW3Byb3BdID0gZGVmO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHQvKipcblx0ICogQ3JlYXRlcyBhIE5vZGUgdXNpbmcgSFRNTCBjb2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBodG1sXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cblx0ICovXG5cdGh0bWxFbGVtZW50KGh0bWwpIHtcblx0XHQvL3JldHVybiBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTsgRklYTUVcblx0XHRjb25zdCB0ZW1wbGF0ZSA9IHRoaXMubmV3RWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sLnRyaW0oKTtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RDaGlsZDtcblx0fTtcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBOb2RlIHdpdGggYSB0YWcgbmFtZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG5cdCAqL1xuXHRuZXdFbGVtZW50KHRhZ05hbWUpIHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcblx0fTtcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gZW1wdHkgbm9kZSAoRG9jdW1lbnRGcmFnbWVudClcblx0ICogQHJldHVybnMge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRuZXdFbXB0eU5vZGUoKSB7XG5cdFx0cmV0dXJuIG5ldyBEb2N1bWVudEZyYWdtZW50KClcblx0fVxuXHQvKipcblx0ICogR2V0IGFsbCBtZXRob2RzIG9mIGNsYXNzIG9iamVjdFxuXHQgKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjcyNjAxMzEvMTk2NTA3XG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBvYmpcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKi9cblx0Z2V0TWV0aG9kcyhvYmopIHtcblx0XHRjb25zdCBvID0gUmVmbGVjdC5nZXRQcm90b3R5cGVPZihvYmopO1xuXHRcdGNvbnN0IHggPSBSZWZsZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuXHRcdHJldHVybiBSZWZsZWN0Lm93bktleXMobykuZmlsdGVyKGl0ID0+IFJlZmxlY3Qub3duS2V5cyh4KS5pbmRleE9mKGl0KSA8IDApO1xuXHR9O1xuXHQvKipcblx0ICogQXBwZW5kIGFsbCBjaGlsZCBmcm9tIG9uZSBub2RlIHRvIGFub3RoZXJcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJHNyY05vZGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJHRndE5vZGVcblx0ICovXG5cdGFwcGVuZEFsbENoaWxkKCRzcmNOb2RlLCAkdGd0Tm9kZSkge1xuXHRcdC8vVXBkYXRlIGFsbCBhdCBvbmNlXG5cdFx0Ly8kbm9kZS5hcHBlbmQoLi4uJG91dEVsZW0uY2hpbGROb2Rlcyk7IC8vPC0tIHdvcmtzIGJ1dCBpdCBpcyBzbG93ZXJcblx0XHR3aGlsZSAoJHNyY05vZGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0JHRndE5vZGUuYXBwZW5kKCRzcmNOb2RlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0fVxuXHQvKipcblx0ICogUHJlcGVuZCBhbGwgY2hpbGQgZnJvbSBvbmUgbm9kZSB0byBhbm90aGVyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRzcmNOb2RlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICR0Z3ROb2RlXG5cdCAqL1xuXHRwcmVwZW5kQWxsQ2hpbGQoJHNyY05vZGUsICR0Z3ROb2RlKSB7XG5cdFx0Ly9VcGRhdGUgYWxsIGF0IG9uY2Vcblx0XHQvLyRub2RlLmFwcGVuZCguLi4kb3V0RWxlbS5jaGlsZE5vZGVzKTsgLy88LS0gd29ya3MgYnV0IGl0IGlzIHNsb3dlclxuXHRcdHdoaWxlICgkc3JjTm9kZS5maXJzdENoaWxkKSB7XG5cdFx0XHQkdGd0Tm9kZS5wcmVwZW5kKCRzcmNOb2RlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEBhdXRob3I6IEEuIExlcGVcbiAqIEB1cmwgOiBodHRwczovL2dpdGxhYi5jb20vaW50ZWxsaXNyYy9tMmQyL1xuICogQHNpbmNlOiBNYXksIDIwMThcbiAqIEB2ZXJzaW9uOiAyLjAuMFxuICogQHVwZGF0ZWQ6IDIwMjEtMDQtMTZcbiAqXG4gKlxuICogTTJEMiBDbGFzc1xuICovXG5jbGFzcyBtMmQyIHtcbiAgICAndXNlIHN0cmljdCc7XG5cdF9zdG9yZWQgPSB7XG5cdFx0ZXZlbnRzIDogW10sXG5cdFx0ZGF0YXNldE5vZGVzIDogW10sXG5cdFx0ZGF0YXNldHMgOiBbXSxcblx0XHRzdHlsZU5vZGVzIDogW10sXG5cdFx0c3R5bGVzIDogW11cblx0fVxuXHRzdGF0aWMgc3RvcmVkRXZlbnRzVGltZW91dCA9IDUwOyAvL21zIHRvIGdyb3VwIHNhbWUgZXZlbnRzXG5cdHN0YXRpYyBzaG9ydCA9IHRydWU7IC8vRW5hYmxlIHNob3J0IGFzc2lnbmF0aW9uIChmYWxzZSA9IGJldHRlciBwZXJmb3JtYW5jZSkgVE9ETzogZG9jdW1lbnQgKHVzZSBQcm94eSBsaWtlOiBvYmouYSA9IFwidGV4dFwiKVxuXHRzdGF0aWMgdXBkYXRlcyA9IHRydWU7IC8vRW5hYmxlIFwib251cGRhdGVcIiAoZmFsc2UgPSBiZXR0ZXIgcGVyZm9ybWFuY2UpIFRPRE86IGRvY3VtZW50ICh1c2UgTXV0YXRpb25PYnNlcnZlcilcblx0c3RhdGljIHV0aWxzID0gbmV3IFV0aWxzKCk7XG5cblx0Y29uc3RydWN0b3IoKSB7fVxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU1RBVElDIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdHN0YXRpYyBpbnN0YW5jZSA9IG5ldyBtMmQyKCk7XG5cdHN0YXRpYyBleHRlbnNpb25zID0ge307IC8vIEFkZGl0aW9uYWwgcHJvcGVydGllcyBmb3IgRE9NXG5cdHN0YXRpYyBtYWluID0gKCgpID0+IHtcblx0XHRjb25zdCBmID0gKHNlbGVjdG9yLCBvYmplY3QpID0+IHtcblx0XHRcdGNvbnN0IG5vZGUgPSB0aGlzLmluc3RhbmNlLmdldFByb3h5Tm9kZShzZWxlY3Rvciwgb2JqZWN0KTtcblx0XHRcdC8vIFRFU1Q6IDEzXG5cdFx0XHRpZihub2RlICYmIG5vZGUub25yZWFkeSAmJiBtMmQyLnV0aWxzLmlzRnVuY3Rpb24obm9kZS5vbnJlYWR5KSkge1xuXHRcdFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeVwiLCBub2RlLm9ucmVhZHksIHsgb25jZSA6IHRydWUgfSk7XG5cdFx0XHRcdC8vIFRoaXMgd2lsbCBiZSBjYWxsZWQganVzdCBhZnRlciB0aGUgb2JqZWN0IGhhcyBiZWVuIHJldHVybmVkICh0byBiZSBzdXJlIGl0IHdhcyBjcmVhdGVkKVxuXHRcdFx0XHQvLyBXaXRob3V0IHNldFRpbWVvdXQgXCJvbnJlYWR5XCIgd291bGQgYmUgdGhlIHNhbWUgYXMgXCJvbmxvYWRcIi5cblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3JlYWR5JykpO1xuXHRcdFx0XHR9LCAxMCk7IC8vVE9ETzogRG9jdW1lbnRcblx0XHRcdH1cblx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZXMgdG8gZGF0YXNldHMgKHVzZWQgbGF0ZXIgaW4gb25wdWRhdGUgZGF0YXNldCwgc3R5bGUpOlxuXHRcdFx0W1wiZGF0YXNldFwiLFwic3R5bGVcIl0uZm9yRWFjaChpID0+IHtcblx0XHRcdCAgICBpZihub2RlICYmIG5vZGVbaV0pIHtcblx0XHRcdFx0ICAgIHRoaXMuaW5zdGFuY2UuX3N0b3JlZFtpICsgXCJzXCJdLnB1c2gobm9kZVtpXSk7XG5cdFx0XHRcdCAgICB0aGlzLmluc3RhbmNlLl9zdG9yZWRbaSArIFwiTm9kZXNcIl0ucHVzaChub2RlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdHJldHVybiBub2RlO1xuXHRcdH1cblx0ICAgIC8vIEV4dGVuZHMgVXRpbHM6XG5cdCAgICBtMmQyLnV0aWxzLmdldE1ldGhvZHMobTJkMi51dGlscykuZm9yRWFjaChrID0+IHsgZltrXSA9IG0yZDIudXRpbHNba10gfSk7XG5cdFx0cmV0dXJuIGY7XG5cdH0pKCk7XG5cdC8qKlxuXHQgKiBJbml0aWFsaXphdGlvbi4gVXNlOiBtMmQyLnJlYWR5KClcblx0ICogQHBhcmFtIHsgZnVuY3Rpb24gfSBjYWxsYmFja1xuXHQgKi9cblx0c3RhdGljIHJlYWR5KGNhbGxiYWNrKSB7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobTJkMi5tYWluKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBFeGVjdXRlIHNvbWV0aGluZyBvbiBsb2FkLiBJdCB3aWxsIHNlYXJjaCBmb3IgZXh0ZW5zaW9ucy5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcblx0ICogVEVTVDogMDBcblx0ICovXG5cdHN0YXRpYyBsb2FkKGNhbGxiYWNrKSB7XG5cdCAgICBpZihjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBleHQgPSBjYWxsYmFjayhtMmQyLm1haW4pOyAvL21haW4gY2FuIGJlIGV4dGVuZGVkIGhlcmVcbiAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaXNPYmplY3QoZXh0KSAmJiAhbTJkMi51dGlscy5pc0VtcHR5KGV4dCkpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhleHQpLmZvckVhY2goayA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaXNWYWxpZEVsZW1lbnQoaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG0yZDIuZXh0ZW5zaW9uc1trXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbTJkMi5leHRlbnNpb25zW2tdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHdlIGFyZSBub3QgcmVwbGFjaW5nIGFueSBleGlzdGluZyBwcm9wZXJ0eTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICRub2RlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXh0W2tdKS5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtMmQyLnV0aWxzLmhhc1Byb3AoJG5vZGUsIGl0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIldhcm5pbmc6IHByb3BlcnR5IFtcIiArIGl0ICsgXCJdIGFscmVhZHkgZXhpc3RzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaW4gbm9kZTogW1wiICsgayArIFwiXSB3aGlsZSB0cnlpbmcgdG8gZXh0ZW5kIGl0LiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlVuZXhwZWN0ZWQgYmVoYXZpb3VyIG1heSBoYXBwZW4uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtMmQyLmV4dGVuc2lvbnNba10sIGV4dFtrXSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtMmQyLmV4dGVuc2lvbnNbXCIqXCJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtMmQyLmV4dGVuc2lvbnNbXCIqXCJdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCAkbm9kZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dFtrXSkuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5oYXNQcm9wKCRub2RlLCBpdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJXYXJuaW5nOiBwcm9wZXJ0eSBbXCIgKyBpdCArIFwiXSBhbHJlYWR5IGV4aXN0cyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImluIE5vZGUgd2hpbGUgdHJ5aW5nIHRvIGV4dGVuZCBpdC4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJVbmV4cGVjdGVkIGJlaGF2aW91ciBtYXkgaGFwcGVuLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obTJkMi5leHRlbnNpb25zW1wiKlwiXSwgZXh0W2tdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXHRcdH1cblx0XHRyZXR1cm4gbTJkMi5tYWluOyAvL1RPRE86IGRvY3VtZW50YXRpb24gOiBjb25zdCAkID0gbTJkMi5sb2FkKCk7XG5cdH1cblx0LyoqXG5cdCAqIE0yRDIgV2lsbCBzZXQgYWxsIGV4dGVuc2lvbnMgdG8gRE9NIG9iamVjdHMgLy9UT0RPOiBkb2N1bWVudGF0aW9uXG5cdCAqIEBwYXJhbSB7c3RyaW5nLCBIVE1MRWxlbWVudH0gc2VsZWN0b3Jcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudCwgTm9kZX0gWyRyb290XVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG5cdCAqIFRFU1Q6IDAxXG5cdCAqL1xuXHRleHREb20oc2VsZWN0b3IsICRyb290KSB7XG5cdFx0aWYoISBzZWxlY3RvcikgeyAgLy8gRG8gbm90IHByb2NlZWQgaWYgc2VsZWN0b3IgaXMgbnVsbCwgZW1wdHkgb3IgdW5kZWZpbmVkXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiU2VsZWN0b3Igd2FzIGVtcHR5XCIpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGlmKCRyb290ID09PSB1bmRlZmluZWQpIHsgJHJvb3QgPSBkb2N1bWVudCB9XG5cdFx0Y29uc3QgJG5vZGUgPSBtMmQyLnV0aWxzLmlzTm9kZShzZWxlY3RvcikgPyBzZWxlY3RvciA6ICRyb290LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuXHRcdGlmKCEgJG5vZGUpIHtcblx0XHRcdGlmKG0yZDIudXRpbHMuaXNTdHJpbmcoc2VsZWN0b3IpKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJTZWxlY3RvcjogXCIgKyBzZWxlY3RvciArIFwiIGRpZG4ndCBtYXRjaCBhbnkgZWxlbWVudCBpbiBub2RlOlwiKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJHJvb3QpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIk5vZGUgd2FzIG51bGxcIik7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0aWYoJG5vZGUuX20yZDIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0JG5vZGUuX20yZDIgPSB0cnVlOyAvL2ZsYWcgdG8gcHJldmVudCBpdCBmcm9tIHJlLWFzc2lnbiBtZXRob2RzXG5cdFx0XHRbXCJwYXJlbnRcIixcInNpYmxpbmdcIixcIm5leHRcIixcInByZXZcIixcImZpbmRcIixcImZpbmRBbGxcIixcIm9udXBkYXRlXCIsXCJvbnJlYWR5XCIsXCJzaG93XCIsXCJvbnNob3dcIixcImluVmlld1wiLFwiY3NzXCIsXCJ0ZXh0XCIsXCJodG1sXCIsXCJnZXREYXRhXCIsXCJpbmRleFwiXS5mb3JFYWNoKGYgPT4ge1xuXHRcdFx0XHRpZigkbm9kZS5oYXNPd25Qcm9wZXJ0eShmKSkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTm9kZSBhbHJlYWR5IGhhZCBbXCIrZitcIl0gcHJvcGVydHkuIEl0IG1pZ2h0IGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3VyLlwiKVxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiWW91IG1heSBuZWVkIHRvIHVwZGF0ZSB0aGUgTTJEMiB2ZXJzaW9uIG9yIHJlcG9ydCBpdCB0bzogZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvXCIpXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Ly8gUHJvcGVydGllczpcblx0XHRcdC8vIFRFU1Q6IDAxLCAuLi5cblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgkbm9kZSwgXCJ0ZXh0XCIsIHtcblx0XHRcdFx0Z2V0KCkgeyByZXR1cm4gdGhpcy5jaGlsZE5vZGVzLmxlbmd0aCA/IHRoaXMuaW5uZXJUZXh0IDogdGhpcy50ZXh0Q29udGVudDsgfSxcblx0XHRcdFx0c2V0KHZhbHVlKSB7XG5cdFx0XHRcdFx0Ly8gdGV4dCBzaG91bGQgb25seSBjaGFuZ2UgVGV4dCBub2RlcyBhbmQgbm90IGNoaWxkcmVuOiAvL1RPRE86IGRvY3VtZW50YXRpb25cblx0XHRcdFx0XHRpZih0aGlzLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRsZXQgZm91bmQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdHRoaXMuY2hpbGROb2Rlcy5mb3JFYWNoKG4gPT4ge1xuXHRcdFx0XHRcdFx0XHRpZihuLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiVGV4dFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0bi5ub2RlVmFsdWUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYoISBmb3VuZCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnByZXBlbmQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodmFsdWUpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdC8vIFRFU1Q6IDQzLDEzLDI3LC4uLlxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCRub2RlLCBcImh0bWxcIiwge1xuXHRcdFx0XHRnZXQoKSB7IHJldHVybiB0aGlzLmlubmVySFRNTDsgfSxcblx0XHRcdFx0c2V0KHZhbHVlKSB7IHRoaXMuaW5uZXJIVE1MID0gdmFsdWU7ICB9XG5cdFx0XHR9KTtcblx0XHRcdC8vIFRFU1Q6IDAyXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoJG5vZGUsIFwiY3NzXCIsIHsgICAvL1RPRE86IGRvY3VtZW50IG5ldyBiZWhhdmlvdXJcblx0XHRcdFx0Z2V0KCkge1xuXHRcdFx0XHQgICAgcmV0dXJuIHRoaXMuY2xhc3NMaXN0O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQodmFsdWUpIHtcblx0XHRcdFx0ICAgIGlmKG0yZDIudXRpbHMuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBcdFx0XHRcdCAgICB0aGlzLmNsYXNzTmFtZSA9IHZhbHVlLmpvaW4oXCIgXCIpO1xuXHRcdFx0XHQgICAgfSBlbHNlIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgXHRcdFx0XHQgICAgdGhpcy5jbGFzc05hbWUgPSB2YWx1ZTtcblx0XHRcdFx0ICAgIH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdFx0XHRcdCAgICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goYyA9PiB7XG5cdFx0XHRcdCAgICAgICAgICAgIGlmKHZhbHVlW2NdKSB7XG5cdFx0XHRcdCAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoYyk7XG5cdFx0XHRcdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoYyk7XG5cdFx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdFx0ICAgICAgICB9KTtcblx0XHRcdFx0ICAgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAgICAgY29uc29sZS5lcnJvcihcIlRyeWluZyB0byBhc3NpZ24gYSB3cm9uZyB2YWx1ZSB0byBjc3MgOiBcIiArIHZhbHVlKTtcblx0XHRcdFx0ICAgIH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvLyBURVNUOiAxNlxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCRub2RlLCBcInNob3dcIiwge1xuXHRcdFx0XHRnZXQoKSB7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0ICAgIHJldHVybiBtMmQyLnV0aWxzLmlzVmlzaWJsZSh0aGlzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2V0KHNob3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3NzRGlzcGxheSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRoaXMsIG51bGwpLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHREaXNwbGF5ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLnRhZ05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5hcHBlbmQobik7XG4gICAgICAgICAgICAgICAgICAgICAgICBiLmFwcGVuZCh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSBnZXRDb21wdXRlZFN0eWxlKG4sIG51bGwpLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmKHNob3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNzc0Rpc3BsYXkoKSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLl9tMmQyX2Rpc3BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gdGhpcy5fbTJkMl9kaXNwbGF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjc3NEaXNwbGF5KCkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0U2hvdyA9IGRlZmF1bHREaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSB0aGlzLmRhdGFzZXQuZGlzcGxheSB8fCAoZGVmYXVsdFNob3cgIT09IFwibm9uZVwiID8gZGVmYXVsdFNob3cgOiBcImJsb2NrXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRFU1Q6IDE2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5vbnNob3cgIT09IHVuZGVmaW5lZCAmJiBtMmQyLnV0aWxzLmlzRnVuY3Rpb24odGhpcy5vbnNob3cpKSB7IC8vVE9ETzogZG9jdW1lbnQgb25zaG93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25zaG93KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlZCA9IHRoaXMuc3R5bGUuZGlzcGxheSAhPT0gXCJub25lXCIgPyB0aGlzLnN0eWxlLmRpc3BsYXkgOiBjc3NEaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzdG9yZWQgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbTJkMl9kaXNwbGF5ID0gc3RvcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdC8vVE9ETzogZG9jdW1lbnQgaG93IHRvIGV4dGVuZFxuXHRcdFx0Ly9UT0RPOiB0ZXN0XG5cdFx0XHRsZXQgZXh0ZW5kID0ge307XG5cdFx0XHRpZihtMmQyLmV4dGVuc2lvbnNbXCIqXCJdICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0T2JqZWN0LmFzc2lnbihleHRlbmQsIG0yZDIuZXh0ZW5zaW9uc1tcIipcIl0pO1xuXHRcdFx0fVxuXHRcdFx0aWYobTJkMi5leHRlbnNpb25zWyRub2RlLnRhZ05hbWVdICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0T2JqZWN0LmFzc2lnbihleHRlbmQsIG0yZDIuZXh0ZW5zaW9uc1skbm9kZS50YWdOYW1lXSk7XG5cdFx0XHR9XG5cdFx0XHQvLyBGdW5jdGlvbnM6XG5cdFx0XHRPYmplY3QuYXNzaWduKCRub2RlLCB7XG5cdFx0XHQgICAgaW5WaWV3OiAoKSA9PiB7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdCAgICAgICAgcmV0dXJuIG0yZDIudXRpbHMuaW5WaWV3KCRub2RlKTtcblx0XHRcdCAgICB9LFxuXHRcdFx0XHRuZXh0OiAoKSA9PiB7IC8vVEVTVDogMDdcblx0XHRcdFx0ICAgIHJldHVybiAkbm9kZS5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHByZXY6ICgpID0+IHsgLy9URVNUOiAwN1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJG5vZGUucHJldmlvdXNFbGVtZW50U2libGluZztcblx0XHRcdFx0fSxcblx0XHRcdFx0cGFyZW50OiAoKSA9PiB7IC8vVE9ETzogdGVzdFxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmV4dERvbSgkbm9kZS5wYXJlbnRFbGVtZW50KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2libGluZzogKHNlbCkgPT4geyAvL1RPRE86IHRlc3Rcblx0XHRcdFx0XHRyZXR1cm4gJG5vZGUucGFyZW50RWxlbWVudC5maW5kKHNlbCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZpbmQ6IChpdCkgPT4geyAvLyBUZXN0OiAwNFxuXHRcdFx0XHRcdGNvbnN0IG5vZGUgPSAkbm9kZS5xdWVyeVNlbGVjdG9yKGl0KVxuXHRcdFx0XHRcdHJldHVybiBub2RlID8gdGhpcy5leHREb20obm9kZSkgOiBudWxsO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmaW5kQWxsOiAoaXQpID0+IHsgLy9URVNUOiAwNVxuXHRcdFx0XHRcdGNvbnN0IG5vZGVMaXN0ID0gaXQgPT09IHVuZGVmaW5lZCA/IEFycmF5LmZyb20oJG5vZGUuY2hpbGRyZW4pIDogJG5vZGUucXVlcnlTZWxlY3RvckFsbChpdCk7XG5cdFx0XHRcdFx0bm9kZUxpc3QuZm9yRWFjaChuID0+IHsgdGhpcy5leHREb20obikgfSk7XG5cdFx0XHRcdFx0cmV0dXJuIG5vZGVMaXN0O1xuXHRcdFx0XHR9LFxuXHRcdFx0fSwgZXh0ZW5kKTtcblx0XHRcdC8vIFNvbWUgZWxlbWVudHMgbGlrZSA8T1BUSU9OPiBhbHJlYWR5IGhhdmUgaW5kZXhcblx0XHRcdGlmKCRub2RlLmluZGV4ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0JG5vZGUuaW5kZXggPSAoKSA9PiB7IC8vVEVTVDogMDdcblx0XHRcdFx0XHRyZXR1cm4gQXJyYXkuZnJvbSgkbm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuKS5pbmRleE9mKCRub2RlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gTGV0IGF0dHJpYnV0ZXMga25vdyBhYm91dCBjaGFuZ2VzIGluIHZhbHVlcyAvL1RPRE86IHRlc3Rcblx0XHRcdGlmKFtcIklOUFVUXCIsIFwiVEVYVEFSRUFcIiwgXCJTRUxFQ1RcIl0uaW5kZXhPZigkbm9kZS50YWdOYW1lKSA+PSAwICYmIG0yZDIudXRpbHMuaGFzQXR0ck9yUHJvcCgkbm9kZSwgXCJ2YWx1ZVwiKSkge1xuXHRcdFx0XHQkbm9kZS5vbmlucHV0ID0gZnVuY3Rpb24oKSB7IHRoaXMuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdGhpcy52YWx1ZSApfVxuXHRcdFx0fVxuXHRcdFx0Ly8gQWRkIGdldERhdGEoKSB0byBmb3JtOiAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRpZigkbm9kZS50YWdOYW1lID09PSBcIkZPUk1cIikge1xuXHRcdFx0XHQkbm9kZS5nZXREYXRhID0gZnVuY3Rpb24gKGluY2x1ZGVOb3RWaXNpYmxlKSB7IC8vVE9ETyBkb2N1bWVudDogaW5jbHVkZU5vdFZpc2libGVcblx0XHRcdFx0XHRjb25zdCBkYXRhID0ge307XG5cdFx0XHRcdFx0Y29uc3QgZmQgPSBuZXcgRm9ybURhdGEodGhpcyk7XG5cdFx0XHRcdFx0Y29uc3QgaW5jbHVkZSA9IGluY2x1ZGVOb3RWaXNpYmxlIHx8IGZhbHNlO1xuXHRcdFx0XHRcdGZvciAobGV0IHBhaXIgb2YgZmQuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtID0gJG5vZGUuZmluZChcIltuYW1lPSdcIitwYWlyWzBdK1wiJ11cIik7XG5cdFx0XHRcdFx0XHRpZihpbmNsdWRlIHx8IGVsZW0udHlwZSA9PT0gXCJoaWRkZW5cIiB8fCBlbGVtLnNob3cpIHtcblx0XHRcdFx0XHRcdFx0ZGF0YVtwYWlyWzBdXSA9IGVsZW0udHlwZSA9PT0gXCJmaWxlXCIgPyBlbGVtLmZpbGVzIDogcGFpclsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiAkbm9kZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuICRub2RlO1xuXHRcdH1cblx0fVxuXHQvKipcblx0ICogTTJEMiB3aWxsIGNyZWF0ZSBjdXN0b20gbGlua3MgYW5kIHByb3BlcnRpZXNcblx0ICogQHBhcmFtIHtzdHJpbmcsIEhUTUxFbGVtZW50LCBOb2RlfSBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudCwgUHJveHl9XG5cdCAqIFRFU1Q6IDAzLC4uLlxuXHQgKi9cblx0ZG9Eb20oc2VsZWN0b3IsIG9iamVjdCkge1xuXHRcdC8vIFdoZW4gbm8gc2VsZWN0b3IgaXMgc3BlY2lmaWVkLCBzZXQgXCJib2R5XCJcblx0XHRpZihtMmQyLnV0aWxzLmlzT2JqZWN0KHNlbGVjdG9yKSAmJiBvYmplY3QgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0b2JqZWN0ID0gc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IG0yZDIudXRpbHMubmV3RW1wdHlOb2RlKCk7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdGlmKG9iamVjdC53YXJuID09PSB1bmRlZmluZWQpIHtcblx0XHRcdCAgICBvYmplY3Qud2FybiA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZighKG0yZDIudXRpbHMuaXNTdHJpbmcoc2VsZWN0b3IpIHx8IG0yZDIudXRpbHMuaXNFbGVtZW50KHNlbGVjdG9yKSB8fCBtMmQyLnV0aWxzLmlzTm9kZShzZWxlY3RvcikpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiU2VsZWN0b3IgaXMgbm90IGEgc3RyaW5nIG9yIGEgTm9kZTpcIilcblx0XHRcdGNvbnNvbGUubG9nKHNlbGVjdG9yKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRpZihtMmQyLnV0aWxzLmlzU3RyaW5nKHNlbGVjdG9yKSAmJiEgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikpIHtcblx0XHQgICAgY29uc29sZS5sb2coXCJTZWxlY3RlZCBlbGVtZW50IGRvZXNuJ3QgZXhpc3RzOiBcIiArIHNlbGVjdG9yKVxuXHRcdCAgICByZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0Y29uc3QgJG5vZGUgPSB0aGlzLmV4dERvbShzZWxlY3Rvcik7IC8vIEJlIHN1cmUgdGhhdCAkbm9kZSBpcyBhbiBleHRlbmRlZCBET00gb2JqZWN0XG5cdFx0Ly8gSWYgdGhlcmUgaXMgbm8gb2JqZWN0IHJldHVybiBvbmx5IGV4dGVuc2lvblxuXHRcdGlmKG9iamVjdCA9PT0gdW5kZWZpbmVkKSB7IC8vVE9ETzogZG9jdW1lbnRhdGlvbjogZXh0ZW5kaW5nIG5vZGVzXG5cdFx0XHRyZXR1cm4gJG5vZGU7XG5cdFx0fVxuXHRcdG9iamVjdCA9IHRoaXMucGxhaW5Ub09iamVjdCgkbm9kZSwgb2JqZWN0KTsgLy8gQmUgc3VyZSBpdCdzIGFuIG9iamVjdFxuXG5cdFx0Ly8gVEVTVDogMDNcblx0XHQvLyBXZSBmaWx0ZXItb3V0IHNvbWUga25vd24ga2V5czpcblx0XHRPYmplY3Qua2V5cyhvYmplY3QpLmZpbHRlcihpdCA9PiAhIFtcInRhZ05hbWVcIl0uaW5jbHVkZXMoaXQpKS5mb3JFYWNoKGtleSA9PiB7XG5cdFx0XHRsZXQgb3JpZ1ZhbHVlID0gb2JqZWN0W2tleV07XG5cdFx0XHRpZihvcmlnVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBvcmlnVmFsdWUgPT09IG51bGwpIHtcblx0XHRcdCAgICBjb25zb2xlLmxvZyhcIlZhbHVlIHdhcyBub3Qgc2V0IGZvciBrZXk6IFwiICsga2V5ICsgXCIsICdlbXB0eScgd2FzIHVzZWQgaW4gb2JqZWN0OiBcIik7XG5cdFx0XHQgICAgY29uc29sZS5sb2cob2JqZWN0KTtcblx0XHRcdCAgICBjb25zb2xlLmxvZyhcIkluIG5vZGU6XCIpO1xuXHRcdFx0ICAgIGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdCAgICBvcmlnVmFsdWUgPSBcIlwiO1xuXHQgXHRcdH1cbiAgICAgICAgICAgIC8vTG9vayBmb3Igb251cGRhdGUgaW5saW5lIChbIE5vZGUsIHN0cmluZyBdKVxuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy51cGRhdGVWYWx1ZSgkbm9kZSwga2V5LCBvcmlnVmFsdWUpO1xuXHRcdFx0Ly9Mb29rIGZvciBwcm9wZXJ0eSBmaXJzdDpcblx0XHRcdGxldCBpc1Byb3AgPSBtMmQyLnV0aWxzLmhhc1Byb3AoJG5vZGUsIGtleSk7XG5cdFx0XHRsZXQgaXNBdHRyID0gbTJkMi51dGlscy5oYXNBdHRyKCRub2RlLCBrZXkpO1xuXHRcdFx0Ly9JZGVudGlmeSBpZiB2YWx1ZSBtYXRjaGVzIHByb3BlcnR5IHR5cGU6XG5cdFx0XHRsZXQgZm91bmRNYXRjaCA9IGZhbHNlO1xuXHRcdFx0aWYoaXNBdHRyIHx8IGlzUHJvcCkge1xuXHRcdFx0XHQvLyBub2luc3BlY3Rpb24gRmFsbFRocm91Z2hJblN3aXRjaFN0YXRlbWVudEpTXG5cdFx0XHRcdHN3aXRjaCh0cnVlKSB7XG5cdFx0XHRcdFx0Ly8gTWF0aCBmb3VuZDpcblx0XHRcdFx0XHRjYXNlIGtleSA9PT0gXCJ2YWx1ZVwiICYmIG0yZDIudXRpbHMuaGFzUHJvcCgkbm9kZSwgXCJ2YWx1ZUFzRGF0ZVwiKSAmJiB2YWx1ZSBpbnN0YW5jZW9mIERhdGU6IC8vIERhdGVzXG5cdFx0XHRcdFx0XHRrZXkgPSBcInZhbHVlQXNEYXRlXCI7IC8vcmVuYW1lZCB2YWx1ZSB0byB2YWx1ZUFzRGF0ZVxuXHRcdFx0XHRcdGNhc2Uga2V5ID09PSBcImNzc1wiOiAvLyBjc3MgaXMgYSBQcm94eSBzbyBpdCBmYWlscyB0byB2ZXJpZnk6XG5cdFx0XHRcdFx0Y2FzZSB0eXBlb2YgdmFsdWUgPT09IHR5cGVvZiAkbm9kZVtrZXldOiAvL1NhbWUgVGltZVxuXHRcdFx0XHRcdGNhc2UgbTJkMi51dGlscy5pc1N0cmluZygkbm9kZVtrZXldKSAmJiBtMmQyLnV0aWxzLmlzTnVtZXJpYyh2YWx1ZSk6IC8vTnVtZXJpYyBwcm9wZXJ0aWVzXG5cdFx0XHRcdFx0Y2FzZSAobTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlKSAmJiBtMmQyLnV0aWxzLmlzT2JqZWN0KCRub2RlW2tleV0pKTogLy9GdW5jdGlvbnNcblx0XHRcdFx0XHRjYXNlIG0yZDIudXRpbHMuaXNCb29sKHZhbHVlKSAmJiBtMmQyLnV0aWxzLmlzU3RyaW5nKCRub2RlW2tleV0pOiAvL0Jvb2xlYW5cblx0XHRcdFx0XHRjYXNlIHR5cGVvZiAkbm9kZVtrZXldID09PSBcIm9iamVjdFwiICYmICRub2RlLnRhZ05hbWUgPT09IFwiSU5QVVRcIjogLy9DYXNlcyBsaWtlIFwibGlzdFwiIGluIGlucHV0XG5cdFx0XHRcdFx0XHRmb3VuZE1hdGNoID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBQcm9wZXJ0aWVzIGFuZCBBdHRyaWJ1dGVzOlxuXHRcdFx0aWYoZm91bmRNYXRjaCkge1xuXHRcdFx0XHRsZXQgZXJyb3IgPSBmYWxzZTtcblx0XHRcdFx0c3dpdGNoKGtleSkge1xuXHRcdFx0XHRcdGNhc2UgXCJjbGFzc0xpc3RcIjogLy9UT0RPOiB0ZXN0XG5cdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRcdHZhbHVlLmZvckVhY2godiA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0JG5vZGVba2V5XS5hZGQodik7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRcdCRub2RlW2tleV0uYWRkKHZhbHVlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGVycm9yID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0Y2FzZSBcInN0eWxlXCI6IC8vVE9ETzogdGVzdFxuXHRcdFx0XHRcdGNhc2UgXCJkYXRhc2V0XCI6IC8vVE9ETzogYXMgaXQgaXMgYWxyZWFkeSBhIERPTSwgd2UgZG9uJ3QgbmVlZCBpdCBtYXliZT9cblx0XHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0XHRcdFx0XHRcdFx0T2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goayA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0JG5vZGVba2V5XVtrXSA9IHRoaXMudXBkYXRlVmFsdWUoJG5vZGVba2V5XSwgaywgdmFsdWVba10pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGVycm9yID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdHN3aXRjaCh0cnVlKSB7XG5cdFx0XHRcdFx0XHRcdGNhc2UgbTJkMi51dGlscy5pc0Jvb2wodmFsdWUpOiAvLyBib29sZWFuIHByb3BlcnRpZXNcblx0XHRcdFx0XHRcdFx0Y2FzZSBtMmQyLnV0aWxzLmhhc0F0dHJPclByb3AoJG5vZGUsIGtleSk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0yZDIudXRpbHMuc2V0UHJvcE9yQXR0cigkbm9kZSwga2V5LCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHQkbm9kZVtrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiSW52YWxpZCB2YWx1ZSBwYXNzZWQgdG8gJ1wiICsga2V5ICsgXCInOiBcIilcblx0XHRcdFx0XHRjb25zb2xlLmxvZyh2YWx1ZSk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJJbnRvIE5vZGU6XCIpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdFx0fVxuXHRcdFx0Ly8gTG9vayBmb3IgZWxlbWVudHM6XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0ICAgIGNvbnN0IG9wdGlvbnMgPSBbXTtcblx0XHRcdCAgICB0cnkge1xuXHRcdFx0ICAgICAgICAvLyBURVNUOiAwM1xuXHRcdFx0ICAgICAgICAvLyBGdW5jdGlvbnMgY2FuIG5vdCBiZSBwbGFjZWQgZGlyZWN0bHkgaW50byBlbGVtZW50cywgc28gd2Ugc2tpcFxuXHRcdFx0ICAgICAgICBpZihrZXkgIT09IFwidGVtcGxhdGVcIiAmJiEgbTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9Mb29rIGZvciBJRDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGtleSAmJiBrZXkubWF0Y2goL15cXHcvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbGVtID0gJG5vZGUuZmluZChcIiNcIiArIGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbSAmJiBvcHRpb25zLmluZGV4T2YoZWxlbSkgPT09IC0xKSB7IG9wdGlvbnMucHVzaChlbGVtKTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTG9vayBmb3IgbmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gJG5vZGUuZmluZChcIltuYW1lPSdcIitrZXkrXCInXVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtICYmIG9wdGlvbnMuaW5kZXhPZihlbGVtKSA9PT0gLTEpIHsgb3B0aW9ucy5wdXNoKGVsZW0pOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Mb29rIGZvciBjbGFzczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtcyA9IEFycmF5LmZyb20oJG5vZGUuZmluZEFsbChcIi5cIiArIGtleSkpLmZpbHRlcihpID0+IG9wdGlvbnMuaW5kZXhPZihpKSA8IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbXMubGVuZ3RoID4gMCkgeyBlbGVtcy5mb3JFYWNoKGUgPT4gb3B0aW9ucy5wdXNoKGUpKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0xvb2sgZm9yIGVsZW1lbnQgb3IgZnJlZSBzZWxlY3RvciAoZS5nOiBcImRpdiA+IHNwYW5cIik6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtcyA9ICBBcnJheS5mcm9tKCRub2RlLmZpbmRBbGwoa2V5KSkuZmlsdGVyKGkgPT4gb3B0aW9ucy5pbmRleE9mKGkpIDwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1zLmxlbmd0aCA+IDApIHsgZWxlbXMuZm9yRWFjaChlID0+IG9wdGlvbnMucHVzaChlKSkgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHQgICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgc2VsZWN0b3I6IFwiICsga2V5KTtcblx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKGUpO1xuXHRcdFx0XHQgICAgcmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKG9wdGlvbnMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdGNvbnN0IGl0ZW1zID0gW107XG5cdFx0XHRcdFx0b3B0aW9ucy5mb3JFYWNoKGl0ZW0gPT4ge1xuXHRcdFx0XHRcdFx0aXRlbXMucHVzaCh0aGlzLnJlbmRlcihpdGVtLCBrZXksIHZhbHVlKSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dGhpcy5saW5rTm9kZSgkbm9kZSwga2V5LCBpdGVtcyk7XG5cdFx0XHRcdFx0aWYodmFsdWUud2FybiA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlLndhcm4gIT09IGZhbHNlKSB7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTXVsdGlwbGUgZWxlbWVudHMgd2VyZSBhc3NpZ25lZCB3aXRoIGtleTogW1wiICsga2V5ICsgXCJdIHVuZGVyIG5vZGU6IFwiKVxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJG5vZGUpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJJdCBtaWdodCBiZSB3aGF0IHdlIGV4cGVjdCwgYnV0IGlmIGl0IGlzIG5vdCBleHBlY3RlZCBpdCBjb3VsZCByZXN1bHQgXCIgK1xuXHRcdFx0XHRcdFx0XHRcdFx0XCJvbiBzb21lIGVsZW1lbnRzIG1pc3Rha2VubHkgcmVuZGVyZWQuIFlvdSBjYW4gc3BlY2lmeSBcIiArXG5cdFx0XHRcdFx0XHRcdFx0XHRcIid3YXJuIDogZmFsc2UnIHVuZGVyIHRoYXQgZWxlbWVudCB0byBoaWRlIHRoaXMgbWVzc2FnZS5cIikgLy9UT0RPOiBhZGQgbGluayB0byByZWZlcmVuY2Vcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZihvcHRpb25zLmxlbmd0aCA9PT0gMSkgeyAvLyBGb3VuZCBzaW5nbGUgb3B0aW9uOiBwbGFjZSB2YWx1ZXNcblx0XHRcdFx0XHRjb25zdCBvcHQgPSBvcHRpb25zWzBdO1xuXHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNFbGVtZW50KG9wdCkpIHsgLy9UT0RPOiB0ZXN0IChubyB0ZW1wbGF0ZSBvciBubyBpdGVtcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMucGxhaW5Ub09iamVjdChvcHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdF9rZXkgPSBtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3Qob2JqKSAmJiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+PSAxID8gT2JqZWN0LmtleXMob2JqKVswXSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvcHRfa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnVwZGF0ZVZhbHVlKG9wdCwgb3B0X2tleSwgb3JpZ1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNBcnJheSh2YWx1ZSkpIHsgLy8gUHJvY2VzcyBBcnJheVxuXHRcdFx0XHRcdFx0XHRjb25zdCB0ZW1wbGF0ZSA9IG9iamVjdFtcInRlbXBsYXRlXCJdO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRvSXRlbXMob3B0LCB2YWx1ZSwgdGVtcGxhdGUpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmxpbmtOb2RlKCRub2RlLCBrZXksIG9wdCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgeyAvLyBOb3JtYWwgT2JqZWN0czpcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJBbmRMaW5rKCRub2RlLCBvcHQsIGtleSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiQlVHOiBJdCBzaG91bGQgaGF2ZSBiZWVuIGEgbm9kZSBidXQgZ290OiBcIik7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhvcHQpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQYXJlbnQgbm9kZTpcIilcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZihvcHRpb25zLmxlbmd0aCA9PT0gMCkgeyAvL05vIG9wdGlvbnMgZm91bmQ6IGNyZWF0ZSBub2Rlc1xuXHRcdFx0XHQgICAgLy8gTWFrZSBcIml0ZW1zXCIgb3B0aW9uYWw6IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0XHRpZihrZXkgPT09IFwidGVtcGxhdGVcIiAmJiBvYmplY3RbXCJpdGVtc1wiXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0ICAgIGtleSA9IFwiaXRlbXNcIjtcblx0XHRcdFx0XHQgICAgdmFsdWUgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgaXNGdW5jID0gbTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlKTtcblx0XHRcdFx0XHRpZih2YWx1ZS50YWdOYW1lICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdGNvbnN0ICRuZXdOb2RlID0gdGhpcy5hcHBlbmRFbGVtZW50KCRub2RlLCB2YWx1ZS50YWdOYW1lKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQW5kTGluaygkbm9kZSwgJG5ld05vZGUsIGtleSwgdmFsdWUpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzVmFsaWRFbGVtZW50KGtleSkgJiYhIGlzRnVuYykge1xuXHRcdFx0XHRcdFx0Y29uc3QgJG5ld05vZGUgPSB0aGlzLmFwcGVuZEVsZW1lbnQoJG5vZGUsIGtleSk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlckFuZExpbmsoJG5vZGUsICRuZXdOb2RlLCBrZXksIHZhbHVlKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYoa2V5ID09PSBcIml0ZW1zXCIpIHsgLy9JdGVtcyBjcmVhdGlvblxuXHRcdFx0XHRcdFx0Y29uc3QgdGVtcGxhdGUgPSBvYmplY3RbXCJ0ZW1wbGF0ZVwiXTtcblx0XHRcdFx0XHRcdC8vIEFsbG93IHVzZSBvZiBwbGFpbiBvYmplY3QgdG8gc3BlY2lmeSB2YWx1ZSAtPiB0ZXh0IC8vVE9ETzogZG9jdW1lbnRhdGlvblxuXHRcdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0ICAgIGNvbnN0IHZhbFRtcCA9IFtdO1xuXHRcdFx0XHRcdFx0ICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKG8gPT4ge1xuXHRcdFx0XHRcdFx0ICAgIFx0bGV0IG9iajtcblx0XHRcdFx0XHRcdCAgICBcdGlmKCRub2RlLnRhZ05hbWUgPT09IFwiRExcIikgeyAvL1RPRE86IGRvY3VtZW50IERMXG5cdFx0XHRcdFx0XHRcdFx0XHRvYmogPSB7IGR0IDogbywgZGQgOiB2YWx1ZVtvXSB9XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdG9iaiA9IHsgdGV4dDogdmFsdWVbb10gfTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChtMmQyLnV0aWxzLmhhc0F0dHJPclByb3AoJG5vZGUsIFwidmFsdWVcIikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqLnZhbHVlID0gbztcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG9iai5kYXRhc2V0ID0ge2lkOiBvfTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0dmFsVG1wLnB1c2gob2JqKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHQgICAgdmFsdWUgPSB2YWxUbXA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBQcm9jZXNzIEFycmF5OlxuXHRcdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRvSXRlbXMoJG5vZGUsIHZhbHVlLCB0ZW1wbGF0ZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIldhcm5pbmc6ICdpdGVtcycgc3BlY2lmaWVkIGJ1dCB2YWx1ZSBpcyBub3QgYW5kIGFycmF5LCBpbiBlbGVtZW50OiBcIik7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQYXNzZWQgdmFsdWVzIGFyZTogXCIpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh2YWx1ZSk7XG5cdFx0XHRcdFx0XHR9XG4gICAgXHRcdFx0XHR9IGVsc2UgaWYoaXNGdW5jKSB7XG5cdFx0XHRcdFx0XHRpZihtMmQyLnVwZGF0ZXMpIHtcblx0XHRcdFx0XHRcdCAgICAvLyBCeSB1c2luZyBhZGRFdmVudExpc3RlbmVyIHdlIGNhbiBhc3NpZ24gbXVsdGlwbGUgbGlzdGVuZXJzIHRvIGEgc2luZ2xlIG5vZGUgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdFx0XHRpZiAoa2V5ID09PSBcIm9udXBkYXRlXCIpIHtcblx0XHRcdFx0XHRcdFx0XHQkbm9kZS5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlXCIsIHZhbHVlLCB0cnVlKTsgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQkbm9kZVtrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKGtleSAhPT0gXCJ0ZW1wbGF0ZVwiICYmIChrZXkgIT09IFwid2FyblwiICYmIHZhbHVlICE9PSBmYWxzZSkpIHsgLy9XZSBoYW5kbGUgdGVtcGxhdGVzIGluc2lkZSBpdGVtc1xuXHRcdFx0XHRcdFx0aWYob2JqZWN0Lndhcm4gPT09IHVuZGVmaW5lZCB8fCBvYmplY3Qud2FybiAhPT0gZmFsc2UpIHsgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiTm90IHN1cmUgd2hhdCB5b3Ugd2FudCB0byBkbyB3aXRoIGtleTogXCIgKyBrZXkgKyBcIiB1bmRlciBlbGVtZW50OiBcIik7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJBbmQgb2JqZWN0OlwiKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2cob2JqZWN0KTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJNb3N0IGxpa2VseSB0aGUgZWxlbWVudCdzIHByb3BlcnR5IG9yIGNoaWxkIG5vIGxvbmdlciBleGlzdHMgb3IgdGhlIHZhbHVlXCIgK1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIiBwYXNzZWQgdG8gaXQgaXMgaW5jb3JyZWN0LlwiKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJZb3UgY2FuIHNldCAnd2FybiA6IGZhbHNlJyBwcm9wZXJ0eSB0byB0aGUgZWxlbWVudCB0byBkaXNtaXNzIHRoaXMgbWVzc2FnZS5cIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQkbm9kZVtrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ly8gRGlzcGF0Y2ggb25sb2FkIGV2ZW50IChpZiBpdHMgbm90IG5hdGl2ZSk6IC8vVE9ETzogRG9jdW1lbnRcblx0XHRpZigkbm9kZS5vbmxvYWQpIHtcblx0XHQgICAgY29uc3QgbmF0aXZlID0gW1wiQk9EWVwiLFwiRlJBTUVcIixcIklGUkFNRVwiLFwiSU1HXCIsXCJMSU5LXCIsXCJTQ1JJUFRcIixcIlNUWUxFXCJdLmluZGV4T2YoJG5vZGUudGFnTmFtZSkgPj0gMDtcblx0XHQgICAgY29uc3QgaW5wdXRJbWFnZSA9ICRub2RlLnRhZ05hbWUgPT09IFwiSU5QVVRcIiAmJiAkbm9kZS50eXBlID09PSBcImltYWdlXCI7XG5cdFx0ICAgIGlmKCEgKG5hdGl2ZSB8fCBpbnB1dEltYWdlKSkge1xuXHRcdCAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBhZGQgdGhlIGV2ZW50IGFzIGl0IGV4aXN0cyBuYXRpdmVseSBhbmQgaXQgd2FzIGFzc2lnbmVkIGR1cmluZzogJG5vZGUub25sb2FkID0gLi4uO1xuICAgICAgICAgICAgICAgICRub2RlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdsb2FkJykpO1xuXHRcdCAgICB9XG5cdFx0fVxuXHRcdHJldHVybiAkbm9kZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogSWRlbnRpZnkgaWYgdmFsdWUgaXMgYW4gdXBkYXRlIGxpbmsgKGlubGluZSBvbnVwZGF0ZSlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzVXBkYXRlTGluayh2YWx1ZSkge1xuICAgICAgICBsZXQgaXNMaW5rID0gZmFsc2VcbiAgICAgICAgaWYobTJkMi51dGlscy5pc0FycmF5KHZhbHVlKSAmJiAodmFsdWUubGVuZ3RoID09PSAyIHx8IHZhbHVlLmxlbmd0aCA9PT0gMykpIHtcbiAgICAgICAgICAgIGNvbnN0IHR3b0FyZ3MgPSB2YWx1ZS5sZW5ndGggPT09IDI7XG4gICAgICAgICAgICAvLyBGaXJzdCBlbGVtZW50IGluIGFycmF5IG11c3QgYmUgTm9kZSB8fCBEb21TdHJpbmdNYXAgKGRhdGFzZXQpIHx8IENTU1N0eWxlRGVjbGFyYXRpb24gKHN0eWxlKVxuICAgICAgICAgICAgY29uc3QgYWNjZXB0ZWRUeXBlID0gbTJkMi51dGlscy5pc05vZGUodmFsdWVbMF0pIHx8XG4gICAgICAgICAgICAgICAgdmFsdWVbMF0gaW5zdGFuY2VvZiBET01TdHJpbmdNYXAgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZVswXSBpbnN0YW5jZW9mIENTU1N0eWxlRGVjbGFyYXRpb25cbiAgICAgICAgICAgIC8vIFNlY29uZCBtdXN0IGJlICdzdHJpbmcnIGFuZCBUaGlyZCBjYW4gYmUgYSAnZnVuY3Rpb24nXG4gICAgICAgICAgICBjb25zdCBvdGhlclR5cGVzID0gdHdvQXJncyA/IG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWVbMV0pIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbTJkMi51dGlscy5pc1N0cmluZyh2YWx1ZVsxXSkgJiYgbTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlWzJdKTtcbiAgICAgICAgICAgIC8vIElmIG9ubHkgdHdvIGFyZ3MgYXJlIGluIGFycmF5LCBhZGQgYW4gZW1wdHkgZnVuY3Rpb246XG4gICAgICAgICAgICBpc0xpbmsgPSBhY2NlcHRlZFR5cGUgJiYgb3RoZXJUeXBlcztcbiAgICAgICAgICAgIGlmKGlzTGluayAmJiB0d29BcmdzKSB7IHZhbHVlLnB1c2godiA9PiB7IHJldHVybiB2OyB9KSB9IC8vVE9ETzogRG9jdW1lbnQgZnVuY3Rpb25cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNMaW5rXG4gICAgfVxuXG4gICAgLyoqXG5cdCAqIENvbnZlcnQgcGxhaW4gdmFsdWUgaW50byBvYmplY3QgaWYgbmVlZGVkXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnQsIE5vZGV9ICRub2RlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG4gICAgcGxhaW5Ub09iamVjdCgkbm9kZSwgdmFsdWUpIHtcblx0XHRpZighbTJkMi51dGlscy5pc1BsYWluT2JqZWN0KHZhbHVlKSAmJiEgbTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlKSAmJiEgbTJkMi51dGlscy5pc0VsZW1lbnQodmFsdWUpKSB7XG5cdFx0XHQvLyBXaGVuIHNldHRpbmcgdmFsdWVzIHRvIHRoZSBub2RlIChzaW1wbGlmaWVkIHZlcnNpb24pOlxuXHRcdFx0aWYobTJkMi51dGlscy5pc0h0bWwodmFsdWUpKSB7XG5cdFx0XHRcdHZhbHVlID0geyBodG1sIDogdmFsdWUgfTtcblx0XHQgICAgfSBlbHNlIGlmKHRoaXMuaXNVcGRhdGVMaW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiAgPSB2YWx1ZVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdmFsdWVbMV07XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSB2YWx1ZVsyXTtcblx0XHQgICAgICAgIGxldCB0bXBWYWwgPSB0aGlzLnBsYWluVG9PYmplY3QoJG5vZGUsIGNhbGxiYWNrKG9ialtwcm9wXSkpO1xuXHRcdCAgICAgICAgaWYobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KHRtcFZhbCkpIHtcblx0XHQgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHt9O1xuXHRcdCAgICAgICAgICAgIE9iamVjdC5rZXlzKHRtcFZhbCkuZm9yRWFjaChrID0+IHtcblx0XHQgICAgICAgICAgICAgICAgbmV3VmFsdWVba10gPSB2YWx1ZTtcblx0XHQgICAgICAgICAgICB9KTtcblx0XHQgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuXHRcdCAgICAgICAgfVxuXHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdCAgICB2YWx1ZSA9IHsgaXRlbXMgOiB2YWx1ZSB9O1xuXHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaGFzQXR0ck9yUHJvcCgkbm9kZSwgXCJ2YWx1ZVwiKSkge1xuXHRcdFx0XHQvLyBJZiB0aGUgcGFyZW50IGlzIDxzZWxlY3Q+IHNldCBhbHNvIGFzIHRleHQgdG8gaXRlbTpcblx0XHRcdFx0aWYoJG5vZGUudGFnTmFtZSA9PT0gXCJTRUxFQ1RcIikge1xuXHRcdFx0XHQgICAgdmFsdWUgPSB7XG5cdFx0XHRcdCAgICAgICAgdmFsdWUgOiB2YWx1ZSxcblx0XHRcdFx0ICAgICAgICB0ZXh0ICA6IHZhbHVlXG5cdFx0XHRcdCAgICB9O1xuXHRcdFx0XHR9IGVsc2UgaWYoJG5vZGUudGFnTmFtZSA9PT0gXCJCVVRUT05cIikge1xuXHRcdFx0XHQgICAgdmFsdWUgPSB7IHRleHQgOiB2YWx1ZSB9O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQgICAgdmFsdWUgPSB7IHZhbHVlIDogdmFsdWUgfTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWUpICYmICRub2RlLnRhZ05hbWUgPT09IFwiSU1HXCIpIHtcblx0XHRcdCAgICB2YWx1ZSA9IHsgc3JjIDogdmFsdWUgfTtcblx0XHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzU3RyaW5nKHZhbHVlKSB8fCBtMmQyLnV0aWxzLmlzTnVtZXJpYyh2YWx1ZSkpIHtcblx0XHRcdFx0dmFsdWUgPSB7IHRleHQgOiB2YWx1ZSB9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG4gICAgfVxuXHQvKipcblx0ICogUmVuZGVyIGFuZCBMaW5rIGEgbm9kZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkcm9vdFxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdHJlbmRlckFuZExpbmsoJHJvb3QsICRub2RlLCBrZXksIHZhbHVlKSB7XG5cdFx0Y29uc3QgJGNoaWxkID0gdGhpcy5yZW5kZXIoJG5vZGUsIGtleSwgdmFsdWUpO1xuXHRcdHRoaXMubGlua05vZGUoJHJvb3QsIGtleSwgJGNoaWxkKTtcblx0fVxuXHQvKipcblx0ICogUmVuZGVyIHNvbWUgdmFsdWUgaW4gYSBub2RlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJucyB7UHJveHksIEhUTUxFbGVtZW50fVxuXHQgKi9cblx0cmVuZGVyKCRub2RlLCBrZXksIHZhbHVlKSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMucGxhaW5Ub09iamVjdCgkbm9kZSwgdmFsdWUpO1xuXHRcdHJldHVybiB0aGlzLmRvRG9tKCRub2RlLCB2YWx1ZSk7IC8vIFJlY3Vyc2l2ZSBmb3IgZWFjaCBlbGVtZW50XG5cdH1cblxuXHQvKipcblx0ICogTGlua3MgYSBwcm9wZXJ0eSB0byBhIGNoaWxkIG5vZGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkY2hpbGRcblx0ICovXG5cdGxpbmtOb2RlKCRub2RlLCBrZXksICRjaGlsZCkge1xuXHRcdGlmKCRub2RlW2tleV0gPT09ICRjaGlsZCkge1xuXHRcdFx0Y29uc3QgJHByb3h5ID0gdGhpcy5wcm94eSgkY2hpbGQpO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0JG5vZGVba2V5XSA9ICRwcm94eTtcblx0XHRcdH0gY2F0Y2goaWdub3JlKSB7XG5cdFx0XHRcdC8vTk9URTogYWx0aG91Z2ggaXQgZmFpbHMgd2hlbiB1c2luZyBmb3JtcywgZm9ybSBpcyBhIHByb3h5IHNvIGl0IHN0aWxsIHdvcmtzLlxuXHRcdFx0fVxuXHRcdFx0JG5vZGVbXCIkXCIgKyBrZXldID0gJHByb3h5O1xuXHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmhhc0F0dHJPclByb3AoJG5vZGUsIGtleSkpIHsgLy8gT25seSBpZiBpdHMgbm90IGFuIGF0dHJpYnV0ZSBvciBwcm9wZXJ0eSwgd2UgXCJsaW5rXCIgaXQuXG5cdFx0XHQkbm9kZVtcIiRcIiArIGtleV0gPSAkY2hpbGQ7IC8vUmVwbGFjZSBuYW1lIHdpdGggXCIkXCIgKyBuYW1lXG5cdFx0XHRjb25zb2xlLmxvZyhcIlByb3BlcnR5IDogXCIgKyBrZXkgKyBcIiBleGlzdGVkIGluIG5vZGU6IFwiICsgJG5vZGUudGFnTmFtZSArXG5cdFx0XHRcIi4gVXNpbmcgJFwiICsga2V5ICsgXCIgaW5zdGVhZCBmb3Igbm9kZTogXCIgKyAkY2hpbGQudGFnTmFtZSArIFwiLlwiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbm9kZVtrZXldID0gdGhpcy5wcm94eSgkY2hpbGQpO1xuXHRcdH1cblx0fVxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGRvbSBlbGVtZW50IGluc2lkZSAkbm9kZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG5cdCAqL1xuXHRhcHBlbmRFbGVtZW50ICgkbm9kZSwgdGFnTmFtZSkge1xuXHRcdGNvbnN0ICRuZXdFbGVtID0gbTJkMi51dGlscy5uZXdFbGVtZW50KHRhZ05hbWUpO1xuXHRcdCRub2RlLmFwcGVuZCgkbmV3RWxlbSk7XG5cdFx0cmV0dXJuICRuZXdFbGVtO1xuXHR9XG5cbiAgICAvKipcblx0ICogR2V0IGFuIGl0ZW0gdG8gYmUgYWRkZWRcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudHxudWxsfSAkbm9kZVxuXHQgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGluZGV4XG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICR0ZW1wbGF0ZVxuXHQgKi9cblx0Z2V0SXRlbSgkbm9kZSwgaW5kZXgsIG9iaiwgJHRlbXBsYXRlKSB7XG5cdCAgICBpZighJHRlbXBsYXRlKSB7XG5cdFx0ICAgICR0ZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGUoJG5vZGUpO1xuXHRcdH1cbiAgICAgICAgY29uc3QgJG5ld0l0ZW0gPSAkdGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuXHQgICAgLy8gQ29weSB0ZW1wbGF0ZXMgdG8gbmV3IGl0ZW06XG5cdCAgICB0aGlzLmFkZFRlbXBsYXRlc1RvSXRlbSgkdGVtcGxhdGUsICRuZXdJdGVtKTtcbiAgICAgICAgJG5ld0l0ZW0uZGF0YXNldC5pZCA9IGluZGV4O1xuICAgICAgICAvLyBBZGQgXCJzZWxlY3RlZFwiIHByb3BlcnR5XG4gICAgICAgIHRoaXMuc2V0VW5pcXVlQXR0cmliKCRuZXdJdGVtLCBcInNlbGVjdGVkXCIpOyAvL1RPRE86IERvY3VtZW50XG4gICAgICAgIC8vIFNldCB2YWx1ZXMgYW5kIGxpbmtzXG5cdFx0bGV0ICRuZXdOb2RlID0gdGhpcy5kb0RvbSgkbmV3SXRlbSwgb2JqKTtcblx0XHQvLyBQbGFjZSBFdmVudHM6XG5cdFx0cmV0dXJuIHRoaXMuZ2V0SXRlbVdpdGhFdmVudHMoJG5vZGUsICRuZXdOb2RlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWFzc2lnbiB0ZW1wbGF0ZXNcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudCwgTm9kZX0gJHRlbXBsYXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnQsIE5vZGV9ICRuZXdOb2RlXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxQcm94eX1cblx0IC8vIFRPRE86IHRoaXMgZG9lcyBub3Qgc3VwcG9ydCBkZWVwIGxvY2F0aW9uIG9mIHRlbXBsYXRlc1xuXHQgKi9cblx0YWRkVGVtcGxhdGVzVG9JdGVtKCR0ZW1wbGF0ZSwgJG5ld05vZGUpIHtcblx0ICAgIFtcIl90ZW1wbGF0ZVwiLFwiX190ZW1wbGF0ZVwiXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBpZigkdGVtcGxhdGVba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJG5ld05vZGVba2V5XSA9ICR0ZW1wbGF0ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgTm9kZSB3aXRoIGV2ZW50c1xuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSAkbm9kZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSAkbmV3Tm9kZVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8UHJveHl9XG5cdCAvL0ZJWE1FOiBJIHRoaW5rIGB0aGlzLmRvRG9tYCBjb3VsZCBiZSByZW1vdmVkIGZyb20gaGVyZSBhbmQgb25seSBcImxpbmtcIiBldmVudHNcblx0ICovXG5cdGdldEl0ZW1XaXRoRXZlbnRzKCRub2RlLCAkbmV3Tm9kZSkge1xuXHRcdGlmKCRub2RlLl9fdGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc3Qgc2NhbiA9IChvYmplY3QsIHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRyZXN1bHQgPSByZXN1bHQgfHwge307XG5cdFx0XHRcdE9iamVjdC5rZXlzKG9iamVjdCkuZm9yRWFjaChrZXk9PiB7XG5cdFx0XHRcdFx0aWYgKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdChvYmplY3Rba2V5XSkpIHtcblx0XHRcdFx0XHRcdHJlc3VsdFtrZXldID0gc2NhbihvYmplY3Rba2V5XSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNGdW5jdGlvbihvYmplY3Rba2V5XSkpIHtcblx0XHRcdFx0XHRcdHJlc3VsdFtrZXldID0gb2JqZWN0W2tleV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH1cblx0XHRcdGxldCB0cmVlID0gc2Nhbigkbm9kZS5fX3RlbXBsYXRlKTtcblx0XHRcdGlmKCFtMmQyLnV0aWxzLmlzRW1wdHkodHJlZSkpIHtcblx0XHRcdFx0dHJlZSA9IHRyZWVbT2JqZWN0LmtleXModHJlZSlbMF1dO1xuXHRcdFx0XHQkbmV3Tm9kZSA9IHRoaXMuZG9Eb20oJG5ld05vZGUsIHRyZWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gJG5ld05vZGU7XG5cdH1cblxuXHQvKipcblx0ICogUHJvY2VzcyBpdGVtc1xuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXNcblx0ICogQHBhcmFtIHtPYmplY3R9IHRlbXBsYXRlXG5cdCAqL1xuXHRkb0l0ZW1zICgkbm9kZSwgdmFsdWVzLCB0ZW1wbGF0ZSkge1xuXHQgICAgLy8gQ3JlYXRlIHRoZSBzdHJ1Y3R1cmUgZm9yIHRoZSBpdGVtOlxuXHRcdGNvbnN0ICR0ZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGUoJG5vZGUsIHRlbXBsYXRlKTtcblx0XHRpZigkdGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIlRlbXBsYXRlIG5vdCBmb3VuZC4gUHJvYmFibHkgYW4gYXJyYXkgaXMgYmVpbmcgdXNlZCB3aGVyZSBpdCBpcyBub3QgZXhwZWN0ZWQuIE5vZGU6XCIpO1xuXHRcdFx0Y29uc29sZS5sb2coJG5vZGUpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJWYWx1ZSAobWlzdGFrZW4/KTpcIilcblx0XHRcdGNvbnNvbGUubG9nKHZhbHVlcyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdC8vIEZpbGwgdGhlIHRlbXBsYXRlIHdpdGggZGF0YTpcblx0XHRsZXQgaSA9IDA7XG5cdFx0dmFsdWVzLmZvckVhY2godmFsID0+IHtcblx0XHQgICAgdmFsID0gdGhpcy5wbGFpblRvT2JqZWN0KCRub2RlLCB2YWwpO1xuXHRcdCAgICBjb25zdCAkbmV3SXRlbSA9IHRoaXMuZ2V0SXRlbSgkbm9kZSwgaSsrLCB2YWwsICR0ZW1wbGF0ZSk7XG5cdFx0ICAgIGlmKCRuZXdJdGVtKSB7XG5cdFx0XHQgICAgJG5vZGUuYXBwZW5kKCRuZXdJdGVtKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyBDbGVhbnVwXG5cdFx0Y29uc3QgJHRlbXAgPSAkbm9kZS5maW5kKFwidGVtcGxhdGVcIik7XG5cdFx0aWYoJHRlbXApIHsgJG5vZGUucmVtb3ZlQ2hpbGQoJHRlbXApOyB9XG5cdFx0Ly8gU2V0IFwiaXRlbXNcIiBsaW5rOlxuXHRcdCRub2RlLml0ZW1zID0gJG5vZGUuY2hpbGRyZW47XG5cdFx0dGhpcy5leHRlbmRJdGVtcygkbm9kZSk7XG5cdH1cblx0LyoqIFJldHVybnMgYW4gSFRNTEVsZW1lbnQgd2l0aCB0aGUgc3RydWN0dXJlIHdpdGhvdXQgZXZlbnRzXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7T2JqZWN0LCBzdHJpbmd9IFt0ZW1wbGF0ZV1cblx0ICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuXHQgKi9cblx0Z2V0VGVtcGxhdGUgKCRub2RlLCB0ZW1wbGF0ZSkge1xuXHRcdC8vIElmIHdlIGFscmVhZHkgaGF2ZSB0aGUgdGVtcGxhdGUsIHJldHVybiBpdDpcblx0XHRpZigkbm9kZS5fdGVtcGxhdGUgIT09IHVuZGVmaW5lZCAmJiAkbm9kZS5fdGVtcGxhdGUgIT09IFwiXCIpIHtcblx0XHRcdHJldHVybiAkbm9kZS5fdGVtcGxhdGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxldCAkdGVtcGxhdGU7XG5cdFx0XHRjb25zdCAkaHRtbFRlbXBsYXRlID0gJG5vZGUucXVlcnlTZWxlY3RvcihcInRlbXBsYXRlXCIpOyAvLyBsb29rIGludG8gSFRNTCB1bmRlciBub2RlXG5cdFx0XHRpZigkaHRtbFRlbXBsYXRlKSB7XG5cdFx0XHRcdCR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMuaHRtbEVsZW1lbnQoJGh0bWxUZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKTtcblx0XHRcdH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICgkbm9kZS50YWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTRUxFQ1RcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkRBVEFMSVNUXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVMXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJPTFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk5BVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiRExcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcImRkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gT2JqZWN0LmtleXModGVtcGxhdGUpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjaGlsZHJlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRlbXBsYXRlLnRhZ05hbWUgIT09IHVuZGVmaW5lZCkgeyAvL1RPRE86IGRvY3VtZW50IChvcHRpb25hbCB0b3AgY2hpbGQgd2hlbiB1c2luZyB0YWdOYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3cmFwID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFt0ZW1wbGF0ZS50YWdOYW1lXSA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUZW1wbGF0ZSBoYXMgbW9yZSB0aGFuIG9uZSB0b3AgZWxlbWVudHMuIFVzaW5nIHRoZSBmaXJzdCBvbmUuIEluOiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm9kZTogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyh0ZW1wbGF0ZSlbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRlbXBsYXRlW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaXNWYWxpZEVsZW1lbnQoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZih2YWwudGFnTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQodmFsLnRhZ05hbWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVbdmFsLnRhZ05hbWVdID0gdmFsO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGVsZXRlKHRlbXBsYXRlW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRlbXBsYXRlIGRlZmluZWQgYW4gZWxlbWVudCB3aGljaCBjYW4gbm90IGJlIGlkZW50aWZpZWQ6IFtcIiArIGtleSArIFwiXSwgdXNpbmcgPHNwYW4+IGluOlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm9kZTogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUZW1wbGF0ZSBoYXMgbm8gZGVmaW5pdGlvbiwgYW5kIGl0IGNhbiBub3QgYmUgZ3Vlc3NlZC4gVXNpbmcgPHNwYW4+LiBUZW1wbGF0ZTogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm9kZTogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBub3QgdGVtcGxhdGUgaXMgZm91bmQsIHVzZSBodG1sIGFzIG9mIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkbm9kZS5jaGlsZEVsZW1lbnRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5odG1sRWxlbWVudCgkbm9kZS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cdFx0XHRpZiAodGVtcGxhdGUpIHtcblx0XHRcdFx0aWYgKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdCh0ZW1wbGF0ZSkpIHtcblx0XHRcdFx0ICAgIGNvbnN0ICR3cmFwID0gbTJkMi51dGlscy5uZXdFbXB0eU5vZGUoKTtcblx0XHRcdFx0ICAgICR3cmFwLmFwcGVuZCgkdGVtcGxhdGUpO1xuXHRcdFx0XHRcdGNvbnN0ICRmcmFnbWVudCA9IHRoaXMuZG9Eb20oJHdyYXAsIHRlbXBsYXRlKTtcblx0XHRcdFx0XHQkdGVtcGxhdGUgPSAkZnJhZ21lbnQuY2hpbGRyZW5bMF07XG5cdFx0XHRcdFx0bTJkMi51dGlscy5kZWZpbmVQcm9wKCRub2RlLCBcIl9fdGVtcGxhdGVcIiwgdGVtcGxhdGUpOyAvLyBUaGlzIGlzIHRoZSBvcmlnaW5hbCB0ZW1wbGF0ZSB3aXRoIGV2ZW50c1xuXHRcdFx0XHR9IGVsc2UgaWYgKG0yZDIudXRpbHMuaXNIdG1sKHRlbXBsYXRlKSkge1xuXHRcdFx0XHRcdCR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMuaHRtbEVsZW1lbnQodGVtcGxhdGUpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG0yZDIudXRpbHMuaXNTZWxlY3RvcklEKHRlbXBsYXRlKSkgeyAvL09ubHkgSURzIGFyZSBhbGxvd2VkIC8vVE9ETyBkb2N1bWVudFxuXHRcdFx0XHRcdCR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMuaHRtbEVsZW1lbnQoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSkuaW5uZXJIVE1MKTtcblx0XHRcdFx0fSBlbHNlIHsgLy9XaGVuIGl0cyBqdXN0IGEgdGFnIG5hbWVcblx0XHRcdFx0XHQkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQodGVtcGxhdGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZigkdGVtcGxhdGUuY2hpbGRyZW5FbGVtZW50Q291bnQgPiAxKSB7XG5cdFx0XHQgICAgY29uc29sZS5sb2coXCJUZW1wbGF0ZXMgb25seSBzdXBwb3J0cyBhIHNpbmdsZSBjaGlsZC4gTXVsdGlwbGUgY2hpbGRyZW4gd2VyZSBkZXRlY3RlZCwgd3JhcHBpbmcgdGhlbSB3aXRoIDxzcGFuPi4gVGVtcGxhdGU6XCIpO1xuXHRcdFx0ICAgIGNvbnNvbGUubG9nKCR0ZW1wbGF0ZSk7XG5cdFx0XHQgICAgY29uc3QgJHNwYW4gPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdFx0ICAgICRzcGFuLmFwcGVuZCgkdGVtcGxhdGUpO1xuXHRcdFx0ICAgICR0ZW1wbGF0ZSA9ICRzcGFuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCR0ZW1wbGF0ZSkge1xuXHRcdFx0XHRtMmQyLnV0aWxzLmRlZmluZVByb3AoJG5vZGUsIFwiX3RlbXBsYXRlXCIsICR0ZW1wbGF0ZSk7IC8vIFRoaXMgaXMgdGhlIERPTVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuICR0ZW1wbGF0ZTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSXQgd2lsbCBzZXQgYSB1bmlxdWUgYXR0cmlidXRlIGFtb25nIGEgZ3JvdXAgb2Ygbm9kZXMgKGdyb3VwZWQgYnkgcGFyZW50KVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqL1xuXHRzZXRVbmlxdWVBdHRyaWIoJG5vZGUsIGtleSkge1xuICAgICAgICBpZighICRub2RlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgkbm9kZSwga2V5LCB7XG4gICAgICAgICAgICAgICAgZ2V0IDogZnVuY3Rpb24oKSAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0IDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZTZWwgPSB0aGlzLnBhcmVudE5vZGUgPyB0aGlzLnBhcmVudE5vZGUuZmluZChcIltcIitrZXkrXCJdXCIpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYocHJldlNlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdG0yZDIudXRpbHMuc2V0QXR0cih0aGlzLCBrZXksIHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblx0fVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIFsgTm9kZSwgc3RyaW5nIF0gdmFsdWVzIChpbmxpbmUgb251cGRhdGUpXG4gICAgICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICovXG4gICAgdXBkYXRlVmFsdWUoJG5vZGUsIGtleSwgdmFsdWUpIHtcblx0XHQvLyBURVNUOiAwNlxuICAgICAgICBpZih0aGlzLmlzVXBkYXRlTGluayh2YWx1ZSkpIHtcblx0XHRcdGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGNvbnN0IG9iaiAgPSB2YWx1ZVswXTtcbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSB2YWx1ZVsxXTtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdmFsdWVbMl07XG5cdFx0XHR2YWx1ZSA9IG9ialtwcm9wXTtcblx0XHRcdGlmKG9iaiBpbnN0YW5jZW9mIENTU1N0eWxlRGVjbGFyYXRpb24gJiYgdGhpcy5fc3RvcmVkLnN0eWxlcy5pbmNsdWRlcyhvYmopKSB7XG5cdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuX3N0b3JlZC5zdHlsZU5vZGVzW3RoaXMuX3N0b3JlZC5zdHlsZXMuaW5kZXhPZihvYmopXTtcblx0XHRcdFx0aWYobTJkMi51cGRhdGVzKSB7XG5cdFx0XHRcdFx0cGFyZW50Lm9udXBkYXRlID0gZnVuY3Rpb24gKGV2KSB7XG5cdFx0XHRcdFx0XHRpZiAoZXYuZGV0YWlsICYmIGV2LmRldGFpbC5wcm9wZXJ0eSA9PT0gXCJzdHlsZVwiICYmIGV2LmRldGFpbC5uZXdWYWx1ZS5zdGFydHNXaXRoKHByb3AgKyBcIjpcIikpIHtcblx0XHRcdFx0XHRcdFx0X3RoaXMuc2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCBjYWxsYmFjayh0aGlzLnN0eWxlW3Byb3BdKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYob2JqIGluc3RhbmNlb2YgRE9NU3RyaW5nTWFwICYmIHRoaXMuX3N0b3JlZC5kYXRhc2V0cy5pbmNsdWRlcyhvYmopKSB7XG5cdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuX3N0b3JlZC5kYXRhc2V0Tm9kZXNbdGhpcy5fc3RvcmVkLmRhdGFzZXRzLmluZGV4T2Yob2JqKV07XG5cdFx0XHRcdGlmKG0yZDIudXBkYXRlcykge1xuXHRcdFx0XHRcdHBhcmVudC5vbnVwZGF0ZSA9IChldikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGV2LmRldGFpbCAmJiBldi5kZXRhaWwucHJvcGVydHkgPT09IFwiZGF0YS1cIiArIHByb3ApIHtcblx0XHRcdFx0XHRcdFx0X3RoaXMuc2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCBjYWxsYmFjayhldi5kZXRhaWwubmV3VmFsdWUpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKG0yZDIudXBkYXRlcykge1xuXHRcdFx0XHRcdG9iai5vbnVwZGF0ZSA9IChldikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGV2LmRldGFpbCAmJiBldi5kZXRhaWwucHJvcGVydHkgPT09IHByb3ApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCFtMmQyLnV0aWxzLmlzT2JqZWN0KCRub2RlW2tleV0pKSB7XG5cdFx0XHRcdFx0XHRcdFx0X3RoaXMuc2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCBjYWxsYmFjayhldi5kZXRhaWwubmV3VmFsdWUpKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogUGxhY2UgYSB2YWx1ZSBlaXRoZXIgaW4gYSBwcm9wZXJ0eSBvciBpbiBhIG5vZGUgKHNob3J0KVxuXHQgKiBAcGFyYW0gJG5vZGUge05vZGV9XG5cdCAqIEBwYXJhbSBrZXkge3N0cmluZ31cblx0ICogQHBhcmFtIHZhbHVlIHsqfVxuXHQgKi9cblx0c2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCB2YWx1ZSkge1xuXHRcdGlmKG0yZDIudXRpbHMuaXNOb2RlKCRub2RlW2tleV0pKSB7XG5cdFx0XHRpZihtMmQyLnNob3J0KSB7XG5cdFx0XHRcdGNvbnN0IG8gPSB0aGlzLnBsYWluVG9PYmplY3QoJG5vZGVba2V5XSwgdmFsdWUpO1xuXHRcdFx0XHRjb25zdCBrID0gbTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG8pICYmIE9iamVjdC5rZXlzKG8pLmxlbmd0aCA+PSAxID8gT2JqZWN0LmtleXMobylbMF0gOiBudWxsO1xuXHRcdFx0XHRpZiAoaykge1xuXHRcdFx0XHRcdCRub2RlW2tleV1ba10gPSB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTaG9ydCBpcyBkaXNhYmxlZC4gVHJ5aW5nIHRvIHNldCBhIHZhbHVlIChcIit2YWx1ZStcIikgaW4gYSBub2RlOlwiKVxuXHRcdFx0XHRjb25zb2xlLmxvZygkbm9kZVtrZXldKTtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJFaXRoZXIgdHVybiBvbiAnc2hvcnQnIGZ1bmN0aW9uYWxpdHksIG9yIGJlIHN1cmUgeW91IHNwZWNpZnkgdGhlIHByb3BlcnR5LCBsaWtlOiAnbm9kZS50ZXh0J1wiKVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbm9kZVtrZXldID0gdmFsdWVcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUGxhY2UgYSB2YWx1ZSBlaXRoZXIgaW4gYSBwcm9wZXJ0eSBvciBpbiBhIG5vZGUgKHNob3J0KVxuXHQgKiBAcGFyYW0gJG5vZGUge05vZGV9XG5cdCAqIEBwYXJhbSBrZXkge3N0cmluZ31cblx0ICogQHBhcmFtIHNhbXBsZSB7Kn0gU2FtcGxlIHZhbHVlICh0byBhdXRvbWF0aWNhbGx5IGd1ZXNzIHByb3BlcnR5KVxuXHQgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZVxuXHQgKi9cblx0Z2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCBzYW1wbGUpIHtcblx0XHRsZXQgdmFsdWUgPSBudWxsO1xuXHRcdGlmKG0yZDIudXRpbHMuaXNOb2RlKCRub2RlW2tleV0pKSB7XG5cdFx0XHRpZihtMmQyLnNob3J0KSB7XG5cdFx0XHRcdGNvbnN0IG8gPSB0aGlzLnBsYWluVG9PYmplY3QoJG5vZGVba2V5XSwgc2FtcGxlIHx8IFwiXCIpO1xuXHRcdFx0XHRjb25zdCBrID0gbTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG8pICYmIE9iamVjdC5rZXlzKG8pLmxlbmd0aCA+PSAxID8gT2JqZWN0LmtleXMobylbMF0gOiBudWxsO1xuXHRcdFx0XHRpZiAoaykge1xuXHRcdFx0XHRcdHZhbHVlID0gJG5vZGVba2V5XVtrXTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTaG9ydCBpcyBkaXNhYmxlZC4gVHJ5aW5nIHRvIGdldCBhIHZhbHVlIGZyb20gbm9kZTpcIilcblx0XHRcdFx0Y29uc29sZS5sb2coJG5vZGVba2V5XSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRWl0aGVyIHR1cm4gb24gJ3Nob3J0JyBmdW5jdGlvbmFsaXR5LCBvciBiZSBzdXJlIHlvdSBzcGVjaWZ5IHRoZSBwcm9wZXJ0eSwgbGlrZTogJ25vZGUudGV4dCdcIilcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFsdWUgPSAkbm9kZVtrZXldO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogQmFzaWMgUHJveHkgdG8gZW5hYmxlIGFzc2lnbiB2YWx1ZXMgdG8gZWxlbWVudHNcblx0ICogZm9yIGV4YW1wbGU6IGRpdi5hID0gXCJDbGljayBtZVwiIChpbnN0ZWFkIG9mIHVzaW5nOiBkaXYuYS50ZXh0KVxuXHQgKiBOT1RFOiBmb3IgcmVhZGluZywgXCJkaXYuYVwiIHdpbGwgcmV0dXJuIGEgTm9kZSBhbmQgbm90IHRoZSB2YWx1ZS5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZV0gRm9yY2UgdG8gdXBkYXRlXG5cdCAqIEByZXR1cm5zIHtQcm94eSwgT2JqZWN0fVxuXHQgKi9cblx0cHJveHkgKG9iaiwgZm9yY2UpIHtcblx0ICAgIGlmKCFtMmQyLnNob3J0IHx8IChvYmogPT09IG51bGwgfHwgKG9iai5fcHJveHkgIT09IHVuZGVmaW5lZCAmJiBmb3JjZSA9PT0gdW5kZWZpbmVkKSkpIHtcblx0ICAgICAgICByZXR1cm4gb2JqO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBvYmouX3Byb3h5ID0gb2JqO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHtcbiAgICAgICAgICAgICAgICBnZXQ6ICh0YXJnZXQsIHByb3BlcnR5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0YXJnZXRbcHJvcGVydHldO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRydWUpIHtcblx0XHRcdFx0XHRcdGNhc2UgdCA9PT0gbnVsbCB8fCB0ID09PSB1bmRlZmluZWQ6IHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBcdC8vIEZ1bmN0aW9ucyBzaG91bGQgYmluZCB0YXJnZXQgYXMgXCJ0aGlzXCJcblx0XHRcdFx0XHRcdGNhc2UgbTJkMi51dGlscy5pc0Z1bmN0aW9uKHQpOiByZXR1cm4gdC5iaW5kKHRhcmdldCk7XG5cdFx0XHRcdFx0XHQvLyBJZiB0aGVyZSB3YXMgYSBmYWlsZWQgYXR0ZW1wdCB0byBzZXQgcHJveHksIHJldHVybiBpdCBvbiByZWFkOlxuXHRcdFx0XHRcdFx0Y2FzZSB0Ll9wcm94eSAmJiB0YXJnZXRbXCIkXCIgKyBwcm9wZXJ0eV0gIT09IHVuZGVmaW5lZDogcmV0dXJuIHRhcmdldFtcIiRcIiArIHByb3BlcnR5XTtcblx0XHRcdFx0XHRcdGNhc2UgdC5fcHJveHkgPT09IHVuZGVmaW5lZCAmJiBtMmQyLnV0aWxzLmlzRWxlbWVudCh0KTogcmV0dXJuIHRoaXMucHJveHkodCk7XG5cdFx0XHRcdFx0XHRkZWZhdWx0OiByZXR1cm4gdDtcblx0XHRcdFx0XHR9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6ICh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb2xkVmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBpZihtMmQyLnV0aWxzLmlzRWxlbWVudCh0YXJnZXRbcHJvcGVydHldKSkge1xuXHRcdFx0XHRcdFx0b2xkVmFsdWUgPSB0aGlzLmdldFNob3J0VmFsdWUodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5zZXRTaG9ydFZhbHVlKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHByb3BlcnR5ID09PSBcIm9udXBkYXRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgXHRpZihtMmQyLnVwZGF0ZXMpIHtcblx0XHRcdFx0XHRcdFx0aWYgKG0yZDIudXRpbHMuaXNGdW5jdGlvbih2YWx1ZSkpIHtcblx0XHRcdFx0XHRcdCAgICAgICAgLy8gQnkgdXNpbmcgYWRkRXZlbnRMaXN0ZW5lciB3ZSBjYW4gYXNzaWduIG11bHRpcGxlIGxpc3RlbmVycyB0byBhIHNpbmdsZSBub2RlXG5cdFx0XHRcdFx0XHRcdFx0dGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVcIiwgdmFsdWUsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdG9sZFZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTtcblx0XHRcdFx0XHRcdFx0XHR0YXJnZXRbcHJvcGVydHldID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIlZhbHVlIHBhc3NlZCB0byAnb251cGRhdGUnIGlzIGluY29ycmVjdCwgaW4gbm9kZTpcIik7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2codGFyZ2V0KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlZhbHVlOiAobm90IGEgZnVuY3Rpb24pXCIpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgXHRcdGNvbnNvbGUubG9nKFwiVXBkYXRlcyBhcmUgbm90IGF2YWlsYWJsZSB3aGVuIGBtMmQyLnVwZGF0ZXMgPT0gZmFsc2VgOlwiKVxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh0YXJnZXQpO1xuXHRcdFx0XHRcdFx0fVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYocHJvcGVydHkgPT09IFwiaXRlbXNcIikgeyAvL1Jlc2V0IGl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbXMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9JdGVtcyh0YXJnZXQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy51cGRhdGVWYWx1ZSh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHQvLyBDaGVjayBmb3Igb251cGRhdGUgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCBvYnNlcnZlIGNoYW5nZXMgb24gdmFsdWVzXG5cdFx0XHRcdFx0aWYobTJkMi51cGRhdGVzICYmIHRhcmdldC5vbnVwZGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0ICAgIGlmKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInVwZGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICAgOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA6IHByb3BlcnR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlIDogb2xkVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJveHkob2JqLCBoYW5kbGVyKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogRnVuY3Rpb24gcGFzc2VkIHRvIE11dGF0aW9uT2JzZXJ2ZXJcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtNdXRhdGlvblJlY29yZH0gbXV0YXRpb25zTGlzdFxuXHQgKiBAcGFyYW0ge011dGF0aW9uT2JzZXJ2ZXJ9IG9ic2VydmVyXG5cdCAqL1xuXHRvbk9ic2VydmUobXV0YXRpb25zTGlzdCwgb2JzZXJ2ZXIpIHtcblx0XHRtdXRhdGlvbnNMaXN0LmZvckVhY2gobSA9PiB7XG5cdFx0XHRjb25zdCB0YXJnZXQgPSBtLnRhcmdldDtcblx0XHRcdC8vIFdlIHN0b3JlIHRoZSBldmVudHMgdG8gcmVtb3ZlIGltbWVkaWF0ZWx5IHJlcGVhdGVkIGV2ZW50cy5cblx0XHRcdC8vIEZvcm1zIHdpbGwgbGluayBlbGVtZW50cyB3aGljaCBjYW4gbm90IGJlIHNldCBhcyBwcm94eSBzbyB3ZVxuXHRcdFx0Ly8gYWRkIGEgbGluayBuYW1lZCBgXCIkXCIgKyBrZXlgIGJ1dCB0aGlzIGhhdmUgdGhlIHNpZGUgZWZmZWN0IHRvXG5cdFx0XHQvLyBnZW5lcmF0ZSB0d28gdHJpZ2dlcnMgKG9uZSBmb3IgdGhlIGVsZW1lbnQgYW5kIG9uZSBmb3IgdGhlIFByb3h5KS5cblx0XHRcdGlmKHRoaXMuX3N0b3JlZC5ldmVudHMuaW5kZXhPZihtKSA+PSAwKSB7IHJldHVybiB9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9zdG9yZWQuZXZlbnRzLnB1c2gobSk7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGkgPSB0aGlzLl9zdG9yZWQuZXZlbnRzLmluZGV4T2YobSk7XG5cdFx0XHRcdFx0aWYoaSA+PSAwKSB7IHRoaXMuX3N0b3JlZC5ldmVudHMuc3BsaWNlKGksIDEpOyB9XG5cdFx0XHRcdH0sIG0yZDIuc3RvcmVkRXZlbnRzVGltZW91dCk7IC8vVE9ETzogdGhpcyB3aWxsIHByZXZlbnQgcmVwZWF0ZWQgZXZlbnRzIHRvIGJlIHRyaWdnZXJlZCBpbiBsZXNzIHRoYW4gNTBtcyA6IGRvY3VtZW50XG5cdFx0XHR9XG5cdFx0XHQvLyBDaGVjayBmb3Igb251cGRhdGUgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0aWYodGFyZ2V0Lm9udXBkYXRlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aWYobS50eXBlID09PSBcImF0dHJpYnV0ZXNcIikge1xuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gbTJkMi51dGlscy5nZXRBdHRyT3JQcm9wKHRhcmdldCwgbS5hdHRyaWJ1dGVOYW1lKTtcblx0XHRcdFx0XHRpZih2YWx1ZSAhPT0gbS5vbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwidXBkYXRlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICAgOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5IDogbS5hdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA6IG0ub2xkVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0fSBlbHNlIGlmKG0udHlwZSA9PT0gXCJjaGlsZExpc3RcIikgeyAvL1RPRE86IGltcHJvdmUgZm9yIG90aGVyIHR5cGVzXG5cdFx0XHRcdCAgICBjb25zdCAkY2hpbGQgPSBtLmFkZGVkTm9kZXNbMF0gfHwgbS5yZW1vdmVkTm9kZXNbMF07XG5cdFx0XHRcdFx0aWYoJGNoaWxkLm5vZGVOYW1lID09PSBcIiN0ZXh0XCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gbS5hZGRlZE5vZGVzWzBdLnRleHRDb250ZW50O1xuXHRcdFx0XHRcdFx0Y29uc3Qgb2xkVmFsdWUgPSBtLnJlbW92ZWROb2Rlcy5sZW5ndGggPyBtLnJlbW92ZWROb2Rlc1swXS50ZXh0Q29udGVudCA6IG51bGw7XG5cdFx0XHRcdFx0XHRpZih2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJ1cGRhdGVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICAgOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlIDogb2xkVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHR9IGVsc2UgaWYodGFyZ2V0Lml0ZW1zICE9PSB1bmRlZmluZWQpIHsgLy9JdGVtcyB1cGRhdGVkXG5cdFx0XHRcdFx0ICAgIC8vVE9ETzogRG9jdW1lbnQ6IGluIGNhc2Ugb2YgaXRlbXMsIFwibmV3ID0gYWRkZWRcIiwgXCJvbGQgPSByZW1vdmVkXCJcblx0XHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gbS5hZGRlZE5vZGVzO1xuXHRcdFx0XHRcdFx0Y29uc3Qgb2xkVmFsdWUgPSBtLnJlbW92ZWROb2Rlcztcblx0XHRcdFx0XHRcdGlmKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInVwZGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlICAgICA6IHR5cGVvZiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA6IFwiaXRlbXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlIDogb2xkVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQvKipcblx0ICogQWRkIE11dGF0aW9uT2JzZXJ2ZXIgdG8gb2JqZWN0XG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7IEhUTUxFbGVtZW50IH0gJG5vZGVcblx0ICovXG5cdG9ic2VydmUoJG5vZGUpIHtcblx0XHRpZihtMmQyLnVwZGF0ZXMpIHtcblx0XHRcdGNvbnN0IG11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLm9uT2JzZXJ2ZS5iaW5kKHRoaXMpKVxuXHRcdFx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRcdFx0YXR0cmlidXRlT2xkVmFsdWU6IHRydWVcblx0XHRcdH1cblx0XHRcdG9wdGlvbnMuc3VidHJlZSA9IHRydWU7XG5cdFx0XHRvcHRpb25zLmNoaWxkTGlzdCA9IHRydWU7XG5cdFx0XHRjb25zdCB0b09ic2VydmUgPSAkbm9kZS5fcHJveHkgfHwgJG5vZGU7XG5cdFx0XHRtdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodG9PYnNlcnZlLCBvcHRpb25zKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSByb290IG5vZGUgYXMgcHJveHlcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd8SFRNTEVsZW1lbnR9IHNlbGVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICovXG5cdGdldFByb3h5Tm9kZShzZWxlY3Rvciwgb2JqKSB7XG5cdFx0Y29uc3QgJG5vZGUgPSB0aGlzLmRvRG9tKHNlbGVjdG9yLCBvYmopO1xuXHRcdGlmKCRub2RlKSB7XG5cdFx0ICAgIHRoaXMub2JzZXJ2ZSgkbm9kZSk7XG5cdFx0ICAgIHJldHVybiB0aGlzLnByb3h5KCRub2RlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogRXh0ZW5kcyBcIml0ZW1zXCJcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtOb2RlTGlzdCwgSFRNTENvbGxlY3Rpb259ICRub2RlXG5cdCAqL1xuXHRleHRlbmRJdGVtcygkbm9kZSkge1xuXHRcdC8vIFdlIHRyeSB0byBhZGQgbW9zdCBvZiB0aGUgYXJyYXkgZnVuY3Rpb25zIGludG8gTm9kZUxpc3QgYW5kIEhUTUxDb2xsZWN0aW9uOlxuXHRcdC8vIE5PVEU6IE5vdCBhbGwgd2lsbCB3b3JrIGFzIGV4cGVjdGVkLlxuXHRcdC8vIE5PVEU6IGZ1bmN0aW9uKCkge30gaXMgbm90IHRoZSBzYW1lIGhlcmUgYXMgKCkgPT4ge30gYXMgXCJ0aGlzXCIgaXMgbm90IGFzIGV4cGVjdGVkXG5cdFx0ZnVuY3Rpb24gcmVhdHRhY2goaXRlbXMpIHtcblx0XHRcdGl0ZW1zLmZvckVhY2goaXRtID0+IHtcblx0XHRcdFx0Y29uc3QgcGFyZW50ID0gaXRtLnBhcmVudE5vZGU7XG5cdFx0XHRcdGNvbnN0IGRldGF0Y2hlZEl0ZW0gPSBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRtKTtcdC8vV2UgZGV0YWNoIGZyb20gb3JpZ2luYWwgcGFyZW50XG5cdFx0XHRcdCRub2RlLmFwcGVuZChkZXRhdGNoZWRJdGVtKTsgLy9BdHRhY2ggdG8gJG5vZGUgKHdvcmtzIHdpdGggbm9uLWV4aXN0aW5nIGVsZW1lbnRzKVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGNvbnN0IGl0ZW1zID0gJG5vZGUuaXRlbXM7XG5cdFx0Ly8gTm9uLVN0YW5kYXJkIG9yIG5vbi1leGlzdGVudCBpbiBBcnJheTpcblx0XHRjb25zdCBub25TdGQgPSBbXCJjbGVhclwiLCBcImdldFwiLCBcInJlbW92ZVwiLCBcInNlbGVjdGVkXCIsIFwiZmlyc3RcIiwgXCJsYXN0XCIsIFwiZmluZEFsbFwiXTtcblx0XHQvLyBBcnJheSBwcm9wZXJ0aWVzOlxuXHRcdE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKEFycmF5LnByb3RvdHlwZSkuY29uY2F0KG5vblN0ZCkuZm9yRWFjaChtZXRob2QgPT4ge1xuXHRcdFx0aWYoaXRlbXNbbWV0aG9kXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGxldCBmdW5jID0gbnVsbDtcblx0XHRcdFx0Y29uc3QgX3RoaXMgPSB0aGlzO1xuXHRcdFx0XHRzd2l0Y2ggKG1ldGhvZCkge1xuXHRcdFx0XHQgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLSBTYW1lIGFzIGluIEFycmF5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRcdFx0Y2FzZSBcImNvcHlXaXRoaW5cIjogLy8gY29weSBlbGVtZW50IGZyb20gaW5kZXggdG8gaW5kZXhcblx0XHRcdFx0XHRjYXNlIFwiZmlsbFwiOiAvLyByZXBsYWNlIE4gZWxlbWVudHMgaW4gYXJyYXlcblx0XHRcdFx0XHRjYXNlIFwic3BsaWNlXCI6IC8vIGFkZCBvciByZW1vdmUgZWxlbWVudHNcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgICAgICAgY29uc29sZS5sb2coXCJOb3QgYXZhaWxhYmxlIHlldDogXCIgKyBtZXRob2QpO1xuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJyZXZlcnNlXCI6IC8vIHJldmVyc2UgdGhlIG9yZGVyXG5cdFx0XHRcdFx0XHRmdW5jID0gZnVuY3Rpb24oLi4uYXJncykge1xuXHRcdFx0XHRcdCAgICAgICAgaWYodGhpcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKHRoaXMuaXRlbXMpOyAvL0tlZXAgYSBjb3B5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldE9iaiA9IGl0ZW1zW21ldGhvZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXR0YWNoKGl0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldE9iajtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU3BlY2lhbCBJbXBsZW1lbnRhdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHRcdGNhc2UgXCJjbGVhclwiOiAvLyBwYXJlbnROb2RlLnJlcGxhY2VDaGlsZHJlbigpIGNhbiBhbHNvIGJlIHVzZWRcblx0XHRcdFx0XHRcdGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUodGhpcy5pdGVtc1swXSkgdGhpcy5pdGVtc1swXS5yZW1vdmUoKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImdldFwiOiAvLyB3aWxsIHJldHVybiB0aGUgaXRlbSB3aXRoIGRhdGEtaWQ6XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbihpZCkge1xuXHRcdFx0XHRcdCAgICAgICAgbGV0IGZvdW5kID0gbnVsbDtcblx0XHRcdFx0XHQgICAgICAgIGlmKHRoaXMuaXRlbXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgdGhpcy5pdGVtcy5zb21lKGl0ZW0gPT4ge1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICBjb25zdCBzYW1lSWQgPSBtMmQyLnV0aWxzLmlzTnVtZXJpYyhpZCkgPyAoaXRlbS5kYXRhc2V0LmlkICogMSkgPT09IGlkICogMSA6IGl0ZW0uZGF0YXNldC5pZCA9PT0gaWQ7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgIGlmKGl0ZW0uZGF0YXNldCAmJiBzYW1lSWQpIHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaXRlbTtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0ICAgICAgICAgICAgfSk7XG5cdFx0XHRcdFx0ICAgICAgICB9XG5cdFx0XHRcdFx0ICAgICAgICByZXR1cm4gZm91bmQ7XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNlbGVjdGVkXCI6IC8vIHdpbGwgcmV0dXJuIHRoZSBzZWxlY3RlZCBpdGVtIGluIGxpc3Rcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgICAgICAgcmV0dXJuIF90aGlzLnByb3h5KHRoaXMuZmluZChcIjpzY29wZSA+IFwiICsgXCJbc2VsZWN0ZWRdXCIpKTsgLy9vbmx5IGRpcmVjdCBjaGlsZHJlblxuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJmaXJzdFwiOiAvLyByZXR1cm5zIHRoZSBmaXJzdCBpdGVtIGluIGxpc3Rcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgICAgICAgcmV0dXJuIF90aGlzLnByb3h5KHRoaXMuaXRlbXNbMF0pO1xuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJsYXN0XCI6IC8vIHJldHVybnMgdGhlIGxhc3QgaXRlbSBpbiBsaXN0XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgICAgICAgIHJldHVybiBfdGhpcy5wcm94eSh0aGlzLml0ZW1zW3RoaXMuaXRlbXMubGVuZ3RoIC0gMV0pO1xuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJwb3BcIiA6IC8vUmVtb3ZlIGFuZCByZXR1cm4gbGFzdCBlbGVtZW50OlxuXHRcdFx0XHRcdCAgICBmdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICAgICAgICBpZih0aGlzLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzWzBdLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm94eShwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5pdGVtc1t0aGlzLml0ZW1zLmxlbmd0aCAtIDFdKSk7XG5cdFx0XHRcdFx0ICAgICAgICB9XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInB1c2hcIjogLy8gQWRkIG9uZSBpdGVtIGF0IHRoZSBlbmQ6XG5cdFx0XHRcdFx0XHRmdW5jID0gZnVuY3Rpb24ob2JqKSB7XG5cdFx0XHRcdFx0XHQgICAgb2JqID0gX3RoaXMucGxhaW5Ub09iamVjdCh0aGlzLCBvYmopO1xuXHRcdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzRWxlbWVudChvYmopKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hcHBlbmQob2JqKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3Qob2JqKSkge1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnN0ICRjaGlsZCA9IF90aGlzLmdldEl0ZW0odGhpcywgaW5kZXgsIG9iaik7XG5cdFx0XHRcdFx0XHRcdCAgICB0aGlzLmFwcGVuZENoaWxkKCRjaGlsZCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zb2xlLmxvZyhcIlRyeWluZyB0byBwdXNoIGFuIHVua25vd24gdmFsdWUgaW50byBhIGxpc3Q6XCIpO1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc29sZS5sb2cob2JqKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwicmVtb3ZlXCI6IC8vIHdpbGwgcmV0dXJuIHRoZSBpdGVtIHdpdGggZGF0YS1pZDpcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRcdFx0ICAgICAgICBpZih0aGlzLml0ZW1zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCAgICAgICAgICAgIGNvbnN0IGVsZW0gPSB0aGlzLml0ZW1zLmdldChpZCk7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgaWYoZWxlbS5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgZWxlbS5yZW1vdmUoKTtcblx0XHRcdFx0XHQgICAgICAgICAgICB9XG5cdFx0XHRcdFx0ICAgICAgICB9XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNoaWZ0XCI6IC8vIHJlbW92ZSBhbmQgcmV0dXJuIGZpcnN0IGl0ZW06XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgICAgICAgIGlmKHRoaXMuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuaXRlbXNbMF0ucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb3h5KHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLml0ZW1zWzBdKSk7XG5cdFx0XHRcdFx0ICAgICAgICB9XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNvcnRcIjogLy8gWW91IGNhbiBwYXNzIGEgZnVuY3Rpb24gdG8gY29tcGFyZSBpdGVtczpcblx0XHRcdFx0XHRcdGZ1bmMgPSBmdW5jdGlvbihjb21wYXJlRnVuYykge1xuXHRcdFx0XHRcdCAgICAgICAgaWYodGhpcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKHRoaXMuaXRlbXMpOyAvL0tlZXAgY29weVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5zb3J0KGNvbXBhcmVGdW5jIHx8ICgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudGV4dC5sb2NhbGVDb21wYXJlKGIudGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhdHRhY2goaXRlbXMpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwidW5zaGlmdFwiOiAvLyBBZGQgYW4gaXRlbSB0byB0aGUgYmVnaW5uaW5nXG5cdFx0XHRcdFx0XHRmdW5jID0gZnVuY3Rpb24ob2JqKSB7XG5cdFx0XHRcdFx0XHQgICAgb2JqID0gX3RoaXMucGxhaW5Ub09iamVjdCh0aGlzLCBvYmopO1xuXHRcdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzRWxlbWVudChvYmopKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wcmVwZW5kKG9iaik7XG5cdFx0XHRcdFx0XHQgICAgfSBlbHNlIGlmIChtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3Qob2JqKSkge1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnN0ICRjaGlsZCA9IF90aGlzLmdldEl0ZW0odGhpcywgaW5kZXgsIG9iaik7XG5cdFx0XHRcdFx0XHRcdCAgICB0aGlzLnByZXBlbmQoJGNoaWxkKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKFwiVHJ5aW5nIHRvIHVuc2hpZnQgYW4gdW5rbm93biB2YWx1ZSBpbnRvIGEgbGlzdDpcIik7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zb2xlLmxvZyhvYmopXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0ZGVmYXVsdDogLy8tLS0tLS0tLS0tLS0tLS0tLSBMaW5rIHRvIEFycmF5IC0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdFx0XHQgICAgbGV0IGFyck1ldGhvZCA9IG1ldGhvZDtcblx0XHRcdFx0XHRcdC8vIG5vaW5zcGVjdGlvbiBGYWxsVGhyb3VnaEluU3dpdGNoU3RhdGVtZW50SlNcblx0XHRcdFx0XHRcdHN3aXRjaCh0cnVlKSB7XG5cdFx0XHRcdFx0ICAgICAgICBjYXNlIG1ldGhvZCA9PT0gXCJmaW5kQWxsXCI6XG5cdFx0XHRcdFx0ICAgICAgICAgICAgYXJyTWV0aG9kID0gXCJmaWx0ZXJcIjsgLy8gVXNlIFwiZmlsdGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIG0yZDIudXRpbHMuaXNGdW5jdGlvbihBcnJheS5wcm90b3R5cGVbbWV0aG9kXSk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgbm9kZXMgdG8gcHJveHkgc28gd2UgY2FuIHVzZSBzaG9ydCBhc3NpZ25tZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0LCBjb25jYXQsIGV2ZXJ5LCBmaWx0ZXIsIGZpbmQsIGZpbmRJbmRleCwgZm9yRWFjaCwgaW5jbHVkZXMsIGluZGV4T2YsIGpvaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtleXMsIGxhc3RJbmRleE9mLCBtYXAsIHJlZHVjZSwgcmVkdWNlUmlnaHQsIHNsaWNlLCBzb21lLCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyRnVuYyA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm94aWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKCRub2RlLml0ZW1zKS5mb3JFYWNoKG4gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3hpZXMucHVzaChfdGhpcy5wcm94eShuKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHByb3hpZXMpW2Fyck1ldGhvZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hhbmdlIGJlaGF2aW91ciBvZiBmaW5kOiAvL1RPRE86IGRvY3VtZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmaW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5pc1N0cmluZyhhcmdzWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZChhcmdzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJGdW5jKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZmluZEFsbFwiOiAgLy9UT0RPOiBkb2N1bWVudGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcoYXJnc1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRBbGwoYXJnc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyRnVuYyguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbmNhdFwiOiAvL1RPRE86IGRvY3VtZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5pc0FycmF5KGFyZ3NbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGFyZ3NbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IGFyZ3NbaV1bal07XG5cdFx0XHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighIG0yZDIudXRpbHMuaXNFbGVtZW50KG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IF90aGlzLnBsYWluVG9PYmplY3QodGhpcywgYXJnc1tpXVtqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG9iaikpIHtcblx0XHRcdFx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBfdGhpcy5nZXRJdGVtKHRoaXMsIGluZGV4LCBvYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaChvYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gYXJyRnVuYztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoZnVuYykge1xuXHRcdFx0XHRcdG0yZDIudXRpbHMuZGVmaW5lUHJvcChpdGVtcywgbWV0aG9kLCBmdW5jLmJpbmQoJG5vZGUpKTsgLy9iaW5kOiBzcGVjaWZ5IHRoZSBcInRoaXNcIiB2YWx1ZVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cbi8qKlxuICogTTJEMiBBbGVydHMgRXh0ZW5zaW9uXG4gKiBAc2luY2UgMjAyMS0wNS0yMFxuICpcbiAqIEEgcmVwbGFjZW1lbnQgb2YgYGFsZXJ0YCxgcHJvbXB0YCBhbmQgYGNvbmZpcm1gLiBJbnNwaXJlZCBieSBgU3dlZXRBbGVydGAsIHdpdGhcbiAqIGN1c3RvbWl6YWJsZSB0aGVtZSBhbmQgYmV0dGVyIE0yRDIgaW50ZWdyYXRpb24uXG4gKlxuICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gKiAkLndhaXQgICAgICAgOiBEaXNwbGF5cyBhIHNwaW5uZXIgd2l0aG91dCBhbnkgYnV0dG9uIGluIGl0LlxuICogJC5hbGVydCAgICAgIDogRGlzcGxheXMgYSBzaW1wbGUgbWVzc2FnZSB3aXRoIFwib2tcIiBidXR0b24uXG4gKiAkLnN1Y2Nlc3MgICAgOiBTYW1lIGFzICQuYWxlcnQsIGJ1dCBzaG93IGEgXCJjaGVja1wiIGljb24uXG4gKiAkLmZhaWx1cmUgICAgOiBTYW1lIGFzICQuYWxlcnQsIGJ1dCBzaG93cyBhIFwid2FybmluZ1wiIGljb24uXG4gKiAkLmNvbmZpcm0gICAgOiBEaXNwbGF5cyBhIGNvbmZpcm1hdGlvbiBtZXNzYWdlIHdpdGggXCJ5ZXNcIiBhbmQgXCJub1wiIGJ1dHRvbnMuXG4gKiAkLnByb21wdCAgICAgOiBEaXNwbGF5cyBhbiBpbnB1dCBwcm9tcHQgd2l0aCBcImNhbmNlbFwiIGFuZCBcInNlbmRcIiBidXR0b25zLlxuICogJC5tZXNzYWdlICAgIDogRnJlZSBmb3JtIG1lc3NhZ2UgKGFsbCB0aGUgcHJldmlvdXMgaW1wbGVtZW50YXRpb25zIHVzZXMgdGhpcyBmdW5jdGlvbilcbiAqICQuY2xvc2VBbGwgICA6IENsb3NlIGFueSBtZXNzYWdlIHRoYXQgbWlnaHQgYmUgb3BlblxuXG4gKiBEb2N1bWVudGF0aW9uIDpcbiAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi9hbGVydC5tZFxuICogaHR0cHM6Ly9naXRodWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL2FsZXJ0Lm1kXG4gKi9cbm0yZDIubG9hZCgkID0+IHtcbiAgICBmdW5jdGlvbiBjbG9zZShhZnRlckNsb3NlKSB7XG4gICAgICAgIGxldCB3aW5FeGlzdHMgPSAkLmV4aXN0cyhcIiNtMmQyLWFsZXJ0IC5tMmQyLWFsZXJ0LWZyb250XCIpO1xuICAgICAgICBpZih3aW5FeGlzdHMpIHtcbiAgICAgICAgICAgIGxldCB3aW4gPSAkKFwiI20yZDItYWxlcnQgLm0yZDItYWxlcnQtZnJvbnRcIik7XG4gICAgICAgICAgICB3aW4uY3NzLmFkZChcInZhbmlzaFwiKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB3aW5FeGlzdHMgPSAkLmV4aXN0cyhcIiNtMmQyLWFsZXJ0IC5tMmQyLWFsZXJ0LWZyb250XCIpO1xuICAgICAgICAgICAgICAgIGlmKHdpbkV4aXN0cykge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI20yZDItYWxlcnRcIikucmVtb3ZlKCk7IC8vIEJlIHN1cmUgaXQgZXhpc3RzIGJlZm9yZSB0cnlpbmcgdG8gcmVtb3ZlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKGFmdGVyQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJDbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDQwMCk7IC8vQW5pbWF0aW9uIHRha2VzIDUwMCwgYWZ0ZXIgdGhhdCB3aWxsIGJlIHJlc3RvcmVkLCBzbyB3ZSBuZWVkIHRvIHJlbW92ZSBpdCBiZWZvcmUgdGhhdCB0aW1lLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYoYWZ0ZXJDbG9zZSkge1xuICAgICAgICAgICAgICAgIGFmdGVyQ2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBmYUljb25zID0ge1xuICAgICAgICB3cmFwICAgICA6IGZhbHNlLFxuICAgICAgICBxdWVzdGlvbiA6IFtcImZhXCIsIFwiZmEtcXVlc3Rpb24tY2lyY2xlXCJdLFxuICAgICAgICBpbmZvICAgICA6IFtcImZhXCIsIFwiZmEtZXhjbGFtYXRpb24tY2lyY2xlXCJdLFxuICAgICAgICBlcnJvciAgICA6IFtcImZhXCIsIFwiZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIl0sXG4gICAgICAgIG9rICAgICAgIDogW1wiZmFcIiwgXCJmYS1jaGVja1wiXSxcbiAgICAgICAgaW5wdXQgICAgOiBbXCJmYVwiLCBcImZhLWVkaXRcIl0sXG4gICAgICAgIHdhaXQgICAgIDogW1wiZmFcIiwgXCJmYS1jb2dcIiwgXCJmYS1zcGluXCJdXG4gICAgfVxuICAgIGNvbnN0IG1hdGVyaWFsID0ge1xuICAgICAgICB3cmFwICAgICA6IFwibWF0ZXJpYWwtaWNvbnNcIixcbiAgICAgICAgcXVlc3Rpb24gOiBcImhlbHBcIixcbiAgICAgICAgaW5mbyAgICAgOiBcImluZm9cIixcbiAgICAgICAgZXJyb3IgICAgOiBcImVycm9yXCIsXG4gICAgICAgIG9rICAgICAgIDogXCJkb25lXCIsXG4gICAgICAgIGlucHV0ICAgIDogXCJlZGl0XCIsXG4gICAgICAgIHdhaXQgICAgIDogXCJwZW5kaW5nXCJcbiAgICB9XG4gICAgY29uc3QgZGVmYXVsdENzcyA9IHtcbiAgICAgICAgd3JhcCAgICAgOiBmYWxzZSxcbiAgICAgICAgcXVlc3Rpb24gOiBcImljb25fcXVlc3Rpb25cIixcbiAgICAgICAgaW5mbyAgICAgOiBcImljb25faW5mb1wiLFxuICAgICAgICBlcnJvciAgICA6IFwiaWNvbl9lcnJvclwiLFxuICAgICAgICBvayAgICAgICA6IFwiaWNvbl9va1wiLFxuICAgICAgICBpbnB1dCAgICA6IFwiaWNvbl9pbnB1dFwiLFxuICAgICAgICB3YWl0ICAgICA6IFwiaWNvbl93YWl0XCJcbiAgICB9XG4gICAgJC5tZXNzYWdlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBsZXQgY3NzID0gZGVmYXVsdENzcztcbiAgICAgICAgc3dpdGNoICgkLm1lc3NhZ2VJY29ucykge1xuICAgICAgICAgICAgY2FzZSBcImZhXCI6IGNzcyA9IGZhSWNvbnM7IGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwibWF0ZXJpYWxcIiA6IGNzcyA9IG1hdGVyaWFsOyBicmVha1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZigkLmlzT2JqZWN0KCQubWVzc2FnZUljb25zKSkge1xuICAgICAgICAgICAgICAgICAgICBjc3MgPSAkLm1lc3NhZ2VJY29ucztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYob3B0aW9ucykge1xuICAgICAgICAgICAgaWYoISAkLmlzRnVuY3Rpb24ob3B0aW9ucy5jYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICBpZihvcHRpb25zLmNhbGxiYWNrICYmISBvcHRpb25zLnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50ZXh0ID0gb3B0aW9ucy5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayA9ICgpID0+IHt9XG4gICAgICAgICAgICB9XG4gXHRcdCAgICBpZighIG9wdGlvbnMudGV4dCkgeyBvcHRpb25zLnRleHQgPSBcIlwiIH1cbiAgICAgICAgfVxuICAgICAgICBjbG9zZSgoKSA9PiB7IC8vIEJlIHN1cmUgd2UgaGF2ZSBubyBvdGhlciBhbGVydFxuICAgICAgICAgICAgJChcImJvZHlcIiwge1xuICAgICAgICAgICAgICAgIG0yZDJBbGVydCA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgIGlkIDogXCJtMmQyLWFsZXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIGJhY2sgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFwibTJkMi1hbGVydC1iYWNrXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA6IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0IDowLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgOiBcIiMwMDA1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb250IDogT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZm9ybVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IChvcHRpb25zLmNzcyA/ICgkLmlzQXJyYXkob3B0aW9ucy5jc3MpID8gb3B0aW9ucy5jc3MgOiBbb3B0aW9ucy5jc3NdKSA6IFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoW1wibTJkMi1hbGVydC1mcm9udFwiLCBcInBvcHVwXCIsIG9wdGlvbnMuaWNvbl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6SW5kZXggOiAxMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb24gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcInNwYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogW1wiaWNvblwiLCBvcHRpb25zLmljb25dLmNvbmNhdChjc3Mud3JhcCA/IFtjc3Mud3JhcF0gOiBjc3Nbb3B0aW9ucy5pY29uXSkuY29uY2F0KG9wdGlvbnMuaWNvbiA9PT0gXCJ3YWl0XCIgPyBcInNwaW5cIiA6IFwiXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0IDogY3NzLndyYXAgPyBjc3Nbb3B0aW9ucy5pY29uXSA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBcIm0yZDItYWxlcnQtdGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbiA6IG9wdGlvbnMudGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1zZyA6ICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFwibTJkMi1hbGVydC10ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3B0aW9ucy5pY29uID09PSBcImlucHV0XCIgJiYhIG9wdGlvbnMudGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNldCA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogXCJtMmQyLWFsZXJ0LWZpZWxkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IFwiYW5zd2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZigkLmlzUGxhaW5PYmplY3Qob3B0aW9ucy50ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNldCA6IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBcIm0yZDItYWxlcnQtZmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMudGV4dClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB7IHNwYW4gOiBvcHRpb25zLnRleHQucmVwbGFjZShcIlxcblwiLFwiPGJyPlwiKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJvcHMsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKG9wdGlvbnMuaWNvbiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25zdWJtaXQgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnVuYztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGRhdGEuYnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwib2tcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ5ZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gKCkgPT4geyBvcHRpb25zLmNhbGxiYWNrKHRydWUsIGRhdGEpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayhmYWxzZSwgZGF0YSkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2FuY2VsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayhudWxsLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSAoKSA9PiB7IG9wdGlvbnMuY2FsbGJhY2soZGF0YVtPYmplY3Qua2V5cyhkYXRhKVswXV0sIGRhdGEpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gKCkgPT4geyBvcHRpb25zLmNhbGxiYWNrKGRhdGFbT2JqZWN0LmtleXMoZGF0YSkuZmluZChpdCA9PiBpdCAhPT0gXCJidXR0b25cIildLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIElmIHdlIGhhdmUgbW9yZSB0aGFuIG9uZSBmaWVsZCwgd2Ugc2VuZCBhbGw6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSAoKSA9PiB7IG9wdGlvbnMuY2FsbGJhY2soZGF0YSwgZGF0YSkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogLy8gV2hlbiBzZXR0aW5nIGN1c3RvbWl6ZWQgYnV0dG9ucywgd2Ugc2VuZCBhbGw6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayhkYXRhLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZShmdW5jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25sb2FkIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWYgPSB0aGlzLmZpbmQoXCJbYXV0b2ZvY3VzXVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGVmKSB7IGRlZi5mb2N1cygpOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKG9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0J1dHRvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvYi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QnV0dG9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnMgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogXCJtMmQyLWFsZXJ0LWJ1dHRvbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYi5mb3JFYWNoKGIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYi50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16IF0vZyxcIlwiKS5yZXBsYWNlKFwiIFwiLFwiX1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0J1dHRvbnMuYnV0dG9uc1trZXldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiBcInN1Ym1pdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlIDoga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFtcImNvbG9yXCIsIGtleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA6ICQuZGljdCAhPT0gdW5kZWZpbmVkID8gJC5kaWN0KGIpIDogYixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvZm9jdXMgOiBbXCJva1wiLFwieWVzXCJdLmluY2x1ZGVzKGIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Ob1ZhbGlkYXRlIDogW1wiY2FuY2VsXCJdLmluY2x1ZGVzKGIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFwcGVuZCBhIGhpZGRlbiBpbnB1dCB3aXRoIHRoZSB2YWx1ZSBvZiB0aGUgYnV0dG9uIGNsaWNrZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljayA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMuY2xvc2VzdChcImZvcm1cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGUgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiaW5wdXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogXCJoaWRkZW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA6IHRoaXMudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0J1dHRvbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KG9wdGlvbnMuYnV0dG9ucylcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQWRkIGF1dG9tYXRpY2FsbHkgbmFtZSB0byBmaWVsZHMgaW4gY2FzZSBpdCBpcyBub3Qgc3BlY2lmaWVkOlxuICAgICAgICBsZXQgaSA9IDE7XG4gICAgICAgICQoXCIjbTJkMi1hbGVydCAubTJkMi1hbGVydC1mcm9udFwiKS5maW5kQWxsKFwiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWFcIikuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgIGlmKGVsZW0ubmFtZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGVsZW0ubmFtZSA9IFwiZmllbGRfXCIgKyBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBjbG9zZSA6IGNsb3NlIH07XG4gICAgfVxuICAgICQud2FpdCA9ICh0aXRsZSwgdGV4dCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuICQubWVzc2FnZSh7XG4gICAgICAgICAgICBpY29uIDogXCJ3YWl0XCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5hbGVydCA9ICh0aXRsZSwgdGV4dCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuICQubWVzc2FnZSh7XG4gICAgICAgICAgICBpY29uIDogXCJpbmZvXCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtcIm9rXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5zdWNjZXNzID0gKHRpdGxlLCB0ZXh0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gJC5tZXNzYWdlKHtcbiAgICAgICAgICAgIGljb24gOiBcIm9rXCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtcIm9rXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5mYWlsdXJlID0gKHRpdGxlLCB0ZXh0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gJC5tZXNzYWdlKHtcbiAgICAgICAgICAgIGljb24gOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtcIm9rXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5jb25maXJtID0gKHRpdGxlLCB0ZXh0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gJC5tZXNzYWdlKHtcbiAgICAgICAgICAgIGljb24gOiBcInF1ZXN0aW9uXCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtcInllc1wiLCBcIm5vXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5wcm9tcHQgPSAodGl0bGUsIHRleHQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHJldHVybiAkLm1lc3NhZ2Uoe1xuICAgICAgICAgICAgaWNvbiA6IFwiaW5wdXRcIixcbiAgICAgICAgICAgIHRpdGxlIDogdGl0bGUsXG4gICAgICAgICAgICBidXR0b25zIDogW1wiY2FuY2VsXCIsXCJzZW5kXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5jbG9zZUFsbCA9ICgpID0+IHtcbiAgICAgICAgY2xvc2UoKTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBNMkQyIExhbmd1YWdlIEV4dGVuc2lvblxuICogQHNpbmNlIDIwMjEtMDYtMDFcbiAqXG4gKiBBZGQgc3VwcG9ydHMgZm9yIG11bHRpLWxhbmd1YWdlIGludGVyZmFjZXNcbiAqXG4gKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAqICQuZGljdChrZXl3b3JkLCBbdmFyaWFibGVzXSkgIDogVG8gZ2V0IHRyYW5zbGF0aW9ucyBmcm9tIGRpY3Rpb25hcnlcbiAqICQubGFuZyhsYW5nKSAgICAgICAgICAgICAgICAgIDogU2V0IG5ldyBsYW5ndWFnZVxuICpcbiAqIERvY3VtZW50YXRpb24gOlxuICogaHR0cHM6Ly9naXRsYWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL2xhbmcubWRcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi9sYW5nLm1kXG4gKi9cbm0yZDIubG9hZCgkID0+IHtcbiAgICBsZXQgbWFudWFsTGFuZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibTJkMi5sYW5nXCIpIHx8IFwiXCJcbiAgICBsZXQgbGFuZ3VhZ2UgPSBtYW51YWxMYW5nIHx8IG5hdmlnYXRvci5sYW5ndWFnZTtcbiAgICBmdW5jdGlvbiBEaWN0aW9uYXJ5KGxhbmcpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oa2V5d29yZCwgdmFycykge1xuICAgICAgICAgICAgaWYoa2V5d29yZCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIGxldCBtc2cgPSBvYmoudmFsKGtleXdvcmQsdHJ1ZSk7XG4gICAgICAgICAgICBpZih2YXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgdmFycyA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICAgICAgICAgaWYodmFycyAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFycyA9IHZhcnMucmVwbGFjZSgvOyQvLFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFpcnMgPSB2YXJzLnNwbGl0KFwiO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhaXJzLmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IHBhaXJzW3BdLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJzW3BhcnRbMF1dID0gcGFydFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB2YXJzID09IFwib2JqZWN0XCIpe1xuICAgICAgICAgICAgICAgICAgICB2YXJzLmZvckVhY2godiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga3dkID0gdmFyc1t2XSArIFwiXCI7IC8vQmUgc3VyZSBpdHMgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBrd2QgPSBvYmoudmFsKGt3ZCxmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSBtc2cucmVwbGFjZSh2LGt3ZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgfVxuICAgICAgICBvYmoubGFuZyA9IGxhbmcgfHwgXCJlblwiO1xuICAgICAgICBvYmouZGF0YSA9IHt9O1xuICAgICAgICBvYmouc2V0ID0gZnVuY3Rpb24oZGljdGlvbmFyeSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gZGljdGlvbmFyeTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBvYmouaGFzID0gZnVuY3Rpb24oa2V5d29yZCwgbGFuZykge1xuICAgICAgICAgICAgcmV0dXJuIGxhbmcgPT09IHVuZGVmaW5lZCA/IHRoaXMuZGF0YVtrZXl3b3JkXSAhPT0gdW5kZWZpbmVkIDogdGhpcy5kYXRhW2tleXdvcmRdW2xhbmddICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIG9iai52YWwgPSBmdW5jdGlvbihrZXl3b3JkLCByZXBvcnQpe1xuICAgICAgICAgICAgaWYoJC5pc0VtcHR5KG9iai5kYXRhKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEaWN0aW9uYXJ5IGlzIGVtcHR5LiBZb3UgbmVlZCB0byBhZGQgYSBkaWN0aW9uYXJ5LCBmb3IgZXhhbXBsZTogYCQuZGljdC5zZXQoe1xcblwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJzYXZlICAgOiB7IGVuIDogJ1NhdmUnLCBlcyA6ICdHdWFyZGFyJyB9LFxcblwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJjYW5jZWwgOiB7IGVuIDogJ0NhbmNlbCcsIGVzIDogJ0NhbmNlbGFyJyB9XFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInllcyAgICA6IHsgZW4gOiAnWWVzJywgZXMgOiAnU2knIH0sXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIm5vICAgICA6IHsgZW4gOiAnTm8nLCBlcyA6ICdObycgfVxcblwiICtcbiAgICAgICAgICAgICAgICBcIn0pYFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCFrZXl3b3JkKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8ga2V5d29yZCBzcGVjaWZpZWQuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRyYW5zbGF0aW9uID0ga2V5d29yZDtcbiAgICAgICAgICAgIGlmKHJlcG9ydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXl3b3JkID0ga2V5d29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYodGhpcy5oYXMoa2V5d29yZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlTGFuZyA9IHRoaXMubGFuZy5zcGxpdChcIi1cIilbMF07XG4gICAgICAgICAgICAgICAgaWYodGhpcy5oYXMoa2V5d29yZCwgdGhpcy5sYW5nKSkge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbiA9IHRoaXMuZGF0YVtrZXl3b3JkXVt0aGlzLmxhbmddO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLmhhcyhrZXl3b3JkLGJhc2VMYW5nKSkge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbiA9IHRoaXMuZGF0YVtrZXl3b3JkXVtiYXNlTGFuZ107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVwb3J0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyB0cmFuc2xhdGlvbiBmb3IgbGFuZyBbXCIrdGhpcy5sYW5nK1wiXTogXCIra2V5d29yZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmKHJlcG9ydCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyBrZXl3b3JkOiBcIitrZXl3b3JkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRpb247XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBkaWN0aW9uYXJ5XG4gICAgJC5kaWN0ID0gbmV3IERpY3Rpb25hcnkobGFuZ3VhZ2UpO1xuXG4gICAgY29uc3QgbGFuZ0V2ZW50cyA9IFtdO1xuICAgICQubGFuZyA9IGZ1bmN0aW9uKG5ld0xhbmcpIHtcbiAgICAgICAgaWYobmV3TGFuZykge1xuICAgICAgICAgICAgJC5kaWN0LmxhbmcgPSBuZXdMYW5nO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtMmQyLmxhbmdcIiwgJC5kaWN0LmxhbmcpO1xuICAgICAgICB9XG4gICAgICAgICQoXCJib2R5XCIpLmZpbmRBbGwoXCJbbGFuZ11cIikuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICAgICAgbGV0IHR4dCA9IGVsZW0udGV4dDtcbiAgICAgICAgICAgIC8vIFdoZW4gZWxlbWVudCBoYXMgY29udGVudCBhbmQgKG9wdGlvbmFsKSB0aXRsZVxuICAgICAgICAgICAgaWYodHh0ICYmISBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhcIm5vdHh0XCIpKSB7XG4gICAgICAgICAgICAgICAgaWYoZWxlbS5kYXRhc2V0Lmt3ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5kYXRhc2V0Lmt3ID0gJC5sYW5nLmdldEtleXdvcmQodHh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbS50ZXh0ID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGl0bGVLdyA9IGVsZW0uZGF0YXNldC5rdyArIFwiX3RpdGxlXCI7XG4gICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gJC5kaWN0Lmhhcyh0aXRsZUt3KSA/ICQuZGljdCh0aXRsZUt3KSA6IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYodGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXaGVuIGVsZW1lbnQgb25seSBoYXMgdGl0bGU6XG4gICAgICAgICAgICB9IGVsc2UgaWYoZWxlbS50aXRsZSkge1xuICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IFwiXCJcbiAgICAgICAgICAgICAgICBpZihlbGVtLmRhdGFzZXQua3cpIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAkLmRpY3QoZWxlbS5kYXRhc2V0Lmt3KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLmRhdGFzZXQua3cgPSAkLmxhbmcuZ2V0S2V5d29yZChlbGVtLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAkLmRpY3QoZWxlbS5kYXRhc2V0Lmt3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZihlbGVtLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBsYWNlaG9sZGVyID0gXCJcIlxuICAgICAgICAgICAgICAgIGlmKGVsZW0uZGF0YXNldC5rdykge1xuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA9ICQuZGljdChlbGVtLmRhdGFzZXQua3cpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uZGF0YXNldC5rdyA9ICQubGFuZy5nZXRLZXl3b3JkKGVsZW0ucGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA9ICQuZGljdChlbGVtLmRhdGFzZXQua3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihwbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmKGVsZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBcIlwiXG4gICAgICAgICAgICAgICAgaWYoZWxlbS5kYXRhc2V0Lmt3KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5kYXRhc2V0Lmt3ID0gJC5sYW5nLmdldEtleXdvcmQoZWxlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsYW5nRXZlbnRzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3TGFuZyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IHRleHQgdG8ga2V5d29yZFxuICAgICAqL1xuICAgICQubGFuZy5nZXRLZXl3b3JkID0gZnVuY3Rpb24odGV4dCkge1xuICAgICAgICByZXR1cm4gdGV4dC50b0xvd2VyQ2FzZSgpLnRyaW0oKS5yZXBsYWNlKC8gL2csXCJfXCIpLnJlcGxhY2UoL1teXFx3XS9nLFwiXCIpLnJlcGxhY2UoL18kLyxcIlwiKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KCQubGFuZywgXCJvbmNoYW5nZVwiLCB7XG4gICAgICAgIGdldCgpIHsgcmV0dXJuIHRoaXMgfSxcbiAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICBpZigkLmlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgbGFuZ0V2ZW50cy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVbmFibGUgdG8gc2V0IGxhbmcub25jaGFuZ2UsIGJlY2F1c2UgaXQgaXMgbm90IGEgZnVuY3Rpb246IFwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxufSk7XG4vLyBUcmFuc2xhdGUgSFRNTCBvbiByZWFkeTpcbm0yZDIucmVhZHkoJCA9PiB7XG4gICAgY29uc3QgbWFudWFsTGFuZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibTJkMi5sYW5nXCIpIHx8IFwiXCJcbiAgICBjb25zdCBib2R5TGFuZyA9ICQoXCJib2R5XCIpLmZpbmQoXCJbbGFuZ11cIik7XG4gICAgY29uc3QgaHRtbExhbmcgPSAkKFwiaHRtbFwiKS5sYW5nIHx8IChib2R5TGFuZyA/IGJvZHlMYW5nLmxhbmcgOiBudWxsKSB8fCBcImVuXCI7XG4gICAgY29uc3QgaXNEaWZmZXJlbnQgPSBtYW51YWxMYW5nID8gaHRtbExhbmcgIT09IG1hbnVhbExhbmcgOiBodG1sTGFuZyAhPT0gbmF2aWdhdG9yLmxhbmd1YWdlLnNwbGl0KFwiLVwiKVswXTtcbiAgICBpZihpc0RpZmZlcmVudCkgeyAkLmxhbmcoKSB9XG59KTtcbm0yZDIubG9hZCgkID0+IHtcbiAgICAvKlxuICAgICAqIE0yRDIgU3RvcmFnZSBFeHRlbnNpb25cbiAgICAgKiBAYXV0aG9yOiBBLiBMZXBlXG4gICAgICogQHNpbmNlIDIwMjEtMDYtMDJcbiAgICAgKlxuICAgICAqIFdyYXBwZXIgZm9yIGRpZmZlcmVudCBraW5kcyBvZiBzdG9yYWdlLlxuICAgICAqIE9uZSBhZHZhbnRhZ2UgaXMgdGhhdCBvYmplY3RzIGFyZSBzdG9yZWQgd2l0aCB0eXBlIGluc3RlYWQgb2Ygc3RyaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gICAgICogJC5sb2NhbCA6IFRvIGdldC9zZXQgdmFsdWVzIGluIGxvY2FsU3RvcmFnZVxuICAgICAqICQuc2Vzc2lvbiA6IFRvIGdldC9zZXQgdmFsdWVzIGluIHNlc3Npb25TdG9yYWdlXG4gICAgICpcbiAgICAgKiBEb2N1bWVudGF0aW9uOlxuICAgICAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi9zdG9yYWdlLm1kXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL3N0b3JhZ2UubWRcbiAgICAgKlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFN0b3JhZ2UodHlwZSkge1xuICAgICAgICBzd2l0Y2godHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnbG9jYWwnICA6IGlmKHdpbmRvdy5sb2NhbFN0b3JhZ2UpICAgICB0aGlzLnN0b3JlID0gbG9jYWxTdG9yYWdlOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Nlc3Npb24nOiBpZih3aW5kb3cuc2Vzc2lvblN0b3JhZ2UpICAgdGhpcy5zdG9yZSA9IHNlc3Npb25TdG9yYWdlOyBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLnN0b3JlID09IHVuZGVmaW5lZCkgdGhpcy5zdG9yZSA9IGxvY2FsU3RvcmFnZTsgLy9EZWZhdWx0XG4gICAgICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZih2YWwpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHZhbCA9IHsgJyQnIDogdmFsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0b3JlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWwpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgbGV0IHZhbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsID0gSlNPTi5wYXJzZSh0aGlzLnN0b3JlLmdldEl0ZW0oa2V5KSkgfHwge307XG4gICAgICAgICAgICB9IGNhdGNoKGlnbm9yZSkge1xuICAgICAgICAgICAgICAgIHZhbCA9IHRoaXMuc3RvcmUuZ2V0SXRlbShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsW1wiJFwiXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gdmFsW1wiJFwiXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZihPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA9PT0gMCAmJiB2YWwuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgIHZhbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVsID0gZnVuY3Rpb24oa2V5KSB7IHRoaXMuc3RvcmUucmVtb3ZlSXRlbShrZXkpOyB9XG4gICAgICAgIHRoaXMua2V5cyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gT2JqZWN0LmtleXModGhpcy5zdG9yZSkuc29ydCgpOyB9XG4gICAgICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbigpIHsgdGhpcy5zdG9yZS5jbGVhcigpOyB9XG4gICAgICAgIHRoaXMuZXhpc3RzID0gZnVuY3Rpb24oa2V5KSB7IHJldHVybiB0aGlzLnN0b3JlLmhhc093blByb3BlcnR5KGtleSk7IH1cbiAgICAgICAgdGhpcy5sb2cgPSBmdW5jdGlvbihrZXksIHZhbCwgbikge1xuICAgICAgICAgICAgaWYobiA9PSB1bmRlZmluZWQpIG4gPSAxMDtcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IHRoaXMuZ2V0KGtleSkgfHwgW107XG4gICAgICAgICAgICB0bXAucHVzaCh2YWwpO1xuICAgICAgICAgICAgd2hpbGUodG1wLmxlbmd0aCA+IG4pIHRtcC5zaGlmdCgpO1xuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LHRtcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJC5sb2NhbCA9IG5ldyBTdG9yYWdlKFwibG9jYWxcIik7XG4gICAgJC5zZXNzaW9uID0gbmV3IFN0b3JhZ2UoXCJzZXNzaW9uXCIpO1xufSk7XG4vKipcbiAqXG4gKiBNMkQyIFVwbG9hZCBQbHVnaW5cbiAqIHZlci4gMjAyMS0xMi0wM1xuICpcbiAqIFRoaXMgZXh0ZW5zaW9uIHByb3ZpZGVzOlxuICogJC51cGxvYWRcbiAqXG4gKiBEb2N1bWVudGF0aW9uIDpcbiAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi91cGxvYWQubWRcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi91cGxvYWQubWRcbiAqL1xuIG0yZDIubG9hZCgkID0+IHtcbiAgICAkLnVwbG9hZCA9IGZ1bmN0aW9uKGV2LCBvcHRpb25zKSB7XG4gICAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgICAgLy8gdXBsb2FkICAgOiBcImh0dHA6Ly9sb2NhbGhvc3QvcGFnZVwiLFxuICAgICAgICAgICAgLy8gb25TZWxlY3QgOiAoZmlsZXMsIHNvdXJjZXMpID0+IHsgLi4uIH0sXG4gICAgICAgICAgICAvLyBvblVwZGF0ZSA6IChwcm9ncmVzc19wY3QsIGZpbGUsIGluZGV4KSA9PiB7IC4uLiB9LFxuICAgICAgICAgICAgLy8gb25Eb25lICAgOiAocmVzcG9uc2UsIGFsbERvbmUpID0+IHsgLi4uIH0sIC8vIHJlc3BvbnNlOiBjb250YWlucyByZXN1bHQgZnJvbSB0aGUgc2VydmVyIChKU09OKSwgaW4gKFMpIHdpbGwgdHJpZ2dlciBlYWNoIGZpbGUuXG4gICAgICAgICAgICAvLyBvbkVycm9yICA6IChyZXNwb25zZSkgPT4geyAuLi4gfSwgLy8gcmVzcG9uc2U6IG9iamVjdCB3aXRoIHJlbGV2YW50IGluZm9ybWF0aW9uLiBJbiAoUykgd2lsbCB0cmlnZ2VyIGluZGVwZW5kZW50bHkuXG4gICAgICAgICAgICAvLyBvblJlc3BvbnNlIDogKHJlc3BvbnNlKSA9PiB7IC4uLiB9LCAvLyBNb2RpZnkgcmVzcG9uc2UgZnJvbSBzZXJ2ZXIgKGlmIG5lZWRlZClcbiAgICAgICAgICAgIGFjY2VwdCAgIDogXCIqLypcIiwgLy8gWW91IGNhbiBsaW1pdCB0aGUgZmlsZSB0eXBlLCBmb3IgZXhhbXBsZTogXCJpbWFnZS8qXCIsIFwiaW1hZ2UvanBnXCIsIGV0Yy5cbiAgICAgICAgICAgIHBhcmFsbGVsIDogZmFsc2UsIC8vIElmIGZhbHNlLCBpdCB3aWxsIHNlbmQgYWxsIGZpbGVzIGluIGEgc2VxdWVuY2UgKFMpXG4gICAgICAgICAgICBmaWVsZCAgICA6IFwiZmlsZVwiLCAvL0ZpZWxkIG5hbWVcbiAgICAgICAgICAgIG11bHRpcGxlIDogdHJ1ZSwgLy8gQWxsb3cgbXVsdGlwbGUgZmlsZXMgdG8gYmUgc2VsZWN0ZWQgdG8gdXBsb2FkLFxuICAgICAgICAgICAgbWF4RmlsZXMgOiAwLCAvLyBNYXhpbXVtIG51bWJlciBvZiBmaWxlcyB0byBhbGxvdyB0byB1cGxvYWQuIDAgPSB1bmxpbWl0ZWRcbiAgICAgICAgICAgIG1heFNpemVNYjogMCwgLy8gTWF4aW11bSBzaXplIHBlciBmaWxlIChQKSBvciB0b3RhbCAoUykgdG8gYWxsb3dcbiAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucyA9IG51bGw7IC8vIERvIG5vdCB1c2UgaXQgbGF0ZXI6XG4gICAgICBsZXQgZWwgPSB3aW5kb3cuX3Byb3RlY3RlZF9yZWZlcmVuY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiSU5QVVRcIik7XG4gICAgICBlbC5uYW1lID0gb3B0cy5maWVsZDtcbiAgICAgIGVsLnR5cGUgPSBcImZpbGVcIjtcbiAgICAgIGlmKG9wdHMubXVsdGlwbGUgPT0gdHJ1ZSkge1xuICAgICAgICBlbC5tdWx0aXBsZSA9IFwibXVsdGlwbGVcIjtcbiAgICAgICAgLy9lbC5uYW1lICs9IFwiW11cIjsgIC8vRW5hYmxlIGlmIHlvdSBhcmUgdXNpbmcgUEhQXG4gICAgICB9XG4gICAgICBpZighIG9wdHMudXBsb2FkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXBsb2FkIG5vdCBzcGVjaWZpZWQuIFVzaW5nIGN1cnJlbnQgcGFnZS5cIilcbiAgICAgICAgb3B0cy51cGxvYWQgPSBcIlwiO1xuICAgICAgfVxuICAgICAgaWYob3B0cy5vbkRvbmUgPT0gdW5kZWZpbmVkKSAgICAgIHsgb3B0cy5vbkRvbmUgPSAocmVzcG9uc2UsIGFsbERvbmUpID0+IHsgY29uc29sZS5sb2cocmVzcG9uc2UpIH19XG4gICAgICBpZihvcHRzLm9uRXJyb3IgID09IHVuZGVmaW5lZCkgICAgeyBvcHRzLm9uRXJyb3IgID0gKHJlc3BvbnNlKSA9PiB7IGNvbnNvbGUubG9nKFwiRXJyb3IgOiBcIik7IGNvbnNvbGUubG9nKHJlc3BvbnNlKTsgfX1cbiAgICAgIGlmKG9wdHMub25VcGRhdGUgPT0gdW5kZWZpbmVkKSAgICB7IG9wdHMub25VcGRhdGUgPSAocGN0LCBmaWxlLCBpbmRleCkgPT4geyBjb25zb2xlLmxvZyhcIlVwbG9hZGluZyA6IFwiICsgcGN0ICsgXCIlIFwiICsgKG9wdHMub25lQnlPbmUgPyBcIlsgXCIgKyBmaWxlLm5hbWUgKyBcIiBdXCIgOiBcIlwiKSkgfSB9XG4gICAgICBpZihvcHRzLm9uUmVzcG9uc2UgPT0gdW5kZWZpbmVkKSAgeyBvcHRzLm9uUmVzcG9uc2UgPSAocmVzKSA9PiB7IHJldHVybiByZXMgfSB9IC8vIFJldHVybiBpdCB3aXRob3V0IG1vZGlmeWluZyBpdFxuXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgIGlmIChlbC5maWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmKG9wdHMubWF4RmlsZXMgPT09IDAgfCBlbC5maWxlcy5sZW5ndGggPD0gb3B0cy5tYXhGaWxlcykge1xuICAgICAgICAgICAgICAgIGlmKG9wdHMub25TZWxlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG90U2l6ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZWwuZmlsZXMpLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNzLnB1c2goVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdFNpemUgKz0gZmlsZS5zaXplO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWJzID0gdG90U2l6ZSAvICgxMDI0ICogMTAyNCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKG9wdHMubWF4U2l6ZU1iICYmIG1icyA+IG9wdHMubWF4U2l6ZU1iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzLm9uRXJyb3IoXCJNYXhpbXVtIHNpemUgZXhjZWVkZWQ6IFwiICsgTWF0aC5jZWlsKG1icykgKyBcIk1CID4gXCIgKyBvcHRzLm1heFNpemVNYiArIFwiTUJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMub25TZWxlY3QoZWwuZmlsZXMsIHNyY3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihvcHRzLm9uZUJ5T25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZURvbmUgPSBBcnJheShlbC5maWxlcy5sZW5ndGgpLmZpbGwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbShlbC5maWxlcykuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRmlsZVVwbG9hZChlbC5uYW1lLCBbZmlsZV0sIGluZGV4KyssIG9wdHMsIChkYXRhLCBmaWxlcywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZURvbmVbaW5kZXhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsRG9uZSA9IGZpbGVEb25lLmluZGV4T2YoZmFsc2UpID09PSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5vbkRvbmUoZ2V0UmVzcG9uc2UoZGF0YSwgZmlsZXMsIGluZGV4KSwgYWxsRG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFsbERvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRmlsZVVwbG9hZChlbC5uYW1lLCBlbC5maWxlcywgMCwgb3B0cywgKGRhdGEsIGZpbGVzLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMub25Eb25lKGdldFJlc3BvbnNlKGRhdGEsIGZpbGVzLCBpbmRleCksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7IC8vIGNsZWFyIC8gZnJlZSByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICAgIGVsID0gd2luZG93Ll9wcm90ZWN0ZWRfcmVmZXJlbmNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRzLm9uRXJyb3IoXCJNYXggZmlsZSBsaW1pdCBleGNlZWRlZC4gTWF4aW11bSBmaWxlczogXCIgKyBvcHRzLm1heEZpbGVzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZWwuY2xpY2soKTsgLy8gb3BlbiBkaWFsb2dcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRSZXNwb25zZShkYXRhLCBmaWxlcywgaW5kZXgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBbXTtcbiAgICAgICAgZGF0YSA9IGRhdGEgfHwge307XG4gICAgICAgIGZpbGVzLmZvckVhY2goZiA9PiB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSAodHlwZW9mIGRhdGEgPT0gXCJBcnJheVwiKSA/IChkYXRhLmxlbmd0aCA9PSBmaWxlcy5sZW5ndGggPyBkYXRhW2luZGV4XSA6IGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoZGF0YVtmLm5hbWVdICE9PSB1bmRlZmluZWQgPyBkYXRhW2YubmFtZV0gOiBkYXRhKVxuICAgICAgICAgICAgcmVzcG9uc2UucHVzaCh7XG4gICAgICAgICAgICAgICAgZmlsZSAgOiBmLFxuICAgICAgICAgICAgICAgIGRhdGEgIDogcm93LFxuICAgICAgICAgICAgICAgIGluZGV4IDogaW5kZXgrKywgICAgLy8gaW4gY2FzZSBvZiAxeDEgaXQgd2lsbCBiZSBjYWxsZWQgb25seSBvbmNlLCBvdGhlcndpc2UsIGl0IHdpbGwgYmUgaW5jcmVtZW50ZWQuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBsb2FkIGZpbGUgdXNpbmcgWEhSXG4gICAgICovXG4gICAgZnVuY3Rpb24gRmlsZVVwbG9hZChmaWVsZE5hbWUsIGZpbGVzLCBpbmRleCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IHhociAgICAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIGZpbGVzICAgICAgICAgPSBBcnJheS5mcm9tKGZpbGVzKTtcblxuICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgaWYob3B0aW9ucy5vbmVCeU9uZSkge1xuICAgICAgICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgoZS5sb2FkZWQgKiAxMDApIC8gZS50b3RhbCk7XG4gICAgICAgICAgICAgIG9wdGlvbnMub25VcGRhdGUocGVyY2VudGFnZSwgZmlsZXNbMF0sIGluZGV4KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBsZXQgc2l6ZUFjY3VtID0gMDtcbiAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICBmaWxlcy5zb21lKGYgPT4ge1xuICAgICAgICAgICAgICAgICAgc2l6ZUFjY3VtICs9IGYuc2l6ZTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBlLmxvYWRlZCA+PSBzaXplQWNjdW0gPyAxMDAgOiAxMDAgLSBNYXRoLnJvdW5kKCgoc2l6ZUFjY3VtIC0gZS5sb2FkZWQpICogMTAwKSAvIGYuc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiRmlsZTogXCIgKyBmLm5hbWUgKyBcIiBTaXplOiBcIiArIGYuc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTG9hZGVkOiBcIiArIGUubG9hZGVkICsgXCIgQWNjdW06IFwiICsgc2l6ZUFjY3VtICsgXCIgVG90YWw6IFwiICsgZS50b3RhbCArIFwiIFBjdDogXCIgKyBwZXJjZW50YWdlKVxuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vblVwZGF0ZShwZXJjZW50YWdlLCBmLCBpKyspO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpemVBY2N1bSA+PSBlLmxvYWRlZDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBmYWxzZSk7XG5cbiAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkYXRhID0geGhyLnJlc3BvbnNlVGV4dCA/IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCkgOiB7XG4gICAgICAgICAgICAgICAgZXJyb3I6IHt0eXBlOiBcIlVua25vd25cIiwgcmVhc29uOiBcIlVua25vd24gRXJyb3JcIn1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICBkYXRhLmVycm9yID0geyB0eXBlIDogXCJQYXJzZSBFcnJvclwiLCByZWFzb24gOiBlcnIubWVzc2FnZSB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCA0MDApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG9wdGlvbnMub25SZXNwb25zZShkYXRhKSwgZmlsZXMsIGluZGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZiBkYXRhLmVycm9yID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBkYXRhLmVycm9yID0geyB0eXBlIDogXCJFeGNlcHRpb25cIiwgcmVhc29uIDogZGF0YS5lcnJvciB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLm9uRXJyb3IoZGF0YS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIG9wdGlvbnMudXBsb2FkKTtcblxuICAgICAgY29uc3QgbG9hZGVkID0gQXJyYXkoZmlsZXMubGVuZ3RoKS5maWxsKGZhbHNlKTtcbiAgICAgIGNvbnN0IGZvcm0gICAgPSBnZXRGaWxlRm9ybShmaWVsZE5hbWUsIGZpbGVzKTtcbiAgICAgIGxldCBsb2FkSW5kZXggPSAwO1xuICAgICAgZmlsZXMuZm9yRWFjaChmID0+IHtcbiAgICAgICAgICBjb25zdCByZWFkZXIgID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBsb2FkZWRbbG9hZEluZGV4KytdID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmKGxvYWRlZC5pbmRleE9mKGZhbHNlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB4aHIuc2VuZChmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlcGFyZXMgZm9ybVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEZpbGVGb3JtKGZpZWxkTmFtZSwgZmlsZXMpIHtcbiAgICAgICAgY29uc3QgZm9ybSAgICA9IG5ldyBGb3JtRGF0YSgpO1xuXG4gICAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZChmaWVsZE5hbWUsIGZpbGUsIGZpbGUubmFtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmb3JtXG4gICAgfVxuIH0pO1xuXG5tMmQyLmxvYWQoJCA9PiB7XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gV1MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvKipcbiAgICAgKiBAYXV0aG9yOiBBLkxlcGVcbiAgICAgKiBAdmVyc2lvbjogMjEwNDI1IDogQWRkZWQgc2VjdXJlLCBob3N0IGFuZCBjb252ZXJ0ZWQgdG8gbTJkMiBleHRlbnNpb25cbiAgICAgKiAgICAgICAgICAgMjEwNDA2IDogUmV0cnkgdW50aWwgcmVjb25uZWN0XG4gICAgICogQHNpbmNlIDogMjAxOFxuICAgICAqIFdlYlNvY2tldCB3cmFwcGVyXG4gICAgICpcbiAgICAgKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAgICAgKiAkLndzXG4gICAgICpcbiAgICAgKiBEb2N1bWVudGF0aW9uIDpcbiAgICAgKiBodHRwczovL2dpdGxhYi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vd3MubWRcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vd3MubWRcbiAgICAgKi9cbiAgICBjbGFzcyB3cyB7XG4gICAgICAgIHJlcXVlc3QobXNnKSB7XG4gICAgICAgICAgICBpZiAobXNnKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQub25lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbm5lY3QgYW5kIHJldHVybiB0aGUgd2Vic29ja2V0IG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0U29ja2V0KG9uTWVzc2FnZSwgb25PcGVuLCBvbkNsb3NlKSB7XG4gICAgICAgICAgICBjb25zdCB3ZWJTb2NrZXQgPSBuZXcgV2ViU29ja2V0KHRoaXMucGF0aCk7XG4gICAgICAgICAgICB3ZWJTb2NrZXQub25vcGVuID0gb25PcGVuO1xuICAgICAgICAgICAgd2ViU29ja2V0Lm9uY2xvc2UgPSBvbkNsb3NlO1xuICAgICAgICAgICAgd2ViU29ja2V0Lm9ubWVzc2FnZSA9IChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVzc2FnZShKU09OLnBhcnNlKHJlcy5kYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2ViU29ja2V0Lm9uZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3ZWJTb2NrZXQub25lcnJvciA9IChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTb2NrZXQgZW5jb3VudGVyZWQgZXJyb3I6ICcsIGVyciA/IGVyci5tZXNzYWdlIDogJ1Vua25vd24nLCAnQ2xvc2luZyBzb2NrZXQnKTtcbiAgICAgICAgICAgICAgICBjb25zdCB3c2sgPSB3ZWJTb2NrZXQgfHwgdGhpcztcbiAgICAgICAgICAgICAgICBpZih3c2sucmVhZHlTdGF0ZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB3c2suY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gd2ViU29ja2V0O1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3Qob3B0aW9ucywgb25NZXNzYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRSZXF1ZXN0ID0gb3B0aW9ucy5yZXF1ZXN0IHx8IG51bGw7XG4gICAgICAgICAgICB0aGlzLm9uQ29ubmVjdCA9IG9wdGlvbnMuY29ubmVjdGVkIHx8ICgoKSA9PiB7fSk7XG4gICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCA9IG9wdGlvbnMuZGlzY29ubmVjdGVkIHx8ICgoKSA9PiB7fSk7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdCA9IG9wdGlvbnMucmVjb25uZWN0ICE9PSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IG9wdGlvbnMuaG9zdCB8fCB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XG4gICAgICAgICAgICB0aGlzLnNlY3VyZSA9IG9wdGlvbnMuc2VjdXJlID09PSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wb3J0ID0gb3B0aW9ucy5wb3J0IHx8ICh0aGlzLnNlY3VyZSA/IDQ0MyA6IDgwKTtcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IFwid3NcIiArICh0aGlzLnNlY3VyZSA/IFwic1wiIDogXCJcIikgKyBcIjovL1wiICsgdGhpcy5ob3N0ICsgXCI6XCIgKyB0aGlzLnBvcnQgKyBcIi9cIiArIChvcHRpb25zLnBhdGggfHwgXCJcIik7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICAvLy0tLS0tLS0tIENvbm5lY3QgLS0tLS0tLS0tLVxuICAgICAgICAgICAgY29uc3Qgb25PcGVuID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KHRoaXMuaW5pdFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Db25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvbkNsb3NlID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuaW50ZXJ2YWwgJiYgdGhpcy5yZWNvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWNvbm5lY3RlZC4uLlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVjb25uZWN0aW5nLi4uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0ID0gdGhpcy5nZXRTb2NrZXQob25NZXNzYWdlLCBvbk9wZW4sIG9uQ2xvc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goaWdub3JlKSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndlYlNvY2tldCA9IHRoaXMuZ2V0U29ja2V0KG9uTWVzc2FnZSwgb25PcGVuLCBvbkNsb3NlKTtcbiAgICAgICAgfVxuICAgICAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJC53cyA9IG5ldyB3cygpO1xufSk7XG5tMmQyLmxvYWQoJCA9PiB7XG4gICAgLyoqXG4gICAgICogQHZlcnNpb24gMjAyMC0wNS0wOVxuICAgICAqIEBhdXRob3IgQS5MZXBlIChkZXZAYWxlcGUuY29tKVxuICAgICAqIFhIUiBpbXBsZW1lbnRhdGlvblxuICAgICAqXG4gICAgICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gICAgICogJC5nZXRcbiAgICAgKiAkLnBvc3RcbiAgICAgKiAkLnB1dFxuICAgICAqICQuZGVsZXRlXG4gICAgICogJC5jb25uZWN0XG4gICAgICogJC5vcHRpb25zXG4gICAgICogJC50cmFjZVxuICAgICAqICQucGF0Y2hcbiAgICAgKlxuICAgICAqIERvY3VtZW50YXRpb24gOlxuICAgICAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi94aHIubWRcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24veGhyLm1kXG4gICAgICovXG5cbiAgICAgLyoqXG4gICAgICogQHBhcmFtIG1ldGhvZDogSFRUUCBtZXRob2QgKEdFVCwgUE9TVCwgUFVULCBERUxFVEUpXG4gICAgICogQHBhcmFtIHVybDogc2VydmljZSBVUkxcbiAgICAgKiBAcGFyYW0gZGF0YTogRGF0YSBvYmplY3QgdG8gc2VuZCAoaW4gY2FzZSBvZiBQT1NUIGFuZCBQVVQpXG4gICAgICogQHBhcmFtIGNhbGxiYWNrOiBDYWxsYmFjayBvbiBTdWNjZXNzIChpdCB3aWxsIHJldHVybiBkYXRhKVxuICAgICAqIEBwYXJhbSBlcnJvcl9jYWxsYmFjazogQ2FsbGJhY2sgb24gRmFpbHVyZVxuICAgICAqIEBwYXJhbSBqc29uIDogQm9vbGVhbiAoaWYgc2V0LCBpdCB3aWxsIHNldCByZXF1ZXN0IGNvbnRlbnQtdHlwZSBhcyBqc29uIGFuZCBpbiBjYXNlIG9mIEdFVCwgaXQgd2lsbCBzZW5kIGl0IGFzIGJvZHkgaW5zdGVhZCBvZiBxdWVyeSlcbiAgICAgKi9cbiAgICBjb25zdCBYSFIgPSBmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgY2FsbGJhY2ssIGVycm9yX2NhbGxiYWNrLCBqc29uKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgaWYoanNvbiA9PT0gdW5kZWZpbmVkKSB7IGpzb24gPSBmYWxzZSB9XG4gICAgICAgIGlmKGVycm9yX2NhbGxiYWNrID09PSB1bmRlZmluZWQpIHsgZXJyb3JfY2FsbGJhY2sgPSBmdW5jdGlvbihlKSB7IGNvbnNvbGUubG9nKGUpOyB9IH1cbiAgICAgICAgaWYoZGF0YSAmJiBPYmplY3QuZW50cmllcyhkYXRhKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGRhdGEgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmKGRhdGEpIHtcbiAgICAgICAgICAgIGlmKGpzb24pIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaChtZXRob2QudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR0VUXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgKz0gKHVybC5pbmRleE9mKFwiP1wiKSAhPT0gLTEgPyBcIiZcIiA6IFwiP1wiKSArIChPYmplY3Qua2V5cyhkYXRhKS5tYXAoa2V5ID0+IGtleSArICc9JyArIGRhdGFba2V5XSkuam9pbignJicpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSAoT2JqZWN0LmtleXMoZGF0YSkubWFwKGtleSA9PiBrZXkgKyAnPScgKyBkYXRhW2tleV0pLmpvaW4oJyYnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3Qub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgICAgIGlmKGpzb24pIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlcnJvcl9jYWxsYmFjayh7dHlwZSA6IFwiQ29ubmVjdGlvblwiLCByZWFzb246IFwiQ29ubmVjdGlvbiBSZWZ1c2VkXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSB7fTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3QucmVzcG9uc2VUZXh0ID8gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCkgOiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiB7dHlwZTogXCJVbmtub3duXCIsIHJlYXNvbjogXCJVbmtub3duIEVycm9yXCJ9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5lcnJvciA9IHsgdHlwZSA6IFwiUGFyc2UgRXJyb3JcIiwgcmVhc29uIDogZXJyLm1lc3NhZ2UgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDQwMCkge1xuICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZihlcnJvcl9jYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBkYXRhLmVycm9yID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZXJyb3IgPSB7IHR5cGUgOiBcIkV4Y2VwdGlvblwiLCByZWFzb24gOiBkYXRhLmVycm9yIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlcnJvcl9jYWxsYmFjayhkYXRhLmVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3Quc2VuZChkYXRhKTtcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTaG9ydCBtZXRob2QuIEl0IGFsc28gdmFsaWRhdGVzIGFyZ3VtZW50cyBhbmQgYWxsb3cgb21pdHRpbmcgc29tZSwgZWcuOlxuICAgICAqIHhoci5nZXQodXJsLCBkYXRhLCBjYWxsYmFjaywgZXJyb3JfY2FsbGJhY2ssIGpzb24pO1xuICAgICAqIHhoci5nZXQodXJsLCBjYWxsYmFjaywgZXJyb3JfY2FsbGJhY2ssIGpzb24pO1xuICAgICAqIHhoci5nZXQodXJsLCBkYXRhLCBjYWxsYmFjaywganNvbik7XG4gICAgICogeGhyLmdldCh1cmwsIGRhdGEsIGpzb24pO1xuICAgICAqIHhoci5nZXQodXJsLCBjYWxsYmFjaywganNvbik7XG4gICAgICovXG4gICAgY29uc3QgeGhyID0ge307XG4gICAgW1wiZ2V0XCIsXCJwb3N0XCIsXCJwdXRcIixcImRlbGV0ZVwiLFwiY29ubmVjdFwiLFwib3B0aW9uc1wiLFwidHJhY2VcIixcInBhdGNoXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgIHhoclttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsZXQgdXJsLCBkYXRhLCBjYWxsYmFjaywgZXJyb3JfY2FsbGJhY2ssIGpzb247XG4gICAgICAgICAgICAvLyBub2luc3BlY3Rpb24gRmFsbFRocm91Z2hJblN3aXRjaFN0YXRlbWVudEpTXG4gICAgICAgICAgICBzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1s0XSA9PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGFyZ3VtZW50c1s0XTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGFzc2VkIEpTT04gYXJndW1lbnQ6IFwiICsgYXJndW1lbnRzWzRdICsgXCIgaXMgbm90IGJvb2xlYW4uXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJndW1lbnRzWzNdID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY2FsbGJhY2sgPSBhcmd1bWVudHNbM107XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoID09PSA0ICYmIHR5cGVvZiBhcmd1bWVudHNbM10gPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgZXJyb3IgY2FsbGJhY2sgb3B0aW9uYWw6XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gYXJndW1lbnRzWzNdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXNzZWQgYXJndW1lbnQgNDogXCIgKyBhcmd1bWVudHNbM10gKyBcIiBpcyBtaXN0YWtlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1syXSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmd1bWVudHNbMV0gPT0gXCJmdW5jdGlvblwiICYmIGFyZ3VtZW50cy5sZW5ndGggPCA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY2FsbGJhY2sgPSBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCA9PT0gMyAmJiB0eXBlb2YgYXJndW1lbnRzWzJdID09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGNhbGxiYWNrIGFuZCBlcnJvciBjYWxsYmFjayBvcHRpb25hbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhc3NlZCBhcmd1bWVudCAzOiBcIiArIGFyZ3VtZW50c1syXSArIFwiIGlzIG1pc3Rha2VuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJndW1lbnRzWzFdID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mIGFyZ3VtZW50c1sxXSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgZGF0YSBvcHRpb25hbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXNzZWQgYXJndW1lbnQgMjogXCIgKyBhcmd1bWVudHNbMV0gKyBcIiBpcyBtaXN0YWtlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1swXSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGFyZ3VtZW50c1swXS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGFzc2VkIFVSTDogXCIrYXJndW1lbnRzWzBdK1wiIHdhcyBub3QgYSBzdHJpbmcuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW5jb3JyZWN0IG51bWJlciBvZiBhcmd1bWVudHMgcGFzc2VkIHRvIHhoclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGRhdGEgPT09IHVuZGVmaW5lZCkgeyBkYXRhID0ge30gfVxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVVJMOiBcIiArIHVybCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRBVEE6IFwiICsgZGF0YSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNBTExCQUNLOiBcIiArIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgQ0FMTEJBQ0s6IFwiICsgZXJyb3JfY2FsbGJhY2spO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJKU09OOiBcIiArIGpzb24pO1xuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJldHVybiBYSFIobWV0aG9kLnRvVXBwZXJDYXNlKCksIHVybCwgZGF0YSwgY2FsbGJhY2ssIGVycm9yX2NhbGxiYWNrLCBqc29uKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oJCwgeGhyKTtcbn0pO1xucmV0dXJuIG0yZDI7XG59KSk7XG4iLCIvKipcbiAgVGhpcyBwbGF5ZXIgdXNlcyBOREpTT04gZmlsZXMgdG8gcGxheSBpbiBzZXF1ZW5jZSBhcyBhIHZpZGVvXG4gIEFkZGl0aW9uYWxseSwgaXQgbWF5IGNvbnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIGZyYW1lXG4gIEluc3BpcmVkIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXBlL2ZyYW1lLXBsYXllci8gKGJ5IFZhZ25lciBTYW50YW5hKVxuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbGVwZS9uZGpzb24tcGxheWVyXG4gKiBAYXV0aG9yIEEuTGVwZVxuICogQFNpbmNlIDIwMjAtMDQtMTlcbiAqL1xuY2xhc3MgTmRKc29uUGxheWVyIHtcbiAgICAvLyBPcHRpb25zXG4gICAgZnBzOyAgICAgICAgLy9kZWZhdWx0OiAyNEZQU1xuICAgIGxvb3A7ICAgICAgIC8vZGVmYXVsdDogZmFsc2VcbiAgICBzaG93Zmlyc3Q7ICAvL2RlZmF1bHQ6IHRydWUgOiBzaG93IGZpcnN0IGltYWdlXG4gICAgYXV0b3BsYXk7ICAgLy9kZWZhdWx0OiBmYWxzZVxuICAgIGxpdmU7ICAgICAgIC8vZGVmYXVsdDogZmFsc2UgLy8gU291cmNlIGlzIGEgbGl2ZSBmZWVkXG4gICAgcGF0aDsgICAgICAgLy9kZWZhdWx0OiBcIlwiIDogU3BlY2lmeSBjb21tb24gcGF0aCBmb3IgaW1hZ2VzIGluIGNhc2UgVVJMIGlzIHVzZWQuXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgIEZvciBleGFtcGxlOiBwYXRoID0gXCJodHRwOi8vbG9jYWxob3N0OjgwODAvaW1hZ2VzL1wiXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgIHRoZW4sIHVzZSBcImltZzEyMzM0LmpwZ1wiIGFzIGZyYW1lIGluIE5ESlNPTiAodG8gcmVkdWNlIHNpemUgb2YgZmlsZSlcblxuICAgIC8vIFN0YXR1c1xuICAgIHBsYXlpbmcgPSBmYWxzZTsgICAvLyBTdGF0dXNcbiAgICBsb2FkZWQgID0gZmFsc2U7ICAgLy8gSWYgYSBmcmFtZSBoYXMgYmVlbiBsb2FkZWQgb3Igbm90XG4gICAgYmFja3dhcmRzID0gZmFsc2U7IC8vIElmIHBsYXlpbmcgYmFja3dhcmRzXG4gICAgc3RhcnRlZCA9IGZhbHNlOyAvLyBJZiB0aGUgcGxheWVyIGFscmVhZHkgc3RhcnQgcGxheWluZyBhdCBsZWFzdCAxIGZyYW1lXG5cbiAgICAvLyBFdmVudHNcbiAgICBvblN0YXJ0OyAgICAvLyBDYWxsYmFjayB3aGVuIHdlIHByb2Nlc3NlZCBmaXJzdCBpbWFnZVxuICAgIG9uTG9hZDsgICAgIC8vIENhbGxiYWNrIHdoZW4gZGF0YSBpcyBjb21wbGV0ZWQgbG9hZGluZ1xuICAgIG9uUmVuZGVyOyAgIC8vIENhbGxiYWNrIHRvIHJldHVybiBtZXRhZGF0YSB3aGVuIGEgZnJhbWUgaXMgcmVuZGVyZWRcbiAgICBvblBsYXk7ICAgICAvLyBDYWxsYmFjayB3aGVuIHdlIHN0YXJ0IHBsYXlpbmdcbiAgICBvblN0b3A7ICAgICAvLyBDYWxsYmFjayB3aGVuIHdlIHN0b3AgcGxheWluZ1xuICAgIG9uRmluaXNoOyAgIC8vIENhbGxiYWNrIHdoZW4gdmlkZW8gcmVhY2hlcyB0aGUgbGFzdCBmcmFtZVxuICAgIG9uRXJyb3I7ICAgIC8vIENhbGxiYWNrIHdoZW4gdGhlcmUgaXMgYW4gZXJyb3Igd2l0aCB0aGUgc291cmNlXG5cbiAgICAvLyBJbnRlcm5hbCB1c2UgbWFpbmx5XG4gICAgd3JhcHBlciA9IG51bGw7ICAgICAvLyBET00gZWxlbWVudCB3aGljaCBjb250YWlucyB0aGUgPGNhbnZhcz4gbm9kZVxuICAgIGNhbnZhcyA9IG51bGw7ICAgICAvLyA8Y2FudmFzPiBET00gb2JqZWN0XG4gICAgY3R4ID0gbnVsbDsgICAgICAgIC8vIGNhbnZhcy5jdHggb2JqZWN0XG4gICAgdGltZXIgPSBudWxsOyAgICAgIC8vIFRpbWVyU3JjIHVzZWQgdG8gbWFuYWdlIEZQU1xuICAgIHNyYyA9IFwiXCI7ICAgICAgICAgIC8vIFZpZGVvIHNvdXJjZSBVUkkgKE5ESlNPTilcbiAgICBmcmFtZSA9IDA7ICAgICAgICAgLy8gQ3VycmVudCBmcmFtZSBiZWluZyBwbGF5ZWRcbiAgICBtdWx0aXBsaWVyID0gMTsgICAgLy8gTXVsdGlwbGllciB0byBjb250cm9sIHNwZWVkXG5cbiAgICAvLyBQcml2YXRlXG4gICAgX251bUZyYW1lcyA9IDA7ICAgICAvLyBOdW1iZXIgb2YgdG90YWwgZnJhbWVzIChpbiBoZWFkZXIpXG4gICAgX3RvdFRpbWUgICA9IDA7ICAgICAvLyBOdW1iZXIgb2YgdG90YWwgdGltZSAoaW4gaGVhZGVyKVxuICAgIF9mcmFtZXMgPSBbXTsgICAgICAgLy8gVmlkZW8gY29udGVudCBpbmNsdWRpbmcgbWV0YWRhdGEgKGFycmF5KVxuICAgIF9mcmFtZUJhc2UgPSBcIlwiICAgICAvLyBCYXNlIGZvciBhbGwgZnJhbWVzICdmYidcbiAgICBfdGh1bWJCYXNlID0gXCJcIiAgICAgLy8gQmFzZSBmb3IgYWxsIHRodW1ibmFpbHMgJ3RoYidcbiAgICBfc3RhcnRUaW1lU3RhbXAgPSAwOy8vIFN0YXJ0aW5nIHRpbWUgc3RhbXBcblxuICAgIC8qKlxuICAgICAqIEV4YW1wbGVzOlxuICAgICAqIG5ldyBOZEpzb25QbGF5ZXIoXCIvdmlkZW9zL3Rlc3QubmRqc29uXCIsXCJjYW52YXNcIiwgeyBsb29wOiB0cnVlIH0pXG4gICAgICogbmV3IE5kSnNvblBsYXllcihcIi92aWRlb3MvdGVzdC5uZGpzb25cIiwgeyBsb29wOiB0cnVlIH0pXG4gICAgICogbmV3IE5kSnNvblBsYXllcihcIi92aWRlb3MvdGVzdC5uZGpzb25cIilcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzcmMgICAgIC5uZGpzb24gZmlsZSAoc2VlIGZvcm1hdClcbiAgICAgKiBAcGFyYW0gZWxlbWVudCA6IE5vZGUsIEhUTUwgZWxlbWVudCAobXVzdCBiZSBhIGNhbnZhcykuIElmIG5vdCBzZXQsIGl0IHdpbGwgdXNlICc8Y2FudmFzPidcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyA6IE9iamVjdCByZXBsYWNpbmcgZGVmYXVsdCB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gZXZlbnRzICA6IE9iamVjdCBjb250YWluaW5nIGV2ZW50czogKG9uc3RhcnQsIG9ubG9hZCwgb25yZW5kZXIsIG9ucGxheSwgb25zdG9wLCBvbmZpbmlzaCwgb25lcnJvcilcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcmMsIGVsZW1lbnQsIG9wdGlvbnMsIGV2ZW50cykge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIF90aGlzLnNyYyA9IHNyYztcbiAgICAgICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vRXZlbnQgPSAoKCkgPT4ge30pO1xuICAgICAgICBldmVudHMgPSBPYmplY3QuYXNzaWduKHt9LCBldmVudHMpO1xuICAgICAgICAvLyBBZGQgZXZlbnRzOlxuICAgICAgICBfdGhpcy5vblN0YXJ0ICAgID0gZXZlbnRzLm9uc3RhcnQgIHx8IG5vRXZlbnQ7XG4gICAgICAgIF90aGlzLm9uTG9hZCAgICAgPSBldmVudHMub25sb2FkICAgfHwgbm9FdmVudDtcbiAgICAgICAgX3RoaXMub25SZW5kZXIgICA9IGV2ZW50cy5vbnJlbmRlciB8fCBub0V2ZW50O1xuICAgICAgICBfdGhpcy5vblBsYXkgICAgID0gZXZlbnRzLm9ucGxheSAgIHx8IG5vRXZlbnQ7XG4gICAgICAgIF90aGlzLm9uU3RvcCAgICAgPSBldmVudHMub25zdG9wICAgfHwgbm9FdmVudDtcbiAgICAgICAgX3RoaXMub25GaW5pc2ggICA9IGV2ZW50cy5vbmZpbmlzaCB8fCBub0V2ZW50O1xuICAgICAgICBfdGhpcy5vbkVycm9yICAgID0gZXZlbnRzLm9uZXJyb3IgIHx8IChlID0+IHsgY29uc29sZS5sb2coZSk7IH0pXG4gICAgICAgIC8vIEZpeCBhbmQgY2hlY2sgYXJndW1lbnRzXG4gICAgICAgIGxldCBwbGF5ZXIgPSBudWxsO1xuICAgICAgICBpZihlbGVtZW50IGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgICAgICAgcGxheWVyID0gZWxlbWVudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudCA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IFwiY2FudmFzXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbGVtZW50ICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIkluY29ycmVjdCBwYXJhbWV0ZXIgcGFzc2VkIHRvIGNvbnN0cnVjdG9yIG9mIE5kSnNvblBsYXllclwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTG9vayBmb3IgY2FudmFzXG4gICAgICAgICAgICBwbGF5ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQgfHwgXCJjYW52YXNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBsYXllcikge1xuICAgICAgICAgICAgaWYgKHBsYXllci50YWdOYW1lID09PSBcIkNBTlZBU1wiKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2FudmFzID0gcGxheWVyO1xuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB3cmFwcGVyIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlciwgcGxheWVyKTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLnByZXBlbmQocGxheWVyKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIgPSB3cmFwcGVyO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHBsYXllci5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jYW52YXMgPSBwbGF5ZXIucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTtcbiAgICAgICAgICAgICAgICBpZighX3RoaXMuY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IFwiTm8gY2FudmFzIGZvdW5kIGluIGVsZW1lbnRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJDQU5WQVNcIik7XG4gICAgICAgICAgICAgICAgcGxheWVyLnByZXBlbmQoX3RoaXMuY2FudmFzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IFwiQ2FudmFzIGVsZW1lbnQgd2FzIG5vdCBmb3VuZCBpbiBET006IFwiICsgZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy53cmFwcGVyID0gcGxheWVyO1xuICAgICAgICBfdGhpcy5jYW52YXMud2lkdGggID0gX3RoaXMud3JhcHBlci5wYXJlbnQoKS5jbGllbnRXaWR0aDtcbiAgICAgICAgX3RoaXMuY2FudmFzLmhlaWdodCA9IF90aGlzLndyYXBwZXIucGFyZW50KCkuY2xpZW50SGVpZ2h0O1xuICAgICAgICAvLyBTZXQgY2xhc3NuYW1lIGZvciBzdHlsZVxuICAgICAgICBwbGF5ZXIuY2xhc3NMaXN0LmFkZChcIm5kanBcIik7XG5cbiAgICAgICAgLy8gU2V0IGNvbnRleHRcbiAgICAgICAgX3RoaXMuY3R4ID0gX3RoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICAvLyBPcHRpb25zOlxuICAgICAgICBfdGhpcy5mcHMgICAgICAgID0gb3B0aW9ucy5mcHMgfHwgMjQ7XG4gICAgICAgIF90aGlzLmxvb3AgICAgICAgPSBvcHRpb25zLmxvb3AgfHwgZmFsc2U7XG4gICAgICAgIF90aGlzLmxpdmUgICAgICAgPSBvcHRpb25zLmxpdmUgfHwgZmFsc2U7XG4gICAgICAgIF90aGlzLmF1dG9wbGF5ICAgPSBvcHRpb25zLmF1dG9wbGF5IHx8IF90aGlzLmxpdmUgfHwgZmFsc2U7XG4gICAgICAgIF90aGlzLnNob3dmaXJzdCAgPSBvcHRpb25zLnNob3dmaXJzdCAhPT0gZmFsc2U7XG4gICAgICAgIF90aGlzLnBhdGggICAgICAgPSBvcHRpb25zLnBhdGggfHwgXCJcIjtcbiAgICAgICAgaWYob3B0aW9ucy53aWR0aCAgPT09IFwiYXV0b1wiKSB7IG9wdGlvbnMud2lkdGggID0gMDsgfVxuICAgICAgICBpZihvcHRpb25zLmhlaWdodCA9PT0gXCJhdXRvXCIpIHsgb3B0aW9ucy5oZWlnaHQgPSAwOyB9XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aW1lcjpcbiAgICAgICAgX3RoaXMudGltZXIgPSBuZXcgVGltZXJTcmMoMTAwMCAvIF90aGlzLmZwcyk7XG5cbiAgICAgICAgLy8gTG9hZCB2aWRlbzpcbiAgICAgICAgaWYoX3RoaXMubGl2ZSkge1xuICAgICAgICAgICAgbmV3IFRpbWVyU3JjKDEwMDAgLyBfdGhpcy5mcHMsICgpID0+IHtcbiAgICAgICAgICAgICAgICBmZXRjaChfdGhpcy5zcmMpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpLnRoZW4oZnJhbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWxvYWQoZnJhbWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkucGxheSgpO1xuICAgICAgICB9IGVsc2UgaWYoX3RoaXMuc3JjKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2FkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemluZyB3aXRob3V0IHNvdXJjZS4uLlwiKVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IGZyYW1lcyBpbmZvcm1hdGlvblxuICAgICAqL1xuICAgIF9yZXNldCgpIHtcbiAgICAgICAgdGhpcy5fZnJhbWVzID0gW107XG4gICAgICAgIHRoaXMuX3RvdFRpbWUgPSAwOyAgICAgICAgLy8gTnVtYmVyIG9mIHRvdGFsIHRpbWUgKGluIGhlYWRlcilcbiAgICAgICAgdGhpcy5fbnVtRnJhbWVzID0gMDsgICAgICAvLyBOdW1iZXIgb2YgdG90YWwgZnJhbWVzIChpbiBoZWFkZXIpXG4gICAgICAgIHRoaXMuX3N0YXJ0VGltZVN0YW1wID0gMDsgLy8gU3RhcnRpbmcgdGltZSBzdGFtcFxuICAgICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkIGEgdmlkZW8gZmlsZSBvciBjaGFuZ2UgY3VycmVudCB2aWRlbyBmaWxlLlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayB3aGVuIGVhY2ggZnJhbWUgaXMgcmVhZHlcbiAgICAgKiBAcGFyYW0gbmV3U3JjIG9wdGlvbmFsIChpZiBub3Qgc2V0IHdpbGwgcmVhZCBcInNyY1wiIHBhc3NlZCBpbiBjb25zdHJ1Y3RvcilcbiAgICAgKi9cbiAgICBsb2FkKGNhbGxiYWNrLCBuZXdTcmMpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZihuZXdTcmMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zcmMgPSBuZXdTcmM7XG4gICAgICAgICAgICB0aGlzLl9yZXNldCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICAgICAgbGV0IGJ1ZmZlciA9ICcnO1xuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICByZXR1cm4gZmV0Y2goX3RoaXMuc3JjKVxuICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiByZXNwLmJvZHkuZ2V0UmVhZGVyKCkpXG4gICAgICAgICAgICAudGhlbihyZWFkZXIgPT4gcmVhZGVyLnJlYWQoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIHByb2Nlc3MgKHsgdmFsdWUsIGRvbmUgfSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdCA9IEpTT04ucGFyc2UoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NGcmFtZShsYXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobGFzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBhcmUgZG9uZSBsb2FkaW5nIGFsbCBmcmFtZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9uTG9hZChfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgKyBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgICAgKS5zcGxpdCgvW1xcclxcbl0oPz0uKS8pO1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBsaW5lcy5wb3AoKTsgLy8gQnVmZmVyIGlzIHVzZWQgdG8ga2VlcCB0aGUgXCJ1bmZpbmlzaGVkXCIgbGluZXMgdG9nZXRoZXJcbiAgICAgICAgICAgICAgICAgICAgbGluZXMubWFwKEpTT04ucGFyc2UpLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzRnJhbWUoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKHByb2Nlc3MpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKHJlYXNvbiA9PiB0aGlzLm9uRXJyb3IocmVhc29uKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlcGxhY2UgY3VycmVudCBmcmFtZXMgd2l0aCBuZXcgb25lc1xuICAgICAqIEBwYXJhbSBmcmFtZXMgOiBjYW4gYmUgYW4gYXJyYXkgb2Ygb2JqZWN0cyAoanNvbiksIGFuIG9iamVjdCAoc2luZ2xlIGZyYW1lKSBvciBhIHN0cmluZyAobmRqc29uKVxuICAgICAqIEBwYXJhbSBjYWxsYmFjayA6IGNhbGxiYWNrIHdoZW4gZWFjaCBmcmFtZSBpcyByZWFkeVxuICAgICAqL1xuICAgIHJlbG9hZChmcmFtZXMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgY29uc3QgZnMgPSBbXVxuICAgICAgICBfdGhpcy5fcmVzZXQoKTtcblxuICAgICAgICBzd2l0Y2godHJ1ZSkge1xuICAgICAgICAgICAgY2FzZSAodHlwZW9mIGZyYW1lcyA9PT0gJ3N0cmluZycpOlxuICAgICAgICAgICAgICAgIGZzID0gZnJhbWVzLnNwbGl0KC9bXFxyXFxuXSg/PS4pLy5tYXAoSlNPTi5wYXJzZSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIEFycmF5LmlzQXJyYXkoZnJhbWVzKTpcbiAgICAgICAgICAgICAgICBmcyA9IGZyYW1lc1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIChmcmFtZXMuY29uc3RydWN0b3IubmFtZSA9PT0gXCJPYmplY3RcIik6XG4gICAgICAgICAgICAgICAgZnMucHVzaChmcmFtZXMpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVbmFibGUgdG8gcmVsb2FkIGZyYW1lcy4gXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBmcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0ZyYW1lKGl0ZW0pO1xuICAgICAgICAgICAgaWYoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBmcmFtZSBhdCB0aGUgZW5kXG4gICAgICovXG4gICAgYXBwZW5kKGZyYW1lKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgX3RoaXMuX2ZyYW1lcy5wdXNoKGZyYW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGZyYW1lIGF0IHRoZSBiZWdpbm5pbmdcbiAgICAgKi9cbiAgICBwcmVwZW5kKGZyYW1lKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgX3RoaXMuX2ZyYW1lcy51bnNoaWZ0KGZyYW1lKTtcbiAgICAgICAgX3RoaXMuZnJhbWUgKys7IC8vVE9ETzogdGVzdFxuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzIGEgZnJhbWVcbiAgICAgKi9cbiAgICBwcm9jZXNzRnJhbWUoaXRlbSkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmKGl0ZW0udyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5jYW52YXMud2lkdGggID0gaXRlbS53O1xuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0uaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5jYW52YXMuaGVpZ2h0ID0gaXRlbS5oO1xuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0uZmIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuX2ZyYW1lQmFzZSA9IGl0ZW0uZmI7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS50aGIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuX3RodW1iQmFzZSA9IGl0ZW0udGhiO1xuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0udGYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuX251bUZyYW1lcyA9IGl0ZW0udGY7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS50dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5fdG90VGltZSA9IGl0ZW0udHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZighX3RoaXMuX3N0YXJ0VGltZVN0YW1wKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX3N0YXJ0VGltZVN0YW1wID0gaXRlbS50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLmZwcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5mcHM9IGl0ZW0uZnBzO1xuICAgICAgICAgICAgX3RoaXMudGltZXIgPSBuZXcgVGltZXJTcmMoMTAwMCAvIF90aGlzLmZwcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS5mICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLl9mcmFtZXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgIC8vIEF1dG9QbGF5OlxuICAgICAgICAgICAgaWYgKCFfdGhpcy5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5hdXRvcGxheSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wbGF5KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5zaG93Zmlyc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RlcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLm9uUmVuZGVyKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmKCFfdGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICBfdGhpcy5vblN0YXJ0KF90aGlzKTtcbiAgICAgICAgICAgIF90aGlzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbmRlciB2aWRlb1xuICAgICAqIEBwYXJhbSBvbmNlIHNpbmdsZSBzdGVwXG4gICAgICovXG4gICAgX3JlbmRlcihvbmNlKSB7XG4gICAgICAgIGlmICh0aGlzLnRpbWVyID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IFwiVGltZXJTcmMgd2FzIG5vdCBpbml0aWFsaXplZFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuX2ZyYW1lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IFwiVmlkZW8gaXMgZW1wdHkgb3Igbm8gZnJhbWVzIHdlcmUgZm91bmRcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuZnJhbWUgPj0gdGhpcy5fZnJhbWVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSB0aGlzLmxvb3AgPyAwIDogdGhpcy5fZnJhbWVzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5mcmFtZSA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSB0aGlzLmxvb3AgPyB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMTogMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXNwbGF5SW1nKG9uY2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXkgbmV4dCBpbWFnZVxuICAgICAqIEBwYXJhbSBvbmNlIHNpbmdsZSBzdGVwXG4gICAgICovXG4gICAgX2Rpc3BsYXlJbWcob25jZSkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBfdGhpcy5fZnJhbWVzW190aGlzLmZyYW1lXTtcbiAgICAgICAgY29uc3QgbmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX3RoaXMub25SZW5kZXIoaXRlbSk7XG4gICAgICAgICAgICBfdGhpcy50aW1lci5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5faW5jcmVtZW50KCk7XG4gICAgICAgICAgICAgICAgaWYgKCFvbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vRG8gbm90IGV4ZWN1dGUgYW55dGhpbmcgdW50aWwgaXRzIGxvYWRlZFxuICAgICAgICAgICAgICAgICAgICBfdGhpcy50aW1lci5ub2NhbGwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuX2Rpc3BsYXlJbWcoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0uZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZSA9IF90aGlzLl9mcmFtZUJhc2UgKyBpdGVtLmY7XG4gICAgICAgICAgICBfdGhpcy5faW1hZ2UoZnJhbWUsIG5leHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMub25SZW5kZXIoaXRlbSk7XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnQgZnJhbWVcbiAgICAgKi9cbiAgICBfaW5jcmVtZW50KCkge1xuICAgICAgICB0aGlzLmZyYW1lICs9ICh0aGlzLm11bHRpcGxpZXIgKiAodGhpcy5iYWNrd2FyZHMgPyAtMSA6IDEpKTtcbiAgICAgICAgaWYodGhpcy5mcmFtZSA8IDApIHtcbiAgICAgICAgICAgIGlmKHRoaXMubG9vcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJhbWUgPSB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25GaW5pc2godGhpcyk7IC8vQmFja3dhcmRzIHBsYXlpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmZyYW1lID4gdGhpcy50b3RhbEZyYW1lcygpIC0gMSkge1xuICAgICAgICAgICAgaWYodGhpcy5sb29wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJhbWUgPSB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbmlzaCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXdzIGFuIGltYWdlIG9iamVjdFxuICAgICAqIEBwYXJhbSBpbWdcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgc2VuZHMgXCJ0cnVlXCIgb24gc3VjY2Vzc1xuICAgICAqIEByZXR1cm4gdGhpc1xuICAgICAqL1xuICAgIF9kcmF3ID0gZnVuY3Rpb24oaW1nLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vLyBzZXQgc2l6ZSBwcm9wb3J0aW9uYWwgdG8gaW1hZ2VcbiAgICAgICAgaWYoaW1nLndpZHRoID09PSAwICYmIGltZy5oZWlnaHQgPT09IDApIHtcbiAgICAgICAgICAgIGltZy5vbmVycm9yKCk7XG4gICAgICAgICAgICBpZihjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCBfdGhpcy5jYW52YXMud2lkdGgsIF90aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgLy9fdGhpcy5jdHguc2F2ZSgpO1xuICAgICAgICAgICAgX3RoaXMuY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCwgMCwgMCwgX3RoaXMuY2FudmFzLndpZHRoLCBfdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIC8vX3RoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIGlmKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZCBhbiBpbWFnZSBpbnRvIGNhbnZhcy5cbiAgICAgKiBAcGFyYW0gaW1hZ2UgcGF0aCBvciB1cmwgb2YgaW1hZ2VcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgcmV0dXJucyBpbWcgb2JqZWN0XG4gICAgICogQHJldHVybiB0aGlzXG4gICAgICovXG4gICAgX2ltYWdlID0gZnVuY3Rpb24oaW1hZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5jcm9zc09yaWdpbiA9ICcnO1xuICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIF90aGlzLl9kcmF3KGltZyxmdW5jdGlvbihkcmF3bil7XG4gICAgICAgICAgICAgICAgaWYoZHJhd24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soaW1nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgZXJyID0gX3RoaXMub25FcnJvcigpO1xuICAgICAgICAgICAgaWYoZXJyKSB7XG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaW1nLnNyYyA9IGltYWdlWzBdID09PSBcIi9cIiB8fCBpbWFnZS5tYXRjaCgvXmh0dHBzPzovKSB8fCBpbWFnZS5tYXRjaCgvXmRhdGE6aW1hZ2UvKSA/IGltYWdlIDogX3RoaXMucGF0aCArIGltYWdlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZnJhbWUgYmFzZVxuICAgICAqL1xuICAgIGZyYW1lQmFzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZyYW1lQmFzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwb3NlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50IGZyYW1lXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGN1cnJlbnRGcmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJhbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIG51bWJlciBvZiBmcmFtZXNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdG90YWxGcmFtZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9udW1GcmFtZXMgfHwgdGhpcy5fZnJhbWVzLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdG90YWwgdGltZSBvZiB2aWRlb1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0b3RhbFRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90b3RUaW1lIHx8IHRoaXMuY3VycmVudEZyYW1lKCkgLyB0aGlzLmZwcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBmcmFtZSBpbiBwb3NpdGlvblxuICAgICAqIEBwYXJhbSBpbmRleCA6IHBvc2l0aW9uXG4gICAgICovXG4gICAgZnJhbWVBdChpbmRleCkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGxldCBmcmFtZSA9IChpbmRleCA8IHRoaXMudG90YWxGcmFtZXMoKSkgPyBfdGhpcy5fZnJhbWVzW2luZGV4XSA6IG51bGw7XG4gICAgICAgIGlmKGZyYW1lKSB7XG4gICAgICAgICAgICBmcmFtZS5mYiA9IF90aGlzLl9mcmFtZUJhc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZyYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBpbmRleCBudW1iZXIgYXQgcGVyY2VudGFnZSBvZiB2aWRlb1xuICAgICAqIEBwYXJhbSBwZXJjZW50YWdlXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBpbmRleEF0KHBlcmNlbnRhZ2UpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gfn4oKHBlcmNlbnRhZ2UgKiBfdGhpcy50b3RhbEZyYW1lcygpKSAvIDEwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHBsYXllciBOb2RlXG4gICAgICogQHJldHVybnMgRE9NIG5vZGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHBsYXllck5vZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBwZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGxheSB2aWRlbyBpbiBjdXJyZW50IGRpcmVjdGlvblxuICAgICAqIEBwYXJhbSBzdGFydEZyYW1lXG4gICAgICovXG4gICAgcGxheShzdGFydEZyYW1lKSB7XG4gICAgICAgIGlmIChzdGFydEZyYW1lIDwgMCkge1xuICAgICAgICAgICAgc3RhcnRGcmFtZSA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhcnRGcmFtZSA+IHRoaXMuX2ZyYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN0YXJ0RnJhbWUgPSB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGFydEZyYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSBzdGFydEZyYW1lICogMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsYXlpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnRpbWVyLnBsYXkoKTtcbiAgICAgICAgdGhpcy5fcmVuZGVyKGZhbHNlKTtcbiAgICAgICAgdGhpcy5vblBsYXkodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGxheSB2aWRlbyBpbiBmb3J3YXJkIGRpcmVjdGlvblxuICAgICAqICh1c2VkIG1haW5seSB0byBjaGFuZ2UgZGlyZWN0aW9uKVxuICAgICAqIEBwYXJhbSBzdGFydEZyYW1lXG4gICAgICovXG4gICAgcGxheUZvcndhcmQoc3RhcnRGcmFtZSkge1xuICAgICAgICB0aGlzLmJhY2t3YXJkcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBsYXkoc3RhcnRGcmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGxheSB2aWRlbyBpbiBiYWNrd2FyZHMgZGlyZWN0aW9uXG4gICAgICogQHBhcmFtIHN0YXJ0RnJhbWVcbiAgICAgKi9cbiAgICBwbGF5QmFja3dhcmRzKHN0YXJ0RnJhbWUpIHtcbiAgICAgICAgdGhpcy5iYWNrd2FyZHMgPSB0cnVlO1xuICAgICAgICB0aGlzLnBsYXkoc3RhcnRGcmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGF1c2UgdGhlIHZpZGVvXG4gICAgICovXG4gICAgcGF1c2UoKSB7XG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRpbWVyLnBhdXNlKCk7XG4gICAgICAgIHRoaXMub25TdG9wKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b3AgdGhlIHZpZGVvIChhbmQgZ28gYmFjayB0byB0aGUgYmVnaW5uaW5nKVxuICAgICAqL1xuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgdGhpcy50aW1lci5wYXVzZSgpO1xuICAgICAgICB0aGlzLl9kaXNwbGF5SW1nKHRydWUpO1xuICAgICAgICB0aGlzLm9uU3RvcCh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlIHRoZSB2aWRlbyBvbmUgZnJhbWUgaW4gdGhlIGN1cnJlbnQgZGlyZWN0aW9uXG4gICAgICovXG4gICAgc3RlcCgpIHtcbiAgICAgICAgdGhpcy5vblBsYXkodGhpcyk7XG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRpbWVyLnN0ZXAoKTtcbiAgICAgICAgdGhpcy5fcmVuZGVyKHRydWUpO1xuICAgICAgICB0aGlzLm9uU3RvcCh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBKdW1wIHRvIGZyYW1lXG4gICAgICovXG4gICAganVtcFRvKHN0YXJ0RnJhbWUpIHtcbiAgICAgICAgaWYgKHN0YXJ0RnJhbWUgPCAwKSB7XG4gICAgICAgICAgICBzdGFydEZyYW1lID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChzdGFydEZyYW1lID4gdGhpcy5fZnJhbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3RhcnRGcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0RnJhbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHN0YXJ0RnJhbWUgKiAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlbmRlcih0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlIG9uZSBmcmFtZSBmb3J3YXJkcyAoYW5kIGNoYW5nZSBkaXJlY3Rpb24pXG4gICAgICovXG4gICAgc3RlcEZvcndhcmRzKCkge1xuICAgICAgICB0aGlzLmJhY2t3YXJkcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0ZXAoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmUgb25lIGZyYW1lIGJhY2t3YXJkcyAoYW5kIGNoYW5nZSBkaXJlY3Rpb24pXG4gICAgICovXG4gICAgc3RlcEJhY2t3YXJkcygpIHtcbiAgICAgICAgdGhpcy5iYWNrd2FyZHMgPSB0cnVlO1xuICAgICAgICB0aGlzLnN0ZXAoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoaXMgb2JqZWN0XG4gICAgICogQHJldHVybnMge05kSnNvblBsYXllcn1cbiAgICAgKi9cbiAgICByZXNldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3R4LnJlc2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLmN0eC5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICAvL1Jlc2V0IGFsbDogVGhlIGZvbGxvd2luZyBsaW5lIGlzIGEgXCJoYWNrXCIgdG8gZm9yY2UgaXQgdG8gcmVzZXQ6XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsIi8qKlxuICogVGhpcyBjbGFzcyBjcmVhdGVzIHRoZSBwbGF5ZXIgVUlcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXBlL25kanNvbi1wbGF5ZXJcbiAqIEBhdXRob3IgQS5MZXBlXG4gKiBAc2luY2UgMDQvMjAyMFxuICovXG5jbGFzcyBOREpQbGF5ZXIge1xuICAgIHBsYXllcjsgICAgLy9OZEpzb25QbGF5ZXIgb2JqZWN0XG4gICAgb3B0aW9uczsgICAvL09wdGlvbnMgZm9yIHRoZSBVSVxuICAgIHVpOyAgICAgICAgLy9UaGUgVUlcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgTkRKUGxheWVyXG4gICAgICogQHBhcmFtIHNyYyA6IHN0cmluZyAoVVJMIG9mIE5ESlNPTiBmaWxlIG9yIHN0cmVhbSkgKG9wdGlvbmFsKVxuICAgICAqIEBwYXJhbSBlbGVtZW50IDogRE9NIHNlbGVjdG9yIG9yIEhUTUxFbGVtZW50IHdoZXJlIHRvIHBsYWNlIE5ESlBsYXllciAob3B0aW9uYWwpXG4gICAgICogQHBhcmFtIG9wdGlvbnMgOiBPYmplY3QgKG9wdGlvbmFsKVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNyYywgZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGZ1bmN0aW9uIGlzTWVkaWEoc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyLmluZGV4T2YoXCIuXCIpID4gMCB8fCBzdHIuaW5kZXhPZihcIi9cIikgIT09IC0xO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGlzU2VsZWN0b3Ioc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyWzBdID09PSBcIi5cIiB8fCBzdHJbMF0gPT09IFwiI1wiIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3RyKSAhPT0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgaWYoYXJndW1lbnRzWzFdLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiT2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYoaXNNZWRpYShhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IGlzU2VsZWN0b3IoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBzd2l0Y2godHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGFyZ3VtZW50c1swXS5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk9iamVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgaXNNZWRpYShhcmd1bWVudHNbMF0pOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IGlzU2VsZWN0b3IoYXJndW1lbnRzWzBdKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5rbm93biBwYXJhbWV0ZXIgd2FzIHBhc3NlZCB0byBOREpQbGF5ZXIgY29uc3RydWN0b3IuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgZGVmYXVsdDogLy8gTW9yZSB0aGFuIDJcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGNvbnRyb2xzOiBmYWxzZSxcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBjb250cm9scyA6IHsgLy9FeGFtcGxlIG9uIGhvdyB0byBzaG93L2hpZGUgZWxlbWVudHNcbiAgICAgICAgICAgICAgICBiYXNlIDogXCJmdWxsXCIsIC8vV2hpY2ggb25lIHRvIHVzZSBhcyBiYXNlXG4gICAgICAgICAgICAgICAgcGxheTogdHJ1ZSwgLy9zaG93IHBsYXkvcGF1c2VcbiAgICAgICAgICAgICAgICBzdG9wOiB0cnVlLFxuICAgICAgICAgICAgICAgIHN0ZXA6IHRydWUsXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgdGh1bWJzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZ1bGxzY3JlZW46IHRydWUsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbGFwc2U6IHRydWUsXG4gICAgICAgICAgICAgICAgZnJhbWVzOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJlc2l6ZTogdHJ1ZSwgLy9zZXQgaXQgdG8gZmFsc2UgdG8gZGlzYWJsZSBhZGp1c3RpbmcgdGhlIHNpemUgYmVmb3JlIHN0YXJ0aW5nXG4gICAgICAgICAgICBvbmFjdGlvbiA6IChhY3Rpb24sIG5kalBsYXllciwgdWlQbGF5ZXIpID0+IHt9LFxuICAgICAgICAgICAgb25wbGF5IDogKG5kalBsYXllcikgPT4ge30sXG4gICAgICAgICAgICBvbnN0b3AgOiAobmRqUGxheWVyKSA9PiB7fVxuICAgICAgICB9LCBvcHRpb25zIHx8IHt9KTtcblxuICAgICAgICAvLyBDcmVhdGUgVUlcbiAgICAgICAgdGhpcy5fY3JlYXRlKGVsZW1lbnQpO1xuICAgICAgICAvLyBJbml0aWFsaXplIHBsYXllclxuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBOZEpzb25QbGF5ZXIoc3JjLCBlbGVtZW50LCBfdGhpcy5vcHRpb25zLCB7XG4gICAgICAgICAgICBvbnN0YXJ0IDogZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICAgIF90aGlzLl9hZGp1c3RTaXplKClcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5vbnN0YXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbnN0YXJ0KHBsYXllcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBpZihfdGhpcy5vcHRpb25zLm9ubG9hZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25sb2FkKHBsYXllcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9ucmVuZGVyIDogZnVuY3Rpb24gKGZyYW1lKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX29uVXBkYXRlKGZyYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5vbnJlbmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25yZW5kZXIoZnJhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnBsYXkgOiBmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBpZihfdGhpcy51aS5wYW5lbCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5wbGF5LnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYoISBfdGhpcy51aS5zdGVwLmNzcy5jb250YWlucyhcImRpc2FibGVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5zdGVwLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5wYXVzZS5zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbnBsYXkocGxheWVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnN0b3AgOiBmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBpZihfdGhpcy51aS5wYW5lbCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5wbGF5LnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZighIF90aGlzLnVpLnN0ZXAuY3NzLmNvbnRhaW5zKFwiZGlzYWJsZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnN0ZXAuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkucGF1c2Uuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uc3RvcChwbGF5ZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uZmluaXNoOiBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgLy9wbGF5ZXIuc3RvcCgpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25lcnJvciA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBEaXNwbGF5IGVycm9yIGluIHBsYXllclxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gVHJpZ2dlciBvbiB3aW5kb3cgcmVzaXplOlxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLl9hZGp1c3RTaXplKCk7XG4gICAgICAgIH0sIHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgVUlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9vblVwZGF0ZShmcmFtZSkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmKF90aGlzLnVpKSB7XG4gICAgICAgICAgICBpZihfdGhpcy51aS5mcmFtZXMpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5mcmFtZXMudGV4dCA9IChfdGhpcy5wbGF5ZXIuY3VycmVudEZyYW1lKCkgKyAxKSArIFwiL1wiICsgX3RoaXMucGxheWVyLnRvdGFsRnJhbWVzKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF90aGlzLnVpLmxhcHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRleHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRzID0gX3RoaXMucGxheWVyLl9zdGFydFRpbWVTdGFtcCAmJiBmcmFtZS50cyAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBmcmFtZS50ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdHQgPSBfdGhpcy5wbGF5ZXIuX3RvdFRpbWUgPiAwO1xuICAgICAgICAgICAgICAgIGlmKGZyYW1lLmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IGZyYW1lLmQgKyBcIiBcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBfdGhpcy5fZm9ybWF0TWlsbGlzKGZyYW1lLnRzIC0gX3RoaXMucGxheWVyLl9zdGFydFRpbWVTdGFtcCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBmcmFtZS50LmluZGV4T2YoXCI6XCIpID4gMCA/IGZyYW1lLnQgOiBfdGhpcy5fZm10VGltZShmcmFtZS50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBcIi9cIiArIF90aGlzLnBsYXllci50b3RhbFRpbWUoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy51aS5sYXBzZS50ZXh0ID0gdGV4dFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoX3RoaXMudWkucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5wcm9ncmVzcy52YWx1ZSA9ICgoX3RoaXMucGxheWVyLmN1cnJlbnRGcmFtZSgpICsgMSkgLyAoX3RoaXMucGxheWVyLnRvdGFsRnJhbWVzKCkpKSAqIDEwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0IHdpbGwgYWRqdXN0IHRoZSB2aWRlbyBhbmQgY2FudmFzIHNpemVcbiAgICAgKiBAcHJpdmF0ZVxuXG4gICAgIEZJWE1FOiBhdHRyaWJ1dGVzIGluIDxjYW52YT4gc2hvdWxkIG1hdGNoIGltYWdlIVxuXG4gICAgICovXG4gICAgX2FkanVzdFNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVzaXplKSB7XG4gICAgICAgICAgICBsZXQgcGxheWVyID0gdGhpcy5wbGF5ZXIud3JhcHBlcjtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBwbGF5ZXIucGFyZW50KCk7XG4gICAgICAgICAgICBsZXQgcmF0aW9XID0gKHRoaXMub3B0aW9ucy5oZWlnaHQgfHwgdGhpcy5wbGF5ZXIuY2FudmFzLmhlaWdodCkgLyAodGhpcy5vcHRpb25zLndpZHRoIHx8IHRoaXMucGxheWVyLmNhbnZhcy53aWR0aCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5jYW52YXMuaGVpZ2h0ID0gcGFyZW50LmNsaWVudEhlaWdodCAtICh0aGlzLm9wdGlvbnMuY29udHJvbHMgPyBwbGF5ZXIucXVlcnlTZWxlY3RvcihcIi5wYW5lbFwiKS5jbGllbnRIZWlnaHQgOiAwKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLmNhbnZhcy53aWR0aCA9IHRoaXMucGxheWVyLmNhbnZhcy5oZWlnaHQgLyByYXRpb1c7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRoZSBVSVxuICAgICAqIEBwYXJhbSBlbGVtZW50IFNlbGVjdG9yXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfY3JlYXRlKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjb25zdCAkID0gbTJkMi5sb2FkKCk7XG4gICAgICAgIF90aGlzLnVpID0gJChlbGVtZW50LCBfdGhpcy5fZ2V0VUkoZWxlbWVudCkpO1xuICAgICAgICBpZihfdGhpcy51aS5wYW5lbCkge1xuICAgICAgICAgICAgW1widGh1bWJcIiwgXCJwbGF5XCIsIFwic3RlcFwiLCBcInBhdXNlXCIsIFwic3RvcFwiLCBcImxhcHNlXCIsIFwicHJvZ3Jlc3NcIiwgXCJmcmFtZXNcIiwgXCJmdWxsc2NyZWVuXCJdLmZvckVhY2goaXQgPT4ge1xuICAgICAgICAgICAgICAgIF90aGlzLnVpW2l0XSA9IF90aGlzLnVpLnBhbmVsW2l0XTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hvb3NlIHRoZSBVSSB0byBkaXNwbGF5XG4gICAgICogQHBhcmFtIGVsZW1lbnQgU2VsZWN0b3JcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0VUkoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGxldCB1aSA9IHsgaHRtbCA6IChlbGVtZW50LmlubmVySFRNTCB8fCBcIlwiKSB9OyAvLyBJZiBubyBjb250cm9scyBhcmUgc3BlY2lmaWVkXG5cbiAgICAgICAgLy8gbm9pbnNwZWN0aW9uIEZhbGxUaHJvdWdoSW5Td2l0Y2hTdGF0ZW1lbnRKU1xuICAgICAgICBpZihfdGhpcy5vcHRpb25zLmNvbnRyb2xzKSB7XG4gICAgICAgICAgICB1aSA9IHRoaXMuX2dldEJhc2ljVUkoKTtcbiAgICAgICAgICAgIC8vIE5PVEU6IHZpc2liaWxpdHkgaXMgY29udHJvbGxlZCBpbiBDU1NcbiAgICAgICAgICAgIHN3aXRjaChfdGhpcy5vcHRpb25zLmNvbnRyb2xzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImZ1bGxcIjpcbiAgICAgICAgICAgICAgICAgICAgdWkucGFuZWwuc3RlcC5jc3MucmVtb3ZlKFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSBcImNvbW1vblwiOlxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsaXZlXCI6XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmNvbnRyb2xzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgLy9UT0RPOiB3aGF0IHRvIHNob3cgYW5kIHdoYXQgbm90IHRvIHNob3dcbiAgICAgICAgfVxuICAgICAgICBsZXQgcm9vdCA9IGVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlID8gZWxlbWVudCA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7XG4gICAgICAgIGlmIChyb290KSB7XG4gICAgICAgICAgICBsZXQgY2FudmFzID0gcm9vdC5xdWVyeVNlbGVjdG9yKFwiY2FudmFzXCIpO1xuICAgICAgICAgICAgaWYgKCFjYW52YXMpIHtcbiAgICAgICAgICAgICAgICB1aSA9IE9iamVjdC5hc3NpZ24oeyBjYW52YXMgOiBcIlwiIH0sIHVpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUm9vdCBlbGVtZW50OiBcIiArIGVsZW1lbnQgKyBcIiB3YXMgbm90IGZvdW5kIGluIGRvY3VtZW50XCIpO1xuICAgICAgICAgICAgdWkgPSBPYmplY3QuYXNzaWduKHsgY2FudmFzIDogXCJcIiB9LCB1aSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJhc2ljIFVJXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9nZXRCYXNpY1VJKCkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IF90aGlzLnBsYXllci53cmFwcGVyO1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLmNsYXNzTGlzdC5hZGQoXCJmdWxsc2NyZWVuXCIpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsYXllci5jbGFzc0xpc3QucmVtb3ZlKFwiZnVsbHNjcmVlblwiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhcHRpb24gOiBcIlwiLFxuICAgICAgICAgICAgY3NzIDogX3RoaXMub3B0aW9ucy5jb250cm9scyxcbiAgICAgICAgICAgIHBhbmVsIDoge1xuICAgICAgICAgICAgICAgIHRhZ05hbWU6IFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJwYW5lbFwiLFxuICAgICAgICAgICAgICAgIHRodW1iIDogeyAvL0NyZWF0ZSBcInRodW1iXCIgaW5zaWRlIHBhbmVsXG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImZpZ3VyZVwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcInRodW1iXCIsXG4gICAgICAgICAgICAgICAgICAgIGltZyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FwdGlvbiA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImZpZ0NhcHRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjYXB0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIEJ1dHRvbnNcbiAgICAgICAgICAgICAgICByZWMgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJyZWNcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiTGl2ZVwiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGxheSA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcInBsYXlcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUGxheVwiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIixcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkub25hY3Rpb24oXCJwbGF5XCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGxheWVyLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGF1c2UgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJwYXVzZVwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJQYXVzZVwiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIixcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkub25hY3Rpb24oXCJwYXVzZVwiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXllci5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdGVwIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgIGNzczogW1wic3RlcFwiLCBcImRpc2FibGVkXCJdLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJTdGVwXCIsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiI1wiLFxuICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5vbmFjdGlvbihcInN0ZXBcIiwgX3RoaXMucGxheWVyLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wbGF5ZXIuc3RlcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdG9wIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwic3RvcFwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJTdG9wXCIsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiI1wiLFxuICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5vbmFjdGlvbihcInN0b3BcIiwgX3RoaXMucGxheWVyLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wbGF5ZXIuc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBUaW1lIExhcHNlXG4gICAgICAgICAgICAgICAgbGFwc2UgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImxhYmVsXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwibGFwc2VcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVGltZSBlbGFwc2VkIC8gVGltZSBUb3RhbFwiLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIjA6MDBcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxpdmUgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImxhYmVsXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwibGl2ZVwiLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIkxpdmUgRmVlZFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBQcm9ncmVzcyBiYXJcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyA6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgICAgICAgICAgICBvbm1vdXNlbW92ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IH5+KCgoZS5vZmZzZXRYKSAvIHRoaXMub2Zmc2V0V2lkdGgpICogMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmcmFtZSA9IF90aGlzLnBsYXllci5mcmFtZUF0KF90aGlzLnBsYXllci5pbmRleEF0KHBvc2l0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS50aHVtYi5zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS50aHVtYi5pbWcuc3JjID0gX3RoaXMucGxheWVyLmZyYW1lQmFzZSgpICsgKGZyYW1lLnRoIHx8IGZyYW1lLmYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLmltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBfdGhpcy51aS50aHVtYi5pbWcubmF0dXJhbFdpZHRoIHx8IF90aGlzLnVpLnRodW1iLmltZy53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyYW1lLnRjICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuY2FwdGlvbiA9IGZyYW1lLnRjO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS50aHVtYi5zdHlsZS5sZWZ0ID0gKHRoaXMub2Zmc2V0TGVmdCArIGUub2Zmc2V0WCAtIChfdGhpcy51aS50aHVtYi5jbGllbnRXaWR0aCAvIDIpKSArIFwicHhcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS50aHVtYi5zaG93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9ubW91c2VsZWF2ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gfn4oKChlLm9mZnNldFgpIC8gdGhpcy5vZmZzZXRXaWR0aCkgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gX3RoaXMucGxheWVyLmluZGV4QXQocG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGxheWVyLmp1bXBUbyhpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5vbmFjdGlvbihcInByb2dyZXNzXCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBGcmFtZSBjb3VudFxuICAgICAgICAgICAgICAgIGZyYW1lcyA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwibGFiZWxcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJmcmFtZXNcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiQ3VycmVudCBGcmFtZSAvIFRvdGFsIEZyYW1lc1wiLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIjBcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIEZ1bGxzY3JlZW4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgZnVsbHNjcmVlbiA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcImZ1bGxzY3JlZW5cIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRnVsbCBTY3JlZW5cIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheWVyID0gX3RoaXMucGxheWVyLndyYXBwZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwbGF5ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZnVsbHNjcmVlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwiZXhpdC1mdWxsc2NyZWVuXCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwiZnVsbHNjcmVlblwiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy9zaXplcyA6IFtcIlNEXCIsIFwiSERcIiwgXCI0S1wiXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmFjdGlvbiA6IGZ1bmN0aW9uKGFjdGlvbiwgbmRqUGxheWVyLCB1aVBsYXllcikge1xuICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25hY3Rpb24oYWN0aW9uLCBuZGpQbGF5ZXIsIHVpUGxheWVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnBsYXkgOiBmdW5jdGlvbihuZGpQbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9ucGxheShuZGpQbGF5ZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uc3RvcCA6IGZ1bmN0aW9uKG5kalBsYXllcikge1xuICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25zdG9wKG5kalBsYXllciwgdWlQbGF5ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0IGEgdGltZSwgZm9yIGV4YW1wbGU6IDEyMC4zNCB3aWxsIGJlIGNvbnZlcnRlZCBpbnRvOiAwMjowMC4zNFxuICAgICAqIEBwYXJhbSB0aW1lIGludFxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZm10VGltZSh0aW1lKSB7XG4gICAgICAgIHRpbWUgPSB0aW1lLnRvRml4ZWQoMik7XG4gICAgICAgIGxldCBkZWNpbWFsID0gdGltZS5zcGxpdChcIi5cIilbMV0gfHwgXCIwMFwiO1xuICAgICAgICByZXR1cm4gKH5+KHRpbWUgLyA2MCkgKyBcIlwiKS5wYWRTdGFydCgyLCAnMCcpICsgXCI6XCIgKyAofn4oKHRpbWUgLyA2MCkgJSAxICogNjApICsgXCJcIikucGFkU3RhcnQoMiwgJzAnKSArIFwiLlwiICsgZGVjaW1hbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0IG1pbGxpc2Vjb25kcywgZm9yIGV4YW1wbGU6IDkwMDAwIHdpbGwgYmUgY29udmVydGVkIGludG86IDAwOjAxOjMwLjAwMFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2Zvcm1hdE1pbGxpcyhtaWxsaXMpIHtcbiAgICAgICAgZnVuY3Rpb24gcGFkKG51bSwgZGlnaXRzKSB7XG4gICAgICAgICAgICByZXR1cm4gKFwiMDBcIiArIG51bSkuc2xpY2UoKGRpZ2l0cyB8fCAyKSAqIC0xKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoID0gTWF0aC5mbG9vcihtaWxsaXMvMTAwMC82MC82MCk7XG4gICAgICAgIGNvbnN0IG0gPSBNYXRoLmZsb29yKChtaWxsaXMvMTAwMC82MC82MCAtIGgpKjYwKTtcbiAgICAgICAgY29uc3QgcyA9IE1hdGguZmxvb3IoKChtaWxsaXMvMTAwMC82MC82MCAtIGgpKjYwIC0gbSkqNjApO1xuICAgICAgICBjb25zdCBtcyA9IHBhcnNlSW50KChtaWxsaXMgJSAxMDAwKSAvIDEwMCk7XG4gICAgICAgIHJldHVybiBwYWQoaCkgKyBcIjpcIiArIHBhZChtKSArIFwiOlwiICsgcGFkKHMpICsgXCIuXCIgKyBwYWQobXMsIDMpO1xuICAgIH1cbn0iLCIvKipcbiAqIEBhdXRob3I6IEEuIExlcGVcbiAqIE1hbmFnZSBUaW1lcnNcbiAqIFVzYWdlOlxuICogY29uc3QgdCA9IG5ldyBUaW1lclNyYygxMDAwKTtcbiAqIHQuY2FsbChmdW5jdGlvbigpIHsgPGRvPiB9KTtcbiAqIG9yOlxuICogY29uc3QgdCA9IG5ldyBUaW1lclNyYygxMDAwLGZ1bmN0aW9uKCl7IDxkbz4gfSk7XG4gKiB0LnBhdXNlKCk7XG4gKiB0LmRlc3Ryb3koKTtcbiAqL1xuZnVuY3Rpb24gVGltZXJTcmMob3JpZ2luYWxfbXMsIGNhbGxiYWNrKSB7XG5cdGxldCBzdGFydFRpbWUsIHRpbWVyLCBvYmogPSB7fSwgYWN0aW9uLCBtcztcblx0b2JqLmludGVydmFsID0gb3JpZ2luYWxfbXM7IC8vUHVibGljLiBDYW4gYmUgdXBkYXRlZFxuXHRvYmouY2hlY2tlciA9IDUwOyAvLyBhZGp1c3QgdGhpcyBudW1iZXIgdG8gYWZmZWN0IGdyYW51bGFyaXR5XG5cdG9iai5zdGF0dXMgPSBcImluaXRcIjtcblx0bGV0IG5vd1RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0c3RhcnRUaW1lID0gbm93VGltZSAtIG9yaWdpbmFsX21zOyAvL3N0YXJ0IHJpZ2h0IGF3YXlcblx0b2JqLmNhbGwgPSBmdW5jdGlvbihmdW5jKSB7XG5cdFx0Y2FsbGJhY2sgPSBmdW5jO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG5cdG9iai5ub2NhbGwgPSBmdW5jdGlvbigpIHtcblx0XHRjYWxsYmFjayA9IG51bGw7XG5cdFx0cmV0dXJuIG9iajtcblx0fTtcblx0Ly9FeGVjdXRlIHRoZSBjYWxsYmFjayBtYW51YWxseSBhbmQgcmVzZXQgdGhlIHRpbWVyXG5cdG9iai5leGVjID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG5cdFx0c3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdFx0cmV0dXJuIG9iajtcblx0fTtcblx0Ly8gQ2hlY2tzIHRoZSBzdGF0dXMgb2YgdGhlIHRpbWVyXG5cdG9iai5jaGVjayA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKGFjdGlvbikgYWN0aW9uKCk7XG5cdFx0cmV0dXJuIG9iajtcblx0fTtcbiAgICBvYmoucGxheSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFjdGlvbiA9IG9iai5zdGVwO1xuXHRcdG9iai5zdGF0dXMgPSBcInJ1bm5pbmdcIjtcblx0XHRyZXR1cm4gb2JqO1xuICAgIH07XG4gICAgb2JqLnBhdXNlID0gZnVuY3Rpb24oKSB7XG5cdFx0YWN0aW9uID0gbnVsbDtcblx0XHRvYmouc3RhdHVzID0gXCJwYXVzZWRcIjtcblx0XHRyZXR1cm4gb2JqO1xuICAgIH07XG5cdG9iai5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG5cdFx0YWN0aW9uID0gbnVsbDtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG5cdFx0dGltZXIgPSBudWxsO1xuXHRcdGZvcih2YXIgbyBpbiBvYmopIHtcblx0XHRcdG9ialtvXSA9IG51bGw7XG5cdFx0XHRkZWxldGUgb2JqW29dO1xuXHRcdH1cblx0XHRvYmouc3RhdHVzID0gXCJkZXN0cm95ZWRcIjtcblx0fTtcbiAgICBvYmouc3RlcCA9IGZ1bmN0aW9uKCkge1xuXHRcdG5vd1RpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgbXMgPSBNYXRoLm1heCgwLCBvYmouaW50ZXJ2YWwgLSAobm93VGltZSAtIHN0YXJ0VGltZSkpO1xuICAgICAgICBpZihtcyA9PT0gMCkge1xuXHRcdFx0bXMgPSBvYmouaW50ZXJ2YWw7XG5cdFx0XHRzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0XHRcdGlmKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcblx0b2JqLnNsb3cgPSBmdW5jdGlvbigpIHtcblx0XHRvYmouaW50ZXJ2YWwgPSAxMDAwO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG5cdG9iai5mYXN0ID0gZnVuY3Rpb24oKSB7XG5cdFx0b2JqLmludGVydmFsID0gb3JpZ2luYWxfbXM7XG5cdFx0cmV0dXJuIG9iajtcblx0fTtcbiAgICB0aW1lciA9IHNldEludGVydmFsKG9iai5jaGVjaywgb2JqLmNoZWNrZXIpO1xuICAgIHJldHVybiBvYmo7XG59XG4iLCIvKipcbiAqIEhUTUwgaW1wbGVtZW50YXRpb24gb2YgbmRqc29uLXBsYXllclxuICogaHR0cHM6Ly9naXRodWIuY29tL2xlcGUvbmRqc29uLXBsYXllclxuICogQGF1dGhvciBBLkxlcGVcbiAqIEBzaW5jZSAwNC8yMDIwXG4gKlxuICogRXhhbXBsZSBzcGVjaWZ5aW5nIG11bHRpcGxlIHNpemVzOlxuICogPHZpZGVvLW5kIHNyYz1cIi92aWRlby9kZW1vLm5kanNvblwiIGNvbnRyb2xzIGxvb3AgYXV0b3BsYXk+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tUVZHQS5uZGpzb25cIiB3aWR0aD1cIjMyMFwiPlxuICogICAgICA8c291cmNlIHNyYz1cIi92aWRlby9kZW1vLVZHQS5uZGpzb25cIiB3aWR0aD1cIjY0MFwiPlxuICogICAgICA8c291cmNlIHNyYz1cIi92aWRlby9kZW1vLVNWR0EubmRqc29uXCIgd2lkdGg9XCI4MDBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby1IRC5uZGpzb25cIiB3aWR0aD1cIjEyODBcIiBoZWlnaHQ9XCI3MjBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby1GdWxsSEQubmRqc29uXCIgd2lkdGg9XCIxOTIwXCIgaGVpZ2h0PVwiMTA4MFwiPlxuICogICAgICA8c291cmNlIHNyYz1cIi92aWRlby9kZW1vLTRLLm5kanNvblwiIHdpZHRoPVwiMzg0MFwiIGhlaWdodD1cIjIxNjBcIj5cbiAqIDwvdmlkZW8tbmQ+XG4gKlxuICogRXhhbXBsZSBzcGVjaWZ5aW5nIHRyYWNrczpcbiAqICAodHJ5aW5nIHRvIGJlIGFzIGNsb3NlIHRvOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvdHJhY2spXG4gKiBOT1RFOiBWVFQgZm9ybWF0IGlzIG5vdCBzdXBwb3J0ZWQgYXMgaXQgaXMgYmFzZWQgaW4gdGltZWQgdGV4dCwgd2hpbGVcbiAqIHdlIG5lZWQgdG8gYmUgc3VyZSB0aGV5IGFyZSBzeW5jIHdpdGggaW1hZ2VzIHVzaW5nIGZyYW1lcyBpbnN0ZWFkIG9mIHRpbWUuXG4gKlxuICogPHZpZGVvLW5kIHNyYz1cIi92aWRlby9kZW1vLm5kanNvblwiIGNvbnRyb2xzIGxvb3AgYXV0b3BsYXk+XG4gKiAgICA8dHJhY2sgc3JjPVwiL2luZm8vZGF0YS50eHRcIiBraW5kPVwiZGVzY3JpcHRpb25zXCIgbGFiZWw9XCJEYXRhXCI+XG4gKiA8L3ZpZGVvLW5kPlxuICpcbiAqIFRyYWNrIHR5cGVzOlxuICogY2FwdGlvbnMgICAgIDogRGlzcGxheWVkIG9uIHRoZSBjZW50ZXJcbiAqIGNoYXB0ZXJzICAgICA6IEl0IHdpbGwgYmUgZGlzcGxheWVkIGluIHRoZSB0b3AgKGFsc28gdXNlZnVsIGZvciBuYXZpZ2F0aW9uKVxuICogZGVzY3JpcHRpb25zIDogRGlzcGxheWVkIG9uIHRvcCBsZWZ0IGNvcm5lclxuICogbWV0YWRhdGEgICAgIDogRGlzcGxheWVkIG9uIHRvcCByaWdodCBjb3JuZXJcbiAqIHN1YnRpdGxlcyAgICA6IERpc3BsYXllZCBvbiB0aGUgYm90dG9tXG4gKlxuICogVGhlIGZvcm1hdCBvZiB0aGUgVFhUIGZpbGUgaXMgXCJmcmFtZS1vci1yYW5nZSMgc3BhY2Utb3ItdGFiIHRleHRcIiwgZm9yIGV4YW1wbGU6XG4gKiAyMC0zMCAgICBPYmplY3RzPGJyPmJ5IGNvbG9yOlxuICogMzUgICBCbHVlOiAyLCBSZWQ6IDFcbiAqIDM2ICAgQmx1ZTogMywgUmVkOiAxXG4gKiAzNyAgIEJsdWU6IDIsIFJlZDogMlxuICpcbiAqIEFib3V0IGNoYXB0ZXJzOlxuICogQWRkaXRpb25hbGx5IHRvIGJlaW5nIGRpc3BsYXllZCBvbiB0aGUgdG9wIGFzIGEgdGl0bGUsIGlmIHVzZWQsIGl0IHdpbGwgZGlzcGxheSBuZXh0IGFuZCBwcmV2IGJ1dHRvbnMuXG4gKiBGb3IgZXhhbXBsZTpcbiAqIGA8dHJhY2sgc3JjPVwiL2NoYXB0ZXJzL2ZpbGUudHh0XCIga2luZD1cImNoYXB0ZXJzXCI+YFxuICpcbiAqIGZpbGUudHh0OlxuICogMC0xMCBDaGFwdGVyIDE6PGJyPlRoZSBiZWdpbm5pbmdcbiAqIDM1Mi0zNjAgQ2hhcHRlciAyOjxicj5UaGUgbW9tZW50XG4gKiA2ODktNzEwIExhc3QgQ2hhcHRlcjo8YnI+VGhlIGVuZFxuICpcbiAqIFdoZW5ldmVyIHlvdSBjbGljayBvbiAncHJldicgb3IgJ25leHQnIGl0IHdpbGwgdXNlIHRoZSBiZWdpbm5pbmcgb2YgZWFjaCBjaGFwdGVyIHRvIGp1bXAgaW50byBzY2VuZXMuXG4gKiBUaGUgcmFuZ2UgaXMgdXNlZCB0byBkaXNwbGF5IGl0LiBJZiB5b3UgZG9uJ3Qgc2V0IGEgcmFuZ2UgKGp1c3QgYSBmcmFtZSBudW1iZXIpLCBpdCB3aWxsIGJlIGRpc3BsYXllZCBmb3IgM3MuXG4gKi9cbmNsYXNzIFZpZGVvTkQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIC8vIGNyZWF0ZSBzaGFkb3cgZG9tIHJvb3RcbiAgICAgICAgdGhpcy5fcm9vdCA9IHRoaXM7IC8vdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJ30pO1xuICAgICAgICAvL3RoaXMuX3Jvb3QuaW5uZXJIVE1MID0gYGA7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzO1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICAgICAgLy8gQXR0cmlidXRlcyBzaW1pbGFyIHRvIDx2aWRlbz4gdGFnOlxuICAgICAgICAgICAgYXV0b3BsYXkgOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRyb2xzIDogZmFsc2Us44CALy90cnVlOiBtb3N0IGJhc2ljIFVJLCAnY29tbW9uJywgJ2Z1bGwnLCBvciBsaXN0LCBmb3IgZXhhbXBsZTogJ3BsYXkgcHJvZ3Jlc3MgbGFwc2UgZnJhbWVzJ1xuICAgICAgICAgICAgbG9vcCAgICAgOiBmYWxzZSxcbiAgICAgICAgICAgIGxpdmUgICAgIDogZmFsc2UsXG4gICAgICAgICAgICB3aWR0aCAgICA6ICdhdXRvJyxcbiAgICAgICAgICAgIGhlaWdodCAgIDogJ2F1dG8nLFxuICAgICAgICAgICAgcG9zdGVyICAgOiAnJyxcbiAgICAgICAgICAgIHByZWxvYWQgIDogJ2F1dG8nLCAvL09wdGlvbnMgYXJlOiAnbWV0YWRhdGEnLCAnbm9uZScsXG4gICAgICAgICAgICBzcmMgICAgICA6ICcnLCAgICAgLy9VUkwgIWltcG9ydGFudFxuICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBhdHRyaWJ1dGVzOlxuICAgICAgICAgICAgY2MgICAgICAgICAgOiAnYXV0bycsIC8vRW5hYmxlIENDIGJ1dHRvblxuICAgICAgICAgICAgY2FwdGlvbiAgICAgOiAnJywgLy9TZXQgc29tZSBjYXB0aW9uIG92ZXIgdGhlIHZpZGVvXG4gICAgICAgICAgICBmdWxsc2NyZWVuICA6IGZhbHNlLCAvL1VzZSAnYXV0bycgdG8gb25seSBkaXNwbGF5IGJ1dHRvbi4gdHJ1ZSA9IHN0YXJ0IGFzIGZ1bGxzY3JlZW5cbiAgICAgICAgICAgIGZwcyAgICAgICAgIDogJycsIC8vc3BlY2lmeSB2aWRlbyBmcHMgKGlmIGl0cyBub3QgaW4gdGhlIG1ldGFkYXRhKVxuICAgICAgICAgICAgc3BlZWQgICAgICAgOiBmYWxzZSwgLy9EaXNwbGF5IHNwZWVkIG1lbnVcbiAgICAgICAgICAgIGF1dG9zaXplICAgIDogJ2F1dG8nLCAvL0F1dG9tYXRpY2FsbHkgY2hvb3NlIGJlc3Qgc2l6ZSBmcm9tIHNpemVzXG4gICAgICAgICAgICBzaXplcyAgICAgICA6IHt9IHx8IFtdLCAvL1NwZWNpZnkgYXZhaWxhYmxlIHNpemVzLiBFeGFtcGxlOiB7IEhEIDogMTIwMCB9IG9yIFs4MDAsIDEyMDAsIDE4MDBdXG4gICAgICAgICAgICB0aHVtYnMgICAgICA6ICdhdXRvJywgLy9TaG93IHRodW1ibmFpbHMgd2hlbiBwbGFjaW5nIG1vdXNlIG92ZXIgcHJvZ3Jlc3NcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuICAgICAgICBmb3IobGV0IGQgaW4gZGVmYXVsdE9wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnNbZF0gPSB0aGlzLmdldEF0dHJpYnV0ZShkKSB8fCB0aGlzLmhhc0F0dHJpYnV0ZShkKSB8fCBkZWZhdWx0T3B0aW9uc1tkXTtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLm9uc3RhcnQgPSBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICBpZihyb290Lm9uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICByb290Lm9uc3RhcnQocGxheWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLm9ubG9hZCA9IGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgIGlmKHJvb3Qub25sb2FkKSB7XG4gICAgICAgICAgICAgICAgcm9vdC5vbmxvYWQocGxheWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLm9ucmVuZGVyID0gZnVuY3Rpb24oZnJhbWUpIHtcbiAgICAgICAgICAgIGlmKHJvb3Qub25yZW5kZXIpIHtcbiAgICAgICAgICAgICAgICByb290Lm9ucmVuZGVyKGZyYW1lLCBuZGpQbGF5ZXIud3JhcHBlciwgbmRqUGxheWVyLCBuZGpQbGF5ZXIucGxheWVyLmNhbnZhcywgbmRqUGxheWVyLnBsYXllci5jdHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IFwibmRqcFwiO1xuICAgICAgICBjb25zdCBuZGpQbGF5ZXIgPSBuZXcgTkRKUGxheWVyKG9wdGlvbnMuc3JjLCB0aGlzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBzZXRDYXB0aW9uKGNhcHRpb24pIHtcbiAgICAgICAgdGhpcy5fcm9vdC5xdWVyeVNlbGVjdG9yKFwiY2FwdGlvblwiKS5pbm5lclRleHQgPSBjYXB0aW9uO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gWyAnd2lkdGgnLCAnaGVpZ2h0JywgJ2NhcHRpb24nIF07XG4gICAgfVxuXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ2NhcHRpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnNldENhcHRpb24obmV3VmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgndmlkZW8tbmQnLCBWaWRlb05EKTtcbn0pO1xuIl19

//# sourceMappingURL=ndjson-player.min.js.map
