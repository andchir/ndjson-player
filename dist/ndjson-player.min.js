/**
 * Author : A.Lepe (dev@alepe.com)
 * License: MIT
 * Version: 0.1.8
 * Updated: 2022-05-13
 * Content: ndjson-player.min.js (Bundle Minimized)
 */

!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.m2d2=t()}(this,(function(){"use strict";class e{isString(e){return"string"==typeof e}isBool(e){return"boolean"==typeof e}isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}isSelectorID(e){return 0===(e+"").trim().indexOf("#")}isPlainObject(e){return"Object"===e.constructor.name}isObject(e){return"object"==typeof e}isArray(e){return Array.isArray(e)}isFunction(e){return"function"==typeof e}isElement(e){return e instanceof HTMLElement}isNode(e){return e instanceof Node||e instanceof DocumentFragment}isHtml(e){return-1!==(e+"").trim().indexOf("<")}isEmpty(e){return void 0===e||this.isObject(e)&&0===Object.keys(e).length||""===e}isVisible(e){if(!this.isElement(e))return console.log("(isVisible) Not an element: "),console.log(e),!1;const t="none"!==e.style.display,s="hidden"!==e.style.visibility;return t&&s}inView(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.width>0&&t.height>0}cleanArray(e){return e.filter((function(e){return 0===e||e}))}isValidElement(e){const t=this.newElement(e);return"template"!==e&&"HTMLUnknownElement"!==t.constructor.name}exists(e){return null!==document.querySelector(e)}getAttrOrProp(e,t){let s="";return this.hasAttrOrProp(e,t)&&(s=this.hasAttr(e,t)?e.getAttribute(t):e[t]),s}hasAttrOrProp(e,t){return this.hasAttr(e,t)||this.hasProp(e,t)}hasAttr(e,t){let s=!1;if(e&&!this.isNumeric(t))if("checked"===t)s=void 0!==e.type&&("radio"===e.type||"checkbox"===e.type);else s=void 0!==e.hasAttribute&&e.hasAttribute(t);return s}hasProp(e,t){let s=!1;if(e&&!this.isNumeric(t)){let n=void 0!==e[t];n&&null===e[t]&&"value"===t&&(n=!1),s=n&&!(e[t]instanceof Node)&&!e.hasAttribute(t)}return s}setPropOrAttr(e,t,s){if(this.hasProp(e,t))try{e[t]=s}catch(n){this.setAttr(e,t,s)}else this.setAttr(e,t,s)}setAttr(e,t,s){s?e.setAttribute(t,s):e.removeAttribute(t)}defineProp(e,t,s){this.isObject(e)&&void 0===e[t]&&(Object.defineProperty(e,t,{enumerable:!1,writable:!0}),e[t]=s)}htmlElement(e){const t=this.newElement("template");return t.innerHTML=e.trim(),t.content.firstChild}newElement(e){return document.createElement(e)}newEmptyNode(){return new DocumentFragment}getMethods(e){const t=Reflect.getPrototypeOf(e),s=Reflect.getPrototypeOf(t);return Reflect.ownKeys(t).filter((e=>Reflect.ownKeys(s).indexOf(e)<0))}appendAllChild(e,t){for(;e.firstChild;)t.append(e.firstChild)}prependAllChild(e,t){for(;e.firstChild;)t.prepend(e.firstChild)}}class t{"use strict";_stored={events:[],datasetNodes:[],datasets:[],styleNodes:[],styles:[]};static storedEventsTimeout=50;static short=!0;static updates=!0;static utils=new e;constructor(){}static instance=new t;static extensions={};static main=(()=>{const e=(e,s)=>{const n=this.instance.getProxyNode(e,s);return n&&n.onready&&t.utils.isFunction(n.onready)&&(n.addEventListener("ready",n.onready,{once:!0}),setTimeout((()=>{n.dispatchEvent(new CustomEvent("ready"))}),10)),["dataset","style"].forEach((e=>{n&&n[e]&&(this.instance._stored[e+"s"].push(n[e]),this.instance._stored[e+"Nodes"].push(n))})),n};return t.utils.getMethods(t.utils).forEach((s=>{e[s]=t.utils[s]})),e})();static ready(e){document.addEventListener("DOMContentLoaded",(()=>{e(t.main)}))}static load(e){if(void 0!==e){const s=e(t.main);t.utils.isObject(s)&&!t.utils.isEmpty(s)&&Object.keys(s).forEach((e=>{if(t.utils.isValidElement(e)){void 0===t.extensions[e]&&(t.extensions[e]={});const n=t.utils.newElement(e);Object.keys(s[e]).forEach((s=>{t.utils.hasProp(n,s)&&console.log("Warning: property ["+s+"] already exists in node: ["+e+"] while trying to extend it. Unexpected behaviour may happen.")})),Object.assign(t.extensions[e],s[e])}else{void 0===t.extensions["*"]&&(t.extensions["*"]={});const n=t.utils.newElement("div");Object.keys(s[e]).forEach((e=>{t.utils.hasProp(n,e)&&console.log("Warning: property ["+e+"] already exists in Node while trying to extend it. Unexpected behaviour may happen.")})),Object.assign(t.extensions["*"],s[e])}}))}return t.main}extDom(e,s){if(!e)return console.error("Selector was empty"),null;void 0===s&&(s=document);const n=t.utils.isNode(e)?e:s.querySelector(e);if(!n)return t.utils.isString(e)?(console.error("Selector: "+e+" didn't match any element in node:"),console.log(s)):console.error("Node was null"),null;if(void 0===n._m2d2){n._m2d2=!0,["parent","sibling","next","prev","find","findAll","onupdate","onready","show","onshow","inView","css","text","html","getData","index"].forEach((e=>{n.hasOwnProperty(e)&&(console.log("Node already had ["+e+"] property. It might cause unexpected behaviour."),console.log("You may need to update the M2D2 version or report it to: github.com/intellisrc/m2d2/"))})),Object.defineProperty(n,"text",{get(){return this.childNodes.length?this.innerText:this.textContent},set(e){if(this.childNodes.length){let t=!1;this.childNodes.forEach((s=>{"Text"===s.constructor.name&&(s.nodeValue=e,t=!0)})),t||this.prepend(document.createTextNode(e))}else this.textContent=e}}),Object.defineProperty(n,"html",{get(){return this.innerHTML},set(e){this.innerHTML=e}}),Object.defineProperty(n,"css",{get(){return this.classList},set(e){t.utils.isArray(e)?this.className=e.join(" "):t.utils.isString(e)?this.className=e:t.utils.isPlainObject(e)?Object.keys(e).forEach((t=>{e[t]?this.classList.add(t):this.classList.remove(t)})):console.error("Trying to assign a wrong value to css : "+e)}}),Object.defineProperty(n,"show",{get(){return t.utils.isVisible(this)},set(e){const s=()=>getComputedStyle(this,null).display,n=()=>{const e=document.getElementsByTagName("body")[0],t=document.createElement("template"),s=document.createElement(this.tagName);t.append(s),e.append(t);const n=getComputedStyle(s,null).display;return t.remove(),n};if(e){if("none"===s()){if(this._m2d2_display)this.style.display=this._m2d2_display;else if(this.style.removeProperty("display"),"none"===s()){const e=n();this.style.display=this.dataset.display||("none"!==e?e:"block")}void 0!==this.onshow&&t.utils.isFunction(this.onshow)&&this.onshow(this)}}else{const e="none"!==this.style.display?this.style.display:s();"none"!==e&&(this._m2d2_display=e),this.style.display="none"}}});let e={};return void 0!==t.extensions["*"]&&Object.assign(e,t.extensions["*"]),void 0!==t.extensions[n.tagName]&&Object.assign(e,t.extensions[n.tagName]),Object.assign(n,{inView:()=>t.utils.inView(n),next:()=>n.nextElementSibling,prev:()=>n.previousElementSibling,parent:()=>this.extDom(n.parentElement),sibling:e=>n.parentElement.find(e),find:e=>{const t=n.querySelector(e);return t?this.extDom(t):null},findAll:e=>{const t=void 0===e?Array.from(n.children):n.querySelectorAll(e);return t.forEach((e=>{this.extDom(e)})),t}},e),void 0===n.index&&(n.index=()=>Array.from(n.parentNode.children).indexOf(n)),["INPUT","TEXTAREA","SELECT"].indexOf(n.tagName)>=0&&t.utils.hasAttrOrProp(n,"value")&&(n.oninput=function(){this.setAttribute("value",this.value)}),"FORM"===n.tagName&&(n.getData=function(e){const t={},s=new FormData(this),o=e||!1;for(let e of s.entries()){const s=n.find("[name='"+e[0]+"']");(o||"hidden"===s.type||s.show)&&(t[e[0]]="file"===s.type?s.files:e[1])}return t}),n}return n}doDom(e,s){if(t.utils.isObject(e)&&void 0===s&&(s=e,e=t.utils.newEmptyNode(),void 0===s.warn&&(s.warn=!1)),!(t.utils.isString(e)||t.utils.isElement(e)||t.utils.isNode(e)))return console.error("Selector is not a string or a Node:"),console.log(e),null;if(t.utils.isString(e)&&!document.querySelector(e))return console.log("Selected element doesn't exists: "+e),null;const n=this.extDom(e);if(void 0===s)return n;if(s=this.plainToObject(n,s),Object.keys(s).filter((e=>!["tagName"].includes(e))).forEach((e=>{let o=s[e];null==o&&(console.log("Value was not set for key: "+e+", 'empty' was used in object: "),console.log(s),console.log("In node:"),console.log(n),o="");let i=this.updateValue(n,e,o),a=t.utils.hasProp(n,e),r=!1;if(t.utils.hasAttr(n,e)||a)switch(!0){case"value"===e&&t.utils.hasProp(n,"valueAsDate")&&i instanceof Date:e="valueAsDate";case"css"===e:case typeof i==typeof n[e]:case t.utils.isString(n[e])&&t.utils.isNumeric(i):case t.utils.isFunction(i)&&t.utils.isObject(n[e]):case t.utils.isBool(i)&&t.utils.isString(n[e]):case"object"==typeof n[e]&&"INPUT"===n.tagName:r=!0}if(r){let s=!1;switch(e){case"classList":t.utils.isArray(i)?i.forEach((t=>{n[e].add(t)})):t.utils.isString(i)?n[e].add(i):s=!0;break;case"style":case"dataset":t.utils.isPlainObject(i)?Object.keys(i).forEach((t=>{n[e][t]=this.updateValue(n[e],t,i[t])})):s=!0;break;default:switch(!0){case t.utils.isBool(i):case t.utils.hasAttrOrProp(n,e):t.utils.setPropOrAttr(n,e,i);break;default:n[e]=i}}s&&(console.error("Invalid value passed to '"+e+"': "),console.log(i),console.log("Into Node:"),console.log(n))}else{const a=[];try{if("template"!==e&&!t.utils.isFunction(i)){if(e&&e.match(/^\w/)){let t=n.find("#"+e);t&&-1===a.indexOf(t)&&a.push(t),t=n.find("[name='"+e+"']"),t&&-1===a.indexOf(t)&&a.push(t);const s=Array.from(n.findAll("."+e)).filter((e=>a.indexOf(e)<0));s.length>0&&s.forEach((e=>a.push(e)))}const t=Array.from(n.findAll(e)).filter((e=>a.indexOf(e)<0));t.length>0&&t.forEach((e=>a.push(e)))}}catch(t){return console.error("Invalid selector: "+e),void console.log(t)}if(a.length>1){const t=[];a.forEach((s=>{t.push(this.render(s,e,i))})),this.linkNode(n,e,t),void 0!==i.warn&&!1===i.warn||(console.log("Multiple elements were assigned with key: ["+e+"] under node: "),console.log(n),console.log("It might be what we expect, but if it is not expected it could result on some elements mistakenly rendered. You can specify 'warn : false' under that element to hide this message."))}else if(1===a.length){const r=a[0];if(t.utils.isElement(r)){const a=this.plainToObject(r,i),l=t.utils.isPlainObject(a)&&Object.keys(a).length>=1?Object.keys(a)[0]:null;if(l&&(i=this.updateValue(r,l,o)),t.utils.isArray(i)){const t=s.template;this.doItems(r,i,t),this.linkNode(n,e,r)}else this.renderAndLink(n,r,e,i)}else console.error("BUG: It should have been a node but got: "),console.log(r),console.log("Parent node:"),console.log(n)}else if(0===a.length){"template"===e&&void 0===s.items&&(e="items",i=[]);const o=t.utils.isFunction(i);if(void 0!==i.tagName){const t=this.appendElement(n,i.tagName);this.renderAndLink(n,t,e,i)}else if(t.utils.isValidElement(e)&&!o){const t=this.appendElement(n,e);this.renderAndLink(n,t,e,i)}else if("items"===e){const e=s.template;if(t.utils.isPlainObject(i)){const e=[];Object.keys(i).forEach((s=>{let o;"DL"===n.tagName?o={dt:s,dd:i[s]}:(o={text:i[s]},t.utils.hasAttrOrProp(n,"value")?o.value=s:o.dataset={id:s}),e.push(o)})),i=e}t.utils.isArray(i)?this.doItems(n,i,e):(console.log("Warning: 'items' specified but value is not and array, in element: "),console.log(n),console.log("Passed values are: "),console.log(i))}else o?(t.updates&&"onupdate"===e&&n.addEventListener("update",i,!0),n[e]=i):"template"!==e&&"warn"!==e&&!1!==i&&(void 0!==s.warn&&!1===s.warn||(console.error("Not sure what you want to do with key: "+e+" under element: "),console.log(n),console.log("And object:"),console.log(s),console.log("Most likely the element's property or child no longer exists or the value passed to it is incorrect."),console.log("You can set 'warn : false' property to the element to dismiss this message.")),n[e]=i)}}})),n.onload){const e=["BODY","FRAME","IFRAME","IMG","LINK","SCRIPT","STYLE"].indexOf(n.tagName)>=0,t="INPUT"===n.tagName&&"image"===n.type;e||t||n.dispatchEvent(new CustomEvent("load"))}return n}isUpdateLink(e){let s=!1;if(t.utils.isArray(e)&&(2===e.length||3===e.length)){const n=2===e.length,o=t.utils.isNode(e[0])||e[0]instanceof DOMStringMap||e[0]instanceof CSSStyleDeclaration,i=n?t.utils.isString(e[1]):t.utils.isString(e[1])&&t.utils.isFunction(e[2]);s=o&&i,s&&n&&e.push((e=>e))}return s}plainToObject(e,s){if(!t.utils.isPlainObject(s)&&!t.utils.isFunction(s)&&!t.utils.isElement(s))if(t.utils.isHtml(s))s={html:s};else if(this.isUpdateLink(s)){const n=s[0],o=s[1],i=s[2];let a=this.plainToObject(e,i(n[o]));if(t.utils.isPlainObject(a)){const e={};Object.keys(a).forEach((t=>{e[t]=s})),s=e}}else t.utils.isArray(s)?s={items:s}:t.utils.hasAttrOrProp(e,"value")?s="SELECT"===e.tagName?{value:s,text:s}:"BUTTON"===e.tagName?{text:s}:{value:s}:t.utils.isString(s)&&"IMG"===e.tagName?s={src:s}:(t.utils.isString(s)||t.utils.isNumeric(s))&&(s={text:s});return s}renderAndLink(e,t,s,n){const o=this.render(t,s,n);this.linkNode(e,s,o)}render(e,t,s){return s=this.plainToObject(e,s),this.doDom(e,s)}linkNode(e,s,n){if(e[s]===n){const t=this.proxy(n);try{e[s]=t}catch(e){}e["$"+s]=t}else t.utils.hasAttrOrProp(e,s)?(e["$"+s]=n,console.log("Property : "+s+" existed in node: "+e.tagName+". Using $"+s+" instead for node: "+n.tagName+".")):e[s]=this.proxy(n)}appendElement(e,s){const n=t.utils.newElement(s);return e.append(n),n}getItem(e,t,s,n){n||(n=this.getTemplate(e));const o=n.cloneNode(!0);this.addTemplatesToItem(n,o),o.dataset.id=t,this.setUniqueAttrib(o,"selected");let i=this.doDom(o,s);return this.getItemWithEvents(e,i)}addTemplatesToItem(e,t){["_template","__template"].forEach((s=>{void 0!==e[s]&&(t[s]=e[s])}))}getItemWithEvents(e,s){if(void 0!==e.__template){const n=(e,s)=>(s=s||{},Object.keys(e).forEach((o=>{t.utils.isPlainObject(e[o])?s[o]=n(e[o]):t.utils.isFunction(e[o])&&(s[o]=e[o])})),s);let o=n(e.__template);t.utils.isEmpty(o)||(o=o[Object.keys(o)[0]],s=this.doDom(s,o))}return s}doItems(e,t,s){const n=this.getTemplate(e,s);if(void 0===n)return console.error("Template not found. Probably an array is being used where it is not expected. Node:"),console.log(e),console.log("Value (mistaken?):"),void console.log(t);let o=0;t.forEach((t=>{t=this.plainToObject(e,t);const s=this.getItem(e,o++,t,n);s&&e.append(s)}));const i=e.find("template");i&&e.removeChild(i),e.items=e.children,this.extendItems(e)}getTemplate(e,s){if(void 0!==e._template&&""!==e._template)return e._template;{let n;const o=e.querySelector("template");if(o)n=t.utils.htmlElement(o.innerHTML.trim());else switch(e.tagName){case"SELECT":case"DATALIST":n=t.utils.newElement("option");break;case"UL":case"OL":n=t.utils.newElement("li");break;case"NAV":n=t.utils.newElement("a");break;case"DL":n=t.utils.newElement("dd");break;default:if(s){const o=Object.keys(s).length;if(o){if(o>1)if(void 0!==s.tagName){let e={};e[s.tagName]=s,s=e}else console.log("Template has more than one top elements. Using the first one. In: "),console.log(s),console.log("Node: "),console.log(e);const i=Object.keys(s)[0],a=s[i];t.utils.isValidElement(i)?n=t.utils.newElement(i):void 0!==a.tagName?(n=t.utils.newElement(a.tagName),s[a.tagName]=a,delete s[i]):(console.error("Template defined an element which can not be identified: ["+i+"], using <span> in:"),console.log(s),console.log("Node: "),console.log(e),n=t.utils.newElement("span"))}else console.error("Template has no definition, and it can not be guessed. Using <span>. Template: "),console.log(s),console.log("Node: "),console.log(e),n=t.utils.newElement("span")}else e.childElementCount>0&&(n=t.utils.htmlElement(e.innerHTML.trim()))}if(s)if(t.utils.isPlainObject(s)){const o=t.utils.newEmptyNode();o.append(n);n=this.doDom(o,s).children[0],t.utils.defineProp(e,"__template",s)}else n=t.utils.isHtml(s)?t.utils.htmlElement(s):t.utils.isSelectorID(s)?t.utils.htmlElement(document.querySelector(s).innerHTML):t.utils.newElement(s);if(n.childrenElementCount>1){console.log("Templates only supports a single child. Multiple children were detected, wrapping them with <span>. Template:"),console.log(n);const e=t.utils.newElement("span");e.append(n),n=e}return n&&t.utils.defineProp(e,"_template",n),n}}setUniqueAttrib(e,s){e.hasOwnProperty(s)||Object.defineProperty(e,s,{get:function(){return this.hasAttribute(s)},set:function(e){const n=this.parentNode?this.parentNode.find("["+s+"]"):null;n&&n.removeAttribute(s),t.utils.setAttr(this,s,e)}})}updateValue(e,s,n){if(this.isUpdateLink(n)){const o=this,i=n[0],a=n[1],r=n[2];if(n=i[a],i instanceof CSSStyleDeclaration&&this._stored.styles.includes(i)){const n=this._stored.styleNodes[this._stored.styles.indexOf(i)];t.updates&&(n.onupdate=function(t){t.detail&&"style"===t.detail.property&&t.detail.newValue.startsWith(a+":")&&o.setShortValue(e,s,r(this.style[a]))})}else if(i instanceof DOMStringMap&&this._stored.datasets.includes(i)){const n=this._stored.datasetNodes[this._stored.datasets.indexOf(i)];t.updates&&(n.onupdate=t=>{t.detail&&t.detail.property==="data-"+a&&o.setShortValue(e,s,r(t.detail.newValue))})}else t.updates&&(i.onupdate=n=>{n.detail&&n.detail.property===a&&(t.utils.isObject(e[s])||o.setShortValue(e,s,r(n.detail.newValue)))})}return n}setShortValue(e,s,n){if(t.utils.isNode(e[s]))if(t.short){const o=this.plainToObject(e[s],n),i=t.utils.isPlainObject(o)&&Object.keys(o).length>=1?Object.keys(o)[0]:null;i&&(e[s][i]=n)}else console.log("Short is disabled. Trying to set a value ("+n+") in a node:"),console.log(e[s]),console.log("Either turn on 'short' functionality, or be sure you specify the property, like: 'node.text'");else e[s]=n}getShortValue(e,s,n){let o=null;if(t.utils.isNode(e[s]))if(t.short){const i=this.plainToObject(e[s],n||""),a=t.utils.isPlainObject(i)&&Object.keys(i).length>=1?Object.keys(i)[0]:null;a&&(o=e[s][a])}else console.log("Short is disabled. Trying to get a value from node:"),console.log(e[s]),console.log("Either turn on 'short' functionality, or be sure you specify the property, like: 'node.text'");else o=e[s];return o}proxy(e,s){if(!t.short||null===e||void 0!==e._proxy&&void 0===s)return e;e._proxy=e;return new Proxy(e,{get:(e,s)=>{const n=e[s];switch(!0){case null==n:return null;case t.utils.isFunction(n):return n.bind(e);case n._proxy&&void 0!==e["$"+s]:return e["$"+s];case void 0===n._proxy&&t.utils.isElement(n):return this.proxy(n);default:return n}},set:(e,s,n)=>{let o="";return t.utils.isElement(e[s])?(o=this.getShortValue(e,s,n),this.setShortValue(e,s,n)):"onupdate"===s?t.updates?t.utils.isFunction(n)?(e.addEventListener("update",n,!0),o=e[s],e[s]=n):(console.error("Value passed to 'onupdate' is incorrect, in node:"),console.log(e),console.log("Value: (not a function)"),console.log(n)):(console.log("Updates are not available when `m2d2.updates == false`:"),console.log(e)):"items"===s?(e.items.clear(),this.doItems(e,n)):(o=e[s],n=this.updateValue(e,s,n),e[s]=n),t.updates&&void 0!==e.onupdate&&n!==o&&e.dispatchEvent(new CustomEvent("update",{detail:{type:typeof n,property:s,newValue:n,oldValue:o}})),!0}})}onObserve(e,s){e.forEach((e=>{const s=e.target;if(!(this._stored.events.indexOf(e)>=0)&&(this._stored.events.push(e),setTimeout((()=>{const t=this._stored.events.indexOf(e);t>=0&&this._stored.events.splice(t,1)}),t.storedEventsTimeout),void 0!==s.onupdate))if("attributes"===e.type){const n=t.utils.getAttrOrProp(s,e.attributeName);n!==e.oldValue&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof n,property:e.attributeName,newValue:n,oldValue:e.oldValue}}))}else if("childList"===e.type){if("#text"===(e.addedNodes[0]||e.removedNodes[0]).nodeName){const t=e.addedNodes[0].textContent,n=e.removedNodes.length?e.removedNodes[0].textContent:null;t!==n&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof t,property:"text",newValue:t,oldValue:n}}))}else if(void 0!==s.items){const t=e.addedNodes,n=e.removedNodes;t!==n&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof t,property:"items",newValue:t,oldValue:n}}))}}}))}observe(e){if(t.updates){const t=new MutationObserver(this.onObserve.bind(this)),s={attributeOldValue:!0,subtree:!0,childList:!0},n=e._proxy||e;t.observe(n,s)}}getProxyNode(e,t){const s=this.doDom(e,t);if(s)return this.observe(s),this.proxy(s)}extendItems(e){function s(t){t.forEach((t=>{const s=t.parentNode.removeChild(t);e.append(s)}))}const n=e.items;Object.getOwnPropertyNames(Array.prototype).concat(["clear","get","remove","selected","first","last","findAll"]).forEach((o=>{if(void 0===n[o]){let i=null;const a=this;switch(o){case"copyWithin":case"fill":case"splice":i=function(){console.log("Not available yet: "+o)};break;case"reverse":i=function(...e){if(this.items.length){const t=Array.from(this.items),n=t[o](...e);return s(t),n}};break;case"clear":i=function(){for(;this.items[0];)this.items[0].remove()};break;case"get":i=function(e){let s=null;return this.items.length&&this.items.some((n=>{const o=t.utils.isNumeric(e)?1*n.dataset.id==1*e:n.dataset.id===e;if(n.dataset&&o)return s=n,!0})),s};break;case"selected":i=function(){return a.proxy(this.find(":scope > [selected]"))};break;case"first":i=function(){return a.proxy(this.items[0])};break;case"last":i=function(){return a.proxy(this.items[this.items.length-1])};break;case"pop":i=function(){if(this.items.length){const e=this[0].parentNode;return a.proxy(e.removeChild(this.items[this.items.length-1]))}};break;case"push":i=function(e){if(e=a.plainToObject(this,e),t.utils.isElement(e))this.append(e);else if(t.utils.isPlainObject(e)){const t=this.items.length,s=a.getItem(this,t,e);this.appendChild(s)}else console.log("Trying to push an unknown value into a list:"),console.log(e)};break;case"remove":i=function(e){if(this.items.length){const t=this.items.get(e);1===t.length&&t.remove()}};break;case"shift":i=function(){if(this.items.length){const e=this.items[0].parentNode;return a.proxy(e.removeChild(this.items[0]))}};break;case"sort":i=function(e){if(this.items.length){const t=Array.from(this.items);t.sort(e||((e,t)=>e.text.localeCompare(t.text))),s(t)}};break;case"unshift":i=function(e){if(e=a.plainToObject(this,e),t.utils.isElement(e))this.prepend(e);else if(t.utils.isPlainObject(e)){const t=this.items.length,s=a.getItem(this,t,e);this.prepend(s)}else console.log("Trying to unshift an unknown value into a list:"),console.log(e)};break;default:let n=o;switch(!0){case"findAll"===o:n="filter";case t.utils.isFunction(Array.prototype[o]):const s=function(...t){const s=[];return Array.from(e.items).forEach((e=>{s.push(a.proxy(e))})),Array.from(s)[n](...t)};switch(o){case"find":i=function(...e){return t.utils.isString(e[0])?this.find(e[0]):s(...e)};break;case"findAll":i=function(...e){return 0===e.length?this.findAll():t.utils.isString(e[0])?this.findAll(e[0]):s(...e)};break;case"concat":i=function(...e){for(let s=0;s<e.length;s++)if(t.utils.isArray(e[s]))for(let n=0;n<e[s].length;n++){let o=e[s][n];if(!t.utils.isElement(o)&&(o=a.plainToObject(this,e[s][n]),t.utils.isPlainObject(o))){const e=this.items.length;o=a.getItem(this,e,o)}this.items.push(o)}};break;default:i=s}}}i&&t.utils.defineProp(n,o,i.bind(e))}}))}}return t.load((e=>{function t(t){if(e.exists("#m2d2-alert .m2d2-alert-front")){e("#m2d2-alert .m2d2-alert-front").css.add("vanish"),setTimeout((()=>{e.exists("#m2d2-alert .m2d2-alert-front")&&e("#m2d2-alert").remove(),t&&t()}),400)}else t&&t()}const s={wrap:!1,question:["fa","fa-question-circle"],info:["fa","fa-exclamation-circle"],error:["fa","fa-exclamation-triangle"],ok:["fa","fa-check"],input:["fa","fa-edit"],wait:["fa","fa-cog","fa-spin"]},n={wrap:"material-icons",question:"help",info:"info",error:"error",ok:"done",input:"edit",wait:"pending"},o={wrap:!1,question:"icon_question",info:"icon_info",error:"icon_error",ok:"icon_ok",input:"icon_input",wait:"icon_wait"};e.message=function(i){let a=o;switch(e.messageIcons){case"fa":a=s;break;case"material":a=n;break;default:e.isObject(e.messageIcons)&&(a=e.messageIcons)}i&&(e.isFunction(i.callback)||(i.callback&&!i.text&&(i.text=i.callback),i.callback=()=>{}),i.text||(i.text="")),t((()=>{e("body",{m2d2Alert:{tagName:"div",id:"m2d2-alert",back:{tagName:"div",css:"m2d2-alert-back",style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"#0005",display:"flex",justifyContent:"center",alignItems:"center"},front:Object.assign({tagName:"form",css:(i.css?e.isArray(i.css)?i.css:[i.css]:[]).concat(["m2d2-alert-front","popup",i.icon]),style:{zIndex:100},icon:{tagName:"span",css:["icon",i.icon].concat(a.wrap?[a.wrap]:a[i.icon]).concat("wait"===i.icon?"spin":""),text:a.wrap?a[i.icon]:""},message:{tagName:"div",css:"m2d2-alert-title",span:i.title},submsg:(()=>{let t;return t="input"!==i.icon||i.text?e.isPlainObject(i.text)?{fieldset:Object.assign({css:"m2d2-alert-field"},i.text)}:{span:i.text.replace("\n","<br>")}:{fieldset:{css:"m2d2-alert-field",input:{type:"text",name:"answer",onload:function(){this.focus()}}}},Object.assign({tagName:"div",css:"m2d2-alert-text"},t)})(i.icon),onsubmit:function(){const e=this.getData();let s;switch(e.button){case"ok":case"yes":s=()=>{i.callback(!0,e)};break;case"no":s=()=>{i.callback(!1,e)};break;case"cancel":s=()=>{i.callback(null,e)};break;case"send":s=1===Object.keys(e).length?()=>{i.callback(e[Object.keys(e)[0]],e)}:2===Object.keys(e).length?()=>{i.callback(e[Object.keys(e).find((e=>"button"!==e))],e)}:()=>{i.callback(e,e)};break;default:s=()=>{i.callback(e,e)}}return t(s),!1},onload:function(){const e=this.find("[autofocus]");e&&e.focus()}},function(t){let s={};return t.length&&(s={buttons:{tagName:"div",css:"m2d2-alert-buttons"}},t.forEach((t=>{const n=t.toLowerCase().replace(/[^a-z ]/g,"").replace(" ","_");s.buttons[n]={tagName:"button",type:"submit",value:n,css:["color",n],text:void 0!==e.dict?e.dict(t):t,autofocus:["ok","yes"].includes(t),formNoValidate:["cancel"].includes(t),onclick:function(){e(this.closest("form"),{hide:{tagName:"input",type:"hidden",name:"button",value:this.value}})}}}))),s}(i.buttons))}}})}));let r=1;return e("#m2d2-alert .m2d2-alert-front").findAll("input, select, textarea").forEach((e=>{""===e.name&&(e.name="field_"+r++)})),{close:t}},e.wait=(t,s,n)=>e.message({icon:"wait",title:t,buttons:[],text:void 0===n?null:s,callback:void 0===n?s:n}),e.alert=(t,s,n)=>e.message({icon:"info",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.success=(t,s,n)=>e.message({icon:"ok",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.failure=(t,s,n)=>e.message({icon:"error",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.confirm=(t,s,n)=>e.message({icon:"question",title:t,buttons:["yes","no"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.prompt=(t,s,n)=>e.message({icon:"input",title:t,buttons:["cancel","send"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.closeAll=()=>{t()}})),t.load((e=>{let t=localStorage.getItem("m2d2.lang")||""||navigator.language;e.dict=new function(t){const s=function(e,t){if(void 0===e)return"";let n=s.val(e,!0);if(void 0!==t){if("string"==typeof t&&""!==t){const e=(t=t.replace(/;$/,"")).split(";");t={},e.forEach((s=>{const n=e[s].split(":");t[n[0]]=n[1]}))}"object"==typeof t&&t.forEach((e=>{let o=t[e]+"";o=s.val(o,!1),n=n.replace(e,o)}))}return n};return s.lang=t||"en",s.data={},s.set=function(e){return this.data=e,this},s.has=function(e,t){return void 0===t?void 0!==this.data[e]:void 0!==this.data[e][t]},s.val=function(t,n){if(e.isEmpty(s.data))return console.error("Dictionary is empty. You need to add a dictionary, for example: `$.dict.set({\nsave   : { en : 'Save', es : 'Guardar' },\ncancel : { en : 'Cancel', es : 'Cancelar' }\nyes    : { en : 'Yes', es : 'Si' },\nno     : { en : 'No', es : 'No' }\n})`"),"";if(!t)return console.error("No keyword specified."),"";let o=t;if(void 0===n&&(n=!1),t=t.toLowerCase(),this.has(t)){const e=this.lang.split("-")[0];this.has(t,this.lang)?o=this.data[t][this.lang]:this.has(t,e)?o=this.data[t][e]:n&&console.log("Missing translation for lang ["+this.lang+"]: "+t)}else n&&console.log("Missing keyword: "+t);return o},s}(t);const s=[];e.lang=function(t){t&&(e.dict.lang=t,localStorage.setItem("m2d2.lang",e.dict.lang)),e("body").findAll("[lang]").forEach((t=>{let s=t.text;if(s&&!t.classList.contains("notxt")){void 0===t.dataset.kw&&(t.dataset.kw=e.lang.getKeyword(s)),t.text=e.dict(t.dataset.kw);const n=t.dataset.kw+"_title";let o=e.dict.has(n)?e.dict(n):"";o&&(t.title=o)}else if(t.title){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.title)),s=e.dict(t.dataset.kw),s&&(t.title=s)}else if(t.placeholder){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.placeholder)),s=e.dict(t.dataset.kw),s&&(t.placeholder=s)}else if(t.value){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.value)),s=e.dict(t.dataset.kw),s&&(t.value=s)}})),s.forEach((e=>{e(t)}))},e.lang.getKeyword=function(e){return e.toLowerCase().trim().replace(/ /g,"_").replace(/[^\w]/g,"").replace(/_$/,"")},Object.defineProperty(e.lang,"onchange",{get(){return this},set(t){e.isFunction(t)?s.push(t):(console.log("Unable to set lang.onchange, because it is not a function: "),console.log(t))}})})),t.ready((e=>{const t=localStorage.getItem("m2d2.lang")||"",s=e("body").find("[lang]"),n=e("html").lang||(s?s.lang:null)||"en";(t?n!==t:n!==navigator.language.split("-")[0])&&e.lang()})),t.load((e=>{function t(e){switch(e){case"local":window.localStorage&&(this.store=localStorage);break;case"session":window.sessionStorage&&(this.store=sessionStorage)}null==this.store&&(this.store=localStorage),this.set=function(e,t){"string"==typeof t&&(t={$:t}),this.store.setItem(e,JSON.stringify(t))},this.get=function(e){let t;try{t=JSON.parse(this.store.getItem(e))||{}}catch(s){t=this.store.getItem(e)}return void 0!==t.$?t=t.$:0===Object.keys(t).length&&t.constructor===Object&&(t=null),t},this.del=function(e){this.store.removeItem(e)},this.keys=function(){return Object.keys(this.store).sort()},this.clear=function(){this.store.clear()},this.exists=function(e){return this.store.hasOwnProperty(e)},this.log=function(e,t,s){null==s&&(s=10);const n=this.get(e)||[];for(n.push(t);n.length>s;)n.shift();this.set(e,n)}}e.local=new t("local"),e.session=new t("session")})),t.load((e=>{function t(e,t,s){const n=[];return e=e||{},t.forEach((o=>{const i="Array"==typeof e?e.length==t.length?e[s]:e:void 0!==e[o.name]?e[o.name]:e;n.push({file:o,data:i,index:s++})})),n}function s(e,t,s,n,o){const i=new XMLHttpRequest;t=Array.from(t),i.upload.addEventListener("progress",(function(e){if(e.lengthComputable)if(n.oneByOne){const o=Math.round(100*e.loaded/e.total);n.onUpdate(o,t[0],s)}else{let s=0,o=0;t.some((t=>{s+=t.size;const i=e.loaded>=s?100:100-Math.round(100*(s-e.loaded)/t.size);return n.onUpdate(i,t,o++),s>=e.loaded}))}}),!1),i.addEventListener("load",(function(e){let a={};try{a=i.responseText?JSON.parse(i.responseText):{error:{type:"Unknown",reason:"Unknown Error"}}}catch(e){a.error={type:"Parse Error",reason:e.message}}i.status>=200&&i.status<400?o(n.onResponse(a),t,s):("string"==typeof a.error&&(a.error={type:"Exception",reason:a.error}),n.onError(a.error))}),!1),i.open("POST",n.upload);const a=Array(t.length).fill(!1),r=function(e,t){const s=new FormData;return t.forEach((t=>{s.append(e,t,t.name)})),s}(e,t);let l=0;t.forEach((e=>{const t=new FileReader;t.onload=function(e){a[l++]=!0,-1===a.indexOf(!1)&&i.send(r)},t.readAsBinaryString(e)}))}e.upload=function(e,n){const o=Object.assign({},{accept:"*/*",parallel:!1,field:"file",multiple:!0,maxFiles:0,maxSizeMb:0},n);n=null;let i=window._protected_reference=document.createElement("INPUT");i.name=o.field,i.type="file",1==o.multiple&&(i.multiple="multiple"),o.upload||(console.log("Upload not specified. Using current page."),o.upload=""),null==o.onDone&&(o.onDone=(e,t)=>{console.log(e)}),null==o.onError&&(o.onError=e=>{console.log("Error : "),console.log(e)}),null==o.onUpdate&&(o.onUpdate=(e,t,s)=>{console.log("Uploading : "+e+"% "+(o.oneByOne?"[ "+t.name+" ]":""))}),null==o.onResponse&&(o.onResponse=e=>e),i.addEventListener("change",(()=>{if(i.files.length){if(!(0===o.maxFiles|i.files.length<=o.maxFiles))return o.onError("Max file limit exceeded. Maximum files: "+o.maxFiles),!1;if(o.onSelect){const e=[];let t=0;Array.from(i.files).forEach((s=>{e.push(URL.createObjectURL(s)),t+=s.size}));const s=t/1048576;if(o.maxSizeMb&&s>o.maxSizeMb)return o.onError("Maximum size exceeded: "+Math.ceil(s)+"MB > "+o.maxSizeMb+"MB"),!1;o.onSelect(i.files,e)}new Promise((e=>{if(o.oneByOne){let n=0;const a=Array(i.files.length).fill(!1);Array.from(i.files).forEach((r=>{new s(i.name,[r],n++,o,((s,n,i)=>{a[i]=!0;const r=-1===a.indexOf(!1);o.onDone(t(s,n,i),r),r&&e()}))}))}else new s(i.name,i.files,0,o,((s,n,i)=>{o.onDone(t(s,n,i),!0),e()}))})).then((()=>{i=window._protected_reference=void 0}))}})),i.click()}})),t.load((e=>{e.ws=new class{request(e){if(e)try{this.webSocket.send(JSON.stringify(e))}catch(e){this.webSocket.onerror(e)}}getSocket(e,t,s){const n=new WebSocket(this.path);return n.onopen=t,n.onclose=s,n.onmessage=t=>{if(t.data)try{e(JSON.parse(t.data))}catch(e){n.onerror(e)}},n.onerror=e=>{console.error("Socket encountered error: ",e?e.message:"Unknown","Closing socket");const t=n||this;1===t.readyState&&t.close()},n}connect(e,t){this.initRequest=e.request||null,this.onConnect=e.connected||(()=>{}),this.onDisconnect=e.disconnected||(()=>{}),this.reconnect=!1!==e.reconnect,this.host=e.host||window.location.hostname,this.secure=!0===e.secure,this.port=e.port||(this.secure?443:80),this.path="ws"+(this.secure?"s":"")+"://"+this.host+":"+this.port+"/"+(e.path||""),this.connected=!1,this.interval=null;const s=e=>{this.connected=!0,this.request(this.initRequest),this.onConnect()},n=e=>{this.connected=!1,this.onDisconnect(),!this.interval&&this.reconnect&&(this.interval=setInterval((()=>{if(this.connected)console.log("Reconnected..."),clearInterval(this.interval),this.interval=null;else try{this.webSocket.close(),console.log("Reconnecting..."),this.webSocket=this.getSocket(t,s,n)}catch(e){}}),2e3))};this.webSocket=this.getSocket(t,s,n)}disconnect(){this.reconnect=!1,this.webSocket.close()}}})),t.load((e=>{const t=function(e,t,s,n,o,i){const a=new XMLHttpRequest;if(void 0===i&&(i=!1),void 0===o&&(o=function(e){console.log(e)}),s&&0===Object.entries(s).length&&(s=""),s)if(i)s=JSON.stringify(s);else if("GET"===e.toUpperCase())t+=(-1!==t.indexOf("?")?"&":"?")+Object.keys(s).map((e=>e+"="+s[e])).join("&"),s="";else s=Object.keys(s).map((e=>e+"="+s[e])).join("&");return a.open(e,t,!0),i?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onerror=function(e){o({type:"Connection",reason:"Connection Refused"})},a.onload=function(){let e={};try{e=a.responseText?JSON.parse(a.responseText):{error:{type:"Unknown",reason:"Unknown Error"}}}catch(t){e.error={type:"Parse Error",reason:t.message}}a.status>=200&&a.status<400?void 0!==n&&n(e):void 0!==o&&("string"==typeof e.error&&(e.error={type:"Exception",reason:e.error}),o(e.error))},a.send(s),a},s={};["get","post","put","delete","connect","options","trace","patch"].forEach((function(e){s[e]=function(){let s,n,o,i,a;switch(arguments.length){case 5:"boolean"==typeof arguments[4]?a=arguments[4]:console.log("Passed JSON argument: "+arguments[4]+" is not boolean.");case 4:"function"==typeof arguments[3]?i=arguments[3]:4===arguments.length&&"boolean"==typeof arguments[3]?a=arguments[3]:console.log("Passed argument 4: "+arguments[3]+" is mistaken");case 3:"function"==typeof arguments[2]?"function"==typeof arguments[1]&&arguments.length<5?i=arguments[2]:o=arguments[2]:3===arguments.length&&"boolean"==typeof arguments[2]?a=arguments[2]:console.log("Passed argument 3: "+arguments[2]+" is mistaken");case 2:"object"==typeof arguments[1]||"string"==typeof arguments[1]?n=arguments[1]:"function"==typeof arguments[1]?o=arguments[1]:console.log("Passed argument 2: "+arguments[1]+" is mistaken");case 1:"string"==typeof arguments[0]?s=arguments[0]:Array.isArray(arguments[0])?s=arguments[0].join("/"):console.log("Passed URL: "+arguments[0]+" was not a string.");break;default:console.log("Incorrect number of arguments passed to xhr")}return void 0===n&&(n={}),t(e.toUpperCase(),s,n,o,i,a)}})),Object.assign(e,s)})),t}));class NdJsonPlayer{fps;loop;showfirst;autoplay;live;path;playing=!1;loaded=!1;backwards=!1;started=!1;onStart;onLoad;onRender;onPlay;onStop;onFinish;onError;wrapper=null;canvas=null;ctx=null;timer=null;src="";frame=0;multiplier=1;_numFrames=0;_totTime=0;_frames=[];_frameBase="";_thumbBase="";_startTimeStamp=0;constructor(e,t,s,n){const o=this;o.src=e,window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame);const i=()=>{};n=Object.assign({},n),o.onStart=n.onstart||i,o.onLoad=n.onload||i,o.onRender=n.onrender||i,o.onPlay=n.onplay||i,o.onStop=n.onstop||i,o.onFinish=n.onfinish||i,o.onError=n.onerror||(e=>{console.log(e)});let a=null;if(t instanceof Node)a=t;else{if("object"==typeof t)s=t,t="canvas";else if("string"!=typeof t)throw"Incorrect parameter passed to constructor of NdJsonPlayer";a=document.querySelector(t||"canvas")}if(!a)throw"Canvas element was not found in DOM: "+t;if("CANVAS"===a.tagName){o.canvas=a;const e=document.createElement("div");a.parentNode.insertBefore(e,a),e.prepend(a),a=e}else if(a.hasChildNodes()){if(o.canvas=a.querySelector("canvas"),!o.canvas)throw"No canvas found in element"}else o.canvas=document.createElement("CANVAS"),a.prepend(o.canvas);o.wrapper=a,o.canvas.width=o.wrapper.parent().clientWidth,o.canvas.height=o.wrapper.parent().clientHeight,a.classList.add("ndjp"),o.ctx=o.canvas.getContext("2d"),o.fps=s.fps||24,o.loop=s.loop||!1,o.live=s.live||!1,o.autoplay=s.autoplay||o.live||!1,o.showfirst=!1!==s.showfirst,o.path=s.path||"","auto"===s.width&&(s.width=0),"auto"===s.height&&(s.height=0),o.timer=new TimerSrc(1e3/o.fps),o.live?new TimerSrc(1e3/o.fps,(()=>{fetch(o.src).then((e=>e.json())).then((e=>{o.reload(e)}))})).play():o.src?o.load():console.log("Initializing without source...")}_reset(){this._frames=[],this._totTime=0,this._numFrames=0,this._startTimeStamp=0,this.loaded=!1}load(e,t){const s=this;void 0!==t&&(this.src=t,this._reset());const n=new TextDecoder;let o="";return fetch(s.src).then((e=>e.body.getReader())).then((t=>t.read().then((function i({value:a,done:r}){if(r){const t=JSON.parse(o);return s.processFrame(t),e&&e(t),void s.onLoad(s)}const l=(o+n.decode(a,{stream:!0})).split(/[\r\n](?=.)/);return o=l.pop(),l.map(JSON.parse).forEach((t=>{s.processFrame(t),e&&e(t)})),t.read().then(i)})))).catch((e=>this.onError(e)))}reload(e,t){const s=this,n=[];switch(s._reset(),!0){case"string"==typeof e:n=e.split(/[\r\n](?=.)/.map(JSON.parse));break;case Array.isArray(e):n=e;break;case"Object"===e.constructor.name:n.push(e);break;default:return void console.log("Unable to reload frames. ")}n.forEach((e=>{s.processFrame(e),t&&t(e)}))}append(e){this._frames.push(e)}prepend(e){this._frames.unshift(e),this.frame++}processFrame(e){const t=this;void 0!==e.w&&(t.canvas.width=e.w),void 0!==e.h&&(t.canvas.height=e.h),void 0!==e.fb&&(t._frameBase=e.fb),void 0!==e.thb&&(t._thumbBase=e.thb),void 0!==e.tf&&(t._numFrames=e.tf),void 0!==e.tt&&(t._totTime=e.tt),void 0!==e.ts&&(t._startTimeStamp||(t._startTimeStamp=e.ts)),void 0!==e.fps&&(t.fps=e.fps,t.timer=new TimerSrc(1e3/t.fps)),void 0!==e.f?(t._frames.push(e),t.loaded||(t.loaded=!0,t.autoplay?t.play():t.showfirst&&t.step())):t.onRender(e),t.started||(t.onStart(t),t.started=!0)}_render(e){if(null==this.timer)throw"TimerSrc was not initialized";if(0===this._frames.length)throw"Video is empty or no frames were found";this.frame>=this._frames.length-1&&(this.frame=this.loop?0:this._frames.length-1),this.frame<0&&(this.frame=this.loop?this._frames.length-1:0),this._displayImg(e)}_displayImg(e){const t=this,s=t._frames[t.frame],n=function(){t.onRender(s),t.timer.call((function(){t._increment(),e||t.timer.nocall(),t._displayImg()}))};if(void 0!==s.f){const e=t._frameBase+s.f;t._image(e,n)}else t.onRender(s),n()}_increment(){this.frame+=this.multiplier*(this.backwards?-1:1),this.frame<0&&(this.loop?this.frame=this._frames.length-1:(this.frame=0,this.pause(),this.onFinish(this))),this.frame>this.totalFrames()-1&&(this.loop?this.frame=0:(this.frame=this._frames.length-1,this.pause(),this.onFinish(this)))}_draw=function(e,t){const s=this;return 0===e.width&&0===e.height?(e.onerror(),void 0!==t&&t(!1)):(s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height),s.ctx.drawImage(e,0,0,e.width,e.height,0,0,s.canvas.width,s.canvas.height),void 0!==t&&t(!0)),this};_image=function(e,t){const s=this,n=new Image;return n.crossOrigin="",n.onload=function(){s._draw(n,(function(e){e&&void 0!==t&&t(n)}))},n.onerror=function(){const e=s.onError();e&&(n.src=e)},n.src="/"===e[0]||e.match(/^https?:/)||e.match(/^data:image/)?e:s.path+e,this};frameBase(){return this._frameBase}currentFrame(){return this.frame}totalFrames(){return this._numFrames||this._frames.length}totalTime(){return this._totTime||this.currentFrame()/this.fps}frameAt(e){const t=this;let s=e<this.totalFrames()?t._frames[e]:null;return s&&(s.fb=t._frameBase),s}indexAt(e){return~~(e*this.totalFrames()/100)}playerNode(){return this.wrapper}play(e){e<0?e=0:e>this._frames.length?e=this._frames.length-1:void 0!==e&&(this.frame=1*e),this.playing=!0,this.timer.play(),this._render(!1),this.onPlay(this)}playForward(e){this.backwards=!1,this.play(e)}playBackwards(e){this.backwards=!0,this.play(e)}pause(){this.playing=!1,this.timer.pause(),this.onStop(this)}stop(){this.playing=!1,this.frame=0,this.timer.pause(),this._displayImg(!0),this.onStop(this)}step(){this.onPlay(this),this.playing=!1,this.timer.step(),this._render(!0),this.onStop(this)}jumpTo(e){e<0?e=0:e>this._frames.length?e=this._frames.length-1:void 0!==e&&(this.frame=1*e),this._render(!0)}stepForwards(){this.backwards=!1,this.step()}stepBackwards(){this.backwards=!0,this.step()}reset(){return void 0!==this.ctx.reset&&(this.ctx.reset(),this.ctx.clear(),this.stop(),this.canvas.width=this.canvas.width),this}}class NDJPlayer{player;options;ui;constructor(e,t,s){const n=this;function o(e){return e.indexOf(".")>0||-1!==e.indexOf("/")}function i(e){return"."===e[0]||"#"===e[0]||null!==document.querySelector(e)}switch(arguments.length){case 2:"Object"===arguments[1].constructor.name&&(s=arguments[1],o(arguments[0])?t=null:(arguments[0]instanceof HTMLElement||i(arguments[0]))&&(t=arguments[0],e=null));break;case 1:switch(!0){case"Object"===arguments[0].constructor.name:s=arguments[0],e=null,t=null;break;case o(arguments[0]):e=arguments[0],t=null,s={};break;case arguments[0]instanceof HTMLElement||i(arguments[0]):t=arguments[0],e=null,s={};break;default:console.log("Unknown parameter was passed to NDJPlayer constructor."),e=null,t=null,s={}}break;case 0:s={}}n.options=Object.assign({controls:!1,resize:!0,onaction:(e,t,s)=>{},onplay:e=>{},onstop:e=>{}},s||{}),this._create(t),this.player=new NdJsonPlayer(e,t,n.options,{onstart:function(e){n._adjustSize(),void 0!==n.options.onstart&&n.options.onstart(e)},onload:function(e){void 0!==n.options.onload&&n.options.onload(e)},onrender:function(e){n._onUpdate(e),void 0!==n.options.onrender&&n.options.onrender(e)},onplay:function(e){n.ui.panel&&(n.ui.play.show=!1,n.ui.step.css.contains("disabled")||(n.ui.step.show=!1),n.ui.pause.show=!0),n.options.onplay(e)},onstop:function(e){n.ui.panel&&(n.ui.play.show=!0,n.ui.step.css.contains("disabled")||(n.ui.step.show=!0),n.ui.pause.show=!1),n.options.onstop(e)},onfinish:function(e){},onerror:function(e){console.log(e)}}),window.addEventListener("resize",(function(e){n._adjustSize()}),!0)}_onUpdate(e){const t=this;if(t.ui){if(t.ui.frames&&(t.ui.frames.text=t.player.currentFrame()+1+"/"+t.player.totalFrames()),t.ui.lapse){let s="";const n=t.player._startTimeStamp&&void 0!==e.ts,o=void 0!==e.t,i=t.player._totTime>0;e.d&&(s=e.d+" "),n?s+=t._formatMillis(e.ts-t.player._startTimeStamp):o&&(s+=e.t.indexOf(":")>0?e.t:t._fmtTime(e.t)),i&&(s+="/"+t.player.totalTime()),t.ui.lapse.text=s}t.ui.progress&&t.player.totalFrames()&&(t.ui.progress.value=Math.round((t.player.currentFrame()+1)/t.player.totalFrames()*100))}}_adjustSize(){if(this.options.resize){let e=this.player.wrapper,t=e.parent(),s=(this.options.height||this.player.canvas.height)/(this.options.width||this.player.canvas.width);this.player.canvas.height=t.clientHeight-(this.options.controls?e.querySelector(".panel").clientHeight:0),this.player.canvas.width=this.player.canvas.height/s}}_create(e){const t=this,s=m2d2.load();t.ui=s(e,t._getUI(e)),t.ui.panel&&["thumb","play","step","pause","stop","lapse","progress","frames","fullscreen"].forEach((e=>{t.ui[e]=t.ui.panel[e]}))}_getUI(e){const t=this;let s={html:e.innerHTML||""};if(t.options.controls&&(s=this._getBasicUI(),"full"===t.options.controls))s.panel.step.css.remove("disabled");this.options.controls;let n=e instanceof Node?e:document.querySelector(e);if(n){n.querySelector("canvas")||(s=Object.assign({canvas:""},s))}else console.log("Root element: "+e+" was not found in document"),s=Object.assign({canvas:""},s);return s}_getBasicUI(){const e=this;return document.addEventListener("fullscreenchange",(t=>{const s=e.player.wrapper;document.fullscreenElement?s.classList.add("fullscreen"):s.classList.remove("fullscreen")})),{caption:"",css:e.options.controls,panel:{tagName:"div",className:"panel",thumb:{tagName:"figure",className:"thumb",img:{src:""},caption:{tagName:"figCaption",className:"caption"}},rec:{tagName:"a",className:"rec",title:"Live",href:"#"},play:{tagName:"a",className:"play",title:"Play",href:"#",onclick:function(){return e.ui.onaction("play",e.player,e),e.player.play(),!1}},pause:{tagName:"a",className:"pause",title:"Pause",href:"#",onclick:function(){return e.ui.onaction("pause",e.player,e),e.player.pause(),!1}},step:{tagName:"a",css:["step","disabled"],title:"Step",href:"#",onclick:function(){return e.ui.onaction("step",e.player,e),e.player.step(),!1}},stop:{tagName:"a",className:"stop",title:"Stop",href:"#",onclick:function(){return e.ui.onaction("stop",e.player,e),e.player.stop(),!1}},lapse:{tagName:"label",className:"lapse",title:"Time elapsed / Time Total",text:"0:00"},live:{tagName:"label",className:"live",text:"Live Feed"},progress:{value:0,max:100,onmousemove:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.player.frameAt(e.player.indexAt(s));n?(e.ui.thumb.show=!0,e.ui.thumb.img.src=e.player.frameBase()+(n.th||n.f),e.ui.thumb.img.onload=function(){const t=e.ui.thumb.img.naturalWidth||e.ui.thumb.img.width;e.ui.thumb.style.width=t+"px"},void 0!==n.tc&&(e.ui.thumb.caption=n.tc),e.ui.thumb.style.left=this.offsetLeft+t.offsetX-e.ui.thumb.clientWidth/2+"px"):e.ui.thumb.show=!1},onmouseleave:function(){e.ui.thumb.show=!1},onclick:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.player.indexAt(s);e.player.jumpTo(n),e.ui.onaction("progress",e.player,e)}},frames:{tagName:"label",className:"frames",title:"Current Frame / Total Frames",text:"0"},fullscreen:{tagName:"a",className:"fullscreen",title:"Full Screen",href:"#",onclick:function(t){const s=e.player.wrapper;return s.classList.contains("fullscreen")?(e.ui.onaction("exit-fullscreen",e.player,e),document.exitFullscreen()):(e.ui.onaction("fullscreen",e.player,e),s.requestFullscreen()),!1}}},onaction:function(t,s,n){e.options.onaction(t,s,n)},onplay:function(t){e.options.onplay(t)},onstop:function(t){e.options.onstop(t,uiPlayer)}}}_fmtTime(e){let t=(e=e.toFixed(2)).split(".")[1]||"00";return(~~(e/60)+"").padStart(2,"0")+":"+(~~(e/60%1*60)+"").padStart(2,"0")+"."+t}_formatMillis(e){function t(e,t){return("00"+e).slice(-1*(t||2))}const s=Math.floor(e/1e3/60/60),n=Math.floor(60*(e/1e3/60/60-s)),o=Math.floor(60*(60*(e/1e3/60/60-s)-n)),i=parseInt(e%1e3/100);return t(s)+":"+t(n)+":"+t(o)+"."+t(i,3)}}function TimerSrc(e,t){let s,n,o,i,a={};a.interval=e,a.checker=50,a.status="init";let r=(new Date).getTime();return s=r-e,a.call=function(e){return t=e,a},a.nocall=function(){return t=null,a},a.exec=function(){return t&&t(),s=(new Date).getTime(),a},a.check=function(){return o&&o(),a},a.play=function(){return o=a.step,a.status="running",a},a.pause=function(){return o=null,a.status="paused",a},a.destroy=function(){for(var e in o=null,clearInterval(n),n=null,a)a[e]=null,delete a[e];a.status="destroyed"},a.step=function(){return r=(new Date).getTime(),i=Math.max(0,a.interval-(r-s)),0===i&&(i=a.interval,s=(new Date).getTime(),t&&t()),a},a.slow=function(){return a.interval=1e3,a},a.fast=function(){return a.interval=e,a},n=setInterval(a.check,a.checker),a}class VideoND extends HTMLElement{constructor(){super(),this._root=this;const e=this,t={autoplay:!1,controls:!1,loop:!1,live:!1,width:"auto",height:"auto",poster:"",preload:"auto",src:"",cc:"auto",caption:"",fullscreen:!1,fps:"",speed:!1,autosize:"auto",sizes:{}||[],thumbs:"auto"},s={};for(let e in t)s[e]=this.getAttribute(e)||this.hasAttribute(e)||t[e];s.onstart=function(t){e.onstart&&e.onstart(t)},s.onload=function(t){e.onload&&e.onload(t)},s.onrender=function(t){e.onrender&&e.onrender(t,n.wrapper,n,n.player.canvas,n.player.ctx)},this.style.display="block",this.className="ndjp";const n=new NDJPlayer(s.src,this,s)}setCaption(e){this._root.querySelector("caption").innerText=e}static get observedAttributes(){return["width","height","caption"]}attributeChangedCallback(e,t,s){"caption"===e&&this.setCaption(s)}}document.addEventListener("DOMContentLoaded",(function(){window.customElements.define("video-nd",VideoND)}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm0yZDIuYWxsLnNyYy5qcyIsIm5kanNvbi1wbGF5ZXIuc3JjLmpzIiwibmRqc29uLXVpLnNyYy5qcyIsInRpbWVyLnNyYy5qcyIsInZpZGVvLW5kLnNyYy5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJtMmQyIiwidGhpcyIsIlV0aWxzIiwiaXNTdHJpbmciLCJ2IiwiaXNCb29sIiwiYiIsImlzTnVtZXJpYyIsIm4iLCJpc05hTiIsInBhcnNlRmxvYXQiLCJpc0Zpbml0ZSIsImlzU2VsZWN0b3JJRCIsInMiLCJ0cmltIiwiaW5kZXhPZiIsImlzUGxhaW5PYmplY3QiLCJvIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaXNPYmplY3QiLCJvYSIsImlzQXJyYXkiLCJhIiwiQXJyYXkiLCJpc0Z1bmN0aW9uIiwiZiIsImlzRWxlbWVudCIsIkhUTUxFbGVtZW50IiwiaXNOb2RlIiwiTm9kZSIsIkRvY3VtZW50RnJhZ21lbnQiLCJpc0h0bWwiLCJpc0VtcHR5Iiwib2JqIiwidW5kZWZpbmVkIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImlzVmlzaWJsZSIsImVsZW0iLCJjb25zb2xlIiwibG9nIiwiZGlzcGxheSIsInN0eWxlIiwibm90SGlkZGVuIiwidmlzaWJpbGl0eSIsImluVmlldyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJsZWZ0IiwiYm90dG9tIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsInJpZ2h0IiwiaW5uZXJXaWR0aCIsImNsaWVudFdpZHRoIiwid2lkdGgiLCJoZWlnaHQiLCJjbGVhbkFycmF5IiwiZmlsdGVyIiwiZSIsImlzVmFsaWRFbGVtZW50IiwidGFnTmFtZSIsIiRub2RlIiwibmV3RWxlbWVudCIsImV4aXN0cyIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImdldEF0dHJPclByb3AiLCJrZXkiLCJ2YWx1ZSIsImhhc0F0dHJPclByb3AiLCJoYXNBdHRyIiwiZ2V0QXR0cmlidXRlIiwiaGFzUHJvcCIsImF0dHIiLCJ0eXBlIiwiaGFzQXR0cmlidXRlIiwicHJvcCIsImhhcyIsInNldFByb3BPckF0dHIiLCJpZ25vcmUiLCJzZXRBdHRyIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiZGVmaW5lUHJvcCIsImRlZiIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiaHRtbEVsZW1lbnQiLCJodG1sIiwidGVtcGxhdGUiLCJpbm5lckhUTUwiLCJjb250ZW50IiwiZmlyc3RDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJuZXdFbXB0eU5vZGUiLCJnZXRNZXRob2RzIiwiUmVmbGVjdCIsImdldFByb3RvdHlwZU9mIiwieCIsIm93bktleXMiLCJpdCIsImFwcGVuZEFsbENoaWxkIiwiJHNyY05vZGUiLCIkdGd0Tm9kZSIsImFwcGVuZCIsInByZXBlbmRBbGxDaGlsZCIsInByZXBlbmQiLCJfc3RvcmVkIiwiZXZlbnRzIiwiZGF0YXNldE5vZGVzIiwiZGF0YXNldHMiLCJzdHlsZU5vZGVzIiwic3R5bGVzIiwic3RhdGljIiwib2JqZWN0Iiwibm9kZSIsImluc3RhbmNlIiwiZ2V0UHJveHlOb2RlIiwib25yZWFkeSIsInV0aWxzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uY2UiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZm9yRWFjaCIsImkiLCJwdXNoIiwiayIsImNhbGxiYWNrIiwibWFpbiIsImV4dCIsImV4dGVuc2lvbnMiLCJhc3NpZ24iLCJleHREb20iLCIkcm9vdCIsImVycm9yIiwiX20yZDIiLCJoYXNPd25Qcm9wZXJ0eSIsImdldCIsImNoaWxkTm9kZXMiLCJpbm5lclRleHQiLCJ0ZXh0Q29udGVudCIsInNldCIsImZvdW5kIiwibm9kZVZhbHVlIiwiY3JlYXRlVGV4dE5vZGUiLCJjbGFzc0xpc3QiLCJjbGFzc05hbWUiLCJqb2luIiwiYyIsImFkZCIsInJlbW92ZSIsInNob3ciLCJjc3NEaXNwbGF5IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRlZmF1bHREaXNwbGF5IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0IiwiX20yZDJfZGlzcGxheSIsInJlbW92ZVByb3BlcnR5IiwiZGVmYXVsdFNob3ciLCJkYXRhc2V0Iiwib25zaG93Iiwic3RvcmVkIiwiZXh0ZW5kIiwibmV4dCIsIm5leHRFbGVtZW50U2libGluZyIsInByZXYiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwicGFyZW50IiwicGFyZW50RWxlbWVudCIsInNpYmxpbmciLCJzZWwiLCJmaW5kIiwiZmluZEFsbCIsIm5vZGVMaXN0IiwiZnJvbSIsImNoaWxkcmVuIiwicXVlcnlTZWxlY3RvckFsbCIsImluZGV4IiwicGFyZW50Tm9kZSIsIm9uaW5wdXQiLCJnZXREYXRhIiwiaW5jbHVkZU5vdFZpc2libGUiLCJkYXRhIiwiZmQiLCJGb3JtRGF0YSIsImluY2x1ZGUiLCJwYWlyIiwiZW50cmllcyIsImZpbGVzIiwiZG9Eb20iLCJ3YXJuIiwicGxhaW5Ub09iamVjdCIsImluY2x1ZGVzIiwib3JpZ1ZhbHVlIiwidXBkYXRlVmFsdWUiLCJpc1Byb3AiLCJmb3VuZE1hdGNoIiwiRGF0ZSIsIm9wdGlvbnMiLCJtYXRjaCIsImVsZW1zIiwiaXRlbXMiLCJpdGVtIiwicmVuZGVyIiwibGlua05vZGUiLCJvcHQiLCJvcHRfa2V5IiwiZG9JdGVtcyIsInJlbmRlckFuZExpbmsiLCJpc0Z1bmMiLCIkbmV3Tm9kZSIsImFwcGVuZEVsZW1lbnQiLCJ2YWxUbXAiLCJkdCIsImRkIiwidGV4dCIsImlkIiwidXBkYXRlcyIsIm9ubG9hZCIsIm5hdGl2ZSIsImlucHV0SW1hZ2UiLCJpc1VwZGF0ZUxpbmsiLCJpc0xpbmsiLCJ0d29BcmdzIiwiYWNjZXB0ZWRUeXBlIiwiRE9NU3RyaW5nTWFwIiwiQ1NTU3R5bGVEZWNsYXJhdGlvbiIsIm90aGVyVHlwZXMiLCJ0bXBWYWwiLCJuZXdWYWx1ZSIsInNyYyIsIiRjaGlsZCIsIiRwcm94eSIsInByb3h5IiwiJG5ld0VsZW0iLCJnZXRJdGVtIiwiJHRlbXBsYXRlIiwiZ2V0VGVtcGxhdGUiLCIkbmV3SXRlbSIsImNsb25lTm9kZSIsImFkZFRlbXBsYXRlc1RvSXRlbSIsInNldFVuaXF1ZUF0dHJpYiIsImdldEl0ZW1XaXRoRXZlbnRzIiwiX190ZW1wbGF0ZSIsInNjYW4iLCJyZXN1bHQiLCJ0cmVlIiwidmFsdWVzIiwidmFsIiwiJHRlbXAiLCJyZW1vdmVDaGlsZCIsImV4dGVuZEl0ZW1zIiwiX3RlbXBsYXRlIiwiJGh0bWxUZW1wbGF0ZSIsIndyYXAiLCJjaGlsZEVsZW1lbnRDb3VudCIsIiR3cmFwIiwiY2hpbGRyZW5FbGVtZW50Q291bnQiLCIkc3BhbiIsInByZXZTZWwiLCJfdGhpcyIsIm9udXBkYXRlIiwiZXYiLCJkZXRhaWwiLCJwcm9wZXJ0eSIsInN0YXJ0c1dpdGgiLCJzZXRTaG9ydFZhbHVlIiwic2hvcnQiLCJnZXRTaG9ydFZhbHVlIiwic2FtcGxlIiwiZm9yY2UiLCJfcHJveHkiLCJQcm94eSIsInRhcmdldCIsImJpbmQiLCJvbGRWYWx1ZSIsImNsZWFyIiwib25PYnNlcnZlIiwibXV0YXRpb25zTGlzdCIsIm9ic2VydmVyIiwibSIsInNwbGljZSIsInN0b3JlZEV2ZW50c1RpbWVvdXQiLCJhdHRyaWJ1dGVOYW1lIiwiYWRkZWROb2RlcyIsInJlbW92ZWROb2RlcyIsIm5vZGVOYW1lIiwib2JzZXJ2ZSIsIm11dGF0aW9uT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiYXR0cmlidXRlT2xkVmFsdWUiLCJ0b09ic2VydmUiLCJyZWF0dGFjaCIsIml0bSIsImRldGF0Y2hlZEl0ZW0iLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJvdG90eXBlIiwiY29uY2F0IiwibWV0aG9kIiwiZnVuYyIsImFyZ3MiLCJyZXRPYmoiLCJzb21lIiwic2FtZUlkIiwiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRnVuYyIsInNvcnQiLCJsb2NhbGVDb21wYXJlIiwiYXJyTWV0aG9kIiwiYXJyRnVuYyIsInByb3hpZXMiLCJqIiwibG9hZCIsIiQiLCJjbG9zZSIsImFmdGVyQ2xvc2UiLCJjc3MiLCJmYUljb25zIiwicXVlc3Rpb24iLCJpbmZvIiwib2siLCJpbnB1dCIsIndhaXQiLCJtYXRlcmlhbCIsImRlZmF1bHRDc3MiLCJtZXNzYWdlIiwibWVzc2FnZUljb25zIiwibTJkMkFsZXJ0IiwiYmFjayIsInBvc2l0aW9uIiwiYmFja2dyb3VuZENvbG9yIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwiZnJvbnQiLCJpY29uIiwiekluZGV4Iiwic3BhbiIsInRpdGxlIiwic3VibXNnIiwiZmllbGRzZXQiLCJyZXBsYWNlIiwiZm9jdXMiLCJvbnN1Ym1pdCIsImJ1dHRvbiIsIm9iIiwibmV3QnV0dG9ucyIsImJ1dHRvbnMiLCJ0b0xvd2VyQ2FzZSIsImRpY3QiLCJhdXRvZm9jdXMiLCJmb3JtTm9WYWxpZGF0ZSIsIm9uY2xpY2siLCJjbG9zZXN0IiwiaGlkZSIsImFsZXJ0Iiwic3VjY2VzcyIsImZhaWx1cmUiLCJjb25maXJtIiwicHJvbXB0IiwiY2xvc2VBbGwiLCJsYW5ndWFnZSIsImxvY2FsU3RvcmFnZSIsIm5hdmlnYXRvciIsImxhbmciLCJrZXl3b3JkIiwidmFycyIsIm1zZyIsInBhaXJzIiwic3BsaXQiLCJwIiwicGFydCIsImt3ZCIsImRpY3Rpb25hcnkiLCJyZXBvcnQiLCJ0cmFuc2xhdGlvbiIsImJhc2VMYW5nIiwibGFuZ0V2ZW50cyIsIm5ld0xhbmciLCJzZXRJdGVtIiwidHh0IiwiY29udGFpbnMiLCJrdyIsImdldEtleXdvcmQiLCJ0aXRsZUt3IiwicGxhY2Vob2xkZXIiLCJyZWFkeSIsIm1hbnVhbExhbmciLCJib2R5TGFuZyIsImh0bWxMYW5nIiwiU3RvcmFnZSIsInN0b3JlIiwic2Vzc2lvblN0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJkZWwiLCJyZW1vdmVJdGVtIiwidG1wIiwic2hpZnQiLCJsb2NhbCIsInNlc3Npb24iLCJnZXRSZXNwb25zZSIsInJlc3BvbnNlIiwicm93IiwiZmlsZSIsIkZpbGVVcGxvYWQiLCJmaWVsZE5hbWUiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInVwbG9hZCIsImxlbmd0aENvbXB1dGFibGUiLCJvbmVCeU9uZSIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJsb2FkZWQiLCJ0b3RhbCIsIm9uVXBkYXRlIiwic2l6ZUFjY3VtIiwic2l6ZSIsInJlc3BvbnNlVGV4dCIsInJlYXNvbiIsImVyciIsInN0YXR1cyIsIm9uUmVzcG9uc2UiLCJvbkVycm9yIiwib3BlbiIsImZpbGwiLCJmb3JtIiwiZ2V0RmlsZUZvcm0iLCJsb2FkSW5kZXgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiZXZ0Iiwic2VuZCIsInJlYWRBc0JpbmFyeVN0cmluZyIsIm9wdHMiLCJhY2NlcHQiLCJwYXJhbGxlbCIsImZpZWxkIiwibXVsdGlwbGUiLCJtYXhGaWxlcyIsIm1heFNpemVNYiIsImVsIiwiX3Byb3RlY3RlZF9yZWZlcmVuY2UiLCJvbkRvbmUiLCJhbGxEb25lIiwicGN0IiwicmVzIiwib25TZWxlY3QiLCJzcmNzIiwidG90U2l6ZSIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm1icyIsImNlaWwiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZpbGVEb25lIiwidGhlbiIsImNsaWNrIiwid3MiLCJyZXF1ZXN0Iiwid2ViU29ja2V0Iiwib25lcnJvciIsImdldFNvY2tldCIsIm9uTWVzc2FnZSIsIm9uT3BlbiIsIm9uQ2xvc2UiLCJXZWJTb2NrZXQiLCJwYXRoIiwib25vcGVuIiwib25jbG9zZSIsIm9ubWVzc2FnZSIsIndzayIsInJlYWR5U3RhdGUiLCJjb25uZWN0IiwiaW5pdFJlcXVlc3QiLCJvbkNvbm5lY3QiLCJjb25uZWN0ZWQiLCJvbkRpc2Nvbm5lY3QiLCJkaXNjb25uZWN0ZWQiLCJyZWNvbm5lY3QiLCJob3N0IiwibG9jYXRpb24iLCJob3N0bmFtZSIsInNlY3VyZSIsInBvcnQiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImRpc2Nvbm5lY3QiLCJYSFIiLCJ1cmwiLCJlcnJvcl9jYWxsYmFjayIsImpzb24iLCJ0b1VwcGVyQ2FzZSIsIm1hcCIsInNldFJlcXVlc3RIZWFkZXIiLCJhcmd1bWVudHMiLCJOZEpzb25QbGF5ZXIiLCJmcHMiLCJsb29wIiwic2hvd2ZpcnN0IiwiYXV0b3BsYXkiLCJsaXZlIiwicGxheWluZyIsImJhY2t3YXJkcyIsInN0YXJ0ZWQiLCJvblN0YXJ0Iiwib25Mb2FkIiwib25SZW5kZXIiLCJvblBsYXkiLCJvblN0b3AiLCJvbkZpbmlzaCIsIndyYXBwZXIiLCJjYW52YXMiLCJjdHgiLCJ0aW1lciIsImZyYW1lIiwibXVsdGlwbGllciIsIl9udW1GcmFtZXMiLCJfdG90VGltZSIsIl9mcmFtZXMiLCJfZnJhbWVCYXNlIiwiX3RodW1iQmFzZSIsIl9zdGFydFRpbWVTdGFtcCIsImVsZW1lbnQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJub0V2ZW50Iiwib25zdGFydCIsIm9ucmVuZGVyIiwib25wbGF5Iiwib25zdG9wIiwib25maW5pc2giLCJwbGF5ZXIiLCJpbnNlcnRCZWZvcmUiLCJoYXNDaGlsZE5vZGVzIiwiZ2V0Q29udGV4dCIsIlRpbWVyU3JjIiwiZmV0Y2giLCJyZWxvYWQiLCJwbGF5IiwiX3Jlc2V0IiwibmV3U3JjIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiYnVmZmVyIiwicmVzcCIsImJvZHkiLCJnZXRSZWFkZXIiLCJyZWFkIiwicHJvY2VzcyIsImRvbmUiLCJsYXN0IiwicHJvY2Vzc0ZyYW1lIiwibGluZXMiLCJkZWNvZGUiLCJzdHJlYW0iLCJwb3AiLCJjYXRjaCIsImZyYW1lcyIsImZzIiwidW5zaGlmdCIsInciLCJoIiwiZmIiLCJ0aGIiLCJ0ZiIsInR0IiwidHMiLCJzdGVwIiwiX3JlbmRlciIsIl9kaXNwbGF5SW1nIiwiY2FsbCIsIl9pbmNyZW1lbnQiLCJub2NhbGwiLCJfaW1hZ2UiLCJwYXVzZSIsInRvdGFsRnJhbWVzIiwiX2RyYXciLCJpbWciLCJjbGVhclJlY3QiLCJkcmF3SW1hZ2UiLCJpbWFnZSIsIkltYWdlIiwiY3Jvc3NPcmlnaW4iLCJkcmF3biIsImZyYW1lQmFzZSIsImN1cnJlbnRGcmFtZSIsInRvdGFsVGltZSIsImZyYW1lQXQiLCJpbmRleEF0IiwicGxheWVyTm9kZSIsInN0YXJ0RnJhbWUiLCJwbGF5Rm9yd2FyZCIsInBsYXlCYWNrd2FyZHMiLCJzdG9wIiwianVtcFRvIiwic3RlcEZvcndhcmRzIiwic3RlcEJhY2t3YXJkcyIsInJlc2V0IiwiTkRKUGxheWVyIiwidWkiLCJpc01lZGlhIiwic3RyIiwiaXNTZWxlY3RvciIsImNvbnRyb2xzIiwicmVzaXplIiwib25hY3Rpb24iLCJhY3Rpb24iLCJuZGpQbGF5ZXIiLCJ1aVBsYXllciIsIl9jcmVhdGUiLCJfYWRqdXN0U2l6ZSIsIl9vblVwZGF0ZSIsInBhbmVsIiwiZXZlbnQiLCJsYXBzZSIsImQiLCJfZm9ybWF0TWlsbGlzIiwiX2ZtdFRpbWUiLCJwcm9ncmVzcyIsInJhdGlvVyIsIl9nZXRVSSIsIl9nZXRCYXNpY1VJIiwiZnVsbHNjcmVlbkVsZW1lbnQiLCJjYXB0aW9uIiwidGh1bWIiLCJyZWMiLCJocmVmIiwibWF4Iiwib25tb3VzZW1vdmUiLCJvZmZzZXRXaWR0aCIsInRoIiwibmF0dXJhbFdpZHRoIiwidGMiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0WCIsIm9ubW91c2VsZWF2ZSIsImZ1bGxzY3JlZW4iLCJleGl0RnVsbHNjcmVlbiIsInJlcXVlc3RGdWxsc2NyZWVuIiwidGltZSIsImRlY2ltYWwiLCJ0b0ZpeGVkIiwicGFkU3RhcnQiLCJtaWxsaXMiLCJwYWQiLCJudW0iLCJkaWdpdHMiLCJzbGljZSIsImZsb29yIiwibXMiLCJwYXJzZUludCIsIm9yaWdpbmFsX21zIiwic3RhcnRUaW1lIiwiY2hlY2tlciIsIm5vd1RpbWUiLCJnZXRUaW1lIiwiZXhlYyIsImNoZWNrIiwiZGVzdHJveSIsInNsb3ciLCJmYXN0IiwiVmlkZW9ORCIsInN1cGVyIiwiX3Jvb3QiLCJkZWZhdWx0T3B0aW9ucyIsInBvc3RlciIsInByZWxvYWQiLCJjYyIsInNwZWVkIiwiYXV0b3NpemUiLCJzaXplcyIsInRodW1icyIsInNldENhcHRpb24iLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siLCJjdXN0b21FbGVtZW50cyJdLCJtYXBwaW5ncyI6IkNBUUEsU0FBQUEsRUFBQUMsR0FDQSxtQkFBQUMsUUFBQUEsT0FBQUMsSUFDQUQsT0FBQSxHQUFBRCxHQUNBLGlCQUFBRyxRQUNBQyxPQUFBRCxRQUFBSCxJQUVBRCxFQUFBTSxLQUFBTCxJQU5BLENBUUFNLE1BQUEsV0FFQSxhQXVDQSxNQUFBQyxFQU1BQyxTQUFBQyxHQUNBLE1BQUEsaUJBQUFBLEVBT0FDLE9BQUFDLEdBQ0EsTUFBQSxrQkFBQUEsRUFPQUMsVUFBQUMsR0FDQSxPQUFBQyxNQUFBQyxXQUFBRixLQUFBRyxTQUFBSCxHQU9BSSxhQUFBQyxHQUNBLE9BQUEsS0FBQUEsRUFBQSxJQUFBQyxPQUFBQyxRQUFBLEtBT0FDLGNBQUFDLEdBQ0EsTUFBQSxXQUFBQSxFQUFBQyxZQUFBQyxLQU9BQyxTQUFBQyxHQUNBLE1BQUEsaUJBQUFBLEVBT0FDLFFBQUFDLEdBQ0EsT0FBQUMsTUFBQUYsUUFBQUMsR0FPQUUsV0FBQUMsR0FDQSxNQUFBLG1CQUFBQSxFQU9BQyxVQUFBbkIsR0FDQSxPQUFBQSxhQUFBb0IsWUFRQUMsT0FBQXJCLEdBQ0EsT0FBQUEsYUFBQXNCLE1BQUF0QixhQUFBdUIsaUJBT0FDLE9BQUFuQixHQUNBLE9BQUEsS0FBQUEsRUFBQSxJQUFBQyxPQUFBQyxRQUFBLEtBT0FrQixRQUFBQyxHQUNBLFlBQUFDLElBQUFELEdBQUFqQyxLQUFBbUIsU0FBQWMsSUFBQSxJQUFBRSxPQUFBQyxLQUFBSCxH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QixFQUFBc2lCLFVBQ0F0aUIsRUFBQXNpQixTQUFBZCxFQUFBOEYsRUFBQWxHLFFBQUFrRyxFQUFBQSxFQUFBNUUsT0FBQXJCLE9BQUFpRyxFQUFBNUUsT0FBQXBCLE1BSUEvZ0IsS0FBQTJDLE1BQUFELFFBQUEsUUFDQTFDLEtBQUEySixVQUFBLE9BQ0EsTUFBQW9kLEVBQUEsSUFBQVQsVUFBQXRaLEVBQUFnQyxJQUFBaFAsS0FBQWdOLEdBR0FnZSxXQUFBakQsR0FDQS9uQixLQUFBdXFCLE1BQUFobUIsY0FBQSxXQUFBNkUsVUFBQTJlLEVBR0FrRCxnQ0FDQSxNQUFBLENBQUEsUUFBQSxTQUFBLFdBR0FDLHlCQUFBaHFCLEVBQUEyUSxFQUFBOUMsR0FDQSxZQUFBN04sR0FDQWxCLEtBQUFnckIsV0FBQWpjLElBSUF6TCxTQUFBeUUsaUJBQUEsb0JBQUEsV0FDQTNFLE9BQUErbkIsZUFBQXhyQixPQUFBLFdBQUEwcUIiLCJmaWxlIjoibmRqc29uLXBsYXllci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEF1dGhvciA6IEEuTGVwZSAoZGV2QGFsZXBlLmNvbSkgLSBpbnRlbGxpc3JjLmNvbVxuICogTGljZW5zZTogTUlUXG4gKiBWZXJzaW9uOiAyLjEuMVxuICogVXBkYXRlZDogMjAyMi0wMi0yNFxuICogQ29udGVudDogRnVsbCBCdW5kbGUgKERlYnVnKVxuICovXG5cbjsoZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgfSBlbHNlIHtcbiAgICByb290Lm0yZDIgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24oKSB7XG4vLyAtLS0tLS0tIEZ1bmN0aW9ucyAtLS0tLS0tXG5cInVzZSBzdHJpY3RcIjtcbi8qKlxuICogRnVuY3Rpb25zIHVzZWZ1bCB0byB3b3JrIHdpdGggSmF2YXNjcmlwdCBkYXRhIGFuZCBET01cbiAqIFVzZWQgbWFpbmx5IGluIE0yRDIgY29yZSBsaWJyYXJ5IGJ1dCBleHBvc2VkIHRvIHRoZVxuICogY29uc3VtZXIuXG4gKiBAQXV0aG9yOiBBLkxlcGUgPGRldkBhbGVwZS5jb20+XG4gKlxuICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gKiAkLmlzU3RyaW5nXG4gKiAkLmlzQm9vbFxuICogJC5pc051bWVyaWNcbiAqICQuaXNTZWxlY3RvcklEXG4gKiAkLmlzUGxhaW5PYmplY3RcbiAqICQuaXNPYmplY3RcbiAqICQuaXNBcnJheVxuICogJC5pc0Z1bmN0aW9uXG4gKiAkLmlzRWxlbWVudFxuICogJC5pc05vZGVcbiAqICQuaXNIdG1sXG4gKiAkLmlzRW1wdHlcbiAqICQuaXNWaXNpYmxlXG4gKiAkLmluVmlld1xuICogJC5jbGVhbkFycmF5XG4gKiAkLmlzVmFsaWRFbGVtZW50XG4gKiAkLmV4aXN0c1xuICogJC5nZXRBdHRyT3JQcm9wXG4gKiAkLmhhc0F0dHJPclByb3BcbiAqICQuaGFzQXR0clxuICogJC5oYXNQcm9wXG4gKiAkLnNldFByb3BPckF0dHJcbiAqICQuc2V0QXR0clxuICogJC5kZWZpbmVQcm9wXG4gKiAkLmh0bWxFbGVtZW50XG4gKiAkLm5ld0VsZW1lbnRcbiAqICQubmV3RW1wdHlOb2RlXG4gKiAkLmdldE1ldGhvZHNcbiAqICQuYXBwZW5kQWxsQ2hpbGRcbiAqICQucHJlcGVuZEFsbENoaWxkXG4gKi9cbmNsYXNzIFV0aWxzIHtcblx0LyoqXG5cdCAqIFJldHVybiB0cnVlIGlmIHZhcmlhYmxlIGlzIHN0cmluZ1xuXHQgKiBAcGFyYW0geyp9IHZcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzU3RyaW5nKHYpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2ID09PSAnc3RyaW5nJztcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJuIHRydWUgaWYgdmFyaWFibGUgaXMgYSBib29sZWFuXG5cdCAqIEBwYXJhbSB7Kn0gYlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNCb29sKGIpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBiID09PSAnYm9vbGVhbic7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybiB0cnVlIGlmIHZhcmlhYmxlIGlzIGEgbnVtYmVyXG5cdCAqIEBwYXJhbSB7Kn0gblxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNOdW1lcmljKG4pIHtcbiAgICAgICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTtcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJuIHRydWUgaWYgc2VsZWN0b3IgdXMgYW4gaWQgc2VsZWN0b3Jcblx0ICogQHBhcmFtIHtzdHJpbmd9IHNcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzU2VsZWN0b3JJRChzKSB7XG4gICAgICAgIHJldHVybiAocyArIFwiXCIpLnRyaW0oKS5pbmRleE9mKFwiI1wiKSA9PT0gMDtcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhIFwicGxhaW5cIiBvYmplY3QgKG5vdCBhbiBhcnJheSlcblx0ICogQHBhcmFtIG9cblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzUGxhaW5PYmplY3Qobykge1xuICAgICAgICByZXR1cm4gby5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk9iamVjdFwiO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgdmFyaWFibGUgaXMgYW4gb2JqZWN0IChhbnkga2luZCwgZS5nLiBBcnJheSlcblx0ICogQHBhcmFtIHsqfSBvYVxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNPYmplY3Qob2EpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYSA9PT0gJ29iamVjdCc7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYW4gYXJyYXlcblx0ICogQHBhcmFtIHtvYmplY3R9IGFcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzQXJyYXkoYSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhKTtcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhIGZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBmXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc0Z1bmN0aW9uKGYpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBmID09PSAnZnVuY3Rpb24nO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGFuIEhUTUxFbGVtZW50XG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc0VsZW1lbnQobikge1xuICAgICAgICByZXR1cm4gbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50O1xuICAgIH07XG5cblx0LyoqXG5cdCAqIFJldHVybiB0cnVlIGlmIG9iamVjdCBpcyBhIE5vZGUgb3IgRG9jdW1lbnRGcmFnbWVudFxuXHQgKiBAcGFyYW0ge29iamVjdH0gblxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNOb2RlKG4pIHtcbiAgICBcdHJldHVybiAobiBpbnN0YW5jZW9mIE5vZGUgfHwgbiBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpO1xuXHR9XG5cdC8qKlxuXHQgKiBSZXR1cm4gdHJ1ZSBpZiBzdHJpbmcgc2VlbXMgdG8gYmUgYW4gSFRNTCBjb2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc0h0bWwocykge1xuICAgICAgICByZXR1cm4gKHMgKyBcIlwiKS50cmltKCkuaW5kZXhPZihcIjxcIikgIT09IC0xO1xuICAgIH07XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYW4gb2JqZWN0IGlzIGVtcHR5XG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBvYmpcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzRW1wdHkob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogPT09IHVuZGVmaW5lZCB8fCAodGhpcy5pc09iamVjdChvYmopICYmIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwKSB8fCBvYmogPT09IFwiXCI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYW4gZWxlbWVudCBpcyB2aXNpYmxlXG4gICAgICogQHBhcmFtIHtIdG1sRWxlbWVudH1cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpc1Zpc2libGUoZWxlbSkge1xuICAgICAgICBpZighIHRoaXMuaXNFbGVtZW50KGVsZW0pKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIihpc1Zpc2libGUpIE5vdCBhbiBlbGVtZW50OiBcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlbGVtKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIjtcbiAgICAgICAgY29uc3Qgbm90SGlkZGVuID0gZWxlbS5zdHlsZS52aXNpYmlsaXR5ICE9PSBcImhpZGRlblwiO1xuICAgICAgICByZXR1cm4gZGlzcGxheSAmJiBub3RIaWRkZW47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgZWxlbWVudCBpcyBpbiB2aWV3XG4gICAgICogQHBhcmFtIHtIdG1sRWxlbWVudH1cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpblZpZXcoZWxlbSkge1xuICAgICAgICBjb25zdCByZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIHJlY3QudG9wID49IDAgJiYgcmVjdC5sZWZ0ID49IDAgJiZcbiAgICAgICAgICAgICAgIHJlY3QuYm90dG9tIDw9ICh3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkgJiZcbiAgICAgICAgICAgICAgIHJlY3QucmlnaHQgPD0gKHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkgJiZcbiAgICAgICAgICAgICAgIHJlY3Qud2lkdGggPiAwICYmIHJlY3QuaGVpZ2h0ID4gMFxuICAgIH1cblx0LyoqXG5cdCAqIFJlbW92ZSBudWxsLCBlbXB0eSBvciB1bmRlZmluZWQgdmFsdWVzIGZyb20gYW4gYXJyYXlcblx0ICogQHBhcmFtIHtBcnJheX0gYVxuXHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAqL1xuICAgIGNsZWFuQXJyYXkoYSkge1xuICAgICAgICByZXR1cm4gYS5maWx0ZXIoZnVuY3Rpb24oZSl7IHJldHVybiBlID09PSAwIHx8IGUgfSk7XG4gICAgfTtcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhIHRhZyBuYW1lIGlzIGEgdmFsaWQgSFRNTCBlbGVtZW50XG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc1ZhbGlkRWxlbWVudCh0YWdOYW1lKSB7XG4gICAgICAgIGNvbnN0ICRub2RlID0gdGhpcy5uZXdFbGVtZW50KHRhZ05hbWUpO1xuICAgICAgICByZXR1cm4gdGFnTmFtZSAhPT0gXCJ0ZW1wbGF0ZVwiICYmICRub2RlLmNvbnN0cnVjdG9yLm5hbWUgIT09IFwiSFRNTFVua25vd25FbGVtZW50XCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBlbGVtZW50IGV4aXN0cyBpbiBET00gYmFzZWQgb24gc2VsZWN0b3JcbiAgICAgKi9cbiAgICBleGlzdHMoc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpICE9PSBudWxsO1xuICAgIH1cblx0LyoqXG5cdCAqIEdldCBhdHRyaWJ1dGUgb3IgcHJvcGVydHlcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleVxuXHQgKiBAcmV0dXJucyB7Kn1cblx0ICovXG5cdGdldEF0dHJPclByb3AgKCRub2RlLCBrZXkpIHtcblx0XHRsZXQgdmFsdWUgPSBcIlwiO1xuXHRcdGlmKHRoaXMuaGFzQXR0ck9yUHJvcCgkbm9kZSwgIGtleSkpIHtcblx0XHRcdHZhbHVlID0gdGhpcy5oYXNBdHRyKCRub2RlLCBrZXkpID8gJG5vZGUuZ2V0QXR0cmlidXRlKGtleSk6ICRub2RlW2tleV07XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZVxuXHR9XG5cdC8qKlxuXHQgKiBJZiBhIG5vZGUgY29udGFpbnMgZWl0aGVyIGEgcHJvcGVydHkgb3IgYW4gYXR0cmlidXRlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHJldHVybiB7Ym9vbGVhbn1cblx0ICovXG5cdGhhc0F0dHJPclByb3AgKCRub2RlLCBrZXkpIHtcblx0XHRyZXR1cm4gdGhpcy5oYXNBdHRyKCRub2RlLCBrZXkpIHx8IHRoaXMuaGFzUHJvcCgkbm9kZSwga2V5KTtcblx0fVxuXHQvKipcblx0ICogSWYgYSBub2RlIGhhcyBhbiBhdHRyaWJ1dGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGF0dHJcblx0ICogQHJldHVybiB7Ym9vbGVhbn1cblx0ICovXG5cdGhhc0F0dHIgKCRub2RlLCBhdHRyKSB7XG5cdFx0bGV0IGhhc0F0dHIgPSBmYWxzZTtcblx0XHRpZigkbm9kZSAmJiAhdGhpcy5pc051bWVyaWMoYXR0cikpIHtcblx0XHRcdHN3aXRjaChhdHRyKSB7XG5cdFx0XHRcdGNhc2UgXCJjaGVja2VkXCI6XG5cdFx0XHRcdFx0aGFzQXR0ciA9ICgkbm9kZS50eXBlICE9PSB1bmRlZmluZWQgJiYgKCRub2RlLnR5cGUgPT09IFwicmFkaW9cIiB8fCAkbm9kZS50eXBlID09PSBcImNoZWNrYm94XCIpKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRoYXNBdHRyID0gJG5vZGUuaGFzQXR0cmlidXRlICE9PSB1bmRlZmluZWQgPyAkbm9kZS5oYXNBdHRyaWJ1dGUoYXR0cikgOiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGhhc0F0dHI7XG5cdH1cblx0LyoqXG5cdCAqIElmIGEgbm9kZSBoYXMgYSBwcm9wZXJ0eSB3aGljaCBpcyBub3QgYW4gYXR0cmlidXRlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cblx0aGFzUHJvcCAoJG5vZGUsIHByb3ApIHtcblx0XHRsZXQgaGFzUHJvcCA9IGZhbHNlO1xuXHRcdGlmKCRub2RlICYmICF0aGlzLmlzTnVtZXJpYyhwcm9wKSkge1xuXHRcdCAgICBsZXQgaGFzID0gJG5vZGVbcHJvcF0gIT09IHVuZGVmaW5lZDtcblx0XHQgICAgaWYoaGFzICYmICRub2RlW3Byb3BdID09PSBudWxsICYmIHByb3AgPT09IFwidmFsdWVcIikge1xuXHRcdFx0XHRoYXMgPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGhhc1Byb3AgPSAoaGFzICYmISAoJG5vZGVbcHJvcF0gaW5zdGFuY2VvZiBOb2RlKSkgJiYhICRub2RlLmhhc0F0dHJpYnV0ZShwcm9wKTtcblx0XHR9XG5cdFx0cmV0dXJuIGhhc1Byb3A7XG5cdH1cblxuXHQvKipcblx0ICogU2V0IHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5IHdoaWNoIGlzIHRydWUvZmFsc2Vcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRzZXRQcm9wT3JBdHRyICgkbm9kZSwga2V5LCB2YWx1ZSkge1xuXHQgICAgaWYodGhpcy5oYXNQcm9wKCRub2RlLCBrZXkpKSB7XG5cdCAgICBcdHRyeSB7XG5cdFx0XHRcdCRub2RlW2tleV0gPSB2YWx1ZTtcblx0XHRcdH0gY2F0Y2goaWdub3JlKSB7IC8vSWYgZmFpbHMsIHNldCBpdCBhcyBhdHRyaWJ1dGU6IChlLmcuIGlucHV0Lmxpc3QpXG5cdFx0XHRcdHRoaXMuc2V0QXR0cigkbm9kZSwga2V5LCB2YWx1ZSk7XG5cdFx0XHR9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cigkbm9kZSwga2V5LCB2YWx1ZSk7XG4gICAgXHR9XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldCBhdHRyaWJ1dGUgdG8gbm9kZS4gSWYgdmFsdWUgaXMgZmFsc2UsIHdpbGwgcmVtb3ZlIGl0LlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgKi9cblx0c2V0QXR0ciAoJG5vZGUsIGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYodmFsdWUpIHtcbiAgICAgICAgICAgICRub2RlLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICB9XG5cdH1cblx0LyoqXG5cdCAqIERlZmluZSBhIHByb3BlcnR5IHRvIGFuIG9iamVjdFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBkZWZcblx0ICovXG5cdGRlZmluZVByb3AgKG9iaiwgcHJvcCwgZGVmKSB7XG5cdFx0aWYodGhpcy5pc09iamVjdChvYmopKSB7XG5cdFx0XHRpZihvYmpbcHJvcF0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBwcm9wLCB7XG5cdFx0XHRcdFx0ZW51bWVyYWJsZTogZmFsc2UsXG5cdFx0XHRcdFx0d3JpdGFibGU6IHRydWVcblx0XHRcdFx0fSk7XG5cdFx0XHRcdG9ialtwcm9wXSA9IGRlZjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBOb2RlIHVzaW5nIEhUTUwgY29kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaHRtbFxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG5cdCAqL1xuXHRodG1sRWxlbWVudChodG1sKSB7XG5cdFx0Ly9yZXR1cm4gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7IEZJWE1FXG5cdFx0Y29uc3QgdGVtcGxhdGUgPSB0aGlzLm5ld0VsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbC50cmltKCk7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmZpcnN0Q2hpbGQ7XG5cdH07XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgTm9kZSB3aXRoIGEgdGFnIG5hbWVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcblx0ICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuXHQgKi9cblx0bmV3RWxlbWVudCh0YWdOYW1lKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG5cdH07XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGVtcHR5IG5vZGUgKERvY3VtZW50RnJhZ21lbnQpXG5cdCAqIEByZXR1cm5zIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0bmV3RW1wdHlOb2RlKCkge1xuXHRcdHJldHVybiBuZXcgRG9jdW1lbnRGcmFnbWVudCgpXG5cdH1cblx0LyoqXG5cdCAqIEdldCBhbGwgbWV0aG9kcyBvZiBjbGFzcyBvYmplY3Rcblx0ICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzY3MjYwMTMxLzE5NjUwN1xuXHQgKiBAcGFyYW0ge29iamVjdH0gb2JqXG5cdCAqIEByZXR1cm5zIHtBcnJheX1cblx0ICovXG5cdGdldE1ldGhvZHMob2JqKSB7XG5cdFx0Y29uc3QgbyA9IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2Yob2JqKTtcblx0XHRjb25zdCB4ID0gUmVmbGVjdC5nZXRQcm90b3R5cGVPZihvKTtcblx0XHRyZXR1cm4gUmVmbGVjdC5vd25LZXlzKG8pLmZpbHRlcihpdCA9PiBSZWZsZWN0Lm93bktleXMoeCkuaW5kZXhPZihpdCkgPCAwKTtcblx0fTtcblx0LyoqXG5cdCAqIEFwcGVuZCBhbGwgY2hpbGQgZnJvbSBvbmUgbm9kZSB0byBhbm90aGVyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRzcmNOb2RlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICR0Z3ROb2RlXG5cdCAqL1xuXHRhcHBlbmRBbGxDaGlsZCgkc3JjTm9kZSwgJHRndE5vZGUpIHtcblx0XHQvL1VwZGF0ZSBhbGwgYXQgb25jZVxuXHRcdC8vJG5vZGUuYXBwZW5kKC4uLiRvdXRFbGVtLmNoaWxkTm9kZXMpOyAvLzwtLSB3b3JrcyBidXQgaXQgaXMgc2xvd2VyXG5cdFx0d2hpbGUgKCRzcmNOb2RlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdCR0Z3ROb2RlLmFwcGVuZCgkc3JjTm9kZS5maXJzdENoaWxkKTtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCAqIFByZXBlbmQgYWxsIGNoaWxkIGZyb20gb25lIG5vZGUgdG8gYW5vdGhlclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkc3JjTm9kZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkdGd0Tm9kZVxuXHQgKi9cblx0cHJlcGVuZEFsbENoaWxkKCRzcmNOb2RlLCAkdGd0Tm9kZSkge1xuXHRcdC8vVXBkYXRlIGFsbCBhdCBvbmNlXG5cdFx0Ly8kbm9kZS5hcHBlbmQoLi4uJG91dEVsZW0uY2hpbGROb2Rlcyk7IC8vPC0tIHdvcmtzIGJ1dCBpdCBpcyBzbG93ZXJcblx0XHR3aGlsZSAoJHNyY05vZGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0JHRndE5vZGUucHJlcGVuZCgkc3JjTm9kZS5maXJzdENoaWxkKTtcblx0XHR9XG5cdH1cbn1cblxuLyoqXG4gKiBAYXV0aG9yOiBBLiBMZXBlXG4gKiBAdXJsIDogaHR0cHM6Ly9naXRsYWIuY29tL2ludGVsbGlzcmMvbTJkMi9cbiAqIEBzaW5jZTogTWF5LCAyMDE4XG4gKiBAdmVyc2lvbjogMi4wLjBcbiAqIEB1cGRhdGVkOiAyMDIxLTA0LTE2XG4gKlxuICpcbiAqIE0yRDIgQ2xhc3NcbiAqL1xuY2xhc3MgbTJkMiB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXHRfc3RvcmVkID0ge1xuXHRcdGV2ZW50cyA6IFtdLFxuXHRcdGRhdGFzZXROb2RlcyA6IFtdLFxuXHRcdGRhdGFzZXRzIDogW10sXG5cdFx0c3R5bGVOb2RlcyA6IFtdLFxuXHRcdHN0eWxlcyA6IFtdXG5cdH1cblx0c3RhdGljIHN0b3JlZEV2ZW50c1RpbWVvdXQgPSA1MDsgLy9tcyB0byBncm91cCBzYW1lIGV2ZW50c1xuXHRzdGF0aWMgc2hvcnQgPSB0cnVlOyAvL0VuYWJsZSBzaG9ydCBhc3NpZ25hdGlvbiAoZmFsc2UgPSBiZXR0ZXIgcGVyZm9ybWFuY2UpIFRPRE86IGRvY3VtZW50ICh1c2UgUHJveHkgbGlrZTogb2JqLmEgPSBcInRleHRcIilcblx0c3RhdGljIHVwZGF0ZXMgPSB0cnVlOyAvL0VuYWJsZSBcIm9udXBkYXRlXCIgKGZhbHNlID0gYmV0dGVyIHBlcmZvcm1hbmNlKSBUT0RPOiBkb2N1bWVudCAodXNlIE11dGF0aW9uT2JzZXJ2ZXIpXG5cdHN0YXRpYyB1dGlscyA9IG5ldyBVdGlscygpO1xuXG5cdGNvbnN0cnVjdG9yKCkge31cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFNUQVRJQyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRzdGF0aWMgaW5zdGFuY2UgPSBuZXcgbTJkMigpO1xuXHRzdGF0aWMgZXh0ZW5zaW9ucyA9IHt9OyAvLyBBZGRpdGlvbmFsIHByb3BlcnRpZXMgZm9yIERPTVxuXHRzdGF0aWMgbWFpbiA9ICgoKSA9PiB7XG5cdFx0Y29uc3QgZiA9IChzZWxlY3Rvciwgb2JqZWN0KSA9PiB7XG5cdFx0XHRjb25zdCBub2RlID0gdGhpcy5pbnN0YW5jZS5nZXRQcm94eU5vZGUoc2VsZWN0b3IsIG9iamVjdCk7XG5cdFx0XHQvLyBURVNUOiAxM1xuXHRcdFx0aWYobm9kZSAmJiBub2RlLm9ucmVhZHkgJiYgbTJkMi51dGlscy5pc0Z1bmN0aW9uKG5vZGUub25yZWFkeSkpIHtcblx0XHRcdFx0bm9kZS5hZGRFdmVudExpc3RlbmVyKFwicmVhZHlcIiwgbm9kZS5vbnJlYWR5LCB7IG9uY2UgOiB0cnVlIH0pO1xuXHRcdFx0XHQvLyBUaGlzIHdpbGwgYmUgY2FsbGVkIGp1c3QgYWZ0ZXIgdGhlIG9iamVjdCBoYXMgYmVlbiByZXR1cm5lZCAodG8gYmUgc3VyZSBpdCB3YXMgY3JlYXRlZClcblx0XHRcdFx0Ly8gV2l0aG91dCBzZXRUaW1lb3V0IFwib25yZWFkeVwiIHdvdWxkIGJlIHRoZSBzYW1lIGFzIFwib25sb2FkXCIuXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdyZWFkeScpKTtcblx0XHRcdFx0fSwgMTApOyAvL1RPRE86IERvY3VtZW50XG5cdFx0XHR9XG5cdFx0XHQvLyBTdG9yZSByZWZlcmVuY2VzIHRvIGRhdGFzZXRzICh1c2VkIGxhdGVyIGluIG9ucHVkYXRlIGRhdGFzZXQsIHN0eWxlKTpcblx0XHRcdFtcImRhdGFzZXRcIixcInN0eWxlXCJdLmZvckVhY2goaSA9PiB7XG5cdFx0XHQgICAgaWYobm9kZSAmJiBub2RlW2ldKSB7XG5cdFx0XHRcdCAgICB0aGlzLmluc3RhbmNlLl9zdG9yZWRbaSArIFwic1wiXS5wdXNoKG5vZGVbaV0pO1xuXHRcdFx0XHQgICAgdGhpcy5pbnN0YW5jZS5fc3RvcmVkW2kgKyBcIk5vZGVzXCJdLnB1c2gobm9kZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHRyZXR1cm4gbm9kZTtcblx0XHR9XG5cdCAgICAvLyBFeHRlbmRzIFV0aWxzOlxuXHQgICAgbTJkMi51dGlscy5nZXRNZXRob2RzKG0yZDIudXRpbHMpLmZvckVhY2goayA9PiB7IGZba10gPSBtMmQyLnV0aWxzW2tdIH0pO1xuXHRcdHJldHVybiBmO1xuXHR9KSgpO1xuXHQvKipcblx0ICogSW5pdGlhbGl6YXRpb24uIFVzZTogbTJkMi5yZWFkeSgpXG5cdCAqIEBwYXJhbSB7IGZ1bmN0aW9uIH0gY2FsbGJhY2tcblx0ICovXG5cdHN0YXRpYyByZWFkeShjYWxsYmFjaykge1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG0yZDIubWFpbik7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogRXhlY3V0ZSBzb21ldGhpbmcgb24gbG9hZC4gSXQgd2lsbCBzZWFyY2ggZm9yIGV4dGVuc2lvbnMuXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqIFRFU1Q6IDAwXG5cdCAqL1xuXHRzdGF0aWMgbG9hZChjYWxsYmFjaykge1xuXHQgICAgaWYoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZXh0ID0gY2FsbGJhY2sobTJkMi5tYWluKTsgLy9tYWluIGNhbiBiZSBleHRlbmRlZCBoZXJlXG4gICAgICAgICAgICBpZihtMmQyLnV0aWxzLmlzT2JqZWN0KGV4dCkgJiYgIW0yZDIudXRpbHMuaXNFbXB0eShleHQpKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXh0KS5mb3JFYWNoKGsgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihtMmQyLnV0aWxzLmlzVmFsaWRFbGVtZW50KGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtMmQyLmV4dGVuc2lvbnNba10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0yZDIuZXh0ZW5zaW9uc1trXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCB3ZSBhcmUgbm90IHJlcGxhY2luZyBhbnkgZXhpc3RpbmcgcHJvcGVydHk6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCAkbm9kZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dFtrXSkuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5oYXNQcm9wKCRub2RlLCBpdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJXYXJuaW5nOiBwcm9wZXJ0eSBbXCIgKyBpdCArIFwiXSBhbHJlYWR5IGV4aXN0cyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImluIG5vZGU6IFtcIiArIGsgKyBcIl0gd2hpbGUgdHJ5aW5nIHRvIGV4dGVuZCBpdC4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJVbmV4cGVjdGVkIGJlaGF2aW91ciBtYXkgaGFwcGVuLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obTJkMi5leHRlbnNpb25zW2tdLCBleHRba10pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi5leHRlbnNpb25zW1wiKlwiXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbTJkMi5leHRlbnNpb25zW1wiKlwiXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgJG5vZGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhleHRba10pLmZvckVhY2goaXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaGFzUHJvcCgkbm9kZSwgaXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV2FybmluZzogcHJvcGVydHkgW1wiICsgaXQgKyBcIl0gYWxyZWFkeSBleGlzdHMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbiBOb2RlIHdoaWxlIHRyeWluZyB0byBleHRlbmQgaXQuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVW5leHBlY3RlZCBiZWhhdmlvdXIgbWF5IGhhcHBlbi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG0yZDIuZXh0ZW5zaW9uc1tcIipcIl0sIGV4dFtrXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblx0XHR9XG5cdFx0cmV0dXJuIG0yZDIubWFpbjsgLy9UT0RPOiBkb2N1bWVudGF0aW9uIDogY29uc3QgJCA9IG0yZDIubG9hZCgpO1xuXHR9XG5cdC8qKlxuXHQgKiBNMkQyIFdpbGwgc2V0IGFsbCBleHRlbnNpb25zIHRvIERPTSBvYmplY3RzIC8vVE9ETzogZG9jdW1lbnRhdGlvblxuXHQgKiBAcGFyYW0ge3N0cmluZywgSFRNTEVsZW1lbnR9IHNlbGVjdG9yXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnQsIE5vZGV9IFskcm9vdF1cblx0ICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuXHQgKiBURVNUOiAwMVxuXHQgKi9cblx0ZXh0RG9tKHNlbGVjdG9yLCAkcm9vdCkge1xuXHRcdGlmKCEgc2VsZWN0b3IpIHsgIC8vIERvIG5vdCBwcm9jZWVkIGlmIHNlbGVjdG9yIGlzIG51bGwsIGVtcHR5IG9yIHVuZGVmaW5lZFxuXHRcdFx0Y29uc29sZS5lcnJvcihcIlNlbGVjdG9yIHdhcyBlbXB0eVwiKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRpZigkcm9vdCA9PT0gdW5kZWZpbmVkKSB7ICRyb290ID0gZG9jdW1lbnQgfVxuXHRcdGNvbnN0ICRub2RlID0gbTJkMi51dGlscy5pc05vZGUoc2VsZWN0b3IpID8gc2VsZWN0b3IgOiAkcm9vdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblx0XHRpZighICRub2RlKSB7XG5cdFx0XHRpZihtMmQyLnV0aWxzLmlzU3RyaW5nKHNlbGVjdG9yKSkge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiU2VsZWN0b3I6IFwiICsgc2VsZWN0b3IgKyBcIiBkaWRuJ3QgbWF0Y2ggYW55IGVsZW1lbnQgaW4gbm9kZTpcIik7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCRyb290KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJOb2RlIHdhcyBudWxsXCIpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGlmKCRub2RlLl9tMmQyID09PSB1bmRlZmluZWQpIHtcblx0XHRcdCRub2RlLl9tMmQyID0gdHJ1ZTsgLy9mbGFnIHRvIHByZXZlbnQgaXQgZnJvbSByZS1hc3NpZ24gbWV0aG9kc1xuXHRcdFx0W1wicGFyZW50XCIsXCJzaWJsaW5nXCIsXCJuZXh0XCIsXCJwcmV2XCIsXCJmaW5kXCIsXCJmaW5kQWxsXCIsXCJvbnVwZGF0ZVwiLFwib25yZWFkeVwiLFwic2hvd1wiLFwib25zaG93XCIsXCJpblZpZXdcIixcImNzc1wiLFwidGV4dFwiLFwiaHRtbFwiLFwiZ2V0RGF0YVwiLFwiaW5kZXhcIl0uZm9yRWFjaChmID0+IHtcblx0XHRcdFx0aWYoJG5vZGUuaGFzT3duUHJvcGVydHkoZikpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIk5vZGUgYWxyZWFkeSBoYWQgW1wiK2YrXCJdIHByb3BlcnR5LiBJdCBtaWdodCBjYXVzZSB1bmV4cGVjdGVkIGJlaGF2aW91ci5cIilcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIllvdSBtYXkgbmVlZCB0byB1cGRhdGUgdGhlIE0yRDIgdmVyc2lvbiBvciByZXBvcnQgaXQgdG86IGdpdGh1Yi5jb20vaW50ZWxsaXNyYy9tMmQyL1wiKVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdC8vIFByb3BlcnRpZXM6XG5cdFx0XHQvLyBURVNUOiAwMSwgLi4uXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoJG5vZGUsIFwidGV4dFwiLCB7XG5cdFx0XHRcdGdldCgpIHsgcmV0dXJuIHRoaXMuY2hpbGROb2Rlcy5sZW5ndGggPyB0aGlzLmlubmVyVGV4dCA6IHRoaXMudGV4dENvbnRlbnQ7IH0sXG5cdFx0XHRcdHNldCh2YWx1ZSkge1xuXHRcdFx0XHRcdC8vIHRleHQgc2hvdWxkIG9ubHkgY2hhbmdlIFRleHQgbm9kZXMgYW5kIG5vdCBjaGlsZHJlbjogLy9UT0RPOiBkb2N1bWVudGF0aW9uXG5cdFx0XHRcdFx0aWYodGhpcy5jaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0bGV0IGZvdW5kID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR0aGlzLmNoaWxkTm9kZXMuZm9yRWFjaChuID0+IHtcblx0XHRcdFx0XHRcdFx0aWYobi5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIlRleHRcIikge1xuXHRcdFx0XHRcdFx0XHRcdG4ubm9kZVZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGlmKCEgZm91bmQpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wcmVwZW5kKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbHVlKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvLyBURVNUOiA0MywxMywyNywuLi5cblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgkbm9kZSwgXCJodG1sXCIsIHtcblx0XHRcdFx0Z2V0KCkgeyByZXR1cm4gdGhpcy5pbm5lckhUTUw7IH0sXG5cdFx0XHRcdHNldCh2YWx1ZSkgeyB0aGlzLmlubmVySFRNTCA9IHZhbHVlOyAgfVxuXHRcdFx0fSk7XG5cdFx0XHQvLyBURVNUOiAwMlxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCRub2RlLCBcImNzc1wiLCB7ICAgLy9UT0RPOiBkb2N1bWVudCBuZXcgYmVoYXZpb3VyXG5cdFx0XHRcdGdldCgpIHtcblx0XHRcdFx0ICAgIHJldHVybiB0aGlzLmNsYXNzTGlzdDtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2V0KHZhbHVlKSB7XG5cdFx0XHRcdCAgICBpZihtMmQyLnV0aWxzLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgXHRcdFx0XHQgICAgdGhpcy5jbGFzc05hbWUgPSB2YWx1ZS5qb2luKFwiIFwiKTtcblx0XHRcdFx0ICAgIH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzU3RyaW5nKHZhbHVlKSkge1xuICAgIFx0XHRcdFx0ICAgIHRoaXMuY2xhc3NOYW1lID0gdmFsdWU7XG5cdFx0XHRcdCAgICB9IGVsc2UgaWYobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHRcdFx0XHQgICAgICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKGMgPT4ge1xuXHRcdFx0XHQgICAgICAgICAgICBpZih2YWx1ZVtjXSkge1xuXHRcdFx0XHQgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKGMpO1xuXHRcdFx0XHQgICAgICAgICAgICB9IGVsc2Uge1xuXHRcdFx0XHQgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuXHRcdFx0XHQgICAgICAgICAgICB9XG5cdFx0XHRcdCAgICAgICAgfSk7XG5cdFx0XHRcdCAgICB9IGVsc2Uge1xuXHRcdFx0XHQgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUcnlpbmcgdG8gYXNzaWduIGEgd3JvbmcgdmFsdWUgdG8gY3NzIDogXCIgKyB2YWx1ZSk7XG5cdFx0XHRcdCAgICB9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Ly8gVEVTVDogMTZcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgkbm9kZSwgXCJzaG93XCIsIHtcblx0XHRcdFx0Z2V0KCkgeyAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRcdCAgICByZXR1cm4gbTJkMi51dGlscy5pc1Zpc2libGUodGhpcyk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNldChzaG93KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNzc0Rpc3BsYXkgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLCBudWxsKS5kaXNwbGF5O1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0RGlzcGxheSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy50YWdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuYXBwZW5kKG4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYi5hcHBlbmQodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5ID0gZ2V0Q29tcHV0ZWRTdHlsZShuLCBudWxsKS5kaXNwbGF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaXNwbGF5O1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZihzaG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjc3NEaXNwbGF5KCkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5fbTJkMl9kaXNwbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IHRoaXMuX20yZDJfZGlzcGxheTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiZGlzcGxheVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3NzRGlzcGxheSgpID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFNob3cgPSBkZWZhdWx0RGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gdGhpcy5kYXRhc2V0LmRpc3BsYXkgfHwgKGRlZmF1bHRTaG93ICE9PSBcIm5vbmVcIiA/IGRlZmF1bHRTaG93IDogXCJibG9ja1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBURVNUOiAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMub25zaG93ICE9PSB1bmRlZmluZWQgJiYgbTJkMi51dGlscy5pc0Z1bmN0aW9uKHRoaXMub25zaG93KSkgeyAvL1RPRE86IGRvY3VtZW50IG9uc2hvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uc2hvdyh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdG9yZWQgPSB0aGlzLnN0eWxlLmRpc3BsYXkgIT09IFwibm9uZVwiID8gdGhpcy5zdHlsZS5kaXNwbGF5IDogY3NzRGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3RvcmVkICE9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX20yZDJfZGlzcGxheSA9IHN0b3JlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvL1RPRE86IGRvY3VtZW50IGhvdyB0byBleHRlbmRcblx0XHRcdC8vVE9ETzogdGVzdFxuXHRcdFx0bGV0IGV4dGVuZCA9IHt9O1xuXHRcdFx0aWYobTJkMi5leHRlbnNpb25zW1wiKlwiXSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdE9iamVjdC5hc3NpZ24oZXh0ZW5kLCBtMmQyLmV4dGVuc2lvbnNbXCIqXCJdKTtcblx0XHRcdH1cblx0XHRcdGlmKG0yZDIuZXh0ZW5zaW9uc1skbm9kZS50YWdOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdE9iamVjdC5hc3NpZ24oZXh0ZW5kLCBtMmQyLmV4dGVuc2lvbnNbJG5vZGUudGFnTmFtZV0pO1xuXHRcdFx0fVxuXHRcdFx0Ly8gRnVuY3Rpb25zOlxuXHRcdFx0T2JqZWN0LmFzc2lnbigkbm9kZSwge1xuXHRcdFx0ICAgIGluVmlldzogKCkgPT4geyAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHQgICAgICAgIHJldHVybiBtMmQyLnV0aWxzLmluVmlldygkbm9kZSk7XG5cdFx0XHQgICAgfSxcblx0XHRcdFx0bmV4dDogKCkgPT4geyAvL1RFU1Q6IDA3XG5cdFx0XHRcdCAgICByZXR1cm4gJG5vZGUubmV4dEVsZW1lbnRTaWJsaW5nO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRwcmV2OiAoKSA9PiB7IC8vVEVTVDogMDdcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRub2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHBhcmVudDogKCkgPT4geyAvL1RPRE86IHRlc3Rcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5leHREb20oJG5vZGUucGFyZW50RWxlbWVudCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNpYmxpbmc6IChzZWwpID0+IHsgLy9UT0RPOiB0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuICRub2RlLnBhcmVudEVsZW1lbnQuZmluZChzZWwpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmaW5kOiAoaXQpID0+IHsgLy8gVGVzdDogMDRcblx0XHRcdFx0XHRjb25zdCBub2RlID0gJG5vZGUucXVlcnlTZWxlY3RvcihpdClcblx0XHRcdFx0XHRyZXR1cm4gbm9kZSA/IHRoaXMuZXh0RG9tKG5vZGUpIDogbnVsbDtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZmluZEFsbDogKGl0KSA9PiB7IC8vVEVTVDogMDVcblx0XHRcdFx0XHRjb25zdCBub2RlTGlzdCA9IGl0ID09PSB1bmRlZmluZWQgPyBBcnJheS5mcm9tKCRub2RlLmNoaWxkcmVuKSA6ICRub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoaXQpO1xuXHRcdFx0XHRcdG5vZGVMaXN0LmZvckVhY2gobiA9PiB7IHRoaXMuZXh0RG9tKG4pIH0pO1xuXHRcdFx0XHRcdHJldHVybiBub2RlTGlzdDtcblx0XHRcdFx0fSxcblx0XHRcdH0sIGV4dGVuZCk7XG5cdFx0XHQvLyBTb21lIGVsZW1lbnRzIGxpa2UgPE9QVElPTj4gYWxyZWFkeSBoYXZlIGluZGV4XG5cdFx0XHRpZigkbm9kZS5pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdCRub2RlLmluZGV4ID0gKCkgPT4geyAvL1RFU1Q6IDA3XG5cdFx0XHRcdFx0cmV0dXJuIEFycmF5LmZyb20oJG5vZGUucGFyZW50Tm9kZS5jaGlsZHJlbikuaW5kZXhPZigkbm9kZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIExldCBhdHRyaWJ1dGVzIGtub3cgYWJvdXQgY2hhbmdlcyBpbiB2YWx1ZXMgLy9UT0RPOiB0ZXN0XG5cdFx0XHRpZihbXCJJTlBVVFwiLCBcIlRFWFRBUkVBXCIsIFwiU0VMRUNUXCJdLmluZGV4T2YoJG5vZGUudGFnTmFtZSkgPj0gMCAmJiBtMmQyLnV0aWxzLmhhc0F0dHJPclByb3AoJG5vZGUsIFwidmFsdWVcIikpIHtcblx0XHRcdFx0JG5vZGUub25pbnB1dCA9IGZ1bmN0aW9uKCkgeyB0aGlzLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHRoaXMudmFsdWUgKX1cblx0XHRcdH1cblx0XHRcdC8vIEFkZCBnZXREYXRhKCkgdG8gZm9ybTogLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0aWYoJG5vZGUudGFnTmFtZSA9PT0gXCJGT1JNXCIpIHtcblx0XHRcdFx0JG5vZGUuZ2V0RGF0YSA9IGZ1bmN0aW9uIChpbmNsdWRlTm90VmlzaWJsZSkgeyAvL1RPRE8gZG9jdW1lbnQ6IGluY2x1ZGVOb3RWaXNpYmxlXG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IHt9O1xuXHRcdFx0XHRcdGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhKHRoaXMpO1xuXHRcdFx0XHRcdGNvbnN0IGluY2x1ZGUgPSBpbmNsdWRlTm90VmlzaWJsZSB8fCBmYWxzZTtcblx0XHRcdFx0XHRmb3IgKGxldCBwYWlyIG9mIGZkLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbSA9ICRub2RlLmZpbmQoXCJbbmFtZT0nXCIrcGFpclswXStcIiddXCIpO1xuXHRcdFx0XHRcdFx0aWYoaW5jbHVkZSB8fCBlbGVtLnR5cGUgPT09IFwiaGlkZGVuXCIgfHwgZWxlbS5zaG93KSB7XG5cdFx0XHRcdFx0XHRcdGRhdGFbcGFpclswXV0gPSBlbGVtLnR5cGUgPT09IFwiZmlsZVwiID8gZWxlbS5maWxlcyA6IHBhaXJbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gJG5vZGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiAkbm9kZTtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCAqIE0yRDIgd2lsbCBjcmVhdGUgY3VzdG9tIGxpbmtzIGFuZCBwcm9wZXJ0aWVzXG5cdCAqIEBwYXJhbSB7c3RyaW5nLCBIVE1MRWxlbWVudCwgTm9kZX0gc2VsZWN0b3Jcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnQsIFByb3h5fVxuXHQgKiBURVNUOiAwMywuLi5cblx0ICovXG5cdGRvRG9tKHNlbGVjdG9yLCBvYmplY3QpIHtcblx0XHQvLyBXaGVuIG5vIHNlbGVjdG9yIGlzIHNwZWNpZmllZCwgc2V0IFwiYm9keVwiXG5cdFx0aWYobTJkMi51dGlscy5pc09iamVjdChzZWxlY3RvcikgJiYgb2JqZWN0ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdG9iamVjdCA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSBtMmQyLnV0aWxzLm5ld0VtcHR5Tm9kZSgpOyAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRpZihvYmplY3Qud2FybiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHQgICAgb2JqZWN0Lndhcm4gPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoIShtMmQyLnV0aWxzLmlzU3RyaW5nKHNlbGVjdG9yKSB8fCBtMmQyLnV0aWxzLmlzRWxlbWVudChzZWxlY3RvcikgfHwgbTJkMi51dGlscy5pc05vZGUoc2VsZWN0b3IpKSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIlNlbGVjdG9yIGlzIG5vdCBhIHN0cmluZyBvciBhIE5vZGU6XCIpXG5cdFx0XHRjb25zb2xlLmxvZyhzZWxlY3Rvcik7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0aWYobTJkMi51dGlscy5pc1N0cmluZyhzZWxlY3RvcikgJiYhIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpKSB7XG5cdFx0ICAgIGNvbnNvbGUubG9nKFwiU2VsZWN0ZWQgZWxlbWVudCBkb2Vzbid0IGV4aXN0czogXCIgKyBzZWxlY3Rvcilcblx0XHQgICAgcmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGNvbnN0ICRub2RlID0gdGhpcy5leHREb20oc2VsZWN0b3IpOyAvLyBCZSBzdXJlIHRoYXQgJG5vZGUgaXMgYW4gZXh0ZW5kZWQgRE9NIG9iamVjdFxuXHRcdC8vIElmIHRoZXJlIGlzIG5vIG9iamVjdCByZXR1cm4gb25seSBleHRlbnNpb25cblx0XHRpZihvYmplY3QgPT09IHVuZGVmaW5lZCkgeyAvL1RPRE86IGRvY3VtZW50YXRpb246IGV4dGVuZGluZyBub2Rlc1xuXHRcdFx0cmV0dXJuICRub2RlO1xuXHRcdH1cblx0XHRvYmplY3QgPSB0aGlzLnBsYWluVG9PYmplY3QoJG5vZGUsIG9iamVjdCk7IC8vIEJlIHN1cmUgaXQncyBhbiBvYmplY3RcblxuXHRcdC8vIFRFU1Q6IDAzXG5cdFx0Ly8gV2UgZmlsdGVyLW91dCBzb21lIGtub3duIGtleXM6XG5cdFx0T2JqZWN0LmtleXMob2JqZWN0KS5maWx0ZXIoaXQgPT4gISBbXCJ0YWdOYW1lXCJdLmluY2x1ZGVzKGl0KSkuZm9yRWFjaChrZXkgPT4ge1xuXHRcdFx0bGV0IG9yaWdWYWx1ZSA9IG9iamVjdFtrZXldO1xuXHRcdFx0aWYob3JpZ1ZhbHVlID09PSB1bmRlZmluZWQgfHwgb3JpZ1ZhbHVlID09PSBudWxsKSB7XG5cdFx0XHQgICAgY29uc29sZS5sb2coXCJWYWx1ZSB3YXMgbm90IHNldCBmb3Iga2V5OiBcIiArIGtleSArIFwiLCAnZW1wdHknIHdhcyB1c2VkIGluIG9iamVjdDogXCIpO1xuXHRcdFx0ICAgIGNvbnNvbGUubG9nKG9iamVjdCk7XG5cdFx0XHQgICAgY29uc29sZS5sb2coXCJJbiBub2RlOlwiKTtcblx0XHRcdCAgICBjb25zb2xlLmxvZygkbm9kZSk7XG5cdFx0XHQgICAgb3JpZ1ZhbHVlID0gXCJcIjtcblx0IFx0XHR9XG4gICAgICAgICAgICAvL0xvb2sgZm9yIG9udXBkYXRlIGlubGluZSAoWyBOb2RlLCBzdHJpbmcgXSlcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IHRoaXMudXBkYXRlVmFsdWUoJG5vZGUsIGtleSwgb3JpZ1ZhbHVlKTtcblx0XHRcdC8vTG9vayBmb3IgcHJvcGVydHkgZmlyc3Q6XG5cdFx0XHRsZXQgaXNQcm9wID0gbTJkMi51dGlscy5oYXNQcm9wKCRub2RlLCBrZXkpO1xuXHRcdFx0bGV0IGlzQXR0ciA9IG0yZDIudXRpbHMuaGFzQXR0cigkbm9kZSwga2V5KTtcblx0XHRcdC8vSWRlbnRpZnkgaWYgdmFsdWUgbWF0Y2hlcyBwcm9wZXJ0eSB0eXBlOlxuXHRcdFx0bGV0IGZvdW5kTWF0Y2ggPSBmYWxzZTtcblx0XHRcdGlmKGlzQXR0ciB8fCBpc1Byb3ApIHtcblx0XHRcdFx0Ly8gbm9pbnNwZWN0aW9uIEZhbGxUaHJvdWdoSW5Td2l0Y2hTdGF0ZW1lbnRKU1xuXHRcdFx0XHRzd2l0Y2godHJ1ZSkge1xuXHRcdFx0XHRcdC8vIE1hdGggZm91bmQ6XG5cdFx0XHRcdFx0Y2FzZSBrZXkgPT09IFwidmFsdWVcIiAmJiBtMmQyLnV0aWxzLmhhc1Byb3AoJG5vZGUsIFwidmFsdWVBc0RhdGVcIikgJiYgdmFsdWUgaW5zdGFuY2VvZiBEYXRlOiAvLyBEYXRlc1xuXHRcdFx0XHRcdFx0a2V5ID0gXCJ2YWx1ZUFzRGF0ZVwiOyAvL3JlbmFtZWQgdmFsdWUgdG8gdmFsdWVBc0RhdGVcblx0XHRcdFx0XHRjYXNlIGtleSA9PT0gXCJjc3NcIjogLy8gY3NzIGlzIGEgUHJveHkgc28gaXQgZmFpbHMgdG8gdmVyaWZ5OlxuXHRcdFx0XHRcdGNhc2UgdHlwZW9mIHZhbHVlID09PSB0eXBlb2YgJG5vZGVba2V5XTogLy9TYW1lIFRpbWVcblx0XHRcdFx0XHRjYXNlIG0yZDIudXRpbHMuaXNTdHJpbmcoJG5vZGVba2V5XSkgJiYgbTJkMi51dGlscy5pc051bWVyaWModmFsdWUpOiAvL051bWVyaWMgcHJvcGVydGllc1xuXHRcdFx0XHRcdGNhc2UgKG0yZDIudXRpbHMuaXNGdW5jdGlvbih2YWx1ZSkgJiYgbTJkMi51dGlscy5pc09iamVjdCgkbm9kZVtrZXldKSk6IC8vRnVuY3Rpb25zXG5cdFx0XHRcdFx0Y2FzZSBtMmQyLnV0aWxzLmlzQm9vbCh2YWx1ZSkgJiYgbTJkMi51dGlscy5pc1N0cmluZygkbm9kZVtrZXldKTogLy9Cb29sZWFuXG5cdFx0XHRcdFx0Y2FzZSB0eXBlb2YgJG5vZGVba2V5XSA9PT0gXCJvYmplY3RcIiAmJiAkbm9kZS50YWdOYW1lID09PSBcIklOUFVUXCI6IC8vQ2FzZXMgbGlrZSBcImxpc3RcIiBpbiBpbnB1dFxuXHRcdFx0XHRcdFx0Zm91bmRNYXRjaCA9IHRydWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gUHJvcGVydGllcyBhbmQgQXR0cmlidXRlczpcblx0XHRcdGlmKGZvdW5kTWF0Y2gpIHtcblx0XHRcdFx0bGV0IGVycm9yID0gZmFsc2U7XG5cdFx0XHRcdHN3aXRjaChrZXkpIHtcblx0XHRcdFx0XHRjYXNlIFwiY2xhc3NMaXN0XCI6IC8vVE9ETzogdGVzdFxuXHRcdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0XHR2YWx1ZS5mb3JFYWNoKHYgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdCRub2RlW2tleV0uYWRkKHYpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzU3RyaW5nKHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0XHQkbm9kZVtrZXldLmFkZCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRlcnJvciA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHRcdGNhc2UgXCJzdHlsZVwiOiAvL1RPRE86IHRlc3Rcblx0XHRcdFx0XHRjYXNlIFwiZGF0YXNldFwiOiAvL1RPRE86IGFzIGl0IGlzIGFscmVhZHkgYSBET00sIHdlIGRvbid0IG5lZWQgaXQgbWF5YmU/XG5cdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRcdE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKGsgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdCRub2RlW2tleV1ba10gPSB0aGlzLnVwZGF0ZVZhbHVlKCRub2RlW2tleV0sIGssIHZhbHVlW2tdKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRlcnJvciA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRzd2l0Y2godHJ1ZSkge1xuXHRcdFx0XHRcdFx0XHRjYXNlIG0yZDIudXRpbHMuaXNCb29sKHZhbHVlKTogLy8gYm9vbGVhbiBwcm9wZXJ0aWVzXG5cdFx0XHRcdFx0XHRcdGNhc2UgbTJkMi51dGlscy5oYXNBdHRyT3JQcm9wKCRub2RlLCBrZXkpOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtMmQyLnV0aWxzLnNldFByb3BPckF0dHIoJG5vZGUsIGtleSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdFx0JG5vZGVba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkludmFsaWQgdmFsdWUgcGFzc2VkIHRvICdcIiArIGtleSArIFwiJzogXCIpXG5cdFx0XHRcdFx0Y29uc29sZS5sb2codmFsdWUpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiSW50byBOb2RlOlwiKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygkbm9kZSk7XG5cdFx0XHRcdH1cblx0XHRcdC8vIExvb2sgZm9yIGVsZW1lbnRzOlxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdCAgICBjb25zdCBvcHRpb25zID0gW107XG5cdFx0XHQgICAgdHJ5IHtcblx0XHRcdCAgICAgICAgLy8gVEVTVDogMDNcblx0XHRcdCAgICAgICAgLy8gRnVuY3Rpb25zIGNhbiBub3QgYmUgcGxhY2VkIGRpcmVjdGx5IGludG8gZWxlbWVudHMsIHNvIHdlIHNraXBcblx0XHRcdCAgICAgICAgaWYoa2V5ICE9PSBcInRlbXBsYXRlXCIgJiYhIG0yZDIudXRpbHMuaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTG9vayBmb3IgSUQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihrZXkgJiYga2V5Lm1hdGNoKC9eXFx3LykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWxlbSA9ICRub2RlLmZpbmQoXCIjXCIgKyBrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW0gJiYgb3B0aW9ucy5pbmRleE9mKGVsZW0pID09PSAtMSkgeyBvcHRpb25zLnB1c2goZWxlbSk7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0xvb2sgZm9yIG5hbWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9ICRub2RlLmZpbmQoXCJbbmFtZT0nXCIra2V5K1wiJ11cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbSAmJiBvcHRpb25zLmluZGV4T2YoZWxlbSkgPT09IC0xKSB7IG9wdGlvbnMucHVzaChlbGVtKTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTG9vayBmb3IgY2xhc3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbXMgPSBBcnJheS5mcm9tKCRub2RlLmZpbmRBbGwoXCIuXCIgKyBrZXkpKS5maWx0ZXIoaSA9PiBvcHRpb25zLmluZGV4T2YoaSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1zLmxlbmd0aCA+IDApIHsgZWxlbXMuZm9yRWFjaChlID0+IG9wdGlvbnMucHVzaChlKSkgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Mb29rIGZvciBlbGVtZW50IG9yIGZyZWUgc2VsZWN0b3IgKGUuZzogXCJkaXYgPiBzcGFuXCIpOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbXMgPSAgQXJyYXkuZnJvbSgkbm9kZS5maW5kQWxsKGtleSkpLmZpbHRlcihpID0+IG9wdGlvbnMuaW5kZXhPZihpKSA8IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtcy5sZW5ndGggPiAwKSB7IGVsZW1zLmZvckVhY2goZSA9PiBvcHRpb25zLnB1c2goZSkpIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0ICAgIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIHNlbGVjdG9yOiBcIiArIGtleSk7XG5cdFx0XHRcdCAgICBjb25zb2xlLmxvZyhlKTtcblx0XHRcdFx0ICAgIHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihvcHRpb25zLmxlbmd0aCA+IDEpIHtcblx0XHRcdFx0XHRjb25zdCBpdGVtcyA9IFtdO1xuXHRcdFx0XHRcdG9wdGlvbnMuZm9yRWFjaChpdGVtID0+IHtcblx0XHRcdFx0XHRcdGl0ZW1zLnB1c2godGhpcy5yZW5kZXIoaXRlbSwga2V5LCB2YWx1ZSkpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHRoaXMubGlua05vZGUoJG5vZGUsIGtleSwgaXRlbXMpO1xuXHRcdFx0XHRcdGlmKHZhbHVlLndhcm4gPT09IHVuZGVmaW5lZCB8fCB2YWx1ZS53YXJuICE9PSBmYWxzZSkgeyAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIk11bHRpcGxlIGVsZW1lbnRzIHdlcmUgYXNzaWduZWQgd2l0aCBrZXk6IFtcIiArIGtleSArIFwiXSB1bmRlciBub2RlOiBcIilcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiSXQgbWlnaHQgYmUgd2hhdCB3ZSBleHBlY3QsIGJ1dCBpZiBpdCBpcyBub3QgZXhwZWN0ZWQgaXQgY291bGQgcmVzdWx0IFwiICtcblx0XHRcdFx0XHRcdFx0XHRcdFwib24gc29tZSBlbGVtZW50cyBtaXN0YWtlbmx5IHJlbmRlcmVkLiBZb3UgY2FuIHNwZWNpZnkgXCIgK1xuXHRcdFx0XHRcdFx0XHRcdFx0XCInd2FybiA6IGZhbHNlJyB1bmRlciB0aGF0IGVsZW1lbnQgdG8gaGlkZSB0aGlzIG1lc3NhZ2UuXCIpIC8vVE9ETzogYWRkIGxpbmsgdG8gcmVmZXJlbmNlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYob3B0aW9ucy5sZW5ndGggPT09IDEpIHsgLy8gRm91bmQgc2luZ2xlIG9wdGlvbjogcGxhY2UgdmFsdWVzXG5cdFx0XHRcdFx0Y29uc3Qgb3B0ID0gb3B0aW9uc1swXTtcblx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzRWxlbWVudChvcHQpKSB7IC8vVE9ETzogdGVzdCAobm8gdGVtcGxhdGUgb3Igbm8gaXRlbXMpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmogPSB0aGlzLnBsYWluVG9PYmplY3Qob3B0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRfa2V5ID0gbTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG9iaikgJiYgT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPj0gMSA/IE9iamVjdC5rZXlzKG9iailbMF0gOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYob3B0X2tleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy51cGRhdGVWYWx1ZShvcHQsIG9wdF9rZXksIG9yaWdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzQXJyYXkodmFsdWUpKSB7IC8vIFByb2Nlc3MgQXJyYXlcblx0XHRcdFx0XHRcdFx0Y29uc3QgdGVtcGxhdGUgPSBvYmplY3RbXCJ0ZW1wbGF0ZVwiXTtcblx0XHRcdFx0XHRcdFx0dGhpcy5kb0l0ZW1zKG9wdCwgdmFsdWUsIHRlbXBsYXRlKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5saW5rTm9kZSgkbm9kZSwga2V5LCBvcHQpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHsgLy8gTm9ybWFsIE9iamVjdHM6XG5cdFx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQW5kTGluaygkbm9kZSwgb3B0LCBrZXksIHZhbHVlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkJVRzogSXQgc2hvdWxkIGhhdmUgYmVlbiBhIG5vZGUgYnV0IGdvdDogXCIpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2cob3B0KTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUGFyZW50IG5vZGU6XCIpXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygkbm9kZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYob3B0aW9ucy5sZW5ndGggPT09IDApIHsgLy9ObyBvcHRpb25zIGZvdW5kOiBjcmVhdGUgbm9kZXNcblx0XHRcdFx0ICAgIC8vIE1ha2UgXCJpdGVtc1wiIG9wdGlvbmFsOiAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRcdFx0aWYoa2V5ID09PSBcInRlbXBsYXRlXCIgJiYgb2JqZWN0W1wiaXRlbXNcIl0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdCAgICBrZXkgPSBcIml0ZW1zXCI7XG5cdFx0XHRcdFx0ICAgIHZhbHVlID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IGlzRnVuYyA9IG0yZDIudXRpbHMuaXNGdW5jdGlvbih2YWx1ZSk7XG5cdFx0XHRcdFx0aWYodmFsdWUudGFnTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRjb25zdCAkbmV3Tm9kZSA9IHRoaXMuYXBwZW5kRWxlbWVudCgkbm9kZSwgdmFsdWUudGFnTmFtZSk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlckFuZExpbmsoJG5vZGUsICRuZXdOb2RlLCBrZXksIHZhbHVlKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYobTJkMi51dGlscy5pc1ZhbGlkRWxlbWVudChrZXkpICYmISBpc0Z1bmMpIHtcblx0XHRcdFx0XHRcdGNvbnN0ICRuZXdOb2RlID0gdGhpcy5hcHBlbmRFbGVtZW50KCRub2RlLCBrZXkpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJBbmRMaW5rKCRub2RlLCAkbmV3Tm9kZSwga2V5LCB2YWx1ZSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKGtleSA9PT0gXCJpdGVtc1wiKSB7IC8vSXRlbXMgY3JlYXRpb25cblx0XHRcdFx0XHRcdGNvbnN0IHRlbXBsYXRlID0gb2JqZWN0W1widGVtcGxhdGVcIl07XG5cdFx0XHRcdFx0XHQvLyBBbGxvdyB1c2Ugb2YgcGxhaW4gb2JqZWN0IHRvIHNwZWNpZnkgdmFsdWUgLT4gdGV4dCAvL1RPRE86IGRvY3VtZW50YXRpb25cblx0XHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0XHRcdFx0XHRcdCAgICBjb25zdCB2YWxUbXAgPSBbXTtcblx0XHRcdFx0XHRcdCAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaChvID0+IHtcblx0XHRcdFx0XHRcdCAgICBcdGxldCBvYmo7XG5cdFx0XHRcdFx0XHQgICAgXHRpZigkbm9kZS50YWdOYW1lID09PSBcIkRMXCIpIHsgLy9UT0RPOiBkb2N1bWVudCBETFxuXHRcdFx0XHRcdFx0XHRcdFx0b2JqID0geyBkdCA6IG8sIGRkIDogdmFsdWVbb10gfVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvYmogPSB7IHRleHQ6IHZhbHVlW29dIH07XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobTJkMi51dGlscy5oYXNBdHRyT3JQcm9wKCRub2RlLCBcInZhbHVlXCIpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG9iai52YWx1ZSA9IG87XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRvYmouZGF0YXNldCA9IHtpZDogb307XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHZhbFRtcC5wdXNoKG9iaik7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0ICAgIHZhbHVlID0gdmFsVG1wO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Ly8gUHJvY2VzcyBBcnJheTpcblx0XHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5kb0l0ZW1zKCRub2RlLCB2YWx1ZSwgdGVtcGxhdGUpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJXYXJuaW5nOiAnaXRlbXMnIHNwZWNpZmllZCBidXQgdmFsdWUgaXMgbm90IGFuZCBhcnJheSwgaW4gZWxlbWVudDogXCIpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygkbm9kZSk7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiUGFzc2VkIHZhbHVlcyBhcmU6IFwiKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2codmFsdWUpO1xuXHRcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0fSBlbHNlIGlmKGlzRnVuYykge1xuXHRcdFx0XHRcdFx0aWYobTJkMi51cGRhdGVzKSB7XG5cdFx0XHRcdFx0XHQgICAgLy8gQnkgdXNpbmcgYWRkRXZlbnRMaXN0ZW5lciB3ZSBjYW4gYXNzaWduIG11bHRpcGxlIGxpc3RlbmVycyB0byBhIHNpbmdsZSBub2RlIC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0XHRcdFx0aWYgKGtleSA9PT0gXCJvbnVwZGF0ZVwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0JG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZVwiLCB2YWx1ZSwgdHJ1ZSk7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0JG5vZGVba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihrZXkgIT09IFwidGVtcGxhdGVcIiAmJiAoa2V5ICE9PSBcIndhcm5cIiAmJiB2YWx1ZSAhPT0gZmFsc2UpKSB7IC8vV2UgaGFuZGxlIHRlbXBsYXRlcyBpbnNpZGUgaXRlbXNcblx0XHRcdFx0XHRcdGlmKG9iamVjdC53YXJuID09PSB1bmRlZmluZWQgfHwgb2JqZWN0Lndhcm4gIT09IGZhbHNlKSB7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIk5vdCBzdXJlIHdoYXQgeW91IHdhbnQgdG8gZG8gd2l0aCBrZXk6IFwiICsga2V5ICsgXCIgdW5kZXIgZWxlbWVudDogXCIpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygkbm9kZSk7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiQW5kIG9iamVjdDpcIik7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKG9iamVjdCk7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTW9zdCBsaWtlbHkgdGhlIGVsZW1lbnQncyBwcm9wZXJ0eSBvciBjaGlsZCBubyBsb25nZXIgZXhpc3RzIG9yIHRoZSB2YWx1ZVwiICtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCIgcGFzc2VkIHRvIGl0IGlzIGluY29ycmVjdC5cIik7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiWW91IGNhbiBzZXQgJ3dhcm4gOiBmYWxzZScgcHJvcGVydHkgdG8gdGhlIGVsZW1lbnQgdG8gZGlzbWlzcyB0aGlzIG1lc3NhZ2UuXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0JG5vZGVba2V5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vIERpc3BhdGNoIG9ubG9hZCBldmVudCAoaWYgaXRzIG5vdCBuYXRpdmUpOiAvL1RPRE86IERvY3VtZW50XG5cdFx0aWYoJG5vZGUub25sb2FkKSB7XG5cdFx0ICAgIGNvbnN0IG5hdGl2ZSA9IFtcIkJPRFlcIixcIkZSQU1FXCIsXCJJRlJBTUVcIixcIklNR1wiLFwiTElOS1wiLFwiU0NSSVBUXCIsXCJTVFlMRVwiXS5pbmRleE9mKCRub2RlLnRhZ05hbWUpID49IDA7XG5cdFx0ICAgIGNvbnN0IGlucHV0SW1hZ2UgPSAkbm9kZS50YWdOYW1lID09PSBcIklOUFVUXCIgJiYgJG5vZGUudHlwZSA9PT0gXCJpbWFnZVwiO1xuXHRcdCAgICBpZighIChuYXRpdmUgfHwgaW5wdXRJbWFnZSkpIHtcblx0XHQgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gYWRkIHRoZSBldmVudCBhcyBpdCBleGlzdHMgbmF0aXZlbHkgYW5kIGl0IHdhcyBhc3NpZ25lZCBkdXJpbmc6ICRub2RlLm9ubG9hZCA9IC4uLjtcbiAgICAgICAgICAgICAgICAkbm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnbG9hZCcpKTtcblx0XHQgICAgfVxuXHRcdH1cblx0XHRyZXR1cm4gJG5vZGU7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIElkZW50aWZ5IGlmIHZhbHVlIGlzIGFuIHVwZGF0ZSBsaW5rIChpbmxpbmUgb251cGRhdGUpXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpc1VwZGF0ZUxpbmsodmFsdWUpIHtcbiAgICAgICAgbGV0IGlzTGluayA9IGZhbHNlXG4gICAgICAgIGlmKG0yZDIudXRpbHMuaXNBcnJheSh2YWx1ZSkgJiYgKHZhbHVlLmxlbmd0aCA9PT0gMiB8fCB2YWx1ZS5sZW5ndGggPT09IDMpKSB7XG4gICAgICAgICAgICBjb25zdCB0d29BcmdzID0gdmFsdWUubGVuZ3RoID09PSAyO1xuICAgICAgICAgICAgLy8gRmlyc3QgZWxlbWVudCBpbiBhcnJheSBtdXN0IGJlIE5vZGUgfHwgRG9tU3RyaW5nTWFwIChkYXRhc2V0KSB8fCBDU1NTdHlsZURlY2xhcmF0aW9uIChzdHlsZSlcbiAgICAgICAgICAgIGNvbnN0IGFjY2VwdGVkVHlwZSA9IG0yZDIudXRpbHMuaXNOb2RlKHZhbHVlWzBdKSB8fFxuICAgICAgICAgICAgICAgIHZhbHVlWzBdIGluc3RhbmNlb2YgRE9NU3RyaW5nTWFwIHx8XG4gICAgICAgICAgICAgICAgdmFsdWVbMF0gaW5zdGFuY2VvZiBDU1NTdHlsZURlY2xhcmF0aW9uXG4gICAgICAgICAgICAvLyBTZWNvbmQgbXVzdCBiZSAnc3RyaW5nJyBhbmQgVGhpcmQgY2FuIGJlIGEgJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgY29uc3Qgb3RoZXJUeXBlcyA9IHR3b0FyZ3MgPyBtMmQyLnV0aWxzLmlzU3RyaW5nKHZhbHVlWzFdKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWVbMV0pICYmIG0yZDIudXRpbHMuaXNGdW5jdGlvbih2YWx1ZVsyXSk7XG4gICAgICAgICAgICAvLyBJZiBvbmx5IHR3byBhcmdzIGFyZSBpbiBhcnJheSwgYWRkIGFuIGVtcHR5IGZ1bmN0aW9uOlxuICAgICAgICAgICAgaXNMaW5rID0gYWNjZXB0ZWRUeXBlICYmIG90aGVyVHlwZXM7XG4gICAgICAgICAgICBpZihpc0xpbmsgJiYgdHdvQXJncykgeyB2YWx1ZS5wdXNoKHYgPT4geyByZXR1cm4gdjsgfSkgfSAvL1RPRE86IERvY3VtZW50IGZ1bmN0aW9uXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzTGlua1xuICAgIH1cblxuICAgIC8qKlxuXHQgKiBDb252ZXJ0IHBsYWluIHZhbHVlIGludG8gb2JqZWN0IGlmIG5lZWRlZFxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSAkbm9kZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuICAgIHBsYWluVG9PYmplY3QoJG5vZGUsIHZhbHVlKSB7XG5cdFx0aWYoIW0yZDIudXRpbHMuaXNQbGFpbk9iamVjdCh2YWx1ZSkgJiYhIG0yZDIudXRpbHMuaXNGdW5jdGlvbih2YWx1ZSkgJiYhIG0yZDIudXRpbHMuaXNFbGVtZW50KHZhbHVlKSkge1xuXHRcdFx0Ly8gV2hlbiBzZXR0aW5nIHZhbHVlcyB0byB0aGUgbm9kZSAoc2ltcGxpZmllZCB2ZXJzaW9uKTpcblx0XHRcdGlmKG0yZDIudXRpbHMuaXNIdG1sKHZhbHVlKSkge1xuXHRcdFx0XHR2YWx1ZSA9IHsgaHRtbCA6IHZhbHVlIH07XG5cdFx0ICAgIH0gZWxzZSBpZih0aGlzLmlzVXBkYXRlTGluayh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvYmogID0gdmFsdWVbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHZhbHVlWzFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdmFsdWVbMl07XG5cdFx0ICAgICAgICBsZXQgdG1wVmFsID0gdGhpcy5wbGFpblRvT2JqZWN0KCRub2RlLCBjYWxsYmFjayhvYmpbcHJvcF0pKTtcblx0XHQgICAgICAgIGlmKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdCh0bXBWYWwpKSB7XG5cdFx0ICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB7fTtcblx0XHQgICAgICAgICAgICBPYmplY3Qua2V5cyh0bXBWYWwpLmZvckVhY2goayA9PiB7XG5cdFx0ICAgICAgICAgICAgICAgIG5ld1ZhbHVlW2tdID0gdmFsdWU7XG5cdFx0ICAgICAgICAgICAgfSk7XG5cdFx0ICAgICAgICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcblx0XHQgICAgICAgIH1cblx0XHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHQgICAgdmFsdWUgPSB7IGl0ZW1zIDogdmFsdWUgfTtcblx0XHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmhhc0F0dHJPclByb3AoJG5vZGUsIFwidmFsdWVcIikpIHtcblx0XHRcdFx0Ly8gSWYgdGhlIHBhcmVudCBpcyA8c2VsZWN0PiBzZXQgYWxzbyBhcyB0ZXh0IHRvIGl0ZW06XG5cdFx0XHRcdGlmKCRub2RlLnRhZ05hbWUgPT09IFwiU0VMRUNUXCIpIHtcblx0XHRcdFx0ICAgIHZhbHVlID0ge1xuXHRcdFx0XHQgICAgICAgIHZhbHVlIDogdmFsdWUsXG5cdFx0XHRcdCAgICAgICAgdGV4dCAgOiB2YWx1ZVxuXHRcdFx0XHQgICAgfTtcblx0XHRcdFx0fSBlbHNlIGlmKCRub2RlLnRhZ05hbWUgPT09IFwiQlVUVE9OXCIpIHtcblx0XHRcdFx0ICAgIHZhbHVlID0geyB0ZXh0IDogdmFsdWUgfTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ICAgIHZhbHVlID0geyB2YWx1ZSA6IHZhbHVlIH07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzU3RyaW5nKHZhbHVlKSAmJiAkbm9kZS50YWdOYW1lID09PSBcIklNR1wiKSB7XG5cdFx0XHQgICAgdmFsdWUgPSB7IHNyYyA6IHZhbHVlIH07XG5cdFx0XHR9IGVsc2UgaWYobTJkMi51dGlscy5pc1N0cmluZyh2YWx1ZSkgfHwgbTJkMi51dGlscy5pc051bWVyaWModmFsdWUpKSB7XG5cdFx0XHRcdHZhbHVlID0geyB0ZXh0IDogdmFsdWUgfTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlO1xuICAgIH1cblx0LyoqXG5cdCAqIFJlbmRlciBhbmQgTGluayBhIG5vZGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJHJvb3Rcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRyZW5kZXJBbmRMaW5rKCRyb290LCAkbm9kZSwga2V5LCB2YWx1ZSkge1xuXHRcdGNvbnN0ICRjaGlsZCA9IHRoaXMucmVuZGVyKCRub2RlLCBrZXksIHZhbHVlKTtcblx0XHR0aGlzLmxpbmtOb2RlKCRyb290LCBrZXksICRjaGlsZCk7XG5cdH1cblx0LyoqXG5cdCAqIFJlbmRlciBzb21lIHZhbHVlIGluIGEgbm9kZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybnMge1Byb3h5LCBIVE1MRWxlbWVudH1cblx0ICovXG5cdHJlbmRlcigkbm9kZSwga2V5LCB2YWx1ZSkge1xuXHQgICAgdmFsdWUgPSB0aGlzLnBsYWluVG9PYmplY3QoJG5vZGUsIHZhbHVlKTtcblx0XHRyZXR1cm4gdGhpcy5kb0RvbSgkbm9kZSwgdmFsdWUpOyAvLyBSZWN1cnNpdmUgZm9yIGVhY2ggZWxlbWVudFxuXHR9XG5cblx0LyoqXG5cdCAqIExpbmtzIGEgcHJvcGVydHkgdG8gYSBjaGlsZCBub2RlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJGNoaWxkXG5cdCAqL1xuXHRsaW5rTm9kZSgkbm9kZSwga2V5LCAkY2hpbGQpIHtcblx0XHRpZigkbm9kZVtrZXldID09PSAkY2hpbGQpIHtcblx0XHRcdGNvbnN0ICRwcm94eSA9IHRoaXMucHJveHkoJGNoaWxkKTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdCRub2RlW2tleV0gPSAkcHJveHk7XG5cdFx0XHR9IGNhdGNoKGlnbm9yZSkge1xuXHRcdFx0XHQvL05PVEU6IGFsdGhvdWdoIGl0IGZhaWxzIHdoZW4gdXNpbmcgZm9ybXMsIGZvcm0gaXMgYSBwcm94eSBzbyBpdCBzdGlsbCB3b3Jrcy5cblx0XHRcdH1cblx0XHRcdCRub2RlW1wiJFwiICsga2V5XSA9ICRwcm94eTtcblx0XHR9IGVsc2UgaWYobTJkMi51dGlscy5oYXNBdHRyT3JQcm9wKCRub2RlLCBrZXkpKSB7IC8vIE9ubHkgaWYgaXRzIG5vdCBhbiBhdHRyaWJ1dGUgb3IgcHJvcGVydHksIHdlIFwibGlua1wiIGl0LlxuXHRcdFx0JG5vZGVbXCIkXCIgKyBrZXldID0gJGNoaWxkOyAvL1JlcGxhY2UgbmFtZSB3aXRoIFwiJFwiICsgbmFtZVxuXHRcdFx0Y29uc29sZS5sb2coXCJQcm9wZXJ0eSA6IFwiICsga2V5ICsgXCIgZXhpc3RlZCBpbiBub2RlOiBcIiArICRub2RlLnRhZ05hbWUgK1xuXHRcdFx0XCIuIFVzaW5nICRcIiArIGtleSArIFwiIGluc3RlYWQgZm9yIG5vZGU6IFwiICsgJGNoaWxkLnRhZ05hbWUgKyBcIi5cIilcblx0XHR9IGVsc2Uge1xuXHRcdFx0JG5vZGVba2V5XSA9IHRoaXMucHJveHkoJGNoaWxkKTtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBkb20gZWxlbWVudCBpbnNpZGUgJG5vZGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcblx0ICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuXHQgKi9cblx0YXBwZW5kRWxlbWVudCAoJG5vZGUsIHRhZ05hbWUpIHtcblx0XHRjb25zdCAkbmV3RWxlbSA9IG0yZDIudXRpbHMubmV3RWxlbWVudCh0YWdOYW1lKTtcblx0XHQkbm9kZS5hcHBlbmQoJG5ld0VsZW0pO1xuXHRcdHJldHVybiAkbmV3RWxlbTtcblx0fVxuXG4gICAgLyoqXG5cdCAqIEdldCBhbiBpdGVtIHRvIGJlIGFkZGVkXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8bnVsbH0gJG5vZGVcblx0ICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSBpbmRleFxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkdGVtcGxhdGVcblx0ICovXG5cdGdldEl0ZW0oJG5vZGUsIGluZGV4LCBvYmosICR0ZW1wbGF0ZSkge1xuXHQgICAgaWYoISR0ZW1wbGF0ZSkge1xuXHRcdCAgICAkdGVtcGxhdGUgPSB0aGlzLmdldFRlbXBsYXRlKCRub2RlKTtcblx0XHR9XG4gICAgICAgIGNvbnN0ICRuZXdJdGVtID0gJHRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcblx0ICAgIC8vIENvcHkgdGVtcGxhdGVzIHRvIG5ldyBpdGVtOlxuXHQgICAgdGhpcy5hZGRUZW1wbGF0ZXNUb0l0ZW0oJHRlbXBsYXRlLCAkbmV3SXRlbSk7XG4gICAgICAgICRuZXdJdGVtLmRhdGFzZXQuaWQgPSBpbmRleDtcbiAgICAgICAgLy8gQWRkIFwic2VsZWN0ZWRcIiBwcm9wZXJ0eVxuICAgICAgICB0aGlzLnNldFVuaXF1ZUF0dHJpYigkbmV3SXRlbSwgXCJzZWxlY3RlZFwiKTsgLy9UT0RPOiBEb2N1bWVudFxuICAgICAgICAvLyBTZXQgdmFsdWVzIGFuZCBsaW5rc1xuXHRcdGxldCAkbmV3Tm9kZSA9IHRoaXMuZG9Eb20oJG5ld0l0ZW0sIG9iaik7XG5cdFx0Ly8gUGxhY2UgRXZlbnRzOlxuXHRcdHJldHVybiB0aGlzLmdldEl0ZW1XaXRoRXZlbnRzKCRub2RlLCAkbmV3Tm9kZSk7XG5cdH1cblxuXHQvKipcblx0ICogUmVhc3NpZ24gdGVtcGxhdGVzXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnQsIE5vZGV9ICR0ZW1wbGF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSAkbmV3Tm9kZVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8UHJveHl9XG5cdCAvLyBUT0RPOiB0aGlzIGRvZXMgbm90IHN1cHBvcnQgZGVlcCBsb2NhdGlvbiBvZiB0ZW1wbGF0ZXNcblx0ICovXG5cdGFkZFRlbXBsYXRlc1RvSXRlbSgkdGVtcGxhdGUsICRuZXdOb2RlKSB7XG5cdCAgICBbXCJfdGVtcGxhdGVcIixcIl9fdGVtcGxhdGVcIl0uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgaWYoJHRlbXBsYXRlW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICRuZXdOb2RlW2tleV0gPSAkdGVtcGxhdGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBhIE5vZGUgd2l0aCBldmVudHNcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudCwgTm9kZX0gJG5vZGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudCwgTm9kZX0gJG5ld05vZGVcblx0ICogQHJldHVybnMge0hUTUxFbGVtZW50fFByb3h5fVxuXHQgLy9GSVhNRTogSSB0aGluayBgdGhpcy5kb0RvbWAgY291bGQgYmUgcmVtb3ZlZCBmcm9tIGhlcmUgYW5kIG9ubHkgXCJsaW5rXCIgZXZlbnRzXG5cdCAqL1xuXHRnZXRJdGVtV2l0aEV2ZW50cygkbm9kZSwgJG5ld05vZGUpIHtcblx0XHRpZigkbm9kZS5fX3RlbXBsYXRlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGNvbnN0IHNjYW4gPSAob2JqZWN0LCByZXN1bHQpID0+IHtcblx0XHRcdFx0cmVzdWx0ID0gcmVzdWx0IHx8IHt9O1xuXHRcdFx0XHRPYmplY3Qua2V5cyhvYmplY3QpLmZvckVhY2goa2V5PT4ge1xuXHRcdFx0XHRcdGlmIChtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3Qob2JqZWN0W2tleV0pKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHRba2V5XSA9IHNjYW4ob2JqZWN0W2tleV0pO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzRnVuY3Rpb24ob2JqZWN0W2tleV0pKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHRba2V5XSA9IG9iamVjdFtrZXldO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9XG5cdFx0XHRsZXQgdHJlZSA9IHNjYW4oJG5vZGUuX190ZW1wbGF0ZSk7XG5cdFx0XHRpZighbTJkMi51dGlscy5pc0VtcHR5KHRyZWUpKSB7XG5cdFx0XHRcdHRyZWUgPSB0cmVlW09iamVjdC5rZXlzKHRyZWUpWzBdXTtcblx0XHRcdFx0JG5ld05vZGUgPSB0aGlzLmRvRG9tKCRuZXdOb2RlLCB0cmVlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuICRuZXdOb2RlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFByb2Nlc3MgaXRlbXNcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtBcnJheX0gdmFsdWVzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0ZW1wbGF0ZVxuXHQgKi9cblx0ZG9JdGVtcyAoJG5vZGUsIHZhbHVlcywgdGVtcGxhdGUpIHtcblx0ICAgIC8vIENyZWF0ZSB0aGUgc3RydWN0dXJlIGZvciB0aGUgaXRlbTpcblx0XHRjb25zdCAkdGVtcGxhdGUgPSB0aGlzLmdldFRlbXBsYXRlKCRub2RlLCB0ZW1wbGF0ZSk7XG5cdFx0aWYoJHRlbXBsYXRlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJUZW1wbGF0ZSBub3QgZm91bmQuIFByb2JhYmx5IGFuIGFycmF5IGlzIGJlaW5nIHVzZWQgd2hlcmUgaXQgaXMgbm90IGV4cGVjdGVkLiBOb2RlOlwiKTtcblx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdGNvbnNvbGUubG9nKFwiVmFsdWUgKG1pc3Rha2VuPyk6XCIpXG5cdFx0XHRjb25zb2xlLmxvZyh2YWx1ZXMpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBGaWxsIHRoZSB0ZW1wbGF0ZSB3aXRoIGRhdGE6XG5cdFx0bGV0IGkgPSAwO1xuXHRcdHZhbHVlcy5mb3JFYWNoKHZhbCA9PiB7XG5cdFx0ICAgIHZhbCA9IHRoaXMucGxhaW5Ub09iamVjdCgkbm9kZSwgdmFsKTtcblx0XHQgICAgY29uc3QgJG5ld0l0ZW0gPSB0aGlzLmdldEl0ZW0oJG5vZGUsIGkrKywgdmFsLCAkdGVtcGxhdGUpO1xuXHRcdCAgICBpZigkbmV3SXRlbSkge1xuXHRcdFx0ICAgICRub2RlLmFwcGVuZCgkbmV3SXRlbSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ly8gQ2xlYW51cFxuXHRcdGNvbnN0ICR0ZW1wID0gJG5vZGUuZmluZChcInRlbXBsYXRlXCIpO1xuXHRcdGlmKCR0ZW1wKSB7ICRub2RlLnJlbW92ZUNoaWxkKCR0ZW1wKTsgfVxuXHRcdC8vIFNldCBcIml0ZW1zXCIgbGluazpcblx0XHQkbm9kZS5pdGVtcyA9ICRub2RlLmNoaWxkcmVuO1xuXHRcdHRoaXMuZXh0ZW5kSXRlbXMoJG5vZGUpO1xuXHR9XG5cdC8qKiBSZXR1cm5zIGFuIEhUTUxFbGVtZW50IHdpdGggdGhlIHN0cnVjdHVyZSB3aXRob3V0IGV2ZW50c1xuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge09iamVjdCwgc3RyaW5nfSBbdGVtcGxhdGVdXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cblx0ICovXG5cdGdldFRlbXBsYXRlICgkbm9kZSwgdGVtcGxhdGUpIHtcblx0XHQvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgdGhlIHRlbXBsYXRlLCByZXR1cm4gaXQ6XG5cdFx0aWYoJG5vZGUuX3RlbXBsYXRlICE9PSB1bmRlZmluZWQgJiYgJG5vZGUuX3RlbXBsYXRlICE9PSBcIlwiKSB7XG5cdFx0XHRyZXR1cm4gJG5vZGUuX3RlbXBsYXRlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRsZXQgJHRlbXBsYXRlO1xuXHRcdFx0Y29uc3QgJGh0bWxUZW1wbGF0ZSA9ICRub2RlLnF1ZXJ5U2VsZWN0b3IoXCJ0ZW1wbGF0ZVwiKTsgLy8gbG9vayBpbnRvIEhUTUwgdW5kZXIgbm9kZVxuXHRcdFx0aWYoJGh0bWxUZW1wbGF0ZSkge1xuXHRcdFx0XHQkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLmh0bWxFbGVtZW50KCRodG1sVGVtcGxhdGUuaW5uZXJIVE1MLnRyaW0oKSk7XG5cdFx0XHR9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoJG5vZGUudGFnTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiU0VMRUNUXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJEQVRBTElTVFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJVTFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiT0xcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcImxpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJOQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcImFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkRMXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJkZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IE9iamVjdC5rZXlzKHRlbXBsYXRlKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hpbGRyZW4gPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0ZW1wbGF0ZS50YWdOYW1lICE9PSB1bmRlZmluZWQpIHsgLy9UT0RPOiBkb2N1bWVudCAob3B0aW9uYWwgdG9wIGNoaWxkIHdoZW4gdXNpbmcgdGFnTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgd3JhcCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBbdGVtcGxhdGUudGFnTmFtZV0gPSB0ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IHdyYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGVtcGxhdGUgaGFzIG1vcmUgdGhhbiBvbmUgdG9wIGVsZW1lbnRzLiBVc2luZyB0aGUgZmlyc3Qgb25lLiBJbjogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vZGU6IFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXModGVtcGxhdGUpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB0ZW1wbGF0ZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtMmQyLnV0aWxzLmlzVmFsaWRFbGVtZW50KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYodmFsLnRhZ05hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KHZhbC50YWdOYW1lKTtcblx0XHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlW3ZhbC50YWdOYW1lXSA9IHZhbDtcblx0XHRcdFx0XHRcdFx0XHRcdGRlbGV0ZSh0ZW1wbGF0ZVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUZW1wbGF0ZSBkZWZpbmVkIGFuIGVsZW1lbnQgd2hpY2ggY2FuIG5vdCBiZSBpZGVudGlmaWVkOiBbXCIgKyBrZXkgKyBcIl0sIHVzaW5nIDxzcGFuPiBpbjpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vZGU6IFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVGVtcGxhdGUgaGFzIG5vIGRlZmluaXRpb24sIGFuZCBpdCBjYW4gbm90IGJlIGd1ZXNzZWQuIFVzaW5nIDxzcGFuPi4gVGVtcGxhdGU6IFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vZGU6IFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgbm90IHRlbXBsYXRlIGlzIGZvdW5kLCB1c2UgaHRtbCBhcyBvZiBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJG5vZGUuY2hpbGRFbGVtZW50Q291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMuaHRtbEVsZW1lbnQoJG5vZGUuaW5uZXJIVE1MLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXHRcdFx0aWYgKHRlbXBsYXRlKSB7XG5cdFx0XHRcdGlmIChtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3QodGVtcGxhdGUpKSB7XG5cdFx0XHRcdCAgICBjb25zdCAkd3JhcCA9IG0yZDIudXRpbHMubmV3RW1wdHlOb2RlKCk7XG5cdFx0XHRcdCAgICAkd3JhcC5hcHBlbmQoJHRlbXBsYXRlKTtcblx0XHRcdFx0XHRjb25zdCAkZnJhZ21lbnQgPSB0aGlzLmRvRG9tKCR3cmFwLCB0ZW1wbGF0ZSk7XG5cdFx0XHRcdFx0JHRlbXBsYXRlID0gJGZyYWdtZW50LmNoaWxkcmVuWzBdO1xuXHRcdFx0XHRcdG0yZDIudXRpbHMuZGVmaW5lUHJvcCgkbm9kZSwgXCJfX3RlbXBsYXRlXCIsIHRlbXBsYXRlKTsgLy8gVGhpcyBpcyB0aGUgb3JpZ2luYWwgdGVtcGxhdGUgd2l0aCBldmVudHNcblx0XHRcdFx0fSBlbHNlIGlmIChtMmQyLnV0aWxzLmlzSHRtbCh0ZW1wbGF0ZSkpIHtcblx0XHRcdFx0XHQkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLmh0bWxFbGVtZW50KHRlbXBsYXRlKTtcblx0XHRcdFx0fSBlbHNlIGlmIChtMmQyLnV0aWxzLmlzU2VsZWN0b3JJRCh0ZW1wbGF0ZSkpIHsgLy9Pbmx5IElEcyBhcmUgYWxsb3dlZCAvL1RPRE8gZG9jdW1lbnRcblx0XHRcdFx0XHQkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLmh0bWxFbGVtZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGVtcGxhdGUpLmlubmVySFRNTCk7XG5cdFx0XHRcdH0gZWxzZSB7IC8vV2hlbiBpdHMganVzdCBhIHRhZyBuYW1lXG5cdFx0XHRcdFx0JHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KHRlbXBsYXRlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoJHRlbXBsYXRlLmNoaWxkcmVuRWxlbWVudENvdW50ID4gMSkge1xuXHRcdFx0ICAgIGNvbnNvbGUubG9nKFwiVGVtcGxhdGVzIG9ubHkgc3VwcG9ydHMgYSBzaW5nbGUgY2hpbGQuIE11bHRpcGxlIGNoaWxkcmVuIHdlcmUgZGV0ZWN0ZWQsIHdyYXBwaW5nIHRoZW0gd2l0aCA8c3Bhbj4uIFRlbXBsYXRlOlwiKTtcblx0XHRcdCAgICBjb25zb2xlLmxvZygkdGVtcGxhdGUpO1xuXHRcdFx0ICAgIGNvbnN0ICRzcGFuID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwic3BhblwiKTtcblx0XHRcdCAgICAkc3Bhbi5hcHBlbmQoJHRlbXBsYXRlKTtcblx0XHRcdCAgICAkdGVtcGxhdGUgPSAkc3Bhbjtcblx0XHRcdH1cblx0XHRcdGlmICgkdGVtcGxhdGUpIHtcblx0XHRcdFx0bTJkMi51dGlscy5kZWZpbmVQcm9wKCRub2RlLCBcIl90ZW1wbGF0ZVwiLCAkdGVtcGxhdGUpOyAvLyBUaGlzIGlzIHRoZSBET01cblx0XHRcdH1cblx0XHRcdHJldHVybiAkdGVtcGxhdGU7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEl0IHdpbGwgc2V0IGEgdW5pcXVlIGF0dHJpYnV0ZSBhbW9uZyBhIGdyb3VwIG9mIG5vZGVzIChncm91cGVkIGJ5IHBhcmVudClcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudCwgTm9kZX0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleVxuXHQgKi9cblx0c2V0VW5pcXVlQXR0cmliKCRub2RlLCBrZXkpIHtcbiAgICAgICAgaWYoISAkbm9kZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoJG5vZGUsIGtleSwge1xuICAgICAgICAgICAgICAgIGdldCA6IGZ1bmN0aW9uKCkgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldCA6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2U2VsID0gdGhpcy5wYXJlbnROb2RlID8gdGhpcy5wYXJlbnROb2RlLmZpbmQoXCJbXCIra2V5K1wiXVwiKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmKHByZXZTZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZTZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHRtMmQyLnV0aWxzLnNldEF0dHIodGhpcywga2V5LCB2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cdH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBbIE5vZGUsIHN0cmluZyBdIHZhbHVlcyAoaW5saW5lIG9udXBkYXRlKVxuICAgICAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqL1xuICAgIHVwZGF0ZVZhbHVlKCRub2RlLCBrZXksIHZhbHVlKSB7XG5cdFx0Ly8gVEVTVDogMDZcbiAgICAgICAgaWYodGhpcy5pc1VwZGF0ZUxpbmsodmFsdWUpKSB7XG5cdFx0XHRjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBjb25zdCBvYmogID0gdmFsdWVbMF07XG4gICAgICAgICAgICBjb25zdCBwcm9wID0gdmFsdWVbMV07XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IHZhbHVlWzJdO1xuXHRcdFx0dmFsdWUgPSBvYmpbcHJvcF07XG5cdFx0XHRpZihvYmogaW5zdGFuY2VvZiBDU1NTdHlsZURlY2xhcmF0aW9uICYmIHRoaXMuX3N0b3JlZC5zdHlsZXMuaW5jbHVkZXMob2JqKSkge1xuXHRcdFx0XHRjb25zdCBwYXJlbnQgPSB0aGlzLl9zdG9yZWQuc3R5bGVOb2Rlc1t0aGlzLl9zdG9yZWQuc3R5bGVzLmluZGV4T2Yob2JqKV07XG5cdFx0XHRcdGlmKG0yZDIudXBkYXRlcykge1xuXHRcdFx0XHRcdHBhcmVudC5vbnVwZGF0ZSA9IGZ1bmN0aW9uIChldikge1xuXHRcdFx0XHRcdFx0aWYgKGV2LmRldGFpbCAmJiBldi5kZXRhaWwucHJvcGVydHkgPT09IFwic3R5bGVcIiAmJiBldi5kZXRhaWwubmV3VmFsdWUuc3RhcnRzV2l0aChwcm9wICsgXCI6XCIpKSB7XG5cdFx0XHRcdFx0XHRcdF90aGlzLnNldFNob3J0VmFsdWUoJG5vZGUsIGtleSwgY2FsbGJhY2sodGhpcy5zdHlsZVtwcm9wXSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKG9iaiBpbnN0YW5jZW9mIERPTVN0cmluZ01hcCAmJiB0aGlzLl9zdG9yZWQuZGF0YXNldHMuaW5jbHVkZXMob2JqKSkge1xuXHRcdFx0XHRjb25zdCBwYXJlbnQgPSB0aGlzLl9zdG9yZWQuZGF0YXNldE5vZGVzW3RoaXMuX3N0b3JlZC5kYXRhc2V0cy5pbmRleE9mKG9iaildO1xuXHRcdFx0XHRpZihtMmQyLnVwZGF0ZXMpIHtcblx0XHRcdFx0XHRwYXJlbnQub251cGRhdGUgPSAoZXYpID0+IHtcblx0XHRcdFx0XHRcdGlmIChldi5kZXRhaWwgJiYgZXYuZGV0YWlsLnByb3BlcnR5ID09PSBcImRhdGEtXCIgKyBwcm9wKSB7XG5cdFx0XHRcdFx0XHRcdF90aGlzLnNldFNob3J0VmFsdWUoJG5vZGUsIGtleSwgY2FsbGJhY2soZXYuZGV0YWlsLm5ld1ZhbHVlKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZihtMmQyLnVwZGF0ZXMpIHtcblx0XHRcdFx0XHRvYmoub251cGRhdGUgPSAoZXYpID0+IHtcblx0XHRcdFx0XHRcdGlmIChldi5kZXRhaWwgJiYgZXYuZGV0YWlsLnByb3BlcnR5ID09PSBwcm9wKSB7XG5cdFx0XHRcdFx0XHRcdGlmICghbTJkMi51dGlscy5pc09iamVjdCgkbm9kZVtrZXldKSkge1xuXHRcdFx0XHRcdFx0XHRcdF90aGlzLnNldFNob3J0VmFsdWUoJG5vZGUsIGtleSwgY2FsbGJhY2soZXYuZGV0YWlsLm5ld1ZhbHVlKSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIFBsYWNlIGEgdmFsdWUgZWl0aGVyIGluIGEgcHJvcGVydHkgb3IgaW4gYSBub2RlIChzaG9ydClcblx0ICogQHBhcmFtICRub2RlIHtOb2RlfVxuXHQgKiBAcGFyYW0ga2V5IHtzdHJpbmd9XG5cdCAqIEBwYXJhbSB2YWx1ZSB7Kn1cblx0ICovXG5cdHNldFNob3J0VmFsdWUoJG5vZGUsIGtleSwgdmFsdWUpIHtcblx0XHRpZihtMmQyLnV0aWxzLmlzTm9kZSgkbm9kZVtrZXldKSkge1xuXHRcdFx0aWYobTJkMi5zaG9ydCkge1xuXHRcdFx0XHRjb25zdCBvID0gdGhpcy5wbGFpblRvT2JqZWN0KCRub2RlW2tleV0sIHZhbHVlKTtcblx0XHRcdFx0Y29uc3QgayA9IG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdChvKSAmJiBPYmplY3Qua2V5cyhvKS5sZW5ndGggPj0gMSA/IE9iamVjdC5rZXlzKG8pWzBdIDogbnVsbDtcblx0XHRcdFx0aWYgKGspIHtcblx0XHRcdFx0XHQkbm9kZVtrZXldW2tdID0gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiU2hvcnQgaXMgZGlzYWJsZWQuIFRyeWluZyB0byBzZXQgYSB2YWx1ZSAoXCIrdmFsdWUrXCIpIGluIGEgbm9kZTpcIilcblx0XHRcdFx0Y29uc29sZS5sb2coJG5vZGVba2V5XSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRWl0aGVyIHR1cm4gb24gJ3Nob3J0JyBmdW5jdGlvbmFsaXR5LCBvciBiZSBzdXJlIHlvdSBzcGVjaWZ5IHRoZSBwcm9wZXJ0eSwgbGlrZTogJ25vZGUudGV4dCdcIilcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0JG5vZGVba2V5XSA9IHZhbHVlXG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFBsYWNlIGEgdmFsdWUgZWl0aGVyIGluIGEgcHJvcGVydHkgb3IgaW4gYSBub2RlIChzaG9ydClcblx0ICogQHBhcmFtICRub2RlIHtOb2RlfVxuXHQgKiBAcGFyYW0ga2V5IHtzdHJpbmd9XG5cdCAqIEBwYXJhbSBzYW1wbGUgeyp9IFNhbXBsZSB2YWx1ZSAodG8gYXV0b21hdGljYWxseSBndWVzcyBwcm9wZXJ0eSlcblx0ICogQHJldHVybnMgeyp9IGN1cnJlbnQgdmFsdWVcblx0ICovXG5cdGdldFNob3J0VmFsdWUoJG5vZGUsIGtleSwgc2FtcGxlKSB7XG5cdFx0bGV0IHZhbHVlID0gbnVsbDtcblx0XHRpZihtMmQyLnV0aWxzLmlzTm9kZSgkbm9kZVtrZXldKSkge1xuXHRcdFx0aWYobTJkMi5zaG9ydCkge1xuXHRcdFx0XHRjb25zdCBvID0gdGhpcy5wbGFpblRvT2JqZWN0KCRub2RlW2tleV0sIHNhbXBsZSB8fCBcIlwiKTtcblx0XHRcdFx0Y29uc3QgayA9IG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdChvKSAmJiBPYmplY3Qua2V5cyhvKS5sZW5ndGggPj0gMSA/IE9iamVjdC5rZXlzKG8pWzBdIDogbnVsbDtcblx0XHRcdFx0aWYgKGspIHtcblx0XHRcdFx0XHR2YWx1ZSA9ICRub2RlW2tleV1ba107XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiU2hvcnQgaXMgZGlzYWJsZWQuIFRyeWluZyB0byBnZXQgYSB2YWx1ZSBmcm9tIG5vZGU6XCIpXG5cdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlW2tleV0pO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkVpdGhlciB0dXJuIG9uICdzaG9ydCcgZnVuY3Rpb25hbGl0eSwgb3IgYmUgc3VyZSB5b3Ugc3BlY2lmeSB0aGUgcHJvcGVydHksIGxpa2U6ICdub2RlLnRleHQnXCIpXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhbHVlID0gJG5vZGVba2V5XTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEJhc2ljIFByb3h5IHRvIGVuYWJsZSBhc3NpZ24gdmFsdWVzIHRvIGVsZW1lbnRzXG5cdCAqIGZvciBleGFtcGxlOiBkaXYuYSA9IFwiQ2xpY2sgbWVcIiAoaW5zdGVhZCBvZiB1c2luZzogZGl2LmEudGV4dClcblx0ICogTk9URTogZm9yIHJlYWRpbmcsIFwiZGl2LmFcIiB3aWxsIHJldHVybiBhIE5vZGUgYW5kIG5vdCB0aGUgdmFsdWUuXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtib29sZWFufSBbZm9yY2VdIEZvcmNlIHRvIHVwZGF0ZVxuXHQgKiBAcmV0dXJucyB7UHJveHksIE9iamVjdH1cblx0ICovXG5cdHByb3h5IChvYmosIGZvcmNlKSB7XG5cdCAgICBpZighbTJkMi5zaG9ydCB8fCAob2JqID09PSBudWxsIHx8IChvYmouX3Byb3h5ICE9PSB1bmRlZmluZWQgJiYgZm9yY2UgPT09IHVuZGVmaW5lZCkpKSB7XG5cdCAgICAgICAgcmV0dXJuIG9iajtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgb2JqLl9wcm94eSA9IG9iajtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSB7XG4gICAgICAgICAgICAgICAgZ2V0OiAodGFyZ2V0LCBwcm9wZXJ0eSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGFyZ2V0W3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0cnVlKSB7XG5cdFx0XHRcdFx0XHRjYXNlIHQgPT09IG51bGwgfHwgdCA9PT0gdW5kZWZpbmVkOiByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgXHQvLyBGdW5jdGlvbnMgc2hvdWxkIGJpbmQgdGFyZ2V0IGFzIFwidGhpc1wiXG5cdFx0XHRcdFx0XHRjYXNlIG0yZDIudXRpbHMuaXNGdW5jdGlvbih0KTogcmV0dXJuIHQuYmluZCh0YXJnZXQpO1xuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlcmUgd2FzIGEgZmFpbGVkIGF0dGVtcHQgdG8gc2V0IHByb3h5LCByZXR1cm4gaXQgb24gcmVhZDpcblx0XHRcdFx0XHRcdGNhc2UgdC5fcHJveHkgJiYgdGFyZ2V0W1wiJFwiICsgcHJvcGVydHldICE9PSB1bmRlZmluZWQ6IHJldHVybiB0YXJnZXRbXCIkXCIgKyBwcm9wZXJ0eV07XG5cdFx0XHRcdFx0XHRjYXNlIHQuX3Byb3h5ID09PSB1bmRlZmluZWQgJiYgbTJkMi51dGlscy5pc0VsZW1lbnQodCk6IHJldHVybiB0aGlzLnByb3h5KHQpO1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDogcmV0dXJuIHQ7XG5cdFx0XHRcdFx0fVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0OiAodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9sZFZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5pc0VsZW1lbnQodGFyZ2V0W3Byb3BlcnR5XSkpIHtcblx0XHRcdFx0XHRcdG9sZFZhbHVlID0gdGhpcy5nZXRTaG9ydFZhbHVlKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKTtcblx0XHRcdFx0XHRcdHRoaXMuc2V0U2hvcnRWYWx1ZSh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihwcm9wZXJ0eSA9PT0gXCJvbnVwZGF0ZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIFx0aWYobTJkMi51cGRhdGVzKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChtMmQyLnV0aWxzLmlzRnVuY3Rpb24odmFsdWUpKSB7XG5cdFx0XHRcdFx0XHQgICAgICAgIC8vIEJ5IHVzaW5nIGFkZEV2ZW50TGlzdGVuZXIgd2UgY2FuIGFzc2lnbiBtdWx0aXBsZSBsaXN0ZW5lcnMgdG8gYSBzaW5nbGUgbm9kZVxuXHRcdFx0XHRcdFx0XHRcdHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlXCIsIHZhbHVlLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRvbGRWYWx1ZSA9IHRhcmdldFtwcm9wZXJ0eV07XG5cdFx0XHRcdFx0XHRcdFx0dGFyZ2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJWYWx1ZSBwYXNzZWQgdG8gJ29udXBkYXRlJyBpcyBpbmNvcnJlY3QsIGluIG5vZGU6XCIpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHRhcmdldCk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJWYWx1ZTogKG5vdCBhIGZ1bmN0aW9uKVwiKTtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFx0XHRjb25zb2xlLmxvZyhcIlVwZGF0ZXMgYXJlIG5vdCBhdmFpbGFibGUgd2hlbiBgbTJkMi51cGRhdGVzID09IGZhbHNlYDpcIilcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2codGFyZ2V0KTtcblx0XHRcdFx0XHRcdH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHByb3BlcnR5ID09PSBcIml0ZW1zXCIpIHsgLy9SZXNldCBpdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lml0ZW1zLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvSXRlbXModGFyZ2V0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IHRhcmdldFtwcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudXBkYXRlVmFsdWUodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgZm9yIG9udXBkYXRlIC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgb2JzZXJ2ZSBjaGFuZ2VzIG9uIHZhbHVlc1xuXHRcdFx0XHRcdGlmKG0yZDIudXBkYXRlcyAmJiB0YXJnZXQub251cGRhdGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdCAgICBpZih2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJ1cGRhdGVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgICAgIDogdHlwZW9mIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgOiBwcm9wZXJ0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlIDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA6IG9sZFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHR9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb3h5KG9iaiwgaGFuZGxlcik7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEZ1bmN0aW9uIHBhc3NlZCB0byBNdXRhdGlvbk9ic2VydmVyXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TXV0YXRpb25SZWNvcmR9IG11dGF0aW9uc0xpc3Rcblx0ICogQHBhcmFtIHtNdXRhdGlvbk9ic2VydmVyfSBvYnNlcnZlclxuXHQgKi9cblx0b25PYnNlcnZlKG11dGF0aW9uc0xpc3QsIG9ic2VydmVyKSB7XG5cdFx0bXV0YXRpb25zTGlzdC5mb3JFYWNoKG0gPT4ge1xuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gbS50YXJnZXQ7XG5cdFx0XHQvLyBXZSBzdG9yZSB0aGUgZXZlbnRzIHRvIHJlbW92ZSBpbW1lZGlhdGVseSByZXBlYXRlZCBldmVudHMuXG5cdFx0XHQvLyBGb3JtcyB3aWxsIGxpbmsgZWxlbWVudHMgd2hpY2ggY2FuIG5vdCBiZSBzZXQgYXMgcHJveHkgc28gd2Vcblx0XHRcdC8vIGFkZCBhIGxpbmsgbmFtZWQgYFwiJFwiICsga2V5YCBidXQgdGhpcyBoYXZlIHRoZSBzaWRlIGVmZmVjdCB0b1xuXHRcdFx0Ly8gZ2VuZXJhdGUgdHdvIHRyaWdnZXJzIChvbmUgZm9yIHRoZSBlbGVtZW50IGFuZCBvbmUgZm9yIHRoZSBQcm94eSkuXG5cdFx0XHRpZih0aGlzLl9zdG9yZWQuZXZlbnRzLmluZGV4T2YobSkgPj0gMCkgeyByZXR1cm4gfSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fc3RvcmVkLmV2ZW50cy5wdXNoKG0pO1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBpID0gdGhpcy5fc3RvcmVkLmV2ZW50cy5pbmRleE9mKG0pO1xuXHRcdFx0XHRcdGlmKGkgPj0gMCkgeyB0aGlzLl9zdG9yZWQuZXZlbnRzLnNwbGljZShpLCAxKTsgfVxuXHRcdFx0XHR9LCBtMmQyLnN0b3JlZEV2ZW50c1RpbWVvdXQpOyAvL1RPRE86IHRoaXMgd2lsbCBwcmV2ZW50IHJlcGVhdGVkIGV2ZW50cyB0byBiZSB0cmlnZ2VyZWQgaW4gbGVzcyB0aGFuIDUwbXMgOiBkb2N1bWVudFxuXHRcdFx0fVxuXHRcdFx0Ly8gQ2hlY2sgZm9yIG9udXBkYXRlIC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdGlmKHRhcmdldC5vbnVwZGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGlmKG0udHlwZSA9PT0gXCJhdHRyaWJ1dGVzXCIpIHtcblx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9IG0yZDIudXRpbHMuZ2V0QXR0ck9yUHJvcCh0YXJnZXQsIG0uYXR0cmlidXRlTmFtZSk7XG5cdFx0XHRcdFx0aWYodmFsdWUgIT09IG0ub2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInVwZGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgICAgIDogdHlwZW9mIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA6IG0uYXR0cmlidXRlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgOiBtLm9sZFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdH0gZWxzZSBpZihtLnR5cGUgPT09IFwiY2hpbGRMaXN0XCIpIHsgLy9UT0RPOiBpbXByb3ZlIGZvciBvdGhlciB0eXBlc1xuXHRcdFx0XHQgICAgY29uc3QgJGNoaWxkID0gbS5hZGRlZE5vZGVzWzBdIHx8IG0ucmVtb3ZlZE5vZGVzWzBdO1xuXHRcdFx0XHRcdGlmKCRjaGlsZC5ub2RlTmFtZSA9PT0gXCIjdGV4dFwiKSB7XG5cdFx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9IG0uYWRkZWROb2Rlc1swXS50ZXh0Q29udGVudDtcblx0XHRcdFx0XHRcdGNvbnN0IG9sZFZhbHVlID0gbS5yZW1vdmVkTm9kZXMubGVuZ3RoID8gbS5yZW1vdmVkTm9kZXNbMF0udGV4dENvbnRlbnQgOiBudWxsO1xuXHRcdFx0XHRcdFx0aWYodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwidXBkYXRlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgICAgIDogdHlwZW9mIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5IDogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA6IG9sZFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0fSBlbHNlIGlmKHRhcmdldC5pdGVtcyAhPT0gdW5kZWZpbmVkKSB7IC8vSXRlbXMgdXBkYXRlZFxuXHRcdFx0XHRcdCAgICAvL1RPRE86IERvY3VtZW50OiBpbiBjYXNlIG9mIGl0ZW1zLCBcIm5ldyA9IGFkZGVkXCIsIFwib2xkID0gcmVtb3ZlZFwiXG5cdFx0XHRcdFx0XHRjb25zdCB2YWx1ZSA9IG0uYWRkZWROb2Rlcztcblx0XHRcdFx0XHRcdGNvbnN0IG9sZFZhbHVlID0gbS5yZW1vdmVkTm9kZXM7XG5cdFx0XHRcdFx0XHRpZih2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJ1cGRhdGVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICAgOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgOiBcIml0ZW1zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA6IG9sZFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCAqIEFkZCBNdXRhdGlvbk9ic2VydmVyIHRvIG9iamVjdFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyBIVE1MRWxlbWVudCB9ICRub2RlXG5cdCAqL1xuXHRvYnNlcnZlKCRub2RlKSB7XG5cdFx0aWYobTJkMi51cGRhdGVzKSB7XG5cdFx0XHRjb25zdCBtdXRhdGlvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5vbk9ic2VydmUuYmluZCh0aGlzKSlcblx0XHRcdGNvbnN0IG9wdGlvbnMgPSB7XG5cdFx0XHRcdGF0dHJpYnV0ZU9sZFZhbHVlOiB0cnVlXG5cdFx0XHR9XG5cdFx0XHRvcHRpb25zLnN1YnRyZWUgPSB0cnVlO1xuXHRcdFx0b3B0aW9ucy5jaGlsZExpc3QgPSB0cnVlO1xuXHRcdFx0Y29uc3QgdG9PYnNlcnZlID0gJG5vZGUuX3Byb3h5IHx8ICRub2RlO1xuXHRcdFx0bXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKHRvT2JzZXJ2ZSwgb3B0aW9ucyk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aGUgcm9vdCBub2RlIGFzIHByb3h5XG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfEhUTUxFbGVtZW50fSBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqL1xuXHRnZXRQcm94eU5vZGUoc2VsZWN0b3IsIG9iaikge1xuXHRcdGNvbnN0ICRub2RlID0gdGhpcy5kb0RvbShzZWxlY3Rvciwgb2JqKTtcblx0XHRpZigkbm9kZSkge1xuXHRcdCAgICB0aGlzLm9ic2VydmUoJG5vZGUpO1xuXHRcdCAgICByZXR1cm4gdGhpcy5wcm94eSgkbm9kZSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEV4dGVuZHMgXCJpdGVtc1wiXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Tm9kZUxpc3QsIEhUTUxDb2xsZWN0aW9ufSAkbm9kZVxuXHQgKi9cblx0ZXh0ZW5kSXRlbXMoJG5vZGUpIHtcblx0XHQvLyBXZSB0cnkgdG8gYWRkIG1vc3Qgb2YgdGhlIGFycmF5IGZ1bmN0aW9ucyBpbnRvIE5vZGVMaXN0IGFuZCBIVE1MQ29sbGVjdGlvbjpcblx0XHQvLyBOT1RFOiBOb3QgYWxsIHdpbGwgd29yayBhcyBleHBlY3RlZC5cblx0XHQvLyBOT1RFOiBmdW5jdGlvbigpIHt9IGlzIG5vdCB0aGUgc2FtZSBoZXJlIGFzICgpID0+IHt9IGFzIFwidGhpc1wiIGlzIG5vdCBhcyBleHBlY3RlZFxuXHRcdGZ1bmN0aW9uIHJlYXR0YWNoKGl0ZW1zKSB7XG5cdFx0XHRpdGVtcy5mb3JFYWNoKGl0bSA9PiB7XG5cdFx0XHRcdGNvbnN0IHBhcmVudCA9IGl0bS5wYXJlbnROb2RlO1xuXHRcdFx0XHRjb25zdCBkZXRhdGNoZWRJdGVtID0gcGFyZW50LnJlbW92ZUNoaWxkKGl0bSk7XHQvL1dlIGRldGFjaCBmcm9tIG9yaWdpbmFsIHBhcmVudFxuXHRcdFx0XHQkbm9kZS5hcHBlbmQoZGV0YXRjaGVkSXRlbSk7IC8vQXR0YWNoIHRvICRub2RlICh3b3JrcyB3aXRoIG5vbi1leGlzdGluZyBlbGVtZW50cylcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRjb25zdCBpdGVtcyA9ICRub2RlLml0ZW1zO1xuXHRcdC8vIE5vbi1TdGFuZGFyZCBvciBub24tZXhpc3RlbnQgaW4gQXJyYXk6XG5cdFx0Y29uc3Qgbm9uU3RkID0gW1wiY2xlYXJcIiwgXCJnZXRcIiwgXCJyZW1vdmVcIiwgXCJzZWxlY3RlZFwiLCBcImZpcnN0XCIsIFwibGFzdFwiLCBcImZpbmRBbGxcIl07XG5cdFx0Ly8gQXJyYXkgcHJvcGVydGllczpcblx0XHRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhBcnJheS5wcm90b3R5cGUpLmNvbmNhdChub25TdGQpLmZvckVhY2gobWV0aG9kID0+IHtcblx0XHRcdGlmKGl0ZW1zW21ldGhvZF0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRsZXQgZnVuYyA9IG51bGw7XG5cdFx0XHRcdGNvbnN0IF90aGlzID0gdGhpcztcblx0XHRcdFx0c3dpdGNoIChtZXRob2QpIHtcblx0XHRcdFx0ICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0gU2FtZSBhcyBpbiBBcnJheSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHRcdGNhc2UgXCJjb3B5V2l0aGluXCI6IC8vIGNvcHkgZWxlbWVudCBmcm9tIGluZGV4IHRvIGluZGV4XG5cdFx0XHRcdFx0Y2FzZSBcImZpbGxcIjogLy8gcmVwbGFjZSBOIGVsZW1lbnRzIGluIGFycmF5XG5cdFx0XHRcdFx0Y2FzZSBcInNwbGljZVwiOiAvLyBhZGQgb3IgcmVtb3ZlIGVsZW1lbnRzXG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgICAgICAgIGNvbnNvbGUubG9nKFwiTm90IGF2YWlsYWJsZSB5ZXQ6IFwiICsgbWV0aG9kKTtcblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdCAgICBicmVhaztcblx0XHRcdFx0XHRjYXNlIFwicmV2ZXJzZVwiOiAvLyByZXZlcnNlIHRoZSBvcmRlclxuXHRcdFx0XHRcdFx0ZnVuYyA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcblx0XHRcdFx0XHQgICAgICAgIGlmKHRoaXMuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLml0ZW1zKTsgLy9LZWVwIGEgY29weVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXRPYmogPSBpdGVtc1ttZXRob2RdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWF0dGFjaChpdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRPYmo7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFNwZWNpYWwgSW1wbGVtZW50YXRpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdFx0XHRjYXNlIFwiY2xlYXJcIjogLy8gcGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGRyZW4oKSBjYW4gYWxzbyBiZSB1c2VkXG5cdFx0XHRcdFx0XHRmdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHdoaWxlKHRoaXMuaXRlbXNbMF0pIHRoaXMuaXRlbXNbMF0ucmVtb3ZlKClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJnZXRcIjogLy8gd2lsbCByZXR1cm4gdGhlIGl0ZW0gd2l0aCBkYXRhLWlkOlxuXHRcdFx0XHRcdCAgICBmdW5jID0gZnVuY3Rpb24oaWQpIHtcblx0XHRcdFx0XHQgICAgICAgIGxldCBmb3VuZCA9IG51bGw7XG5cdFx0XHRcdFx0ICAgICAgICBpZih0aGlzLml0ZW1zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCAgICAgICAgICAgIHRoaXMuaXRlbXMuc29tZShpdGVtID0+IHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgY29uc3Qgc2FtZUlkID0gbTJkMi51dGlscy5pc051bWVyaWMoaWQpID8gKGl0ZW0uZGF0YXNldC5pZCAqIDEpID09PSBpZCAqIDEgOiBpdGVtLmRhdGFzZXQuaWQgPT09IGlkO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICBpZihpdGVtLmRhdGFzZXQgJiYgc2FtZUlkKSB7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGl0ZW07XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdCAgICAgICAgICAgIH0pO1xuXHRcdFx0XHRcdCAgICAgICAgfVxuXHRcdFx0XHRcdCAgICAgICAgcmV0dXJuIGZvdW5kO1xuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzZWxlY3RlZFwiOiAvLyB3aWxsIHJldHVybiB0aGUgc2VsZWN0ZWQgaXRlbSBpbiBsaXN0XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgICAgICAgIHJldHVybiBfdGhpcy5wcm94eSh0aGlzLmZpbmQoXCI6c2NvcGUgPiBcIiArIFwiW3NlbGVjdGVkXVwiKSk7IC8vb25seSBkaXJlY3QgY2hpbGRyZW5cblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdCAgICBicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiZmlyc3RcIjogLy8gcmV0dXJucyB0aGUgZmlyc3QgaXRlbSBpbiBsaXN0XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgICAgICAgIHJldHVybiBfdGhpcy5wcm94eSh0aGlzLml0ZW1zWzBdKTtcblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdCAgICBicmVhaztcblx0XHRcdFx0XHRjYXNlIFwibGFzdFwiOiAvLyByZXR1cm5zIHRoZSBsYXN0IGl0ZW0gaW4gbGlzdFxuXHRcdFx0XHRcdCAgICBmdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICAgICAgICByZXR1cm4gX3RoaXMucHJveHkodGhpcy5pdGVtc1t0aGlzLml0ZW1zLmxlbmd0aCAtIDFdKTtcblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdCAgICBicmVhaztcblx0XHRcdFx0XHRjYXNlIFwicG9wXCIgOiAvL1JlbW92ZSBhbmQgcmV0dXJuIGxhc3QgZWxlbWVudDpcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgICAgICAgaWYodGhpcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpc1swXS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJveHkocGFyZW50LnJlbW92ZUNoaWxkKHRoaXMuaXRlbXNbdGhpcy5pdGVtcy5sZW5ndGggLSAxXSkpO1xuXHRcdFx0XHRcdCAgICAgICAgfVxuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJwdXNoXCI6IC8vIEFkZCBvbmUgaXRlbSBhdCB0aGUgZW5kOlxuXHRcdFx0XHRcdFx0ZnVuYyA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdFx0XHRcdFx0ICAgIG9iaiA9IF90aGlzLnBsYWluVG9PYmplY3QodGhpcywgb2JqKTtcblx0XHRcdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc0VsZW1lbnQob2JqKSkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXBwZW5kKG9iaik7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG9iaikpIHtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pdGVtcy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zdCAkY2hpbGQgPSBfdGhpcy5nZXRJdGVtKHRoaXMsIGluZGV4LCBvYmopO1xuXHRcdFx0XHRcdFx0XHQgICAgdGhpcy5hcHBlbmRDaGlsZCgkY2hpbGQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc29sZS5sb2coXCJUcnlpbmcgdG8gcHVzaCBhbiB1bmtub3duIHZhbHVlIGludG8gYSBsaXN0OlwiKTtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKG9iailcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInJlbW92ZVwiOiAvLyB3aWxsIHJldHVybiB0aGUgaXRlbSB3aXRoIGRhdGEtaWQ6XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbihpZCkge1xuXHRcdFx0XHRcdCAgICAgICAgaWYodGhpcy5pdGVtcy5sZW5ndGgpIHtcblx0XHRcdFx0XHQgICAgICAgICAgICBjb25zdCBlbGVtID0gdGhpcy5pdGVtcy5nZXQoaWQpO1xuXHRcdFx0XHRcdCAgICAgICAgICAgIGlmKGVsZW0ubGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlKCk7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgfVxuXHRcdFx0XHRcdCAgICAgICAgfVxuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzaGlmdFwiOiAvLyByZW1vdmUgYW5kIHJldHVybiBmaXJzdCBpdGVtOlxuXHRcdFx0XHRcdCAgICBmdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICAgICAgICBpZih0aGlzLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLml0ZW1zWzBdLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm94eShwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5pdGVtc1swXSkpO1xuXHRcdFx0XHRcdCAgICAgICAgfVxuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzb3J0XCI6IC8vIFlvdSBjYW4gcGFzcyBhIGZ1bmN0aW9uIHRvIGNvbXBhcmUgaXRlbXM6XG5cdFx0XHRcdFx0XHRmdW5jID0gZnVuY3Rpb24oY29tcGFyZUZ1bmMpIHtcblx0XHRcdFx0XHQgICAgICAgIGlmKHRoaXMuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbSh0aGlzLml0ZW1zKTsgLy9LZWVwIGNvcHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuc29ydChjb21wYXJlRnVuYyB8fCAoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnRleHQubG9jYWxlQ29tcGFyZShiLnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXR0YWNoKGl0ZW1zKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInVuc2hpZnRcIjogLy8gQWRkIGFuIGl0ZW0gdG8gdGhlIGJlZ2lubmluZ1xuXHRcdFx0XHRcdFx0ZnVuYyA9IGZ1bmN0aW9uKG9iaikge1xuXHRcdFx0XHRcdFx0ICAgIG9iaiA9IF90aGlzLnBsYWluVG9PYmplY3QodGhpcywgb2JqKTtcblx0XHRcdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc0VsZW1lbnQob2JqKSkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucHJlcGVuZChvYmopO1xuXHRcdFx0XHRcdFx0ICAgIH0gZWxzZSBpZiAobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG9iaikpIHtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pdGVtcy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zdCAkY2hpbGQgPSBfdGhpcy5nZXRJdGVtKHRoaXMsIGluZGV4LCBvYmopO1xuXHRcdFx0XHRcdFx0XHQgICAgdGhpcy5wcmVwZW5kKCRjaGlsZCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zb2xlLmxvZyhcIlRyeWluZyB0byB1bnNoaWZ0IGFuIHVua25vd24gdmFsdWUgaW50byBhIGxpc3Q6XCIpO1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc29sZS5sb2cob2JqKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IC8vLS0tLS0tLS0tLS0tLS0tLS0gTGluayB0byBBcnJheSAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRcdFx0ICAgIGxldCBhcnJNZXRob2QgPSBtZXRob2Q7XG5cdFx0XHRcdFx0XHQvLyBub2luc3BlY3Rpb24gRmFsbFRocm91Z2hJblN3aXRjaFN0YXRlbWVudEpTXG5cdFx0XHRcdFx0XHRzd2l0Y2godHJ1ZSkge1xuXHRcdFx0XHRcdCAgICAgICAgY2FzZSBtZXRob2QgPT09IFwiZmluZEFsbFwiOlxuXHRcdFx0XHRcdCAgICAgICAgICAgIGFyck1ldGhvZCA9IFwiZmlsdGVyXCI7IC8vIFVzZSBcImZpbHRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBtMmQyLnV0aWxzLmlzRnVuY3Rpb24oQXJyYXkucHJvdG90eXBlW21ldGhvZF0pOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IG5vZGVzIHRvIHByb3h5IHNvIHdlIGNhbiB1c2Ugc2hvcnQgYXNzaWdubWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdCwgY29uY2F0LCBldmVyeSwgZmlsdGVyLCBmaW5kLCBmaW5kSW5kZXgsIGZvckVhY2gsIGluY2x1ZGVzLCBpbmRleE9mLCBqb2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBrZXlzLCBsYXN0SW5kZXhPZiwgbWFwLCByZWR1Y2UsIHJlZHVjZVJpZ2h0LCBzbGljZSwgc29tZSwgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyckZ1bmMgPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJveGllcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbSgkbm9kZS5pdGVtcykuZm9yRWFjaChuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm94aWVzLnB1c2goX3RoaXMucHJveHkobikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShwcm94aWVzKVthcnJNZXRob2RdKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChtZXRob2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoYW5nZSBiZWhhdmlvdXIgb2YgZmluZDogLy9UT0RPOiBkb2N1bWVudGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZmluZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcoYXJnc1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmQoYXJnc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyRnVuYyguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbmRBbGxcIjogIC8vVE9ETzogZG9jdW1lbnRhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kQWxsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzU3RyaW5nKGFyZ3NbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kQWxsKGFyZ3NbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyckZ1bmMoLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb25jYXRcIjogLy9UT0RPOiBkb2N1bWVudGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaXNBcnJheShhcmdzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBhcmdzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvYmogPSBhcmdzW2ldW2pdO1xuXHRcdFx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISBtMmQyLnV0aWxzLmlzRWxlbWVudChvYmopKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBfdGhpcy5wbGFpblRvT2JqZWN0KHRoaXMsIGFyZ3NbaV1bal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdChvYmopKSB7XG5cdFx0XHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pdGVtcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gX3RoaXMuZ2V0SXRlbSh0aGlzLCBpbmRleCwgb2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2gob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9IGFyckZ1bmM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGZ1bmMpIHtcblx0XHRcdFx0XHRtMmQyLnV0aWxzLmRlZmluZVByb3AoaXRlbXMsIG1ldGhvZCwgZnVuYy5iaW5kKCRub2RlKSk7IC8vYmluZDogc3BlY2lmeSB0aGUgXCJ0aGlzXCIgdmFsdWVcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59XG4vKipcbiAqIE0yRDIgQWxlcnRzIEV4dGVuc2lvblxuICogQHNpbmNlIDIwMjEtMDUtMjBcbiAqXG4gKiBBIHJlcGxhY2VtZW50IG9mIGBhbGVydGAsYHByb21wdGAgYW5kIGBjb25maXJtYC4gSW5zcGlyZWQgYnkgYFN3ZWV0QWxlcnRgLCB3aXRoXG4gKiBjdXN0b21pemFibGUgdGhlbWUgYW5kIGJldHRlciBNMkQyIGludGVncmF0aW9uLlxuICpcbiAqIFRoaXMgZXh0ZW5zaW9uIHByb3ZpZGVzOlxuICogJC53YWl0ICAgICAgIDogRGlzcGxheXMgYSBzcGlubmVyIHdpdGhvdXQgYW55IGJ1dHRvbiBpbiBpdC5cbiAqICQuYWxlcnQgICAgICA6IERpc3BsYXlzIGEgc2ltcGxlIG1lc3NhZ2Ugd2l0aCBcIm9rXCIgYnV0dG9uLlxuICogJC5zdWNjZXNzICAgIDogU2FtZSBhcyAkLmFsZXJ0LCBidXQgc2hvdyBhIFwiY2hlY2tcIiBpY29uLlxuICogJC5mYWlsdXJlICAgIDogU2FtZSBhcyAkLmFsZXJ0LCBidXQgc2hvd3MgYSBcIndhcm5pbmdcIiBpY29uLlxuICogJC5jb25maXJtICAgIDogRGlzcGxheXMgYSBjb25maXJtYXRpb24gbWVzc2FnZSB3aXRoIFwieWVzXCIgYW5kIFwibm9cIiBidXR0b25zLlxuICogJC5wcm9tcHQgICAgIDogRGlzcGxheXMgYW4gaW5wdXQgcHJvbXB0IHdpdGggXCJjYW5jZWxcIiBhbmQgXCJzZW5kXCIgYnV0dG9ucy5cbiAqICQubWVzc2FnZSAgICA6IEZyZWUgZm9ybSBtZXNzYWdlIChhbGwgdGhlIHByZXZpb3VzIGltcGxlbWVudGF0aW9ucyB1c2VzIHRoaXMgZnVuY3Rpb24pXG4gKiAkLmNsb3NlQWxsICAgOiBDbG9zZSBhbnkgbWVzc2FnZSB0aGF0IG1pZ2h0IGJlIG9wZW5cblxuICogRG9jdW1lbnRhdGlvbiA6XG4gKiBodHRwczovL2dpdGxhYi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vYWxlcnQubWRcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi9hbGVydC5tZFxuICovXG5tMmQyLmxvYWQoJCA9PiB7XG4gICAgZnVuY3Rpb24gY2xvc2UoYWZ0ZXJDbG9zZSkge1xuICAgICAgICBsZXQgd2luRXhpc3RzID0gJC5leGlzdHMoXCIjbTJkMi1hbGVydCAubTJkMi1hbGVydC1mcm9udFwiKTtcbiAgICAgICAgaWYod2luRXhpc3RzKSB7XG4gICAgICAgICAgICBsZXQgd2luID0gJChcIiNtMmQyLWFsZXJ0IC5tMmQyLWFsZXJ0LWZyb250XCIpO1xuICAgICAgICAgICAgd2luLmNzcy5hZGQoXCJ2YW5pc2hcIik7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgd2luRXhpc3RzID0gJC5leGlzdHMoXCIjbTJkMi1hbGVydCAubTJkMi1hbGVydC1mcm9udFwiKTtcbiAgICAgICAgICAgICAgICBpZih3aW5FeGlzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNtMmQyLWFsZXJ0XCIpLnJlbW92ZSgpOyAvLyBCZSBzdXJlIGl0IGV4aXN0cyBiZWZvcmUgdHJ5aW5nIHRvIHJlbW92ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihhZnRlckNsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyQ2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCA0MDApOyAvL0FuaW1hdGlvbiB0YWtlcyA1MDAsIGFmdGVyIHRoYXQgd2lsbCBiZSByZXN0b3JlZCwgc28gd2UgbmVlZCB0byByZW1vdmUgaXQgYmVmb3JlIHRoYXQgdGltZS5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKGFmdGVyQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICBhZnRlckNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZmFJY29ucyA9IHtcbiAgICAgICAgd3JhcCAgICAgOiBmYWxzZSxcbiAgICAgICAgcXVlc3Rpb24gOiBbXCJmYVwiLCBcImZhLXF1ZXN0aW9uLWNpcmNsZVwiXSxcbiAgICAgICAgaW5mbyAgICAgOiBbXCJmYVwiLCBcImZhLWV4Y2xhbWF0aW9uLWNpcmNsZVwiXSxcbiAgICAgICAgZXJyb3IgICAgOiBbXCJmYVwiLCBcImZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlXCJdLFxuICAgICAgICBvayAgICAgICA6IFtcImZhXCIsIFwiZmEtY2hlY2tcIl0sXG4gICAgICAgIGlucHV0ICAgIDogW1wiZmFcIiwgXCJmYS1lZGl0XCJdLFxuICAgICAgICB3YWl0ICAgICA6IFtcImZhXCIsIFwiZmEtY29nXCIsIFwiZmEtc3BpblwiXVxuICAgIH1cbiAgICBjb25zdCBtYXRlcmlhbCA9IHtcbiAgICAgICAgd3JhcCAgICAgOiBcIm1hdGVyaWFsLWljb25zXCIsXG4gICAgICAgIHF1ZXN0aW9uIDogXCJoZWxwXCIsXG4gICAgICAgIGluZm8gICAgIDogXCJpbmZvXCIsXG4gICAgICAgIGVycm9yICAgIDogXCJlcnJvclwiLFxuICAgICAgICBvayAgICAgICA6IFwiZG9uZVwiLFxuICAgICAgICBpbnB1dCAgICA6IFwiZWRpdFwiLFxuICAgICAgICB3YWl0ICAgICA6IFwicGVuZGluZ1wiXG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRDc3MgPSB7XG4gICAgICAgIHdyYXAgICAgIDogZmFsc2UsXG4gICAgICAgIHF1ZXN0aW9uIDogXCJpY29uX3F1ZXN0aW9uXCIsXG4gICAgICAgIGluZm8gICAgIDogXCJpY29uX2luZm9cIixcbiAgICAgICAgZXJyb3IgICAgOiBcImljb25fZXJyb3JcIixcbiAgICAgICAgb2sgICAgICAgOiBcImljb25fb2tcIixcbiAgICAgICAgaW5wdXQgICAgOiBcImljb25faW5wdXRcIixcbiAgICAgICAgd2FpdCAgICAgOiBcImljb25fd2FpdFwiXG4gICAgfVxuICAgICQubWVzc2FnZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IGNzcyA9IGRlZmF1bHRDc3M7XG4gICAgICAgIHN3aXRjaCAoJC5tZXNzYWdlSWNvbnMpIHtcbiAgICAgICAgICAgIGNhc2UgXCJmYVwiOiBjc3MgPSBmYUljb25zOyBicmVha1xuICAgICAgICAgICAgY2FzZSBcIm1hdGVyaWFsXCIgOiBjc3MgPSBtYXRlcmlhbDsgYnJlYWtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYoJC5pc09iamVjdCgkLm1lc3NhZ2VJY29ucykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3NzID0gJC5tZXNzYWdlSWNvbnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmKCEgJC5pc0Z1bmN0aW9uKG9wdGlvbnMuY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgaWYob3B0aW9ucy5jYWxsYmFjayAmJiEgb3B0aW9ucy50ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudGV4dCA9IG9wdGlvbnMuY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2sgPSAoKSA9PiB7fVxuICAgICAgICAgICAgfVxuIFx0XHQgICAgaWYoISBvcHRpb25zLnRleHQpIHsgb3B0aW9ucy50ZXh0ID0gXCJcIiB9XG4gICAgICAgIH1cbiAgICAgICAgY2xvc2UoKCkgPT4geyAvLyBCZSBzdXJlIHdlIGhhdmUgbm8gb3RoZXIgYWxlcnRcbiAgICAgICAgICAgICQoXCJib2R5XCIsIHtcbiAgICAgICAgICAgICAgICBtMmQyQWxlcnQgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICBpZCA6IFwibTJkMi1hbGVydFwiLFxuICAgICAgICAgICAgICAgICAgICBiYWNrIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBcIm0yZDItYWxlcnQtYmFja1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3AgOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yIDogXCIjMDAwNVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiBcImNlbnRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9udCA6IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImZvcm1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiAob3B0aW9ucy5jc3MgPyAoJC5pc0FycmF5KG9wdGlvbnMuY3NzKSA/IG9wdGlvbnMuY3NzIDogW29wdGlvbnMuY3NzXSkgOiBbXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KFtcIm0yZDItYWxlcnQtZnJvbnRcIiwgXCJwb3B1cFwiLCBvcHRpb25zLmljb25dKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgekluZGV4IDogMTAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJzcGFuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFtcImljb25cIiwgb3B0aW9ucy5pY29uXS5jb25jYXQoY3NzLndyYXAgPyBbY3NzLndyYXBdIDogY3NzW29wdGlvbnMuaWNvbl0pLmNvbmNhdChvcHRpb25zLmljb24gPT09IFwid2FpdFwiID8gXCJzcGluXCIgOiBcIlwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA6IGNzcy53cmFwID8gY3NzW29wdGlvbnMuaWNvbl0gOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogXCJtMmQyLWFsZXJ0LXRpdGxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4gOiBvcHRpb25zLnRpdGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtc2cgOiAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJvcHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBcIm0yZDItYWxlcnQtdGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9wdGlvbnMuaWNvbiA9PT0gXCJpbnB1dFwiICYmISBvcHRpb25zLnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzZXQgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFwibTJkMi1hbGVydC1maWVsZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiBcImFuc3dlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25sb2FkIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoJC5pc1BsYWluT2JqZWN0KG9wdGlvbnMudGV4dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzZXQgOiBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogXCJtMmQyLWFsZXJ0LWZpZWxkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zLnRleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0geyBzcGFuIDogb3B0aW9ucy50ZXh0LnJlcGxhY2UoXCJcXG5cIixcIjxicj5cIikgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb3BzLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShvcHRpb25zLmljb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uc3VibWl0IDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldERhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZ1bmM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaChkYXRhLmJ1dHRvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm9rXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwieWVzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayh0cnVlLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSAoKSA9PiB7IG9wdGlvbnMuY2FsbGJhY2soZmFsc2UsIGRhdGEpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNhbmNlbFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSAoKSA9PiB7IG9wdGlvbnMuY2FsbGJhY2sobnVsbCwgZGF0YSkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2VuZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gKCkgPT4geyBvcHRpb25zLmNhbGxiYWNrKGRhdGFbT2JqZWN0LmtleXMoZGF0YSlbMF1dLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayhkYXRhW09iamVjdC5rZXlzKGRhdGEpLmZpbmQoaXQgPT4gaXQgIT09IFwiYnV0dG9uXCIpXSwgZGF0YSkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBJZiB3ZSBoYXZlIG1vcmUgdGhhbiBvbmUgZmllbGQsIHdlIHNlbmQgYWxsOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gKCkgPT4geyBvcHRpb25zLmNhbGxiYWNrKGRhdGEsIGRhdGEpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IC8vIFdoZW4gc2V0dGluZyBjdXN0b21pemVkIGJ1dHRvbnMsIHdlIHNlbmQgYWxsOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSAoKSA9PiB7IG9wdGlvbnMuY2FsbGJhY2soZGF0YSwgZGF0YSkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2UoZnVuYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmID0gdGhpcy5maW5kKFwiW2F1dG9mb2N1c11cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRlZikgeyBkZWYuZm9jdXMoKTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChvYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdCdXR0b25zID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob2IubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0J1dHRvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFwibTJkMi1hbGVydC1idXR0b25zXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2IuZm9yRWFjaChiID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEteiBdL2csXCJcIikucmVwbGFjZShcIiBcIixcIl9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdCdXR0b25zLmJ1dHRvbnNba2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogXCJzdWJtaXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBbXCJjb2xvclwiLCBrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgOiAkLmRpY3QgIT09IHVuZGVmaW5lZCA/ICQuZGljdChiKSA6IGIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b2ZvY3VzIDogW1wib2tcIixcInllc1wiXS5pbmNsdWRlcyhiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtTm9WYWxpZGF0ZSA6IFtcImNhbmNlbFwiXS5pbmNsdWRlcyhiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhcHBlbmQgYSBoaWRkZW4gaW5wdXQgd2l0aCB0aGUgdmFsdWUgb2YgdGhlIGJ1dHRvbiBjbGlja2VkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2sgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzLmNsb3Nlc3QoXCJmb3JtXCIpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImlucHV0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA6IFwiaGlkZGVuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgOiB0aGlzLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdCdXR0b25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfShvcHRpb25zLmJ1dHRvbnMpXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFkZCBhdXRvbWF0aWNhbGx5IG5hbWUgdG8gZmllbGRzIGluIGNhc2UgaXQgaXMgbm90IHNwZWNpZmllZDpcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICAkKFwiI20yZDItYWxlcnQgLm0yZDItYWxlcnQtZnJvbnRcIikuZmluZEFsbChcImlucHV0LCBzZWxlY3QsIHRleHRhcmVhXCIpLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBpZihlbGVtLm5hbWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBlbGVtLm5hbWUgPSBcImZpZWxkX1wiICsgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgY2xvc2UgOiBjbG9zZSB9O1xuICAgIH1cbiAgICAkLndhaXQgPSAodGl0bGUsIHRleHQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHJldHVybiAkLm1lc3NhZ2Uoe1xuICAgICAgICAgICAgaWNvbiA6IFwid2FpdFwiLFxuICAgICAgICAgICAgdGl0bGUgOiB0aXRsZSxcbiAgICAgICAgICAgIGJ1dHRvbnMgOiBbXSxcbiAgICAgICAgICAgIHRleHQgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRleHQsXG4gICAgICAgICAgICBjYWxsYmFjayA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyB0ZXh0IDogY2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICQuYWxlcnQgPSAodGl0bGUsIHRleHQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHJldHVybiAkLm1lc3NhZ2Uoe1xuICAgICAgICAgICAgaWNvbiA6IFwiaW5mb1wiLFxuICAgICAgICAgICAgdGl0bGUgOiB0aXRsZSxcbiAgICAgICAgICAgIGJ1dHRvbnMgOiBbXCJva1wiXSxcbiAgICAgICAgICAgIHRleHQgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRleHQsXG4gICAgICAgICAgICBjYWxsYmFjayA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyB0ZXh0IDogY2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICQuc3VjY2VzcyA9ICh0aXRsZSwgdGV4dCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuICQubWVzc2FnZSh7XG4gICAgICAgICAgICBpY29uIDogXCJva1wiLFxuICAgICAgICAgICAgdGl0bGUgOiB0aXRsZSxcbiAgICAgICAgICAgIGJ1dHRvbnMgOiBbXCJva1wiXSxcbiAgICAgICAgICAgIHRleHQgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRleHQsXG4gICAgICAgICAgICBjYWxsYmFjayA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyB0ZXh0IDogY2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICQuZmFpbHVyZSA9ICh0aXRsZSwgdGV4dCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuICQubWVzc2FnZSh7XG4gICAgICAgICAgICBpY29uIDogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGl0bGUgOiB0aXRsZSxcbiAgICAgICAgICAgIGJ1dHRvbnMgOiBbXCJva1wiXSxcbiAgICAgICAgICAgIHRleHQgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRleHQsXG4gICAgICAgICAgICBjYWxsYmFjayA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyB0ZXh0IDogY2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICQuY29uZmlybSA9ICh0aXRsZSwgdGV4dCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuICQubWVzc2FnZSh7XG4gICAgICAgICAgICBpY29uIDogXCJxdWVzdGlvblwiLFxuICAgICAgICAgICAgdGl0bGUgOiB0aXRsZSxcbiAgICAgICAgICAgIGJ1dHRvbnMgOiBbXCJ5ZXNcIiwgXCJub1wiXSxcbiAgICAgICAgICAgIHRleHQgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRleHQsXG4gICAgICAgICAgICBjYWxsYmFjayA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyB0ZXh0IDogY2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICQucHJvbXB0ID0gKHRpdGxlLCB0ZXh0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gJC5tZXNzYWdlKHtcbiAgICAgICAgICAgIGljb24gOiBcImlucHV0XCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtcImNhbmNlbFwiLFwic2VuZFwiXSxcbiAgICAgICAgICAgIHRleHQgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRleHQsXG4gICAgICAgICAgICBjYWxsYmFjayA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyB0ZXh0IDogY2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICQuY2xvc2VBbGwgPSAoKSA9PiB7XG4gICAgICAgIGNsb3NlKCk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogTTJEMiBMYW5ndWFnZSBFeHRlbnNpb25cbiAqIEBzaW5jZSAyMDIxLTA2LTAxXG4gKlxuICogQWRkIHN1cHBvcnRzIGZvciBtdWx0aS1sYW5ndWFnZSBpbnRlcmZhY2VzXG4gKlxuICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gKiAkLmRpY3Qoa2V5d29yZCwgW3ZhcmlhYmxlc10pICA6IFRvIGdldCB0cmFuc2xhdGlvbnMgZnJvbSBkaWN0aW9uYXJ5XG4gKiAkLmxhbmcobGFuZykgICAgICAgICAgICAgICAgICA6IFNldCBuZXcgbGFuZ3VhZ2VcbiAqXG4gKiBEb2N1bWVudGF0aW9uIDpcbiAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi9sYW5nLm1kXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vbGFuZy5tZFxuICovXG5tMmQyLmxvYWQoJCA9PiB7XG4gICAgbGV0IG1hbnVhbExhbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm0yZDIubGFuZ1wiKSB8fCBcIlwiXG4gICAgbGV0IGxhbmd1YWdlID0gbWFudWFsTGFuZyB8fCBuYXZpZ2F0b3IubGFuZ3VhZ2U7XG4gICAgZnVuY3Rpb24gRGljdGlvbmFyeShsYW5nKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGtleXdvcmQsIHZhcnMpIHtcbiAgICAgICAgICAgIGlmKGtleXdvcmQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICBsZXQgbXNnID0gb2JqLnZhbChrZXl3b3JkLHRydWUpO1xuICAgICAgICAgICAgaWYodmFycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIHZhcnMgPT0gXCJzdHJpbmdcIil7XG4gICAgICAgICAgICAgICAgICAgIGlmKHZhcnMgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcnMgPSB2YXJzLnJlcGxhY2UoLzskLyxcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhaXJzID0gdmFycy5zcGxpdChcIjtcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJzID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWlycy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnQgPSBwYWlyc1twXS5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyc1twYXJ0WzBdXSA9IHBhcnRbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgdmFycyA9PSBcIm9iamVjdFwiKXtcbiAgICAgICAgICAgICAgICAgICAgdmFycy5mb3JFYWNoKHYgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGt3ZCA9IHZhcnNbdl0gKyBcIlwiOyAvL0JlIHN1cmUgaXRzIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAga3dkID0gb2JqLnZhbChrd2QsZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gbXNnLnJlcGxhY2Uodixrd2QpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtc2c7XG4gICAgICAgIH1cbiAgICAgICAgb2JqLmxhbmcgPSBsYW5nIHx8IFwiZW5cIjtcbiAgICAgICAgb2JqLmRhdGEgPSB7fTtcbiAgICAgICAgb2JqLnNldCA9IGZ1bmN0aW9uKGRpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRpY3Rpb25hcnk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgb2JqLmhhcyA9IGZ1bmN0aW9uKGtleXdvcmQsIGxhbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBsYW5nID09PSB1bmRlZmluZWQgPyB0aGlzLmRhdGFba2V5d29yZF0gIT09IHVuZGVmaW5lZCA6IHRoaXMuZGF0YVtrZXl3b3JkXVtsYW5nXSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICB9O1xuICAgICAgICBvYmoudmFsID0gZnVuY3Rpb24oa2V5d29yZCwgcmVwb3J0KXtcbiAgICAgICAgICAgIGlmKCQuaXNFbXB0eShvYmouZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRGljdGlvbmFyeSBpcyBlbXB0eS4gWW91IG5lZWQgdG8gYWRkIGEgZGljdGlvbmFyeSwgZm9yIGV4YW1wbGU6IGAkLmRpY3Quc2V0KHtcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgIFwic2F2ZSAgIDogeyBlbiA6ICdTYXZlJywgZXMgOiAnR3VhcmRhcicgfSxcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgIFwiY2FuY2VsIDogeyBlbiA6ICdDYW5jZWwnLCBlcyA6ICdDYW5jZWxhcicgfVxcblwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ5ZXMgICAgOiB7IGVuIDogJ1llcycsIGVzIDogJ1NpJyB9LFxcblwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJubyAgICAgOiB7IGVuIDogJ05vJywgZXMgOiAnTm8nIH1cXG5cIiArXG4gICAgICAgICAgICAgICAgXCJ9KWBcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZigha2V5d29yZCl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIGtleXdvcmQgc3BlY2lmaWVkLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0cmFuc2xhdGlvbiA9IGtleXdvcmQ7XG4gICAgICAgICAgICBpZihyZXBvcnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlcG9ydCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAga2V5d29yZCA9IGtleXdvcmQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmKHRoaXMuaGFzKGtleXdvcmQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUxhbmcgPSB0aGlzLmxhbmcuc3BsaXQoXCItXCIpWzBdO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuaGFzKGtleXdvcmQsIHRoaXMubGFuZykpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb24gPSB0aGlzLmRhdGFba2V5d29yZF1bdGhpcy5sYW5nXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYodGhpcy5oYXMoa2V5d29yZCxiYXNlTGFuZykpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb24gPSB0aGlzLmRhdGFba2V5d29yZF1bYmFzZUxhbmddO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKHJlcG9ydCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1pc3NpbmcgdHJhbnNsYXRpb24gZm9yIGxhbmcgW1wiK3RoaXMubGFuZytcIl06IFwiK2tleXdvcmQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZihyZXBvcnQpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1pc3Npbmcga2V5d29yZDogXCIra2V5d29yZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0aW9uO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgZGljdGlvbmFyeVxuICAgICQuZGljdCA9IG5ldyBEaWN0aW9uYXJ5KGxhbmd1YWdlKTtcblxuICAgIGNvbnN0IGxhbmdFdmVudHMgPSBbXTtcbiAgICAkLmxhbmcgPSBmdW5jdGlvbihuZXdMYW5nKSB7XG4gICAgICAgIGlmKG5ld0xhbmcpIHtcbiAgICAgICAgICAgICQuZGljdC5sYW5nID0gbmV3TGFuZztcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibTJkMi5sYW5nXCIsICQuZGljdC5sYW5nKTtcbiAgICAgICAgfVxuICAgICAgICAkKFwiYm9keVwiKS5maW5kQWxsKFwiW2xhbmddXCIpLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgICAgICAgIGxldCB0eHQgPSBlbGVtLnRleHQ7XG4gICAgICAgICAgICAvLyBXaGVuIGVsZW1lbnQgaGFzIGNvbnRlbnQgYW5kIChvcHRpb25hbCkgdGl0bGVcbiAgICAgICAgICAgIGlmKHR4dCAmJiEgZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJub3R4dFwiKSkge1xuICAgICAgICAgICAgICAgIGlmKGVsZW0uZGF0YXNldC5rdyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uZGF0YXNldC5rdyA9ICQubGFuZy5nZXRLZXl3b3JkKHR4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZW0udGV4dCA9ICQuZGljdChlbGVtLmRhdGFzZXQua3cpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlS3cgPSBlbGVtLmRhdGFzZXQua3cgKyBcIl90aXRsZVwiO1xuICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9ICQuZGljdC5oYXModGl0bGVLdykgPyAkLmRpY3QodGl0bGVLdykgOiBcIlwiO1xuICAgICAgICAgICAgICAgIGlmKHRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0udGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBlbGVtZW50IG9ubHkgaGFzIHRpdGxlOlxuICAgICAgICAgICAgfSBlbHNlIGlmKGVsZW0udGl0bGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBcIlwiXG4gICAgICAgICAgICAgICAgaWYoZWxlbS5kYXRhc2V0Lmt3KSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5kYXRhc2V0Lmt3ID0gJC5sYW5nLmdldEtleXdvcmQoZWxlbS50aXRsZSk7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0udGl0bGUgPSB0aXRsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYoZWxlbS5wbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgIGxldCBwbGFjZWhvbGRlciA9IFwiXCJcbiAgICAgICAgICAgICAgICBpZihlbGVtLmRhdGFzZXQua3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSAkLmRpY3QoZWxlbS5kYXRhc2V0Lmt3KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLmRhdGFzZXQua3cgPSAkLmxhbmcuZ2V0S2V5d29yZChlbGVtLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSAkLmRpY3QoZWxlbS5kYXRhc2V0Lmt3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYocGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZihlbGVtLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gXCJcIlxuICAgICAgICAgICAgICAgIGlmKGVsZW0uZGF0YXNldC5rdykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICQuZGljdChlbGVtLmRhdGFzZXQua3cpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uZGF0YXNldC5rdyA9ICQubGFuZy5nZXRLZXl3b3JkKGVsZW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICQuZGljdChlbGVtLmRhdGFzZXQua3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbGFuZ0V2ZW50cy5mb3JFYWNoKGNhbGxiYWNrID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ld0xhbmcpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydCB0ZXh0IHRvIGtleXdvcmRcbiAgICAgKi9cbiAgICAkLmxhbmcuZ2V0S2V5d29yZCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRleHQudG9Mb3dlckNhc2UoKS50cmltKCkucmVwbGFjZSgvIC9nLFwiX1wiKS5yZXBsYWNlKC9bXlxcd10vZyxcIlwiKS5yZXBsYWNlKC9fJC8sXCJcIik7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgkLmxhbmcsIFwib25jaGFuZ2VcIiwge1xuICAgICAgICBnZXQoKSB7IHJldHVybiB0aGlzIH0sXG4gICAgICAgIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgaWYoJC5pc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGxhbmdFdmVudHMucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5hYmxlIHRvIHNldCBsYW5nLm9uY2hhbmdlLCBiZWNhdXNlIGl0IGlzIG5vdCBhIGZ1bmN0aW9uOiBcIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn0pO1xuLy8gVHJhbnNsYXRlIEhUTUwgb24gcmVhZHk6XG5tMmQyLnJlYWR5KCQgPT4ge1xuICAgIGNvbnN0IG1hbnVhbExhbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm0yZDIubGFuZ1wiKSB8fCBcIlwiXG4gICAgY29uc3QgYm9keUxhbmcgPSAkKFwiYm9keVwiKS5maW5kKFwiW2xhbmddXCIpO1xuICAgIGNvbnN0IGh0bWxMYW5nID0gJChcImh0bWxcIikubGFuZyB8fCAoYm9keUxhbmcgPyBib2R5TGFuZy5sYW5nIDogbnVsbCkgfHwgXCJlblwiO1xuICAgIGNvbnN0IGlzRGlmZmVyZW50ID0gbWFudWFsTGFuZyA/IGh0bWxMYW5nICE9PSBtYW51YWxMYW5nIDogaHRtbExhbmcgIT09IG5hdmlnYXRvci5sYW5ndWFnZS5zcGxpdChcIi1cIilbMF07XG4gICAgaWYoaXNEaWZmZXJlbnQpIHsgJC5sYW5nKCkgfVxufSk7XG5tMmQyLmxvYWQoJCA9PiB7XG4gICAgLypcbiAgICAgKiBNMkQyIFN0b3JhZ2UgRXh0ZW5zaW9uXG4gICAgICogQGF1dGhvcjogQS4gTGVwZVxuICAgICAqIEBzaW5jZSAyMDIxLTA2LTAyXG4gICAgICpcbiAgICAgKiBXcmFwcGVyIGZvciBkaWZmZXJlbnQga2luZHMgb2Ygc3RvcmFnZS5cbiAgICAgKiBPbmUgYWR2YW50YWdlIGlzIHRoYXQgb2JqZWN0cyBhcmUgc3RvcmVkIHdpdGggdHlwZSBpbnN0ZWFkIG9mIHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgZXh0ZW5zaW9uIHByb3ZpZGVzOlxuICAgICAqICQubG9jYWwgOiBUbyBnZXQvc2V0IHZhbHVlcyBpbiBsb2NhbFN0b3JhZ2VcbiAgICAgKiAkLnNlc3Npb24gOiBUbyBnZXQvc2V0IHZhbHVlcyBpbiBzZXNzaW9uU3RvcmFnZVxuICAgICAqXG4gICAgICogRG9jdW1lbnRhdGlvbjpcbiAgICAgKiBodHRwczovL2dpdGxhYi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vc3RvcmFnZS5tZFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi9zdG9yYWdlLm1kXG4gICAgICpcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTdG9yYWdlKHR5cGUpIHtcbiAgICAgICAgc3dpdGNoKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2xvY2FsJyAgOiBpZih3aW5kb3cubG9jYWxTdG9yYWdlKSAgICAgdGhpcy5zdG9yZSA9IGxvY2FsU3RvcmFnZTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzZXNzaW9uJzogaWYod2luZG93LnNlc3Npb25TdG9yYWdlKSAgIHRoaXMuc3RvcmUgPSBzZXNzaW9uU3RvcmFnZTsgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5zdG9yZSA9PSB1bmRlZmluZWQpIHRoaXMuc3RvcmUgPSBsb2NhbFN0b3JhZ2U7IC8vRGVmYXVsdFxuICAgICAgICB0aGlzLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgICAgICAgICBpZih0eXBlb2YodmFsKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSB7ICckJyA6IHZhbCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdG9yZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIGxldCB2YWw7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbCA9IEpTT04ucGFyc2UodGhpcy5zdG9yZS5nZXRJdGVtKGtleSkpIHx8IHt9O1xuICAgICAgICAgICAgfSBjYXRjaChpZ25vcmUpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLnN0b3JlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHZhbFtcIiRcIl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhbCA9IHZhbFtcIiRcIl07XG4gICAgICAgICAgICB9IGVsc2UgaWYoT2JqZWN0LmtleXModmFsKS5sZW5ndGggPT09IDAgJiYgdmFsLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlbCA9IGZ1bmN0aW9uKGtleSkgeyB0aGlzLnN0b3JlLnJlbW92ZUl0ZW0oa2V5KTsgfVxuICAgICAgICB0aGlzLmtleXMgPSBmdW5jdGlvbigpIHsgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuc3RvcmUpLnNvcnQoKTsgfVxuICAgICAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24oKSB7IHRoaXMuc3RvcmUuY2xlYXIoKTsgfVxuICAgICAgICB0aGlzLmV4aXN0cyA9IGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdGhpcy5zdG9yZS5oYXNPd25Qcm9wZXJ0eShrZXkpOyB9XG4gICAgICAgIHRoaXMubG9nID0gZnVuY3Rpb24oa2V5LCB2YWwsIG4pIHtcbiAgICAgICAgICAgIGlmKG4gPT0gdW5kZWZpbmVkKSBuID0gMTA7XG4gICAgICAgICAgICBjb25zdCB0bXAgPSB0aGlzLmdldChrZXkpIHx8IFtdO1xuICAgICAgICAgICAgdG1wLnB1c2godmFsKTtcbiAgICAgICAgICAgIHdoaWxlKHRtcC5sZW5ndGggPiBuKSB0bXAuc2hpZnQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0KGtleSx0bXApO1xuICAgICAgICB9XG4gICAgfVxuICAgICQubG9jYWwgPSBuZXcgU3RvcmFnZShcImxvY2FsXCIpO1xuICAgICQuc2Vzc2lvbiA9IG5ldyBTdG9yYWdlKFwic2Vzc2lvblwiKTtcbn0pO1xuLyoqXG4gKlxuICogTTJEMiBVcGxvYWQgUGx1Z2luXG4gKiB2ZXIuIDIwMjEtMTItMDNcbiAqXG4gKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAqICQudXBsb2FkXG4gKlxuICogRG9jdW1lbnRhdGlvbiA6XG4gKiBodHRwczovL2dpdGxhYi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vdXBsb2FkLm1kXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vdXBsb2FkLm1kXG4gKi9cbiBtMmQyLmxvYWQoJCA9PiB7XG4gICAgJC51cGxvYWQgPSBmdW5jdGlvbihldiwgb3B0aW9ucykge1xuICAgICAgY29uc3Qgb3B0cyA9IE9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICAgICAgIC8vIHVwbG9hZCAgIDogXCJodHRwOi8vbG9jYWxob3N0L3BhZ2VcIixcbiAgICAgICAgICAgIC8vIG9uU2VsZWN0IDogKGZpbGVzLCBzb3VyY2VzKSA9PiB7IC4uLiB9LFxuICAgICAgICAgICAgLy8gb25VcGRhdGUgOiAocHJvZ3Jlc3NfcGN0LCBmaWxlLCBpbmRleCkgPT4geyAuLi4gfSxcbiAgICAgICAgICAgIC8vIG9uRG9uZSAgIDogKHJlc3BvbnNlLCBhbGxEb25lKSA9PiB7IC4uLiB9LCAvLyByZXNwb25zZTogY29udGFpbnMgcmVzdWx0IGZyb20gdGhlIHNlcnZlciAoSlNPTiksIGluIChTKSB3aWxsIHRyaWdnZXIgZWFjaCBmaWxlLlxuICAgICAgICAgICAgLy8gb25FcnJvciAgOiAocmVzcG9uc2UpID0+IHsgLi4uIH0sIC8vIHJlc3BvbnNlOiBvYmplY3Qgd2l0aCByZWxldmFudCBpbmZvcm1hdGlvbi4gSW4gKFMpIHdpbGwgdHJpZ2dlciBpbmRlcGVuZGVudGx5LlxuICAgICAgICAgICAgLy8gb25SZXNwb25zZSA6IChyZXNwb25zZSkgPT4geyAuLi4gfSwgLy8gTW9kaWZ5IHJlc3BvbnNlIGZyb20gc2VydmVyIChpZiBuZWVkZWQpXG4gICAgICAgICAgICBhY2NlcHQgICA6IFwiKi8qXCIsIC8vIFlvdSBjYW4gbGltaXQgdGhlIGZpbGUgdHlwZSwgZm9yIGV4YW1wbGU6IFwiaW1hZ2UvKlwiLCBcImltYWdlL2pwZ1wiLCBldGMuXG4gICAgICAgICAgICBwYXJhbGxlbCA6IGZhbHNlLCAvLyBJZiBmYWxzZSwgaXQgd2lsbCBzZW5kIGFsbCBmaWxlcyBpbiBhIHNlcXVlbmNlIChTKVxuICAgICAgICAgICAgZmllbGQgICAgOiBcImZpbGVcIiwgLy9GaWVsZCBuYW1lXG4gICAgICAgICAgICBtdWx0aXBsZSA6IHRydWUsIC8vIEFsbG93IG11bHRpcGxlIGZpbGVzIHRvIGJlIHNlbGVjdGVkIHRvIHVwbG9hZCxcbiAgICAgICAgICAgIG1heEZpbGVzIDogMCwgLy8gTWF4aW11bSBudW1iZXIgb2YgZmlsZXMgdG8gYWxsb3cgdG8gdXBsb2FkLiAwID0gdW5saW1pdGVkXG4gICAgICAgICAgICBtYXhTaXplTWI6IDAsIC8vIE1heGltdW0gc2l6ZSBwZXIgZmlsZSAoUCkgb3IgdG90YWwgKFMpIHRvIGFsbG93XG4gICAgICB9LCBvcHRpb25zKTtcbiAgICAgIG9wdGlvbnMgPSBudWxsOyAvLyBEbyBub3QgdXNlIGl0IGxhdGVyOlxuICAgICAgbGV0IGVsID0gd2luZG93Ll9wcm90ZWN0ZWRfcmVmZXJlbmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIklOUFVUXCIpO1xuICAgICAgZWwubmFtZSA9IG9wdHMuZmllbGQ7XG4gICAgICBlbC50eXBlID0gXCJmaWxlXCI7XG4gICAgICBpZihvcHRzLm11bHRpcGxlID09IHRydWUpIHtcbiAgICAgICAgZWwubXVsdGlwbGUgPSBcIm11bHRpcGxlXCI7XG4gICAgICAgIC8vZWwubmFtZSArPSBcIltdXCI7ICAvL0VuYWJsZSBpZiB5b3UgYXJlIHVzaW5nIFBIUFxuICAgICAgfVxuICAgICAgaWYoISBvcHRzLnVwbG9hZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlVwbG9hZCBub3Qgc3BlY2lmaWVkLiBVc2luZyBjdXJyZW50IHBhZ2UuXCIpXG4gICAgICAgIG9wdHMudXBsb2FkID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIGlmKG9wdHMub25Eb25lID09IHVuZGVmaW5lZCkgICAgICB7IG9wdHMub25Eb25lID0gKHJlc3BvbnNlLCBhbGxEb25lKSA9PiB7IGNvbnNvbGUubG9nKHJlc3BvbnNlKSB9fVxuICAgICAgaWYob3B0cy5vbkVycm9yICA9PSB1bmRlZmluZWQpICAgIHsgb3B0cy5vbkVycm9yICA9IChyZXNwb25zZSkgPT4geyBjb25zb2xlLmxvZyhcIkVycm9yIDogXCIpOyBjb25zb2xlLmxvZyhyZXNwb25zZSk7IH19XG4gICAgICBpZihvcHRzLm9uVXBkYXRlID09IHVuZGVmaW5lZCkgICAgeyBvcHRzLm9uVXBkYXRlID0gKHBjdCwgZmlsZSwgaW5kZXgpID0+IHsgY29uc29sZS5sb2coXCJVcGxvYWRpbmcgOiBcIiArIHBjdCArIFwiJSBcIiArIChvcHRzLm9uZUJ5T25lID8gXCJbIFwiICsgZmlsZS5uYW1lICsgXCIgXVwiIDogXCJcIikpIH0gfVxuICAgICAgaWYob3B0cy5vblJlc3BvbnNlID09IHVuZGVmaW5lZCkgIHsgb3B0cy5vblJlc3BvbnNlID0gKHJlcykgPT4geyByZXR1cm4gcmVzIH0gfSAvLyBSZXR1cm4gaXQgd2l0aG91dCBtb2RpZnlpbmcgaXRcblxuICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICBpZiAoZWwuZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZihvcHRzLm1heEZpbGVzID09PSAwIHwgZWwuZmlsZXMubGVuZ3RoIDw9IG9wdHMubWF4RmlsZXMpIHtcbiAgICAgICAgICAgICAgICBpZihvcHRzLm9uU2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyY3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvdFNpemUgPSAwO1xuICAgICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGVsLmZpbGVzKS5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Jjcy5wdXNoKFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RTaXplICs9IGZpbGUuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1icyA9IHRvdFNpemUgLyAoMTAyNCAqIDEwMjQpO1xuICAgICAgICAgICAgICAgICAgICBpZihvcHRzLm1heFNpemVNYiAmJiBtYnMgPiBvcHRzLm1heFNpemVNYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5vbkVycm9yKFwiTWF4aW11bSBzaXplIGV4Y2VlZGVkOiBcIiArIE1hdGguY2VpbChtYnMpICsgXCJNQiA+IFwiICsgb3B0cy5tYXhTaXplTWIgKyBcIk1CXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzLm9uU2VsZWN0KGVsLmZpbGVzLCBzcmNzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYob3B0cy5vbmVCeU9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVEb25lID0gQXJyYXkoZWwuZmlsZXMubGVuZ3RoKS5maWxsKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZWwuZmlsZXMpLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEZpbGVVcGxvYWQoZWwubmFtZSwgW2ZpbGVdLCBpbmRleCsrLCBvcHRzLCAoZGF0YSwgZmlsZXMsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVEb25lW2luZGV4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbERvbmUgPSBmaWxlRG9uZS5pbmRleE9mKGZhbHNlKSA9PT0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMub25Eb25lKGdldFJlc3BvbnNlKGRhdGEsIGZpbGVzLCBpbmRleCksIGFsbERvbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhbGxEb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEZpbGVVcGxvYWQoZWwubmFtZSwgZWwuZmlsZXMsIDAsIG9wdHMsIChkYXRhLCBmaWxlcywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLm9uRG9uZShnZXRSZXNwb25zZShkYXRhLCBmaWxlcywgaW5kZXgpLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4geyAvLyBjbGVhciAvIGZyZWUgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgICBlbCA9IHdpbmRvdy5fcHJvdGVjdGVkX3JlZmVyZW5jZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0cy5vbkVycm9yKFwiTWF4IGZpbGUgbGltaXQgZXhjZWVkZWQuIE1heGltdW0gZmlsZXM6IFwiICsgb3B0cy5tYXhGaWxlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGVsLmNsaWNrKCk7IC8vIG9wZW4gZGlhbG9nXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UmVzcG9uc2UoZGF0YSwgZmlsZXMsIGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gW107XG4gICAgICAgIGRhdGEgPSBkYXRhIHx8IHt9O1xuICAgICAgICBmaWxlcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gKHR5cGVvZiBkYXRhID09IFwiQXJyYXlcIikgPyAoZGF0YS5sZW5ndGggPT0gZmlsZXMubGVuZ3RoID8gZGF0YVtpbmRleF0gOiBkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGRhdGFbZi5uYW1lXSAhPT0gdW5kZWZpbmVkID8gZGF0YVtmLm5hbWVdIDogZGF0YSlcbiAgICAgICAgICAgIHJlc3BvbnNlLnB1c2goe1xuICAgICAgICAgICAgICAgIGZpbGUgIDogZixcbiAgICAgICAgICAgICAgICBkYXRhICA6IHJvdyxcbiAgICAgICAgICAgICAgICBpbmRleCA6IGluZGV4KyssICAgIC8vIGluIGNhc2Ugb2YgMXgxIGl0IHdpbGwgYmUgY2FsbGVkIG9ubHkgb25jZSwgb3RoZXJ3aXNlLCBpdCB3aWxsIGJlIGluY3JlbWVudGVkLlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwbG9hZCBmaWxlIHVzaW5nIFhIUlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEZpbGVVcGxvYWQoZmllbGROYW1lLCBmaWxlcywgaW5kZXgsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICBjb25zdCB4aHIgICAgID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICBmaWxlcyAgICAgICAgID0gQXJyYXkuZnJvbShmaWxlcyk7XG5cbiAgICAgIHhoci51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcihcInByb2dyZXNzXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgIGlmKG9wdGlvbnMub25lQnlPbmUpIHtcbiAgICAgICAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IE1hdGgucm91bmQoKGUubG9hZGVkICogMTAwKSAvIGUudG90YWwpO1xuICAgICAgICAgICAgICBvcHRpb25zLm9uVXBkYXRlKHBlcmNlbnRhZ2UsIGZpbGVzWzBdLCBpbmRleCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGV0IHNpemVBY2N1bSA9IDA7XG4gICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgZmlsZXMuc29tZShmID0+IHtcbiAgICAgICAgICAgICAgICAgIHNpemVBY2N1bSArPSBmLnNpemU7XG4gICAgICAgICAgICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gZS5sb2FkZWQgPj0gc2l6ZUFjY3VtID8gMTAwIDogMTAwIC0gTWF0aC5yb3VuZCgoKHNpemVBY2N1bSAtIGUubG9hZGVkKSAqIDEwMCkgLyBmLnNpemUpO1xuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkZpbGU6IFwiICsgZi5uYW1lICsgXCIgU2l6ZTogXCIgKyBmLnNpemUpO1xuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxvYWRlZDogXCIgKyBlLmxvYWRlZCArIFwiIEFjY3VtOiBcIiArIHNpemVBY2N1bSArIFwiIFRvdGFsOiBcIiArIGUudG90YWwgKyBcIiBQY3Q6IFwiICsgcGVyY2VudGFnZSlcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMub25VcGRhdGUocGVyY2VudGFnZSwgZiwgaSsrKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBzaXplQWNjdW0gPj0gZS5sb2FkZWQ7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBsZXQgZGF0YSA9IHt9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGF0YSA9IHhoci5yZXNwb25zZVRleHQgPyBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpIDoge1xuICAgICAgICAgICAgICAgIGVycm9yOiB7dHlwZTogXCJVbmtub3duXCIsIHJlYXNvbjogXCJVbmtub3duIEVycm9yXCJ9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoKGVycikge1xuICAgICAgICAgICAgZGF0YS5lcnJvciA9IHsgdHlwZSA6IFwiUGFyc2UgRXJyb3JcIiwgcmVhc29uIDogZXJyLm1lc3NhZ2UgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgNDAwKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhvcHRpb25zLm9uUmVzcG9uc2UoZGF0YSksIGZpbGVzLCBpbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZih0eXBlb2YgZGF0YS5lcnJvciA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5lcnJvciA9IHsgdHlwZSA6IFwiRXhjZXB0aW9uXCIsIHJlYXNvbiA6IGRhdGEuZXJyb3IgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0aW9ucy5vbkVycm9yKGRhdGEuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9LCBmYWxzZSk7XG5cbiAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCBvcHRpb25zLnVwbG9hZCk7XG5cbiAgICAgIGNvbnN0IGxvYWRlZCA9IEFycmF5KGZpbGVzLmxlbmd0aCkuZmlsbChmYWxzZSk7XG4gICAgICBjb25zdCBmb3JtICAgID0gZ2V0RmlsZUZvcm0oZmllbGROYW1lLCBmaWxlcyk7XG4gICAgICBsZXQgbG9hZEluZGV4ID0gMDtcbiAgICAgIGZpbGVzLmZvckVhY2goZiA9PiB7XG4gICAgICAgICAgY29uc3QgcmVhZGVyICA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgbG9hZGVkW2xvYWRJbmRleCsrXSA9IHRydWU7XG4gICAgICAgICAgICBpZihsb2FkZWQuaW5kZXhPZihmYWxzZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoZm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICByZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKGYpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXBhcmVzIGZvcm1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRGaWxlRm9ybShmaWVsZE5hbWUsIGZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gICAgPSBuZXcgRm9ybURhdGEoKTtcblxuICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgZm9ybS5hcHBlbmQoZmllbGROYW1lLCBmaWxlLCBmaWxlLm5hbWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZm9ybVxuICAgIH1cbiB9KTtcblxubTJkMi5sb2FkKCQgPT4ge1xuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFdTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLyoqXG4gICAgICogQGF1dGhvcjogQS5MZXBlXG4gICAgICogQHZlcnNpb246IDIxMDQyNSA6IEFkZGVkIHNlY3VyZSwgaG9zdCBhbmQgY29udmVydGVkIHRvIG0yZDIgZXh0ZW5zaW9uXG4gICAgICogICAgICAgICAgIDIxMDQwNiA6IFJldHJ5IHVudGlsIHJlY29ubmVjdFxuICAgICAqIEBzaW5jZSA6IDIwMThcbiAgICAgKiBXZWJTb2NrZXQgd3JhcHBlclxuICAgICAqXG4gICAgICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gICAgICogJC53c1xuICAgICAqXG4gICAgICogRG9jdW1lbnRhdGlvbiA6XG4gICAgICogaHR0cHM6Ly9naXRsYWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL3dzLm1kXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL3dzLm1kXG4gICAgICovXG4gICAgY2xhc3Mgd3Mge1xuICAgICAgICByZXF1ZXN0KG1zZykge1xuICAgICAgICAgICAgaWYgKG1zZykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0Lm9uZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25uZWN0IGFuZCByZXR1cm4gdGhlIHdlYnNvY2tldCBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIGdldFNvY2tldChvbk1lc3NhZ2UsIG9uT3Blbiwgb25DbG9zZSkge1xuICAgICAgICAgICAgY29uc3Qgd2ViU29ja2V0ID0gbmV3IFdlYlNvY2tldCh0aGlzLnBhdGgpO1xuICAgICAgICAgICAgd2ViU29ja2V0Lm9ub3BlbiA9IG9uT3BlbjtcbiAgICAgICAgICAgIHdlYlNvY2tldC5vbmNsb3NlID0gb25DbG9zZTtcbiAgICAgICAgICAgIHdlYlNvY2tldC5vbm1lc3NhZ2UgPSAocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbk1lc3NhZ2UoSlNPTi5wYXJzZShyZXMuZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlYlNvY2tldC5vbmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2ViU29ja2V0Lm9uZXJyb3IgPSAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignU29ja2V0IGVuY291bnRlcmVkIGVycm9yOiAnLCBlcnIgPyBlcnIubWVzc2FnZSA6ICdVbmtub3duJywgJ0Nsb3Npbmcgc29ja2V0Jyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgd3NrID0gd2ViU29ja2V0IHx8IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYod3NrLnJlYWR5U3RhdGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgd3NrLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHdlYlNvY2tldDtcbiAgICAgICAgfVxuICAgICAgICBjb25uZWN0KG9wdGlvbnMsIG9uTWVzc2FnZSkge1xuICAgICAgICAgICAgdGhpcy5pbml0UmVxdWVzdCA9IG9wdGlvbnMucmVxdWVzdCB8fCBudWxsO1xuICAgICAgICAgICAgdGhpcy5vbkNvbm5lY3QgPSBvcHRpb25zLmNvbm5lY3RlZCB8fCAoKCkgPT4ge30pO1xuICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QgPSBvcHRpb25zLmRpc2Nvbm5lY3RlZCB8fCAoKCkgPT4ge30pO1xuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3QgPSBvcHRpb25zLnJlY29ubmVjdCAhPT0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmhvc3QgPSBvcHRpb25zLmhvc3QgfHwgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lO1xuICAgICAgICAgICAgdGhpcy5zZWN1cmUgPSBvcHRpb25zLnNlY3VyZSA9PT0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucG9ydCA9IG9wdGlvbnMucG9ydCB8fCAodGhpcy5zZWN1cmUgPyA0NDMgOiA4MCk7XG4gICAgICAgICAgICB0aGlzLnBhdGggPSBcIndzXCIgKyAodGhpcy5zZWN1cmUgPyBcInNcIiA6IFwiXCIpICsgXCI6Ly9cIiArIHRoaXMuaG9zdCArIFwiOlwiICsgdGhpcy5wb3J0ICsgXCIvXCIgKyAob3B0aW9ucy5wYXRoIHx8IFwiXCIpO1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgICAgLy8tLS0tLS0tLSBDb25uZWN0IC0tLS0tLS0tLS1cbiAgICAgICAgICAgIGNvbnN0IG9uT3BlbiA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdCh0aGlzLmluaXRSZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29ubmVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb25DbG9zZSA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIGlmKCF0aGlzLmludGVydmFsICYmIHRoaXMucmVjb25uZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVjb25uZWN0ZWQuLi5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndlYlNvY2tldC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlY29ubmVjdGluZy4uLlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndlYlNvY2tldCA9IHRoaXMuZ2V0U29ja2V0KG9uTWVzc2FnZSwgb25PcGVuLCBvbkNsb3NlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGlnbm9yZSkge31cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQgPSB0aGlzLmdldFNvY2tldChvbk1lc3NhZ2UsIG9uT3Blbiwgb25DbG9zZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGlzY29ubmVjdCgpIHtcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLndlYlNvY2tldC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgICQud3MgPSBuZXcgd3MoKTtcbn0pO1xubTJkMi5sb2FkKCQgPT4ge1xuICAgIC8qKlxuICAgICAqIEB2ZXJzaW9uIDIwMjAtMDUtMDlcbiAgICAgKiBAYXV0aG9yIEEuTGVwZSAoZGV2QGFsZXBlLmNvbSlcbiAgICAgKiBYSFIgaW1wbGVtZW50YXRpb25cbiAgICAgKlxuICAgICAqIFRoaXMgZXh0ZW5zaW9uIHByb3ZpZGVzOlxuICAgICAqICQuZ2V0XG4gICAgICogJC5wb3N0XG4gICAgICogJC5wdXRcbiAgICAgKiAkLmRlbGV0ZVxuICAgICAqICQuY29ubmVjdFxuICAgICAqICQub3B0aW9uc1xuICAgICAqICQudHJhY2VcbiAgICAgKiAkLnBhdGNoXG4gICAgICpcbiAgICAgKiBEb2N1bWVudGF0aW9uIDpcbiAgICAgKiBodHRwczovL2dpdGxhYi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24veGhyLm1kXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL3hoci5tZFxuICAgICAqL1xuXG4gICAgIC8qKlxuICAgICAqIEBwYXJhbSBtZXRob2Q6IEhUVFAgbWV0aG9kIChHRVQsIFBPU1QsIFBVVCwgREVMRVRFKVxuICAgICAqIEBwYXJhbSB1cmw6IHNlcnZpY2UgVVJMXG4gICAgICogQHBhcmFtIGRhdGE6IERhdGEgb2JqZWN0IHRvIHNlbmQgKGluIGNhc2Ugb2YgUE9TVCBhbmQgUFVUKVxuICAgICAqIEBwYXJhbSBjYWxsYmFjazogQ2FsbGJhY2sgb24gU3VjY2VzcyAoaXQgd2lsbCByZXR1cm4gZGF0YSlcbiAgICAgKiBAcGFyYW0gZXJyb3JfY2FsbGJhY2s6IENhbGxiYWNrIG9uIEZhaWx1cmVcbiAgICAgKiBAcGFyYW0ganNvbiA6IEJvb2xlYW4gKGlmIHNldCwgaXQgd2lsbCBzZXQgcmVxdWVzdCBjb250ZW50LXR5cGUgYXMganNvbiBhbmQgaW4gY2FzZSBvZiBHRVQsIGl0IHdpbGwgc2VuZCBpdCBhcyBib2R5IGluc3RlYWQgb2YgcXVlcnkpXG4gICAgICovXG4gICAgY29uc3QgWEhSID0gZnVuY3Rpb24obWV0aG9kLCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBlcnJvcl9jYWxsYmFjaywganNvbikge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIGlmKGpzb24gPT09IHVuZGVmaW5lZCkgeyBqc29uID0gZmFsc2UgfVxuICAgICAgICBpZihlcnJvcl9jYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7IGVycm9yX2NhbGxiYWNrID0gZnVuY3Rpb24oZSkgeyBjb25zb2xlLmxvZyhlKTsgfSB9XG4gICAgICAgIGlmKGRhdGEgJiYgT2JqZWN0LmVudHJpZXMoZGF0YSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBkYXRhID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBpZihkYXRhKSB7XG4gICAgICAgICAgICBpZihqc29uKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2gobWV0aG9kLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkdFVFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsICs9ICh1cmwuaW5kZXhPZihcIj9cIikgIT09IC0xID8gXCImXCIgOiBcIj9cIikgKyAoT2JqZWN0LmtleXMoZGF0YSkubWFwKGtleSA9PiBrZXkgKyAnPScgKyBkYXRhW2tleV0pLmpvaW4oJyYnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gKE9iamVjdC5rZXlzKGRhdGEpLm1hcChrZXkgPT4ga2V5ICsgJz0nICsgZGF0YVtrZXldKS5qb2luKCcmJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXF1ZXN0Lm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuICAgICAgICBpZihqc29uKSB7XG4gICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIiwgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZXJyb3JfY2FsbGJhY2soe3R5cGUgOiBcIkNvbm5lY3Rpb25cIiwgcmVhc29uOiBcIkNvbm5lY3Rpb24gUmVmdXNlZFwifSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0LnJlc3BvbnNlVGV4dCA/IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpIDoge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcjoge3R5cGU6IFwiVW5rbm93blwiLCByZWFzb246IFwiVW5rbm93biBFcnJvclwifVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGNhdGNoKGVycikge1xuICAgICAgICAgICAgICAgIGRhdGEuZXJyb3IgPSB7IHR5cGUgOiBcIlBhcnNlIEVycm9yXCIsIHJlYXNvbiA6IGVyci5tZXNzYWdlIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA+PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgPCA0MDApIHtcbiAgICAgICAgICAgICAgICBpZihjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYoZXJyb3JfY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgZGF0YS5lcnJvciA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmVycm9yID0geyB0eXBlIDogXCJFeGNlcHRpb25cIiwgcmVhc29uIDogZGF0YS5lcnJvciB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfY2FsbGJhY2soZGF0YS5lcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0LnNlbmQoZGF0YSk7XG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2hvcnQgbWV0aG9kLiBJdCBhbHNvIHZhbGlkYXRlcyBhcmd1bWVudHMgYW5kIGFsbG93IG9taXR0aW5nIHNvbWUsIGVnLjpcbiAgICAgKiB4aHIuZ2V0KHVybCwgZGF0YSwgY2FsbGJhY2ssIGVycm9yX2NhbGxiYWNrLCBqc29uKTtcbiAgICAgKiB4aHIuZ2V0KHVybCwgY2FsbGJhY2ssIGVycm9yX2NhbGxiYWNrLCBqc29uKTtcbiAgICAgKiB4aHIuZ2V0KHVybCwgZGF0YSwgY2FsbGJhY2ssIGpzb24pO1xuICAgICAqIHhoci5nZXQodXJsLCBkYXRhLCBqc29uKTtcbiAgICAgKiB4aHIuZ2V0KHVybCwgY2FsbGJhY2ssIGpzb24pO1xuICAgICAqL1xuICAgIGNvbnN0IHhociA9IHt9O1xuICAgIFtcImdldFwiLFwicG9zdFwiLFwicHV0XCIsXCJkZWxldGVcIixcImNvbm5lY3RcIixcIm9wdGlvbnNcIixcInRyYWNlXCIsXCJwYXRjaFwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICB4aHJbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGV0IHVybCwgZGF0YSwgY2FsbGJhY2ssIGVycm9yX2NhbGxiYWNrLCBqc29uO1xuICAgICAgICAgICAgLy8gbm9pbnNwZWN0aW9uIEZhbGxUaHJvdWdoSW5Td2l0Y2hTdGF0ZW1lbnRKU1xuICAgICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmd1bWVudHNbNF0gPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSBhcmd1bWVudHNbNF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhc3NlZCBKU09OIGFyZ3VtZW50OiBcIiArIGFyZ3VtZW50c1s0XSArIFwiIGlzIG5vdCBib29sZWFuLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1szXSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NhbGxiYWNrID0gYXJndW1lbnRzWzNdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCA9PT0gNCAmJiB0eXBlb2YgYXJndW1lbnRzWzNdID09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGVycm9yIGNhbGxiYWNrIG9wdGlvbmFsOlxuICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGFyZ3VtZW50c1szXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGFzc2VkIGFyZ3VtZW50IDQ6IFwiICsgYXJndW1lbnRzWzNdICsgXCIgaXMgbWlzdGFrZW5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmd1bWVudHNbMl0gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJndW1lbnRzWzFdID09IFwiZnVuY3Rpb25cIiAmJiBhcmd1bWVudHMubGVuZ3RoIDwgNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yX2NhbGxiYWNrID0gYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGggPT09IDMgJiYgdHlwZW9mIGFyZ3VtZW50c1syXSA9PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBjYWxsYmFjayBhbmQgZXJyb3IgY2FsbGJhY2sgb3B0aW9uYWw6XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXNzZWQgYXJndW1lbnQgMzogXCIgKyBhcmd1bWVudHNbMl0gKyBcIiBpcyBtaXN0YWtlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1sxXSA9PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBhcmd1bWVudHNbMV0gPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHR5cGVvZiBhcmd1bWVudHNbMV0gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGRhdGEgb3B0aW9uYWw6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGFzc2VkIGFyZ3VtZW50IDI6IFwiICsgYXJndW1lbnRzWzFdICsgXCIgaXMgbWlzdGFrZW5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmd1bWVudHNbMF0gPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBhcmd1bWVudHNbMF0uam9pbihcIi9cIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhc3NlZCBVUkw6IFwiK2FyZ3VtZW50c1swXStcIiB3YXMgbm90IGEgc3RyaW5nLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkluY29ycmVjdCBudW1iZXIgb2YgYXJndW1lbnRzIHBhc3NlZCB0byB4aHJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihkYXRhID09PSB1bmRlZmluZWQpIHsgZGF0YSA9IHt9IH1cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVSTDogXCIgKyB1cmwpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJEQVRBOiBcIiArIGRhdGEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDQUxMQkFDSzogXCIgKyBjYWxsYmFjayk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIENBTExCQUNLOiBcIiArIGVycm9yX2NhbGxiYWNrKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSlNPTjogXCIgKyBqc29uKTtcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXR1cm4gWEhSKG1ldGhvZC50b1VwcGVyQ2FzZSgpLCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBlcnJvcl9jYWxsYmFjaywganNvbik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBPYmplY3QuYXNzaWduKCQsIHhocik7XG59KTtcbnJldHVybiBtMmQyO1xufSkpO1xuIiwiLyoqXG4gIFRoaXMgcGxheWVyIHVzZXMgTkRKU09OIGZpbGVzIHRvIHBsYXkgaW4gc2VxdWVuY2UgYXMgYSB2aWRlb1xuICBBZGRpdGlvbmFsbHksIGl0IG1heSBjb250YWluIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmcmFtZVxuICBJbnNwaXJlZCBpbiBodHRwczovL2dpdGh1Yi5jb20vbGVwZS9mcmFtZS1wbGF5ZXIvIChieSBWYWduZXIgU2FudGFuYSlcblxuICogaHR0cHM6Ly9naXRodWIuY29tL2xlcGUvbmRqc29uLXBsYXllclxuICogQGF1dGhvciBBLkxlcGVcbiAqIEBTaW5jZSAyMDIwLTA0LTE5XG4gKi9cbmNsYXNzIE5kSnNvblBsYXllciB7XG4gICAgLy8gT3B0aW9uc1xuICAgIGZwczsgICAgICAgIC8vZGVmYXVsdDogMjRGUFNcbiAgICBsb29wOyAgICAgICAvL2RlZmF1bHQ6IGZhbHNlXG4gICAgc2hvd2ZpcnN0OyAgLy9kZWZhdWx0OiB0cnVlIDogc2hvdyBmaXJzdCBpbWFnZVxuICAgIGF1dG9wbGF5OyAgIC8vZGVmYXVsdDogZmFsc2VcbiAgICBsaXZlOyAgICAgICAvL2RlZmF1bHQ6IGZhbHNlIC8vIFNvdXJjZSBpcyBhIGxpdmUgZmVlZFxuICAgIHBhdGg7ICAgICAgIC8vZGVmYXVsdDogXCJcIiA6IFNwZWNpZnkgY29tbW9uIHBhdGggZm9yIGltYWdlcyBpbiBjYXNlIFVSTCBpcyB1c2VkLlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICBGb3IgZXhhbXBsZTogcGF0aCA9IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2ltYWdlcy9cIlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICB0aGVuLCB1c2UgXCJpbWcxMjMzNC5qcGdcIiBhcyBmcmFtZSBpbiBOREpTT04gKHRvIHJlZHVjZSBzaXplIG9mIGZpbGUpXG5cbiAgICAvLyBTdGF0dXNcbiAgICBwbGF5aW5nID0gZmFsc2U7ICAgLy8gU3RhdHVzXG4gICAgbG9hZGVkICA9IGZhbHNlOyAgIC8vIElmIGEgZnJhbWUgaGFzIGJlZW4gbG9hZGVkIG9yIG5vdFxuICAgIGJhY2t3YXJkcyA9IGZhbHNlOyAvLyBJZiBwbGF5aW5nIGJhY2t3YXJkc1xuICAgIHN0YXJ0ZWQgPSBmYWxzZTsgLy8gSWYgdGhlIHBsYXllciBhbHJlYWR5IHN0YXJ0IHBsYXlpbmcgYXQgbGVhc3QgMSBmcmFtZVxuXG4gICAgLy8gRXZlbnRzXG4gICAgb25TdGFydDsgICAgLy8gQ2FsbGJhY2sgd2hlbiB3ZSBwcm9jZXNzZWQgZmlyc3QgaW1hZ2VcbiAgICBvbkxvYWQ7ICAgICAvLyBDYWxsYmFjayB3aGVuIGRhdGEgaXMgY29tcGxldGVkIGxvYWRpbmdcbiAgICBvblJlbmRlcjsgICAvLyBDYWxsYmFjayB0byByZXR1cm4gbWV0YWRhdGEgd2hlbiBhIGZyYW1lIGlzIHJlbmRlcmVkXG4gICAgb25QbGF5OyAgICAgLy8gQ2FsbGJhY2sgd2hlbiB3ZSBzdGFydCBwbGF5aW5nXG4gICAgb25TdG9wOyAgICAgLy8gQ2FsbGJhY2sgd2hlbiB3ZSBzdG9wIHBsYXlpbmdcbiAgICBvbkZpbmlzaDsgICAvLyBDYWxsYmFjayB3aGVuIHZpZGVvIHJlYWNoZXMgdGhlIGxhc3QgZnJhbWVcbiAgICBvbkVycm9yOyAgICAvLyBDYWxsYmFjayB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIHdpdGggdGhlIHNvdXJjZVxuXG4gICAgLy8gSW50ZXJuYWwgdXNlIG1haW5seVxuICAgIHdyYXBwZXIgPSBudWxsOyAgICAgLy8gRE9NIGVsZW1lbnQgd2hpY2ggY29udGFpbnMgdGhlIDxjYW52YXM+IG5vZGVcbiAgICBjYW52YXMgPSBudWxsOyAgICAgLy8gPGNhbnZhcz4gRE9NIG9iamVjdFxuICAgIGN0eCA9IG51bGw7ICAgICAgICAvLyBjYW52YXMuY3R4IG9iamVjdFxuICAgIHRpbWVyID0gbnVsbDsgICAgICAvLyBUaW1lclNyYyB1c2VkIHRvIG1hbmFnZSBGUFNcbiAgICBzcmMgPSBcIlwiOyAgICAgICAgICAvLyBWaWRlbyBzb3VyY2UgVVJJIChOREpTT04pXG4gICAgZnJhbWUgPSAwOyAgICAgICAgIC8vIEN1cnJlbnQgZnJhbWUgYmVpbmcgcGxheWVkXG4gICAgbXVsdGlwbGllciA9IDE7ICAgIC8vIE11bHRpcGxpZXIgdG8gY29udHJvbCBzcGVlZFxuXG4gICAgLy8gUHJpdmF0ZVxuICAgIF9udW1GcmFtZXMgPSAwOyAgICAgLy8gTnVtYmVyIG9mIHRvdGFsIGZyYW1lcyAoaW4gaGVhZGVyKVxuICAgIF90b3RUaW1lICAgPSAwOyAgICAgLy8gTnVtYmVyIG9mIHRvdGFsIHRpbWUgKGluIGhlYWRlcilcbiAgICBfZnJhbWVzID0gW107ICAgICAgIC8vIFZpZGVvIGNvbnRlbnQgaW5jbHVkaW5nIG1ldGFkYXRhIChhcnJheSlcbiAgICBfZnJhbWVCYXNlID0gXCJcIiAgICAgLy8gQmFzZSBmb3IgYWxsIGZyYW1lcyAnZmInXG4gICAgX3RodW1iQmFzZSA9IFwiXCIgICAgIC8vIEJhc2UgZm9yIGFsbCB0aHVtYm5haWxzICd0aGInXG4gICAgX3N0YXJ0VGltZVN0YW1wID0gMDsvLyBTdGFydGluZyB0aW1lIHN0YW1wXG5cbiAgICAvKipcbiAgICAgKiBFeGFtcGxlczpcbiAgICAgKiBuZXcgTmRKc29uUGxheWVyKFwiL3ZpZGVvcy90ZXN0Lm5kanNvblwiLFwiY2FudmFzXCIsIHsgbG9vcDogdHJ1ZSB9KVxuICAgICAqIG5ldyBOZEpzb25QbGF5ZXIoXCIvdmlkZW9zL3Rlc3QubmRqc29uXCIsIHsgbG9vcDogdHJ1ZSB9KVxuICAgICAqIG5ldyBOZEpzb25QbGF5ZXIoXCIvdmlkZW9zL3Rlc3QubmRqc29uXCIpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3JjICAgICAubmRqc29uIGZpbGUgKHNlZSBmb3JtYXQpXG4gICAgICogQHBhcmFtIGVsZW1lbnQgOiBOb2RlLCBIVE1MIGVsZW1lbnQgKG11c3QgYmUgYSBjYW52YXMpLiBJZiBub3Qgc2V0LCBpdCB3aWxsIHVzZSAnPGNhbnZhcz4nXG4gICAgICogQHBhcmFtIG9wdGlvbnMgOiBPYmplY3QgcmVwbGFjaW5nIGRlZmF1bHQgdmFsdWVzXG4gICAgICogQHBhcmFtIGV2ZW50cyAgOiBPYmplY3QgY29udGFpbmluZyBldmVudHM6IChvbnN0YXJ0LCBvbmxvYWQsIG9ucmVuZGVyLCBvbnBsYXksIG9uc3RvcCwgb25maW5pc2gsIG9uZXJyb3IpXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3JjLCBlbGVtZW50LCBvcHRpb25zLCBldmVudHMpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBfdGhpcy5zcmMgPSBzcmM7XG4gICAgICAgIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub0V2ZW50ID0gKCgpID0+IHt9KTtcbiAgICAgICAgZXZlbnRzID0gT2JqZWN0LmFzc2lnbih7fSwgZXZlbnRzKTtcbiAgICAgICAgLy8gQWRkIGV2ZW50czpcbiAgICAgICAgX3RoaXMub25TdGFydCAgICA9IGV2ZW50cy5vbnN0YXJ0ICB8fCBub0V2ZW50O1xuICAgICAgICBfdGhpcy5vbkxvYWQgICAgID0gZXZlbnRzLm9ubG9hZCAgIHx8IG5vRXZlbnQ7XG4gICAgICAgIF90aGlzLm9uUmVuZGVyICAgPSBldmVudHMub25yZW5kZXIgfHwgbm9FdmVudDtcbiAgICAgICAgX3RoaXMub25QbGF5ICAgICA9IGV2ZW50cy5vbnBsYXkgICB8fCBub0V2ZW50O1xuICAgICAgICBfdGhpcy5vblN0b3AgICAgID0gZXZlbnRzLm9uc3RvcCAgIHx8IG5vRXZlbnQ7XG4gICAgICAgIF90aGlzLm9uRmluaXNoICAgPSBldmVudHMub25maW5pc2ggfHwgbm9FdmVudDtcbiAgICAgICAgX3RoaXMub25FcnJvciAgICA9IGV2ZW50cy5vbmVycm9yICB8fCAoZSA9PiB7IGNvbnNvbGUubG9nKGUpOyB9KVxuICAgICAgICAvLyBGaXggYW5kIGNoZWNrIGFyZ3VtZW50c1xuICAgICAgICBsZXQgcGxheWVyID0gbnVsbDtcbiAgICAgICAgaWYoZWxlbWVudCBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgIHBsYXllciA9IGVsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBcImNhbnZhc1wiO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZWxlbWVudCAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJJbmNvcnJlY3QgcGFyYW1ldGVyIHBhc3NlZCB0byBjb25zdHJ1Y3RvciBvZiBOZEpzb25QbGF5ZXJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIExvb2sgZm9yIGNhbnZhc1xuICAgICAgICAgICAgcGxheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50IHx8IFwiY2FudmFzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwbGF5ZXIpIHtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIudGFnTmFtZSA9PT0gXCJDQU5WQVNcIikge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbnZhcyA9IHBsYXllcjtcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgd3JhcHBlciBjb250YWluZXJcbiAgICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIHBsYXllcik7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5wcmVwZW5kKHBsYXllcik7XG4gICAgICAgICAgICAgICAgcGxheWVyID0gd3JhcHBlcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZihwbGF5ZXIuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2FudmFzID0gcGxheWVyLnF1ZXJ5U2VsZWN0b3IoXCJjYW52YXNcIik7XG4gICAgICAgICAgICAgICAgaWYoIV90aGlzLmNhbnZhcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIk5vIGNhbnZhcyBmb3VuZCBpbiBlbGVtZW50XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQ0FOVkFTXCIpO1xuICAgICAgICAgICAgICAgIHBsYXllci5wcmVwZW5kKF90aGlzLmNhbnZhcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBcIkNhbnZhcyBlbGVtZW50IHdhcyBub3QgZm91bmQgaW4gRE9NOiBcIiArIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMud3JhcHBlciA9IHBsYXllcjtcbiAgICAgICAgX3RoaXMuY2FudmFzLndpZHRoICA9IF90aGlzLndyYXBwZXIucGFyZW50KCkuY2xpZW50V2lkdGg7XG4gICAgICAgIF90aGlzLmNhbnZhcy5oZWlnaHQgPSBfdGhpcy53cmFwcGVyLnBhcmVudCgpLmNsaWVudEhlaWdodDtcbiAgICAgICAgLy8gU2V0IGNsYXNzbmFtZSBmb3Igc3R5bGVcbiAgICAgICAgcGxheWVyLmNsYXNzTGlzdC5hZGQoXCJuZGpwXCIpO1xuXG4gICAgICAgIC8vIFNldCBjb250ZXh0XG4gICAgICAgIF90aGlzLmN0eCA9IF90aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICAgICAgLy8gT3B0aW9uczpcbiAgICAgICAgX3RoaXMuZnBzICAgICAgICA9IG9wdGlvbnMuZnBzIHx8IDI0O1xuICAgICAgICBfdGhpcy5sb29wICAgICAgID0gb3B0aW9ucy5sb29wIHx8IGZhbHNlO1xuICAgICAgICBfdGhpcy5saXZlICAgICAgID0gb3B0aW9ucy5saXZlIHx8IGZhbHNlO1xuICAgICAgICBfdGhpcy5hdXRvcGxheSAgID0gb3B0aW9ucy5hdXRvcGxheSB8fCBfdGhpcy5saXZlIHx8IGZhbHNlO1xuICAgICAgICBfdGhpcy5zaG93Zmlyc3QgID0gb3B0aW9ucy5zaG93Zmlyc3QgIT09IGZhbHNlO1xuICAgICAgICBfdGhpcy5wYXRoICAgICAgID0gb3B0aW9ucy5wYXRoIHx8IFwiXCI7XG4gICAgICAgIGlmKG9wdGlvbnMud2lkdGggID09PSBcImF1dG9cIikgeyBvcHRpb25zLndpZHRoICA9IDA7IH1cbiAgICAgICAgaWYob3B0aW9ucy5oZWlnaHQgPT09IFwiYXV0b1wiKSB7IG9wdGlvbnMuaGVpZ2h0ID0gMDsgfVxuXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGltZXI6XG4gICAgICAgIF90aGlzLnRpbWVyID0gbmV3IFRpbWVyU3JjKDEwMDAgLyBfdGhpcy5mcHMpO1xuXG4gICAgICAgIC8vIExvYWQgdmlkZW86XG4gICAgICAgIGlmKF90aGlzLmxpdmUpIHtcbiAgICAgICAgICAgIG5ldyBUaW1lclNyYygxMDAwIC8gX3RoaXMuZnBzLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZmV0Y2goX3RoaXMuc3JjKS50aGVuKHJlcyA9PiByZXMuanNvbigpKS50aGVuKGZyYW1lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVsb2FkKGZyYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLnBsYXkoKTtcbiAgICAgICAgfSBlbHNlIGlmKF90aGlzLnNyYykge1xuICAgICAgICAgICAgX3RoaXMubG9hZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbml0aWFsaXppbmcgd2l0aG91dCBzb3VyY2UuLi5cIilcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCBmcmFtZXMgaW5mb3JtYXRpb25cbiAgICAgKi9cbiAgICBfcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuX2ZyYW1lcyA9IFtdO1xuICAgICAgICB0aGlzLl90b3RUaW1lID0gMDsgICAgICAgIC8vIE51bWJlciBvZiB0b3RhbCB0aW1lIChpbiBoZWFkZXIpXG4gICAgICAgIHRoaXMuX251bUZyYW1lcyA9IDA7ICAgICAgLy8gTnVtYmVyIG9mIHRvdGFsIGZyYW1lcyAoaW4gaGVhZGVyKVxuICAgICAgICB0aGlzLl9zdGFydFRpbWVTdGFtcCA9IDA7IC8vIFN0YXJ0aW5nIHRpbWUgc3RhbXBcbiAgICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZCBhIHZpZGVvIGZpbGUgb3IgY2hhbmdlIGN1cnJlbnQgdmlkZW8gZmlsZS5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgd2hlbiBlYWNoIGZyYW1lIGlzIHJlYWR5XG4gICAgICogQHBhcmFtIG5ld1NyYyBvcHRpb25hbCAoaWYgbm90IHNldCB3aWxsIHJlYWQgXCJzcmNcIiBwYXNzZWQgaW4gY29uc3RydWN0b3IpXG4gICAgICovXG4gICAgbG9hZChjYWxsYmFjaywgbmV3U3JjKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgaWYobmV3U3JjICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3JjID0gbmV3U3JjO1xuICAgICAgICAgICAgdGhpcy5fcmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgIGxldCBidWZmZXIgPSAnJztcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIGZldGNoKF90aGlzLnNyYylcbiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4gcmVzcC5ib2R5LmdldFJlYWRlcigpKVxuICAgICAgICAgICAgLnRoZW4ocmVhZGVyID0+IHJlYWRlci5yZWFkKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiBwcm9jZXNzICh7IHZhbHVlLCBkb25lIH0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3QgPSBKU09OLnBhcnNlKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzRnJhbWUobGFzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGxhc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgYXJlIGRvbmUgbG9hZGluZyBhbGwgZnJhbWVzXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkxvYWQoX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyICsgZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICAgICkuc3BsaXQoL1tcXHJcXG5dKD89LikvKTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gbGluZXMucG9wKCk7IC8vIEJ1ZmZlciBpcyB1c2VkIHRvIGtlZXAgdGhlIFwidW5maW5pc2hlZFwiIGxpbmVzIHRvZ2V0aGVyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzLm1hcChKU09OLnBhcnNlKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0ZyYW1lKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWRlci5yZWFkKCkudGhlbihwcm9jZXNzKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaChyZWFzb24gPT4gdGhpcy5vbkVycm9yKHJlYXNvbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlIGN1cnJlbnQgZnJhbWVzIHdpdGggbmV3IG9uZXNcbiAgICAgKiBAcGFyYW0gZnJhbWVzIDogY2FuIGJlIGFuIGFycmF5IG9mIG9iamVjdHMgKGpzb24pLCBhbiBvYmplY3QgKHNpbmdsZSBmcmFtZSkgb3IgYSBzdHJpbmcgKG5kanNvbilcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgOiBjYWxsYmFjayB3aGVuIGVhY2ggZnJhbWUgaXMgcmVhZHlcbiAgICAgKi9cbiAgICByZWxvYWQoZnJhbWVzLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGZzID0gW11cbiAgICAgICAgX3RoaXMuX3Jlc2V0KCk7XG5cbiAgICAgICAgc3dpdGNoKHRydWUpIHtcbiAgICAgICAgICAgIGNhc2UgKHR5cGVvZiBmcmFtZXMgPT09ICdzdHJpbmcnKTpcbiAgICAgICAgICAgICAgICBmcyA9IGZyYW1lcy5zcGxpdCgvW1xcclxcbl0oPz0uKS8ubWFwKEpTT04ucGFyc2UpKTtcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBBcnJheS5pc0FycmF5KGZyYW1lcyk6XG4gICAgICAgICAgICAgICAgZnMgPSBmcmFtZXNcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAoZnJhbWVzLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiT2JqZWN0XCIpOlxuICAgICAgICAgICAgICAgIGZzLnB1c2goZnJhbWVzKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5hYmxlIHRvIHJlbG9hZCBmcmFtZXMuIFwiKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgZnMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIF90aGlzLnByb2Nlc3NGcmFtZShpdGVtKTtcbiAgICAgICAgICAgIGlmKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgZnJhbWUgYXQgdGhlIGVuZFxuICAgICAqL1xuICAgIGFwcGVuZChmcmFtZSkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIF90aGlzLl9mcmFtZXMucHVzaChmcmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBmcmFtZSBhdCB0aGUgYmVnaW5uaW5nXG4gICAgICovXG4gICAgcHJlcGVuZChmcmFtZSkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIF90aGlzLl9mcmFtZXMudW5zaGlmdChmcmFtZSk7XG4gICAgICAgIF90aGlzLmZyYW1lICsrOyAvL1RPRE86IHRlc3RcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBhIGZyYW1lXG4gICAgICovXG4gICAgcHJvY2Vzc0ZyYW1lKGl0ZW0pIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZihpdGVtLncgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuY2FudmFzLndpZHRoICA9IGl0ZW0udztcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLmggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuY2FudmFzLmhlaWdodCA9IGl0ZW0uaDtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLmZiICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLl9mcmFtZUJhc2UgPSBpdGVtLmZiO1xuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0udGhiICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLl90aHVtYkJhc2UgPSBpdGVtLnRoYjtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLnRmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLl9udW1GcmFtZXMgPSBpdGVtLnRmO1xuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0udHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuX3RvdFRpbWUgPSBpdGVtLnR0O1xuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0udHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYoIV90aGlzLl9zdGFydFRpbWVTdGFtcCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9zdGFydFRpbWVTdGFtcCA9IGl0ZW0udHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS5mcHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuZnBzPSBpdGVtLmZwcztcbiAgICAgICAgICAgIF90aGlzLnRpbWVyID0gbmV3IFRpbWVyU3JjKDEwMDAgLyBfdGhpcy5mcHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0uZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5fZnJhbWVzLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAvLyBBdXRvUGxheTpcbiAgICAgICAgICAgIGlmICghX3RoaXMubG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMubG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuYXV0b3BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGxheSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuc2hvd2ZpcnN0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnN0ZXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5vblJlbmRlcihpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBpZighX3RoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgX3RoaXMub25TdGFydChfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5zdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdmlkZW9cbiAgICAgKiBAcGFyYW0gb25jZSBzaW5nbGUgc3RlcFxuICAgICAqL1xuICAgIF9yZW5kZXIob25jZSkge1xuICAgICAgICBpZiAodGhpcy50aW1lciA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBcIlRpbWVyU3JjIHdhcyBub3QgaW5pdGlhbGl6ZWRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLl9mcmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBcIlZpZGVvIGlzIGVtcHR5IG9yIG5vIGZyYW1lcyB3ZXJlIGZvdW5kXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmZyYW1lID49IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5sb29wID8gMCA6IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuZnJhbWUgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5sb29wID8gdGhpcy5fZnJhbWVzLmxlbmd0aCAtIDE6IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlzcGxheUltZyhvbmNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwbGF5IG5leHQgaW1hZ2VcbiAgICAgKiBAcGFyYW0gb25jZSBzaW5nbGUgc3RlcFxuICAgICAqL1xuICAgIF9kaXNwbGF5SW1nKG9uY2UpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjb25zdCBpdGVtID0gX3RoaXMuX2ZyYW1lc1tfdGhpcy5mcmFtZV07XG4gICAgICAgIGNvbnN0IG5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF90aGlzLm9uUmVuZGVyKGl0ZW0pO1xuICAgICAgICAgICAgX3RoaXMudGltZXIuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2luY3JlbWVudCgpO1xuICAgICAgICAgICAgICAgIGlmICghb25jZSkge1xuICAgICAgICAgICAgICAgICAgICAvL0RvIG5vdCBleGVjdXRlIGFueXRoaW5nIHVudGlsIGl0cyBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGltZXIubm9jYWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLl9kaXNwbGF5SW1nKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLmYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZnJhbWUgPSBfdGhpcy5fZnJhbWVCYXNlICsgaXRlbS5mO1xuICAgICAgICAgICAgX3RoaXMuX2ltYWdlKGZyYW1lLCBuZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLm9uUmVuZGVyKGl0ZW0pO1xuICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IGZyYW1lXG4gICAgICovXG4gICAgX2luY3JlbWVudCgpIHtcbiAgICAgICAgdGhpcy5mcmFtZSArPSAodGhpcy5tdWx0aXBsaWVyICogKHRoaXMuYmFja3dhcmRzID8gLTEgOiAxKSk7XG4gICAgICAgIGlmKHRoaXMuZnJhbWUgPCAwKSB7XG4gICAgICAgICAgICBpZih0aGlzLmxvb3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5fZnJhbWVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJhbWUgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRmluaXNoKHRoaXMpOyAvL0JhY2t3YXJkcyBwbGF5aW5nXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5mcmFtZSA+IHRoaXMudG90YWxGcmFtZXMoKSAtIDEpIHtcbiAgICAgICAgICAgIGlmKHRoaXMubG9vcCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZnJhbWUgPSAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5fZnJhbWVzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMub25GaW5pc2godGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyBhbiBpbWFnZSBvYmplY3RcbiAgICAgKiBAcGFyYW0gaW1nXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIHNlbmRzIFwidHJ1ZVwiIG9uIHN1Y2Nlc3NcbiAgICAgKiBAcmV0dXJuIHRoaXNcbiAgICAgKi9cbiAgICBfZHJhdyA9IGZ1bmN0aW9uKGltZywgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvLy8gc2V0IHNpemUgcHJvcG9ydGlvbmFsIHRvIGltYWdlXG4gICAgICAgIGlmKGltZy53aWR0aCA9PT0gMCAmJiBpbWcuaGVpZ2h0ID09PSAwKSB7XG4gICAgICAgICAgICBpbWcub25lcnJvcigpO1xuICAgICAgICAgICAgaWYoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgX3RoaXMuY2FudmFzLndpZHRoLCBfdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIF90aGlzLmN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBpbWcud2lkdGgsIGltZy5oZWlnaHQsIDAsIDAsIF90aGlzLmNhbnZhcy53aWR0aCwgX3RoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICBpZihjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWQgYW4gaW1hZ2UgaW50byBjYW52YXMuXG4gICAgICogQHBhcmFtIGltYWdlIHBhdGggb3IgdXJsIG9mIGltYWdlXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIHJldHVybnMgaW1nIG9iamVjdFxuICAgICAqIEByZXR1cm4gdGhpc1xuICAgICAqL1xuICAgIF9pbWFnZSA9IGZ1bmN0aW9uKGltYWdlLCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWcuY3Jvc3NPcmlnaW4gPSAnJztcbiAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBfdGhpcy5fZHJhdyhpbWcsZnVuY3Rpb24oZHJhd24pe1xuICAgICAgICAgICAgICAgIGlmKGRyYXduKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGltZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnN0IGVyciA9IF90aGlzLm9uRXJyb3IoKTtcbiAgICAgICAgICAgIGlmKGVycikge1xuICAgICAgICAgICAgICAgIGltZy5zcmMgPSBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGltZy5zcmMgPSBpbWFnZVswXSA9PT0gXCIvXCIgfHwgaW1hZ2UubWF0Y2goL15odHRwcz86LykgfHwgaW1hZ2UubWF0Y2goL15kYXRhOmltYWdlLykgPyBpbWFnZSA6IF90aGlzLnBhdGggKyBpbWFnZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGZyYW1lIGJhc2VcbiAgICAgKi9cbiAgICBmcmFtZUJhc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mcmFtZUJhc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cG9zZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudCBmcmFtZVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBjdXJyZW50RnJhbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZyYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBudW1iZXIgb2YgZnJhbWVzXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRvdGFsRnJhbWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbnVtRnJhbWVzIHx8IHRoaXMuX2ZyYW1lcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRvdGFsIHRpbWUgb2YgdmlkZW9cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdG90YWxUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG90VGltZSB8fCB0aGlzLmN1cnJlbnRGcmFtZSgpIC8gdGhpcy5mcHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgZnJhbWUgaW4gcG9zaXRpb25cbiAgICAgKiBAcGFyYW0gaW5kZXggOiBwb3NpdGlvblxuICAgICAqL1xuICAgIGZyYW1lQXQoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBsZXQgZnJhbWUgPSAoaW5kZXggPCB0aGlzLnRvdGFsRnJhbWVzKCkpID8gX3RoaXMuX2ZyYW1lc1tpbmRleF0gOiBudWxsO1xuICAgICAgICBpZihmcmFtZSkge1xuICAgICAgICAgICAgZnJhbWUuZmIgPSBfdGhpcy5fZnJhbWVCYXNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gaW5kZXggbnVtYmVyIGF0IHBlcmNlbnRhZ2Ugb2YgdmlkZW9cbiAgICAgKiBAcGFyYW0gcGVyY2VudGFnZVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgaW5kZXhBdChwZXJjZW50YWdlKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIH5+KChwZXJjZW50YWdlICogX3RoaXMudG90YWxGcmFtZXMoKSkgLyAxMDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBwbGF5ZXIgTm9kZVxuICAgICAqIEByZXR1cm5zIERPTSBub2RlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwbGF5ZXJOb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYXkgdmlkZW8gaW4gY3VycmVudCBkaXJlY3Rpb25cbiAgICAgKiBAcGFyYW0gc3RhcnRGcmFtZVxuICAgICAqL1xuICAgIHBsYXkoc3RhcnRGcmFtZSkge1xuICAgICAgICBpZiAoc3RhcnRGcmFtZSA8IDApIHtcbiAgICAgICAgICAgIHN0YXJ0RnJhbWUgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0RnJhbWUgPiB0aGlzLl9mcmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGFydEZyYW1lID0gdGhpcy5fZnJhbWVzLmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhcnRGcmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gc3RhcnRGcmFtZSAqIDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbGF5aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50aW1lci5wbGF5KCk7XG4gICAgICAgIHRoaXMuX3JlbmRlcihmYWxzZSk7XG4gICAgICAgIHRoaXMub25QbGF5KHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYXkgdmlkZW8gaW4gZm9yd2FyZCBkaXJlY3Rpb25cbiAgICAgKiAodXNlZCBtYWlubHkgdG8gY2hhbmdlIGRpcmVjdGlvbilcbiAgICAgKiBAcGFyYW0gc3RhcnRGcmFtZVxuICAgICAqL1xuICAgIHBsYXlGb3J3YXJkKHN0YXJ0RnJhbWUpIHtcbiAgICAgICAgdGhpcy5iYWNrd2FyZHMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wbGF5KHN0YXJ0RnJhbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBsYXkgdmlkZW8gaW4gYmFja3dhcmRzIGRpcmVjdGlvblxuICAgICAqIEBwYXJhbSBzdGFydEZyYW1lXG4gICAgICovXG4gICAgcGxheUJhY2t3YXJkcyhzdGFydEZyYW1lKSB7XG4gICAgICAgIHRoaXMuYmFja3dhcmRzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5wbGF5KHN0YXJ0RnJhbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhdXNlIHRoZSB2aWRlb1xuICAgICAqL1xuICAgIHBhdXNlKCkge1xuICAgICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aW1lci5wYXVzZSgpO1xuICAgICAgICB0aGlzLm9uU3RvcCh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9wIHRoZSB2aWRlbyAoYW5kIGdvIGJhY2sgdG8gdGhlIGJlZ2lubmluZylcbiAgICAgKi9cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mcmFtZSA9IDA7XG4gICAgICAgIHRoaXMudGltZXIucGF1c2UoKTtcbiAgICAgICAgdGhpcy5fZGlzcGxheUltZyh0cnVlKTtcbiAgICAgICAgdGhpcy5vblN0b3AodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZSB0aGUgdmlkZW8gb25lIGZyYW1lIGluIHRoZSBjdXJyZW50IGRpcmVjdGlvblxuICAgICAqL1xuICAgIHN0ZXAoKSB7XG4gICAgICAgIHRoaXMub25QbGF5KHRoaXMpO1xuICAgICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aW1lci5zdGVwKCk7XG4gICAgICAgIHRoaXMuX3JlbmRlcih0cnVlKTtcbiAgICAgICAgdGhpcy5vblN0b3AodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSnVtcCB0byBmcmFtZVxuICAgICAqL1xuICAgIGp1bXBUbyhzdGFydEZyYW1lKSB7XG4gICAgICAgIGlmIChzdGFydEZyYW1lIDwgMCkge1xuICAgICAgICAgICAgc3RhcnRGcmFtZSA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhcnRGcmFtZSA+IHRoaXMuX2ZyYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN0YXJ0RnJhbWUgPSB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGFydEZyYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSBzdGFydEZyYW1lICogMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZW5kZXIodHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZSBvbmUgZnJhbWUgZm9yd2FyZHMgKGFuZCBjaGFuZ2UgZGlyZWN0aW9uKVxuICAgICAqL1xuICAgIHN0ZXBGb3J3YXJkcygpIHtcbiAgICAgICAgdGhpcy5iYWNrd2FyZHMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGVwKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlIG9uZSBmcmFtZSBiYWNrd2FyZHMgKGFuZCBjaGFuZ2UgZGlyZWN0aW9uKVxuICAgICAqL1xuICAgIHN0ZXBCYWNrd2FyZHMoKSB7XG4gICAgICAgIHRoaXMuYmFja3dhcmRzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdGVwKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGlzIG9iamVjdFxuICAgICAqIEByZXR1cm5zIHtOZEpzb25QbGF5ZXJ9XG4gICAgICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmN0eC5yZXNldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmN0eC5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5jdHguY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgLy9SZXNldCBhbGw6IFRoZSBmb2xsb3dpbmcgbGluZSBpcyBhIFwiaGFja1wiIHRvIGZvcmNlIGl0IHRvIHJlc2V0OlxuICAgICAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iLCIvKipcbiAqIFRoaXMgY2xhc3MgY3JlYXRlcyB0aGUgcGxheWVyIFVJXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbGVwZS9uZGpzb24tcGxheWVyXG4gKiBAYXV0aG9yIEEuTGVwZVxuICogQHNpbmNlIDA0LzIwMjBcbiAqL1xuY2xhc3MgTkRKUGxheWVyIHtcbiAgICBwbGF5ZXI7ICAgIC8vTmRKc29uUGxheWVyIG9iamVjdFxuICAgIG9wdGlvbnM7ICAgLy9PcHRpb25zIGZvciB0aGUgVUlcbiAgICB1aTsgICAgICAgIC8vVGhlIFVJXG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIE5ESlBsYXllclxuICAgICAqIEBwYXJhbSBzcmMgOiBzdHJpbmcgKFVSTCBvZiBOREpTT04gZmlsZSBvciBzdHJlYW0pIChvcHRpb25hbClcbiAgICAgKiBAcGFyYW0gZWxlbWVudCA6IERPTSBzZWxlY3RvciBvciBIVE1MRWxlbWVudCB3aGVyZSB0byBwbGFjZSBOREpQbGF5ZXIgKG9wdGlvbmFsKVxuICAgICAqIEBwYXJhbSBvcHRpb25zIDogT2JqZWN0IChvcHRpb25hbClcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcmMsIGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBmdW5jdGlvbiBpc01lZGlhKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5pbmRleE9mKFwiLlwiKSA+IDAgfHwgc3RyLmluZGV4T2YoXCIvXCIpICE9PSAtMTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBpc1NlbGVjdG9yKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIHN0clswXSA9PT0gXCIuXCIgfHwgc3RyWzBdID09PSBcIiNcIiB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN0cikgIT09IG51bGxcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGlmKGFyZ3VtZW50c1sxXS5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICAgICAgICAgIGlmKGlzTWVkaWEoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBpc1NlbGVjdG9yKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgc3dpdGNoKHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBhcmd1bWVudHNbMF0uY29uc3RydWN0b3IubmFtZSA9PT0gXCJPYmplY3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIGlzTWVkaWEoYXJndW1lbnRzWzBdKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBpc1NlbGVjdG9yKGFyZ3VtZW50c1swXSk6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVua25vd24gcGFyYW1ldGVyIHdhcyBwYXNzZWQgdG8gTkRKUGxheWVyIGNvbnN0cnVjdG9yLlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGRlZmF1bHQ6IC8vIE1vcmUgdGhhbiAyXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBjb250cm9sczogZmFsc2UsXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgY29udHJvbHMgOiB7IC8vRXhhbXBsZSBvbiBob3cgdG8gc2hvdy9oaWRlIGVsZW1lbnRzXG4gICAgICAgICAgICAgICAgYmFzZSA6IFwiZnVsbFwiLCAvL1doaWNoIG9uZSB0byB1c2UgYXMgYmFzZVxuICAgICAgICAgICAgICAgIHBsYXk6IHRydWUsIC8vc2hvdyBwbGF5L3BhdXNlXG4gICAgICAgICAgICAgICAgc3RvcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdGVwOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRodW1iczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmdWxsc2NyZWVuOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNwZWVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxhcHNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZyYW1lczogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXNpemU6IHRydWUsIC8vc2V0IGl0IHRvIGZhbHNlIHRvIGRpc2FibGUgYWRqdXN0aW5nIHRoZSBzaXplIGJlZm9yZSBzdGFydGluZ1xuICAgICAgICAgICAgb25hY3Rpb24gOiAoYWN0aW9uLCBuZGpQbGF5ZXIsIHVpUGxheWVyKSA9PiB7fSxcbiAgICAgICAgICAgIG9ucGxheSA6IChuZGpQbGF5ZXIpID0+IHt9LFxuICAgICAgICAgICAgb25zdG9wIDogKG5kalBsYXllcikgPT4ge31cbiAgICAgICAgfSwgb3B0aW9ucyB8fCB7fSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIFVJXG4gICAgICAgIHRoaXMuX2NyZWF0ZShlbGVtZW50KTtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBwbGF5ZXJcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgTmRKc29uUGxheWVyKHNyYywgZWxlbWVudCwgX3RoaXMub3B0aW9ucywge1xuICAgICAgICAgICAgb25zdGFydCA6IGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fYWRqdXN0U2l6ZSgpXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMub25zdGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25zdGFydChwbGF5ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYoX3RoaXMub3B0aW9ucy5vbmxvYWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9ubG9hZChwbGF5ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnJlbmRlciA6IGZ1bmN0aW9uIChmcmFtZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9vblVwZGF0ZShmcmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMub25yZW5kZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9ucmVuZGVyKGZyYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25wbGF5IDogZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYoX3RoaXMudWkucGFuZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkucGxheS5zaG93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmKCEgX3RoaXMudWkuc3RlcC5jc3MuY29udGFpbnMoXCJkaXNhYmxlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkuc3RlcC5zaG93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkucGF1c2Uuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25wbGF5KHBsYXllcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25zdG9wIDogZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYoX3RoaXMudWkucGFuZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkucGxheS5zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYoISBfdGhpcy51aS5zdGVwLmNzcy5jb250YWlucyhcImRpc2FibGVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5zdGVwLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnBhdXNlLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbnN0b3AocGxheWVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmZpbmlzaDogZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICAgIC8vcGxheWVyLnN0b3AoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uZXJyb3IgOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgIC8vVE9ETzogRGlzcGxheSBlcnJvciBpbiBwbGF5ZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRyaWdnZXIgb24gd2luZG93IHJlc2l6ZTpcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5fYWRqdXN0U2l6ZSgpO1xuICAgICAgICB9LCB0cnVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIFVJXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfb25VcGRhdGUoZnJhbWUpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZihfdGhpcy51aSkge1xuICAgICAgICAgICAgaWYoX3RoaXMudWkuZnJhbWVzKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudWkuZnJhbWVzLnRleHQgPSAoX3RoaXMucGxheWVyLmN1cnJlbnRGcmFtZSgpICsgMSkgKyBcIi9cIiArIF90aGlzLnBsYXllci50b3RhbEZyYW1lcygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihfdGhpcy51aS5sYXBzZSkge1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICBjb25zdCB0cyA9IF90aGlzLnBsYXllci5fc3RhcnRUaW1lU3RhbXAgJiYgZnJhbWUudHMgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnJhbWUudCAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHR0ID0gX3RoaXMucGxheWVyLl90b3RUaW1lID4gMDtcbiAgICAgICAgICAgICAgICBpZihmcmFtZS5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSBmcmFtZS5kICsgXCIgXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gX3RoaXMuX2Zvcm1hdE1pbGxpcyhmcmFtZS50cyAtIF90aGlzLnBsYXllci5fc3RhcnRUaW1lU3RhbXApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gZnJhbWUudC5pbmRleE9mKFwiOlwiKSA+IDAgPyBmcmFtZS50IDogX3RoaXMuX2ZtdFRpbWUoZnJhbWUudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHR0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gXCIvXCIgKyBfdGhpcy5wbGF5ZXIudG90YWxUaW1lKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMudWkubGFwc2UudGV4dCA9IHRleHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF90aGlzLnVpLnByb2dyZXNzICYmIF90aGlzLnBsYXllci50b3RhbEZyYW1lcygpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudWkucHJvZ3Jlc3MudmFsdWUgPSBNYXRoLnJvdW5kKCgoX3RoaXMucGxheWVyLmN1cnJlbnRGcmFtZSgpICsgMSkgLyAoX3RoaXMucGxheWVyLnRvdGFsRnJhbWVzKCkpKSAqIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdCB3aWxsIGFkanVzdCB0aGUgdmlkZW8gYW5kIGNhbnZhcyBzaXplXG4gICAgICogQHByaXZhdGVcblxuICAgICBGSVhNRTogYXR0cmlidXRlcyBpbiA8Y2FudmE+IHNob3VsZCBtYXRjaCBpbWFnZSFcblxuICAgICAqL1xuICAgIF9hZGp1c3RTaXplKCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJlc2l6ZSkge1xuICAgICAgICAgICAgbGV0IHBsYXllciA9IHRoaXMucGxheWVyLndyYXBwZXI7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gcGxheWVyLnBhcmVudCgpO1xuICAgICAgICAgICAgbGV0IHJhdGlvVyA9ICh0aGlzLm9wdGlvbnMuaGVpZ2h0IHx8IHRoaXMucGxheWVyLmNhbnZhcy5oZWlnaHQpIC8gKHRoaXMub3B0aW9ucy53aWR0aCB8fCB0aGlzLnBsYXllci5jYW52YXMud2lkdGgpO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuY2FudmFzLmhlaWdodCA9IHBhcmVudC5jbGllbnRIZWlnaHQgLSAodGhpcy5vcHRpb25zLmNvbnRyb2xzID8gcGxheWVyLnF1ZXJ5U2VsZWN0b3IoXCIucGFuZWxcIikuY2xpZW50SGVpZ2h0IDogMCk7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5jYW52YXMud2lkdGggPSB0aGlzLnBsYXllci5jYW52YXMuaGVpZ2h0IC8gcmF0aW9XO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgVUlcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBTZWxlY3RvclxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2NyZWF0ZShlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgY29uc3QgJCA9IG0yZDIubG9hZCgpO1xuICAgICAgICBfdGhpcy51aSA9ICQoZWxlbWVudCwgX3RoaXMuX2dldFVJKGVsZW1lbnQpKTtcbiAgICAgICAgaWYoX3RoaXMudWkucGFuZWwpIHtcbiAgICAgICAgICAgIFtcInRodW1iXCIsIFwicGxheVwiLCBcInN0ZXBcIiwgXCJwYXVzZVwiLCBcInN0b3BcIiwgXCJsYXBzZVwiLCBcInByb2dyZXNzXCIsIFwiZnJhbWVzXCIsIFwiZnVsbHNjcmVlblwiXS5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICBfdGhpcy51aVtpdF0gPSBfdGhpcy51aS5wYW5lbFtpdF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENob29zZSB0aGUgVUkgdG8gZGlzcGxheVxuICAgICAqIEBwYXJhbSBlbGVtZW50IFNlbGVjdG9yXG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldFVJKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBsZXQgdWkgPSB7IGh0bWwgOiAoZWxlbWVudC5pbm5lckhUTUwgfHwgXCJcIikgfTsgLy8gSWYgbm8gY29udHJvbHMgYXJlIHNwZWNpZmllZFxuXG4gICAgICAgIC8vIG5vaW5zcGVjdGlvbiBGYWxsVGhyb3VnaEluU3dpdGNoU3RhdGVtZW50SlNcbiAgICAgICAgaWYoX3RoaXMub3B0aW9ucy5jb250cm9scykge1xuICAgICAgICAgICAgdWkgPSB0aGlzLl9nZXRCYXNpY1VJKCk7XG4gICAgICAgICAgICAvLyBOT1RFOiB2aXNpYmlsaXR5IGlzIGNvbnRyb2xsZWQgaW4gQ1NTXG4gICAgICAgICAgICBzd2l0Y2goX3RoaXMub3B0aW9ucy5jb250cm9scykge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJmdWxsXCI6XG4gICAgICAgICAgICAgICAgICAgIHVpLnBhbmVsLnN0ZXAuY3NzLnJlbW92ZShcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjb21tb25cIjpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlIFwibGl2ZVwiOlxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5jb250cm9scyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIC8vVE9ETzogd2hhdCB0byBzaG93IGFuZCB3aGF0IG5vdCB0byBzaG93XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJvb3QgPSBlbGVtZW50IGluc3RhbmNlb2YgTm9kZSA/IGVsZW1lbnQgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpO1xuICAgICAgICBpZiAocm9vdCkge1xuICAgICAgICAgICAgbGV0IGNhbnZhcyA9IHJvb3QucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTtcbiAgICAgICAgICAgIGlmICghY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgdWkgPSBPYmplY3QuYXNzaWduKHsgY2FudmFzIDogXCJcIiB9LCB1aSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJvb3QgZWxlbWVudDogXCIgKyBlbGVtZW50ICsgXCIgd2FzIG5vdCBmb3VuZCBpbiBkb2N1bWVudFwiKTtcbiAgICAgICAgICAgIHVpID0gT2JqZWN0LmFzc2lnbih7IGNhbnZhcyA6IFwiXCIgfSwgdWkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1aTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCYXNpYyBVSVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0QmFzaWNVSSgpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBfdGhpcy5wbGF5ZXIud3JhcHBlcjtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHBsYXllci5jbGFzc0xpc3QuYWRkKFwiZnVsbHNjcmVlblwiKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY2xhc3NMaXN0LnJlbW92ZShcImZ1bGxzY3JlZW5cIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYXB0aW9uIDogXCJcIixcbiAgICAgICAgICAgIGNzcyA6IF90aGlzLm9wdGlvbnMuY29udHJvbHMsXG4gICAgICAgICAgICBwYW5lbCA6IHtcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwicGFuZWxcIixcbiAgICAgICAgICAgICAgICB0aHVtYiA6IHsgLy9DcmVhdGUgXCJ0aHVtYlwiIGluc2lkZSBwYW5lbFxuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJmaWd1cmVcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJ0aHVtYlwiLFxuICAgICAgICAgICAgICAgICAgICBpbWcgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhcHRpb24gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJmaWdDYXB0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2FwdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBCdXR0b25zXG4gICAgICAgICAgICAgICAgcmVjIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwicmVjXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkxpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBsYXkgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJwbGF5XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlBsYXlcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwicGxheVwiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXllci5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhdXNlIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwicGF1c2VcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUGF1c2VcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwicGF1c2VcIiwgX3RoaXMucGxheWVyLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RlcCA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICBjc3M6IFtcInN0ZXBcIiwgXCJkaXNhYmxlZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiU3RlcFwiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIixcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkub25hY3Rpb24oXCJzdGVwXCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGxheWVyLnN0ZXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RvcCA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcInN0b3BcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiU3RvcFwiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIixcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkub25hY3Rpb24oXCJzdG9wXCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGxheWVyLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gVGltZSBMYXBzZVxuICAgICAgICAgICAgICAgIGxhcHNlIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJsYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcImxhcHNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlRpbWUgZWxhcHNlZCAvIFRpbWUgVG90YWxcIixcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCIwOjAwXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsaXZlIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJsYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcImxpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJMaXZlIEZlZWRcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgYmFyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgICAgICAgICBtYXg6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgb25tb3VzZW1vdmU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSB+figoKGUub2Zmc2V0WCkgLyB0aGlzLm9mZnNldFdpZHRoKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJhbWUgPSBfdGhpcy5wbGF5ZXIuZnJhbWVBdChfdGhpcy5wbGF5ZXIuaW5kZXhBdChwb3NpdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuaW1nLnNyYyA9IF90aGlzLnBsYXllci5mcmFtZUJhc2UoKSArIChmcmFtZS50aCB8fCBmcmFtZS5mKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS50aHVtYi5pbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gX3RoaXMudWkudGh1bWIuaW1nLm5hdHVyYWxXaWR0aCB8fCBfdGhpcy51aS50aHVtYi5pbWcud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZS50YyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLmNhcHRpb24gPSBmcmFtZS50YztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuc3R5bGUubGVmdCA9ICh0aGlzLm9mZnNldExlZnQgKyBlLm9mZnNldFggLSAoX3RoaXMudWkudGh1bWIuY2xpZW50V2lkdGggLyAyKSkgKyBcInB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbm1vdXNlbGVhdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IH5+KCgoZS5vZmZzZXRYKSAvIHRoaXMub2Zmc2V0V2lkdGgpICogMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IF90aGlzLnBsYXllci5pbmRleEF0KHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXllci5qdW1wVG8oaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkub25hY3Rpb24oXCJwcm9ncmVzc1wiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gRnJhbWUgY291bnRcbiAgICAgICAgICAgICAgICBmcmFtZXMgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImxhYmVsXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwiZnJhbWVzXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkN1cnJlbnQgRnJhbWUgLyBUb3RhbCBGcmFtZXNcIixcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCIwXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBGdWxsc2NyZWVuIHRvZ2dsZVxuICAgICAgICAgICAgICAgIGZ1bGxzY3JlZW4gOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJmdWxsc2NyZWVuXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkZ1bGwgU2NyZWVuXCIsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiI1wiLFxuICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IF90aGlzLnBsYXllci53cmFwcGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYocGxheWVyLmNsYXNzTGlzdC5jb250YWlucyhcImZ1bGxzY3JlZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5vbmFjdGlvbihcImV4aXQtZnVsbHNjcmVlblwiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5vbmFjdGlvbihcImZ1bGxzY3JlZW5cIiwgX3RoaXMucGxheWVyLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vc2l6ZXMgOiBbXCJTRFwiLCBcIkhEXCIsIFwiNEtcIl0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25hY3Rpb24gOiBmdW5jdGlvbihhY3Rpb24sIG5kalBsYXllciwgdWlQbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uYWN0aW9uKGFjdGlvbiwgbmRqUGxheWVyLCB1aVBsYXllcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25wbGF5IDogZnVuY3Rpb24obmRqUGxheWVyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbnBsYXkobmRqUGxheWVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnN0b3AgOiBmdW5jdGlvbihuZGpQbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uc3RvcChuZGpQbGF5ZXIsIHVpUGxheWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBhIHRpbWUsIGZvciBleGFtcGxlOiAxMjAuMzQgd2lsbCBiZSBjb252ZXJ0ZWQgaW50bzogMDI6MDAuMzRcbiAgICAgKiBAcGFyYW0gdGltZSBpbnRcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2ZtdFRpbWUodGltZSkge1xuICAgICAgICB0aW1lID0gdGltZS50b0ZpeGVkKDIpO1xuICAgICAgICBsZXQgZGVjaW1hbCA9IHRpbWUuc3BsaXQoXCIuXCIpWzFdIHx8IFwiMDBcIjtcbiAgICAgICAgcmV0dXJuICh+fih0aW1lIC8gNjApICsgXCJcIikucGFkU3RhcnQoMiwgJzAnKSArIFwiOlwiICsgKH5+KCh0aW1lIC8gNjApICUgMSAqIDYwKSArIFwiXCIpLnBhZFN0YXJ0KDIsICcwJykgKyBcIi5cIiArIGRlY2ltYWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBtaWxsaXNlY29uZHMsIGZvciBleGFtcGxlOiA5MDAwMCB3aWxsIGJlIGNvbnZlcnRlZCBpbnRvOiAwMDowMTozMC4wMDBcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9mb3JtYXRNaWxsaXMobWlsbGlzKSB7XG4gICAgICAgIGZ1bmN0aW9uIHBhZChudW0sIGRpZ2l0cykge1xuICAgICAgICAgICAgcmV0dXJuIChcIjAwXCIgKyBudW0pLnNsaWNlKChkaWdpdHMgfHwgMikgKiAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaCA9IE1hdGguZmxvb3IobWlsbGlzLzEwMDAvNjAvNjApO1xuICAgICAgICBjb25zdCBtID0gTWF0aC5mbG9vcigobWlsbGlzLzEwMDAvNjAvNjAgLSBoKSo2MCk7XG4gICAgICAgIGNvbnN0IHMgPSBNYXRoLmZsb29yKCgobWlsbGlzLzEwMDAvNjAvNjAgLSBoKSo2MCAtIG0pKjYwKTtcbiAgICAgICAgY29uc3QgbXMgPSBwYXJzZUludCgobWlsbGlzICUgMTAwMCkgLyAxMDApO1xuICAgICAgICByZXR1cm4gcGFkKGgpICsgXCI6XCIgKyBwYWQobSkgKyBcIjpcIiArIHBhZChzKSArIFwiLlwiICsgcGFkKG1zLCAzKTtcbiAgICB9XG59IiwiLyoqXG4gKiBAYXV0aG9yOiBBLiBMZXBlXG4gKiBNYW5hZ2UgVGltZXJzXG4gKiBVc2FnZTpcbiAqIGNvbnN0IHQgPSBuZXcgVGltZXJTcmMoMTAwMCk7XG4gKiB0LmNhbGwoZnVuY3Rpb24oKSB7IDxkbz4gfSk7XG4gKiBvcjpcbiAqIGNvbnN0IHQgPSBuZXcgVGltZXJTcmMoMTAwMCxmdW5jdGlvbigpeyA8ZG8+IH0pO1xuICogdC5wYXVzZSgpO1xuICogdC5kZXN0cm95KCk7XG4gKi9cbmZ1bmN0aW9uIFRpbWVyU3JjKG9yaWdpbmFsX21zLCBjYWxsYmFjaykge1xuXHRsZXQgc3RhcnRUaW1lLCB0aW1lciwgb2JqID0ge30sIGFjdGlvbiwgbXM7XG5cdG9iai5pbnRlcnZhbCA9IG9yaWdpbmFsX21zOyAvL1B1YmxpYy4gQ2FuIGJlIHVwZGF0ZWRcblx0b2JqLmNoZWNrZXIgPSA1MDsgLy8gYWRqdXN0IHRoaXMgbnVtYmVyIHRvIGFmZmVjdCBncmFudWxhcml0eVxuXHRvYmouc3RhdHVzID0gXCJpbml0XCI7XG5cdGxldCBub3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdHN0YXJ0VGltZSA9IG5vd1RpbWUgLSBvcmlnaW5hbF9tczsgLy9zdGFydCByaWdodCBhd2F5XG5cdG9iai5jYWxsID0gZnVuY3Rpb24oZnVuYykge1xuXHRcdGNhbGxiYWNrID0gZnVuYztcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuXHRvYmoubm9jYWxsID0gZnVuY3Rpb24oKSB7XG5cdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG5cdC8vRXhlY3V0ZSB0aGUgY2FsbGJhY2sgbWFudWFsbHkgYW5kIHJlc2V0IHRoZSB0aW1lclxuXHRvYmouZXhlYyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuXHRcdHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG5cdC8vIENoZWNrcyB0aGUgc3RhdHVzIG9mIHRoZSB0aW1lclxuXHRvYmouY2hlY2sgPSBmdW5jdGlvbigpIHtcblx0XHRpZihhY3Rpb24pIGFjdGlvbigpO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG4gICAgb2JqLnBsYXkgPSBmdW5jdGlvbigpIHtcblx0XHRhY3Rpb24gPSBvYmouc3RlcDtcblx0XHRvYmouc3RhdHVzID0gXCJydW5uaW5nXCI7XG5cdFx0cmV0dXJuIG9iajtcbiAgICB9O1xuICAgIG9iai5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFjdGlvbiA9IG51bGw7XG5cdFx0b2JqLnN0YXR1cyA9IFwicGF1c2VkXCI7XG5cdFx0cmV0dXJuIG9iajtcbiAgICB9O1xuXHRvYmouZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFjdGlvbiA9IG51bGw7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuXHRcdHRpbWVyID0gbnVsbDtcblx0XHRmb3IodmFyIG8gaW4gb2JqKSB7XG5cdFx0XHRvYmpbb10gPSBudWxsO1xuXHRcdFx0ZGVsZXRlIG9ialtvXTtcblx0XHR9XG5cdFx0b2JqLnN0YXR1cyA9IFwiZGVzdHJveWVkXCI7XG5cdH07XG4gICAgb2JqLnN0ZXAgPSBmdW5jdGlvbigpIHtcblx0XHRub3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIG1zID0gTWF0aC5tYXgoMCwgb2JqLmludGVydmFsIC0gKG5vd1RpbWUgLSBzdGFydFRpbWUpKTtcbiAgICAgICAgaWYobXMgPT09IDApIHtcblx0XHRcdG1zID0gb2JqLmludGVydmFsO1xuXHRcdFx0c3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdFx0XHRpZihjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG5cdG9iai5zbG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0b2JqLmludGVydmFsID0gMTAwMDtcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuXHRvYmouZmFzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdG9iai5pbnRlcnZhbCA9IG9yaWdpbmFsX21zO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG4gICAgdGltZXIgPSBzZXRJbnRlcnZhbChvYmouY2hlY2ssIG9iai5jaGVja2VyKTtcbiAgICByZXR1cm4gb2JqO1xufVxuIiwiLyoqXG4gKiBIVE1MIGltcGxlbWVudGF0aW9uIG9mIG5kanNvbi1wbGF5ZXJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXBlL25kanNvbi1wbGF5ZXJcbiAqIEBhdXRob3IgQS5MZXBlXG4gKiBAc2luY2UgMDQvMjAyMFxuICpcbiAqIEV4YW1wbGUgc3BlY2lmeWluZyBtdWx0aXBsZSBzaXplczpcbiAqIDx2aWRlby1uZCBzcmM9XCIvdmlkZW8vZGVtby5uZGpzb25cIiBjb250cm9scyBsb29wIGF1dG9wbGF5PlxuICogICAgICA8c291cmNlIHNyYz1cIi92aWRlby9kZW1vLVFWR0EubmRqc29uXCIgd2lkdGg9XCIzMjBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby1WR0EubmRqc29uXCIgd2lkdGg9XCI2NDBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby1TVkdBLm5kanNvblwiIHdpZHRoPVwiODAwXCI+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tSEQubmRqc29uXCIgd2lkdGg9XCIxMjgwXCIgaGVpZ2h0PVwiNzIwXCI+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tRnVsbEhELm5kanNvblwiIHdpZHRoPVwiMTkyMFwiIGhlaWdodD1cIjEwODBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby00Sy5uZGpzb25cIiB3aWR0aD1cIjM4NDBcIiBoZWlnaHQ9XCIyMTYwXCI+XG4gKiA8L3ZpZGVvLW5kPlxuICpcbiAqIEV4YW1wbGUgc3BlY2lmeWluZyB0cmFja3M6XG4gKiAgKHRyeWluZyB0byBiZSBhcyBjbG9zZSB0bzogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L3RyYWNrKVxuICogTk9URTogVlRUIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkIGFzIGl0IGlzIGJhc2VkIGluIHRpbWVkIHRleHQsIHdoaWxlXG4gKiB3ZSBuZWVkIHRvIGJlIHN1cmUgdGhleSBhcmUgc3luYyB3aXRoIGltYWdlcyB1c2luZyBmcmFtZXMgaW5zdGVhZCBvZiB0aW1lLlxuICpcbiAqIDx2aWRlby1uZCBzcmM9XCIvdmlkZW8vZGVtby5uZGpzb25cIiBjb250cm9scyBsb29wIGF1dG9wbGF5PlxuICogICAgPHRyYWNrIHNyYz1cIi9pbmZvL2RhdGEudHh0XCIga2luZD1cImRlc2NyaXB0aW9uc1wiIGxhYmVsPVwiRGF0YVwiPlxuICogPC92aWRlby1uZD5cbiAqXG4gKiBUcmFjayB0eXBlczpcbiAqIGNhcHRpb25zICAgICA6IERpc3BsYXllZCBvbiB0aGUgY2VudGVyXG4gKiBjaGFwdGVycyAgICAgOiBJdCB3aWxsIGJlIGRpc3BsYXllZCBpbiB0aGUgdG9wIChhbHNvIHVzZWZ1bCBmb3IgbmF2aWdhdGlvbilcbiAqIGRlc2NyaXB0aW9ucyA6IERpc3BsYXllZCBvbiB0b3AgbGVmdCBjb3JuZXJcbiAqIG1ldGFkYXRhICAgICA6IERpc3BsYXllZCBvbiB0b3AgcmlnaHQgY29ybmVyXG4gKiBzdWJ0aXRsZXMgICAgOiBEaXNwbGF5ZWQgb24gdGhlIGJvdHRvbVxuICpcbiAqIFRoZSBmb3JtYXQgb2YgdGhlIFRYVCBmaWxlIGlzIFwiZnJhbWUtb3ItcmFuZ2UjIHNwYWNlLW9yLXRhYiB0ZXh0XCIsIGZvciBleGFtcGxlOlxuICogMjAtMzAgICAgT2JqZWN0czxicj5ieSBjb2xvcjpcbiAqIDM1ICAgQmx1ZTogMiwgUmVkOiAxXG4gKiAzNiAgIEJsdWU6IDMsIFJlZDogMVxuICogMzcgICBCbHVlOiAyLCBSZWQ6IDJcbiAqXG4gKiBBYm91dCBjaGFwdGVyczpcbiAqIEFkZGl0aW9uYWxseSB0byBiZWluZyBkaXNwbGF5ZWQgb24gdGhlIHRvcCBhcyBhIHRpdGxlLCBpZiB1c2VkLCBpdCB3aWxsIGRpc3BsYXkgbmV4dCBhbmQgcHJldiBidXR0b25zLlxuICogRm9yIGV4YW1wbGU6XG4gKiBgPHRyYWNrIHNyYz1cIi9jaGFwdGVycy9maWxlLnR4dFwiIGtpbmQ9XCJjaGFwdGVyc1wiPmBcbiAqXG4gKiBmaWxlLnR4dDpcbiAqIDAtMTAgQ2hhcHRlciAxOjxicj5UaGUgYmVnaW5uaW5nXG4gKiAzNTItMzYwIENoYXB0ZXIgMjo8YnI+VGhlIG1vbWVudFxuICogNjg5LTcxMCBMYXN0IENoYXB0ZXI6PGJyPlRoZSBlbmRcbiAqXG4gKiBXaGVuZXZlciB5b3UgY2xpY2sgb24gJ3ByZXYnIG9yICduZXh0JyBpdCB3aWxsIHVzZSB0aGUgYmVnaW5uaW5nIG9mIGVhY2ggY2hhcHRlciB0byBqdW1wIGludG8gc2NlbmVzLlxuICogVGhlIHJhbmdlIGlzIHVzZWQgdG8gZGlzcGxheSBpdC4gSWYgeW91IGRvbid0IHNldCBhIHJhbmdlIChqdXN0IGEgZnJhbWUgbnVtYmVyKSwgaXQgd2lsbCBiZSBkaXNwbGF5ZWQgZm9yIDNzLlxuICovXG5jbGFzcyBWaWRlb05EIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvLyBjcmVhdGUgc2hhZG93IGRvbSByb290XG4gICAgICAgIHRoaXMuX3Jvb3QgPSB0aGlzOyAvL3RoaXMuYXR0YWNoU2hhZG93KHttb2RlOiAnb3Blbid9KTtcbiAgICAgICAgLy90aGlzLl9yb290LmlubmVySFRNTCA9IGBgO1xuICAgICAgICBjb25zdCByb290ID0gdGhpcztcblxuICAgICAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC8vIEF0dHJpYnV0ZXMgc2ltaWxhciB0byA8dmlkZW8+IHRhZzpcbiAgICAgICAgICAgIGF1dG9wbGF5IDogZmFsc2UsXG4gICAgICAgICAgICBjb250cm9scyA6IGZhbHNlLOOAgC8vdHJ1ZTogbW9zdCBiYXNpYyBVSSwgJ2NvbW1vbicsICdmdWxsJywgb3IgbGlzdCwgZm9yIGV4YW1wbGU6ICdwbGF5IHByb2dyZXNzIGxhcHNlIGZyYW1lcydcbiAgICAgICAgICAgIGxvb3AgICAgIDogZmFsc2UsXG4gICAgICAgICAgICBsaXZlICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgd2lkdGggICAgOiAnYXV0bycsXG4gICAgICAgICAgICBoZWlnaHQgICA6ICdhdXRvJyxcbiAgICAgICAgICAgIHBvc3RlciAgIDogJycsXG4gICAgICAgICAgICBwcmVsb2FkICA6ICdhdXRvJywgLy9PcHRpb25zIGFyZTogJ21ldGFkYXRhJywgJ25vbmUnLFxuICAgICAgICAgICAgc3JjICAgICAgOiAnJywgICAgIC8vVVJMICFpbXBvcnRhbnRcbiAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgYXR0cmlidXRlczpcbiAgICAgICAgICAgIGNjICAgICAgICAgIDogJ2F1dG8nLCAvL0VuYWJsZSBDQyBidXR0b25cbiAgICAgICAgICAgIGNhcHRpb24gICAgIDogJycsIC8vU2V0IHNvbWUgY2FwdGlvbiBvdmVyIHRoZSB2aWRlb1xuICAgICAgICAgICAgZnVsbHNjcmVlbiAgOiBmYWxzZSwgLy9Vc2UgJ2F1dG8nIHRvIG9ubHkgZGlzcGxheSBidXR0b24uIHRydWUgPSBzdGFydCBhcyBmdWxsc2NyZWVuXG4gICAgICAgICAgICBmcHMgICAgICAgICA6ICcnLCAvL3NwZWNpZnkgdmlkZW8gZnBzIChpZiBpdHMgbm90IGluIHRoZSBtZXRhZGF0YSlcbiAgICAgICAgICAgIHNwZWVkICAgICAgIDogZmFsc2UsIC8vRGlzcGxheSBzcGVlZCBtZW51XG4gICAgICAgICAgICBhdXRvc2l6ZSAgICA6ICdhdXRvJywgLy9BdXRvbWF0aWNhbGx5IGNob29zZSBiZXN0IHNpemUgZnJvbSBzaXplc1xuICAgICAgICAgICAgc2l6ZXMgICAgICAgOiB7fSB8fCBbXSwgLy9TcGVjaWZ5IGF2YWlsYWJsZSBzaXplcy4gRXhhbXBsZTogeyBIRCA6IDEyMDAgfSBvciBbODAwLCAxMjAwLCAxODAwXVxuICAgICAgICAgICAgdGh1bWJzICAgICAgOiAnYXV0bycsIC8vU2hvdyB0aHVtYm5haWxzIHdoZW4gcGxhY2luZyBtb3VzZSBvdmVyIHByb2dyZXNzXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgICAgICAgZm9yKGxldCBkIGluIGRlZmF1bHRPcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zW2RdID0gdGhpcy5nZXRBdHRyaWJ1dGUoZCkgfHwgdGhpcy5oYXNBdHRyaWJ1dGUoZCkgfHwgZGVmYXVsdE9wdGlvbnNbZF07XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5vbnN0YXJ0ID0gZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgaWYocm9vdC5vbnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcm9vdC5vbnN0YXJ0KHBsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5vbmxvYWQgPSBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICBpZihyb290Lm9ubG9hZCkge1xuICAgICAgICAgICAgICAgIHJvb3Qub25sb2FkKHBsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5vbnJlbmRlciA9IGZ1bmN0aW9uKGZyYW1lKSB7XG4gICAgICAgICAgICBpZihyb290Lm9ucmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgcm9vdC5vbnJlbmRlcihmcmFtZSwgbmRqUGxheWVyLndyYXBwZXIsIG5kalBsYXllciwgbmRqUGxheWVyLnBsYXllci5jYW52YXMsIG5kalBsYXllci5wbGF5ZXIuY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBcIm5kanBcIjtcbiAgICAgICAgY29uc3QgbmRqUGxheWVyID0gbmV3IE5ESlBsYXllcihvcHRpb25zLnNyYywgdGhpcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgc2V0Q2FwdGlvbihjYXB0aW9uKSB7XG4gICAgICAgIHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvcihcImNhcHRpb25cIikuaW5uZXJUZXh0ID0gY2FwdGlvbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFsgJ3dpZHRoJywgJ2hlaWdodCcsICdjYXB0aW9uJyBdO1xuICAgIH1cblxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdjYXB0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5zZXRDYXB0aW9uKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3ZpZGVvLW5kJywgVmlkZW9ORCk7XG59KTtcbiJdfQ==

//# sourceMappingURL=ndjson-player.min.js.map
