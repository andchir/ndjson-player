/**
 * Author : A.Lepe (dev@alepe.com)
 * License: MIT
 * Version: 0.1.8
 * Updated: 2022-05-09
 * Content: ndjson-player.min.js (Bundle Minimized)
 */

!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.m2d2=t()}(this,(function(){"use strict";class e{isString(e){return"string"==typeof e}isBool(e){return"boolean"==typeof e}isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}isSelectorID(e){return 0===(e+"").trim().indexOf("#")}isPlainObject(e){return"Object"===e.constructor.name}isObject(e){return"object"==typeof e}isArray(e){return Array.isArray(e)}isFunction(e){return"function"==typeof e}isElement(e){return e instanceof HTMLElement}isNode(e){return e instanceof Node||e instanceof DocumentFragment}isHtml(e){return-1!==(e+"").trim().indexOf("<")}isEmpty(e){return void 0===e||this.isObject(e)&&0===Object.keys(e).length||""===e}isVisible(e){if(!this.isElement(e))return console.log("(isVisible) Not an element: "),console.log(e),!1;const t="none"!==e.style.display,s="hidden"!==e.style.visibility;return t&&s}inView(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.width>0&&t.height>0}cleanArray(e){return e.filter((function(e){return 0===e||e}))}isValidElement(e){const t=this.newElement(e);return"template"!==e&&"HTMLUnknownElement"!==t.constructor.name}exists(e){return null!==document.querySelector(e)}getAttrOrProp(e,t){let s="";return this.hasAttrOrProp(e,t)&&(s=this.hasAttr(e,t)?e.getAttribute(t):e[t]),s}hasAttrOrProp(e,t){return this.hasAttr(e,t)||this.hasProp(e,t)}hasAttr(e,t){let s=!1;if(e&&!this.isNumeric(t))if("checked"===t)s=void 0!==e.type&&("radio"===e.type||"checkbox"===e.type);else s=void 0!==e.hasAttribute&&e.hasAttribute(t);return s}hasProp(e,t){let s=!1;if(e&&!this.isNumeric(t)){let n=void 0!==e[t];n&&null===e[t]&&"value"===t&&(n=!1),s=n&&!(e[t]instanceof Node)&&!e.hasAttribute(t)}return s}setPropOrAttr(e,t,s){if(this.hasProp(e,t))try{e[t]=s}catch(n){this.setAttr(e,t,s)}else this.setAttr(e,t,s)}setAttr(e,t,s){s?e.setAttribute(t,s):e.removeAttribute(t)}defineProp(e,t,s){this.isObject(e)&&void 0===e[t]&&(Object.defineProperty(e,t,{enumerable:!1,writable:!0}),e[t]=s)}htmlElement(e){const t=this.newElement("template");return t.innerHTML=e.trim(),t.content.firstChild}newElement(e){return document.createElement(e)}newEmptyNode(){return new DocumentFragment}getMethods(e){const t=Reflect.getPrototypeOf(e),s=Reflect.getPrototypeOf(t);return Reflect.ownKeys(t).filter((e=>Reflect.ownKeys(s).indexOf(e)<0))}appendAllChild(e,t){for(;e.firstChild;)t.append(e.firstChild)}prependAllChild(e,t){for(;e.firstChild;)t.prepend(e.firstChild)}}class t{"use strict";_stored={events:[],datasetNodes:[],datasets:[],styleNodes:[],styles:[]};static storedEventsTimeout=50;static short=!0;static updates=!0;static utils=new e;constructor(){}static instance=new t;static extensions={};static main=(()=>{const e=(e,s)=>{const n=this.instance.getProxyNode(e,s);return n&&n.onready&&t.utils.isFunction(n.onready)&&(n.addEventListener("ready",n.onready,{once:!0}),setTimeout((()=>{n.dispatchEvent(new CustomEvent("ready"))}),10)),["dataset","style"].forEach((e=>{n&&n[e]&&(this.instance._stored[e+"s"].push(n[e]),this.instance._stored[e+"Nodes"].push(n))})),n};return t.utils.getMethods(t.utils).forEach((s=>{e[s]=t.utils[s]})),e})();static ready(e){document.addEventListener("DOMContentLoaded",(()=>{e(t.main)}))}static load(e){if(void 0!==e){const s=e(t.main);t.utils.isObject(s)&&!t.utils.isEmpty(s)&&Object.keys(s).forEach((e=>{if(t.utils.isValidElement(e)){void 0===t.extensions[e]&&(t.extensions[e]={});const n=t.utils.newElement(e);Object.keys(s[e]).forEach((s=>{t.utils.hasProp(n,s)&&console.log("Warning: property ["+s+"] already exists in node: ["+e+"] while trying to extend it. Unexpected behaviour may happen.")})),Object.assign(t.extensions[e],s[e])}else{void 0===t.extensions["*"]&&(t.extensions["*"]={});const n=t.utils.newElement("div");Object.keys(s[e]).forEach((e=>{t.utils.hasProp(n,e)&&console.log("Warning: property ["+e+"] already exists in Node while trying to extend it. Unexpected behaviour may happen.")})),Object.assign(t.extensions["*"],s[e])}}))}return t.main}extDom(e,s){if(!e)return console.error("Selector was empty"),null;void 0===s&&(s=document);const n=t.utils.isNode(e)?e:s.querySelector(e);if(!n)return t.utils.isString(e)?(console.error("Selector: "+e+" didn't match any element in node:"),console.log(s)):console.error("Node was null"),null;if(void 0===n._m2d2){n._m2d2=!0,["parent","sibling","next","prev","find","findAll","onupdate","onready","show","onshow","inView","css","text","html","getData","index"].forEach((e=>{n.hasOwnProperty(e)&&(console.log("Node already had ["+e+"] property. It might cause unexpected behaviour."),console.log("You may need to update the M2D2 version or report it to: github.com/intellisrc/m2d2/"))})),Object.defineProperty(n,"text",{get(){return this.childNodes.length?this.innerText:this.textContent},set(e){if(this.childNodes.length){let t=!1;this.childNodes.forEach((s=>{"Text"===s.constructor.name&&(s.nodeValue=e,t=!0)})),t||this.prepend(document.createTextNode(e))}else this.textContent=e}}),Object.defineProperty(n,"html",{get(){return this.innerHTML},set(e){this.innerHTML=e}}),Object.defineProperty(n,"css",{get(){return this.classList},set(e){t.utils.isArray(e)?this.className=e.join(" "):t.utils.isString(e)?this.className=e:t.utils.isPlainObject(e)?Object.keys(e).forEach((t=>{e[t]?this.classList.add(t):this.classList.remove(t)})):console.error("Trying to assign a wrong value to css : "+e)}}),Object.defineProperty(n,"show",{get(){return t.utils.isVisible(this)},set(e){const s=()=>getComputedStyle(this,null).display,n=()=>{const e=document.getElementsByTagName("body")[0],t=document.createElement("template"),s=document.createElement(this.tagName);t.append(s),e.append(t);const n=getComputedStyle(s,null).display;return t.remove(),n};if(e){if("none"===s()){if(this._m2d2_display)this.style.display=this._m2d2_display;else if(this.style.removeProperty("display"),"none"===s()){const e=n();this.style.display=this.dataset.display||("none"!==e?e:"block")}void 0!==this.onshow&&t.utils.isFunction(this.onshow)&&this.onshow(this)}}else{const e="none"!==this.style.display?this.style.display:s();"none"!==e&&(this._m2d2_display=e),this.style.display="none"}}});let e={};return void 0!==t.extensions["*"]&&Object.assign(e,t.extensions["*"]),void 0!==t.extensions[n.tagName]&&Object.assign(e,t.extensions[n.tagName]),Object.assign(n,{inView:()=>t.utils.inView(n),next:()=>n.nextElementSibling,prev:()=>n.previousElementSibling,parent:()=>this.extDom(n.parentElement),sibling:e=>n.parentElement.find(e),find:e=>{const t=n.querySelector(e);return t?this.extDom(t):null},findAll:e=>{const t=void 0===e?Array.from(n.children):n.querySelectorAll(e);return t.forEach((e=>{this.extDom(e)})),t}},e),void 0===n.index&&(n.index=()=>Array.from(n.parentNode.children).indexOf(n)),["INPUT","TEXTAREA","SELECT"].indexOf(n.tagName)>=0&&t.utils.hasAttrOrProp(n,"value")&&(n.oninput=function(){this.setAttribute("value",this.value)}),"FORM"===n.tagName&&(n.getData=function(e){const t={},s=new FormData(this),o=e||!1;for(let e of s.entries()){const s=n.find("[name='"+e[0]+"']");(o||"hidden"===s.type||s.show)&&(t[e[0]]="file"===s.type?s.files:e[1])}return t}),n}return n}doDom(e,s){if(t.utils.isObject(e)&&void 0===s&&(s=e,e=t.utils.newEmptyNode(),void 0===s.warn&&(s.warn=!1)),!(t.utils.isString(e)||t.utils.isElement(e)||t.utils.isNode(e)))return console.error("Selector is not a string or a Node:"),console.log(e),null;if(t.utils.isString(e)&&!document.querySelector(e))return console.log("Selected element doesn't exists: "+e),null;const n=this.extDom(e);if(void 0===s)return n;if(s=this.plainToObject(n,s),Object.keys(s).filter((e=>!["tagName"].includes(e))).forEach((e=>{let o=s[e];null==o&&(console.log("Value was not set for key: "+e+", 'empty' was used in object: "),console.log(s),console.log("In node:"),console.log(n),o="");let i=this.updateValue(n,e,o),a=t.utils.hasProp(n,e),r=!1;if(t.utils.hasAttr(n,e)||a)switch(!0){case"value"===e&&t.utils.hasProp(n,"valueAsDate")&&i instanceof Date:e="valueAsDate";case"css"===e:case typeof i==typeof n[e]:case t.utils.isString(n[e])&&t.utils.isNumeric(i):case t.utils.isFunction(i)&&t.utils.isObject(n[e]):case t.utils.isBool(i)&&t.utils.isString(n[e]):case"object"==typeof n[e]&&"INPUT"===n.tagName:r=!0}if(r){let s=!1;switch(e){case"classList":t.utils.isArray(i)?i.forEach((t=>{n[e].add(t)})):t.utils.isString(i)?n[e].add(i):s=!0;break;case"style":case"dataset":t.utils.isPlainObject(i)?Object.keys(i).forEach((t=>{n[e][t]=this.updateValue(n[e],t,i[t])})):s=!0;break;default:switch(!0){case t.utils.isBool(i):case t.utils.hasAttrOrProp(n,e):t.utils.setPropOrAttr(n,e,i);break;default:n[e]=i}}s&&(console.error("Invalid value passed to '"+e+"': "),console.log(i),console.log("Into Node:"),console.log(n))}else{const a=[];try{if("template"!==e&&!t.utils.isFunction(i)){if(e&&e.match(/^\w/)){let t=n.find("#"+e);t&&-1===a.indexOf(t)&&a.push(t),t=n.find("[name='"+e+"']"),t&&-1===a.indexOf(t)&&a.push(t);const s=Array.from(n.findAll("."+e)).filter((e=>a.indexOf(e)<0));s.length>0&&s.forEach((e=>a.push(e)))}const t=Array.from(n.findAll(e)).filter((e=>a.indexOf(e)<0));t.length>0&&t.forEach((e=>a.push(e)))}}catch(t){return console.error("Invalid selector: "+e),void console.log(t)}if(a.length>1){const t=[];a.forEach((s=>{t.push(this.render(s,e,i))})),this.linkNode(n,e,t),void 0!==i.warn&&!1===i.warn||(console.log("Multiple elements were assigned with key: ["+e+"] under node: "),console.log(n),console.log("It might be what we expect, but if it is not expected it could result on some elements mistakenly rendered. You can specify 'warn : false' under that element to hide this message."))}else if(1===a.length){const r=a[0];if(t.utils.isElement(r)){const a=this.plainToObject(r,i),l=t.utils.isPlainObject(a)&&Object.keys(a).length>=1?Object.keys(a)[0]:null;if(l&&(i=this.updateValue(r,l,o)),t.utils.isArray(i)){const t=s.template;this.doItems(r,i,t),this.linkNode(n,e,r)}else this.renderAndLink(n,r,e,i)}else console.error("BUG: It should have been a node but got: "),console.log(r),console.log("Parent node:"),console.log(n)}else if(0===a.length){"template"===e&&void 0===s.items&&(e="items",i=[]);const o=t.utils.isFunction(i);if(void 0!==i.tagName){const t=this.appendElement(n,i.tagName);this.renderAndLink(n,t,e,i)}else if(t.utils.isValidElement(e)&&!o){const t=this.appendElement(n,e);this.renderAndLink(n,t,e,i)}else if("items"===e){const e=s.template;if(t.utils.isPlainObject(i)){const e=[];Object.keys(i).forEach((s=>{let o;"DL"===n.tagName?o={dt:s,dd:i[s]}:(o={text:i[s]},t.utils.hasAttrOrProp(n,"value")?o.value=s:o.dataset={id:s}),e.push(o)})),i=e}t.utils.isArray(i)?this.doItems(n,i,e):(console.log("Warning: 'items' specified but value is not and array, in element: "),console.log(n),console.log("Passed values are: "),console.log(i))}else o?(t.updates&&"onupdate"===e&&n.addEventListener("update",i,!0),n[e]=i):"template"!==e&&"warn"!==e&&!1!==i&&(void 0!==s.warn&&!1===s.warn||(console.error("Not sure what you want to do with key: "+e+" under element: "),console.log(n),console.log("And object:"),console.log(s),console.log("Most likely the element's property or child no longer exists or the value passed to it is incorrect."),console.log("You can set 'warn : false' property to the element to dismiss this message.")),n[e]=i)}}})),n.onload){const e=["BODY","FRAME","IFRAME","IMG","LINK","SCRIPT","STYLE"].indexOf(n.tagName)>=0,t="INPUT"===n.tagName&&"image"===n.type;e||t||n.dispatchEvent(new CustomEvent("load"))}return n}isUpdateLink(e){let s=!1;if(t.utils.isArray(e)&&(2===e.length||3===e.length)){const n=2===e.length,o=t.utils.isNode(e[0])||e[0]instanceof DOMStringMap||e[0]instanceof CSSStyleDeclaration,i=n?t.utils.isString(e[1]):t.utils.isString(e[1])&&t.utils.isFunction(e[2]);s=o&&i,s&&n&&e.push((e=>e))}return s}plainToObject(e,s){if(!t.utils.isPlainObject(s)&&!t.utils.isFunction(s)&&!t.utils.isElement(s))if(t.utils.isHtml(s))s={html:s};else if(this.isUpdateLink(s)){const n=s[0],o=s[1],i=s[2];let a=this.plainToObject(e,i(n[o]));if(t.utils.isPlainObject(a)){const e={};Object.keys(a).forEach((t=>{e[t]=s})),s=e}}else t.utils.isArray(s)?s={items:s}:t.utils.hasAttrOrProp(e,"value")?s="SELECT"===e.tagName?{value:s,text:s}:"BUTTON"===e.tagName?{text:s}:{value:s}:t.utils.isString(s)&&"IMG"===e.tagName?s={src:s}:(t.utils.isString(s)||t.utils.isNumeric(s))&&(s={text:s});return s}renderAndLink(e,t,s,n){const o=this.render(t,s,n);this.linkNode(e,s,o)}render(e,t,s){return s=this.plainToObject(e,s),this.doDom(e,s)}linkNode(e,s,n){if(e[s]===n){const t=this.proxy(n);try{e[s]=t}catch(e){}e["$"+s]=t}else t.utils.hasAttrOrProp(e,s)?(e["$"+s]=n,console.log("Property : "+s+" existed in node: "+e.tagName+". Using $"+s+" instead for node: "+n.tagName+".")):e[s]=this.proxy(n)}appendElement(e,s){const n=t.utils.newElement(s);return e.append(n),n}getItem(e,t,s,n){n||(n=this.getTemplate(e));const o=n.cloneNode(!0);this.addTemplatesToItem(n,o),o.dataset.id=t,this.setUniqueAttrib(o,"selected");let i=this.doDom(o,s);return this.getItemWithEvents(e,i)}addTemplatesToItem(e,t){["_template","__template"].forEach((s=>{void 0!==e[s]&&(t[s]=e[s])}))}getItemWithEvents(e,s){if(void 0!==e.__template){const n=(e,s)=>(s=s||{},Object.keys(e).forEach((o=>{t.utils.isPlainObject(e[o])?s[o]=n(e[o]):t.utils.isFunction(e[o])&&(s[o]=e[o])})),s);let o=n(e.__template);t.utils.isEmpty(o)||(o=o[Object.keys(o)[0]],s=this.doDom(s,o))}return s}doItems(e,t,s){const n=this.getTemplate(e,s);if(void 0===n)return console.error("Template not found. Probably an array is being used where it is not expected. Node:"),console.log(e),console.log("Value (mistaken?):"),void console.log(t);let o=0;t.forEach((t=>{t=this.plainToObject(e,t);const s=this.getItem(e,o++,t,n);s&&e.append(s)}));const i=e.find("template");i&&e.removeChild(i),e.items=e.children,this.extendItems(e)}getTemplate(e,s){if(void 0!==e._template&&""!==e._template)return e._template;{let n;const o=e.querySelector("template");if(o)n=t.utils.htmlElement(o.innerHTML.trim());else switch(e.tagName){case"SELECT":case"DATALIST":n=t.utils.newElement("option");break;case"UL":case"OL":n=t.utils.newElement("li");break;case"NAV":n=t.utils.newElement("a");break;case"DL":n=t.utils.newElement("dd");break;default:if(s){const o=Object.keys(s).length;if(o){if(o>1)if(void 0!==s.tagName){let e={};e[s.tagName]=s,s=e}else console.log("Template has more than one top elements. Using the first one. In: "),console.log(s),console.log("Node: "),console.log(e);const i=Object.keys(s)[0],a=s[i];t.utils.isValidElement(i)?n=t.utils.newElement(i):void 0!==a.tagName?(n=t.utils.newElement(a.tagName),s[a.tagName]=a,delete s[i]):(console.error("Template defined an element which can not be identified: ["+i+"], using <span> in:"),console.log(s),console.log("Node: "),console.log(e),n=t.utils.newElement("span"))}else console.error("Template has no definition, and it can not be guessed. Using <span>. Template: "),console.log(s),console.log("Node: "),console.log(e),n=t.utils.newElement("span")}else e.childElementCount>0&&(n=t.utils.htmlElement(e.innerHTML.trim()))}if(s)if(t.utils.isPlainObject(s)){const o=t.utils.newEmptyNode();o.append(n);n=this.doDom(o,s).children[0],t.utils.defineProp(e,"__template",s)}else n=t.utils.isHtml(s)?t.utils.htmlElement(s):t.utils.isSelectorID(s)?t.utils.htmlElement(document.querySelector(s).innerHTML):t.utils.newElement(s);if(n.childrenElementCount>1){console.log("Templates only supports a single child. Multiple children were detected, wrapping them with <span>. Template:"),console.log(n);const e=t.utils.newElement("span");e.append(n),n=e}return n&&t.utils.defineProp(e,"_template",n),n}}setUniqueAttrib(e,s){e.hasOwnProperty(s)||Object.defineProperty(e,s,{get:function(){return this.hasAttribute(s)},set:function(e){const n=this.parentNode?this.parentNode.find("["+s+"]"):null;n&&n.removeAttribute(s),t.utils.setAttr(this,s,e)}})}updateValue(e,s,n){if(this.isUpdateLink(n)){const o=this,i=n[0],a=n[1],r=n[2];if(n=i[a],i instanceof CSSStyleDeclaration&&this._stored.styles.includes(i)){const n=this._stored.styleNodes[this._stored.styles.indexOf(i)];t.updates&&(n.onupdate=function(t){t.detail&&"style"===t.detail.property&&t.detail.newValue.startsWith(a+":")&&o.setShortValue(e,s,r(this.style[a]))})}else if(i instanceof DOMStringMap&&this._stored.datasets.includes(i)){const n=this._stored.datasetNodes[this._stored.datasets.indexOf(i)];t.updates&&(n.onupdate=t=>{t.detail&&t.detail.property==="data-"+a&&o.setShortValue(e,s,r(t.detail.newValue))})}else t.updates&&(i.onupdate=n=>{n.detail&&n.detail.property===a&&(t.utils.isObject(e[s])||o.setShortValue(e,s,r(n.detail.newValue)))})}return n}setShortValue(e,s,n){if(t.utils.isNode(e[s]))if(t.short){const o=this.plainToObject(e[s],n),i=t.utils.isPlainObject(o)&&Object.keys(o).length>=1?Object.keys(o)[0]:null;i&&(e[s][i]=n)}else console.log("Short is disabled. Trying to set a value ("+n+") in a node:"),console.log(e[s]),console.log("Either turn on 'short' functionality, or be sure you specify the property, like: 'node.text'");else e[s]=n}getShortValue(e,s,n){let o=null;if(t.utils.isNode(e[s]))if(t.short){const i=this.plainToObject(e[s],n||""),a=t.utils.isPlainObject(i)&&Object.keys(i).length>=1?Object.keys(i)[0]:null;a&&(o=e[s][a])}else console.log("Short is disabled. Trying to get a value from node:"),console.log(e[s]),console.log("Either turn on 'short' functionality, or be sure you specify the property, like: 'node.text'");else o=e[s];return o}proxy(e,s){if(!t.short||null===e||void 0!==e._proxy&&void 0===s)return e;e._proxy=e;return new Proxy(e,{get:(e,s)=>{const n=e[s];switch(!0){case null==n:return null;case t.utils.isFunction(n):return n.bind(e);case n._proxy&&void 0!==e["$"+s]:return e["$"+s];case void 0===n._proxy&&t.utils.isElement(n):return this.proxy(n);default:return n}},set:(e,s,n)=>{let o="";return t.utils.isElement(e[s])?(o=this.getShortValue(e,s,n),this.setShortValue(e,s,n)):"onupdate"===s?t.updates?t.utils.isFunction(n)?(e.addEventListener("update",n,!0),o=e[s],e[s]=n):(console.error("Value passed to 'onupdate' is incorrect, in node:"),console.log(e),console.log("Value: (not a function)"),console.log(n)):(console.log("Updates are not available when `m2d2.updates == false`:"),console.log(e)):"items"===s?(e.items.clear(),this.doItems(e,n)):(o=e[s],n=this.updateValue(e,s,n),e[s]=n),t.updates&&void 0!==e.onupdate&&n!==o&&e.dispatchEvent(new CustomEvent("update",{detail:{type:typeof n,property:s,newValue:n,oldValue:o}})),!0}})}onObserve(e,s){e.forEach((e=>{const s=e.target;if(!(this._stored.events.indexOf(e)>=0)&&(this._stored.events.push(e),setTimeout((()=>{const t=this._stored.events.indexOf(e);t>=0&&this._stored.events.splice(t,1)}),t.storedEventsTimeout),void 0!==s.onupdate))if("attributes"===e.type){const n=t.utils.getAttrOrProp(s,e.attributeName);n!==e.oldValue&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof n,property:e.attributeName,newValue:n,oldValue:e.oldValue}}))}else if("childList"===e.type){if("#text"===(e.addedNodes[0]||e.removedNodes[0]).nodeName){const t=e.addedNodes[0].textContent,n=e.removedNodes.length?e.removedNodes[0].textContent:null;t!==n&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof t,property:"text",newValue:t,oldValue:n}}))}else if(void 0!==s.items){const t=e.addedNodes,n=e.removedNodes;t!==n&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof t,property:"items",newValue:t,oldValue:n}}))}}}))}observe(e){if(t.updates){const t=new MutationObserver(this.onObserve.bind(this)),s={attributeOldValue:!0,subtree:!0,childList:!0},n=e._proxy||e;t.observe(n,s)}}getProxyNode(e,t){const s=this.doDom(e,t);if(s)return this.observe(s),this.proxy(s)}extendItems(e){function s(t){t.forEach((t=>{const s=t.parentNode.removeChild(t);e.append(s)}))}const n=e.items;Object.getOwnPropertyNames(Array.prototype).concat(["clear","get","remove","selected","first","last","findAll"]).forEach((o=>{if(void 0===n[o]){let i=null;const a=this;switch(o){case"copyWithin":case"fill":case"splice":i=function(){console.log("Not available yet: "+o)};break;case"reverse":i=function(...e){if(this.items.length){const t=Array.from(this.items),n=t[o](...e);return s(t),n}};break;case"clear":i=function(){for(;this.items[0];)this.items[0].remove()};break;case"get":i=function(e){let s=null;return this.items.length&&this.items.some((n=>{const o=t.utils.isNumeric(e)?1*n.dataset.id==1*e:n.dataset.id===e;if(n.dataset&&o)return s=n,!0})),s};break;case"selected":i=function(){return a.proxy(this.find(":scope > [selected]"))};break;case"first":i=function(){return a.proxy(this.items[0])};break;case"last":i=function(){return a.proxy(this.items[this.items.length-1])};break;case"pop":i=function(){if(this.items.length){const e=this[0].parentNode;return a.proxy(e.removeChild(this.items[this.items.length-1]))}};break;case"push":i=function(e){if(e=a.plainToObject(this,e),t.utils.isElement(e))this.append(e);else if(t.utils.isPlainObject(e)){const t=this.items.length,s=a.getItem(this,t,e);this.appendChild(s)}else console.log("Trying to push an unknown value into a list:"),console.log(e)};break;case"remove":i=function(e){if(this.items.length){const t=this.items.get(e);1===t.length&&t.remove()}};break;case"shift":i=function(){if(this.items.length){const e=this.items[0].parentNode;return a.proxy(e.removeChild(this.items[0]))}};break;case"sort":i=function(e){if(this.items.length){const t=Array.from(this.items);t.sort(e||((e,t)=>e.text.localeCompare(t.text))),s(t)}};break;case"unshift":i=function(e){if(e=a.plainToObject(this,e),t.utils.isElement(e))this.prepend(e);else if(t.utils.isPlainObject(e)){const t=this.items.length,s=a.getItem(this,t,e);this.prepend(s)}else console.log("Trying to unshift an unknown value into a list:"),console.log(e)};break;default:let n=o;switch(!0){case"findAll"===o:n="filter";case t.utils.isFunction(Array.prototype[o]):const s=function(...t){const s=[];return Array.from(e.items).forEach((e=>{s.push(a.proxy(e))})),Array.from(s)[n](...t)};switch(o){case"find":i=function(...e){return t.utils.isString(e[0])?this.find(e[0]):s(...e)};break;case"findAll":i=function(...e){return 0===e.length?this.findAll():t.utils.isString(e[0])?this.findAll(e[0]):s(...e)};break;case"concat":i=function(...e){for(let s=0;s<e.length;s++)if(t.utils.isArray(e[s]))for(let n=0;n<e[s].length;n++){let o=e[s][n];if(!t.utils.isElement(o)&&(o=a.plainToObject(this,e[s][n]),t.utils.isPlainObject(o))){const e=this.items.length;o=a.getItem(this,e,o)}this.items.push(o)}};break;default:i=s}}}i&&t.utils.defineProp(n,o,i.bind(e))}}))}}return t.load((e=>{function t(t){if(e.exists("#m2d2-alert .m2d2-alert-front")){e("#m2d2-alert .m2d2-alert-front").css.add("vanish"),setTimeout((()=>{e.exists("#m2d2-alert .m2d2-alert-front")&&e("#m2d2-alert").remove(),t&&t()}),400)}else t&&t()}const s={wrap:!1,question:["fa","fa-question-circle"],info:["fa","fa-exclamation-circle"],error:["fa","fa-exclamation-triangle"],ok:["fa","fa-check"],input:["fa","fa-edit"],wait:["fa","fa-cog","fa-spin"]},n={wrap:"material-icons",question:"help",info:"info",error:"error",ok:"done",input:"edit",wait:"pending"},o={wrap:!1,question:"icon_question",info:"icon_info",error:"icon_error",ok:"icon_ok",input:"icon_input",wait:"icon_wait"};e.message=function(i){let a=o;switch(e.messageIcons){case"fa":a=s;break;case"material":a=n;break;default:e.isObject(e.messageIcons)&&(a=e.messageIcons)}i&&(e.isFunction(i.callback)||(i.callback&&!i.text&&(i.text=i.callback),i.callback=()=>{}),i.text||(i.text="")),t((()=>{e("body",{m2d2Alert:{tagName:"div",id:"m2d2-alert",back:{tagName:"div",css:"m2d2-alert-back",style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"#0005",display:"flex",justifyContent:"center",alignItems:"center"},front:Object.assign({tagName:"form",css:(i.css?e.isArray(i.css)?i.css:[i.css]:[]).concat(["m2d2-alert-front","popup",i.icon]),style:{zIndex:100},icon:{tagName:"span",css:["icon",i.icon].concat(a.wrap?[a.wrap]:a[i.icon]).concat("wait"===i.icon?"spin":""),text:a.wrap?a[i.icon]:""},message:{tagName:"div",css:"m2d2-alert-title",span:i.title},submsg:(()=>{let t;return t="input"!==i.icon||i.text?e.isPlainObject(i.text)?{fieldset:Object.assign({css:"m2d2-alert-field"},i.text)}:{span:i.text.replace("\n","<br>")}:{fieldset:{css:"m2d2-alert-field",input:{type:"text",name:"answer",onload:function(){this.focus()}}}},Object.assign({tagName:"div",css:"m2d2-alert-text"},t)})(i.icon),onsubmit:function(){const e=this.getData();let s;switch(e.button){case"ok":case"yes":s=()=>{i.callback(!0,e)};break;case"no":s=()=>{i.callback(!1,e)};break;case"cancel":s=()=>{i.callback(null,e)};break;case"send":s=1===Object.keys(e).length?()=>{i.callback(e[Object.keys(e)[0]],e)}:2===Object.keys(e).length?()=>{i.callback(e[Object.keys(e).find((e=>"button"!==e))],e)}:()=>{i.callback(e,e)};break;default:s=()=>{i.callback(e,e)}}return t(s),!1},onload:function(){const e=this.find("[autofocus]");e&&e.focus()}},function(t){let s={};return t.length&&(s={buttons:{tagName:"div",css:"m2d2-alert-buttons"}},t.forEach((t=>{const n=t.toLowerCase().replace(/[^a-z ]/g,"").replace(" ","_");s.buttons[n]={tagName:"button",type:"submit",value:n,css:["color",n],text:void 0!==e.dict?e.dict(t):t,autofocus:["ok","yes"].includes(t),formNoValidate:["cancel"].includes(t),onclick:function(){e(this.closest("form"),{hide:{tagName:"input",type:"hidden",name:"button",value:this.value}})}}}))),s}(i.buttons))}}})}));let r=1;return e("#m2d2-alert .m2d2-alert-front").findAll("input, select, textarea").forEach((e=>{""===e.name&&(e.name="field_"+r++)})),{close:t}},e.wait=(t,s,n)=>e.message({icon:"wait",title:t,buttons:[],text:void 0===n?null:s,callback:void 0===n?s:n}),e.alert=(t,s,n)=>e.message({icon:"info",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.success=(t,s,n)=>e.message({icon:"ok",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.failure=(t,s,n)=>e.message({icon:"error",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.confirm=(t,s,n)=>e.message({icon:"question",title:t,buttons:["yes","no"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.prompt=(t,s,n)=>e.message({icon:"input",title:t,buttons:["cancel","send"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.closeAll=()=>{t()}})),t.load((e=>{let t=localStorage.getItem("m2d2.lang")||""||navigator.language;e.dict=new function(t){const s=function(e,t){if(void 0===e)return"";let n=s.val(e,!0);if(void 0!==t){if("string"==typeof t&&""!==t){const e=(t=t.replace(/;$/,"")).split(";");t={},e.forEach((s=>{const n=e[s].split(":");t[n[0]]=n[1]}))}"object"==typeof t&&t.forEach((e=>{let o=t[e]+"";o=s.val(o,!1),n=n.replace(e,o)}))}return n};return s.lang=t||"en",s.data={},s.set=function(e){return this.data=e,this},s.has=function(e,t){return void 0===t?void 0!==this.data[e]:void 0!==this.data[e][t]},s.val=function(t,n){if(e.isEmpty(s.data))return console.error("Dictionary is empty. You need to add a dictionary, for example: `$.dict.set({\nsave   : { en : 'Save', es : 'Guardar' },\ncancel : { en : 'Cancel', es : 'Cancelar' }\nyes    : { en : 'Yes', es : 'Si' },\nno     : { en : 'No', es : 'No' }\n})`"),"";if(!t)return console.error("No keyword specified."),"";let o=t;if(void 0===n&&(n=!1),t=t.toLowerCase(),this.has(t)){const e=this.lang.split("-")[0];this.has(t,this.lang)?o=this.data[t][this.lang]:this.has(t,e)?o=this.data[t][e]:n&&console.log("Missing translation for lang ["+this.lang+"]: "+t)}else n&&console.log("Missing keyword: "+t);return o},s}(t);const s=[];e.lang=function(t){t&&(e.dict.lang=t,localStorage.setItem("m2d2.lang",e.dict.lang)),e("body").findAll("[lang]").forEach((t=>{let s=t.text;if(s&&!t.classList.contains("notxt")){void 0===t.dataset.kw&&(t.dataset.kw=e.lang.getKeyword(s)),t.text=e.dict(t.dataset.kw);const n=t.dataset.kw+"_title";let o=e.dict.has(n)?e.dict(n):"";o&&(t.title=o)}else if(t.title){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.title)),s=e.dict(t.dataset.kw),s&&(t.title=s)}else if(t.placeholder){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.placeholder)),s=e.dict(t.dataset.kw),s&&(t.placeholder=s)}else if(t.value){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.value)),s=e.dict(t.dataset.kw),s&&(t.value=s)}})),s.forEach((e=>{e(t)}))},e.lang.getKeyword=function(e){return e.toLowerCase().trim().replace(/ /g,"_").replace(/[^\w]/g,"").replace(/_$/,"")},Object.defineProperty(e.lang,"onchange",{get(){return this},set(t){e.isFunction(t)?s.push(t):(console.log("Unable to set lang.onchange, because it is not a function: "),console.log(t))}})})),t.ready((e=>{const t=localStorage.getItem("m2d2.lang")||"",s=e("body").find("[lang]"),n=e("html").lang||(s?s.lang:null)||"en";(t?n!==t:n!==navigator.language.split("-")[0])&&e.lang()})),t.load((e=>{function t(e){switch(e){case"local":window.localStorage&&(this.store=localStorage);break;case"session":window.sessionStorage&&(this.store=sessionStorage)}null==this.store&&(this.store=localStorage),this.set=function(e,t){"string"==typeof t&&(t={$:t}),this.store.setItem(e,JSON.stringify(t))},this.get=function(e){let t;try{t=JSON.parse(this.store.getItem(e))||{}}catch(s){t=this.store.getItem(e)}return void 0!==t.$?t=t.$:0===Object.keys(t).length&&t.constructor===Object&&(t=null),t},this.del=function(e){this.store.removeItem(e)},this.keys=function(){return Object.keys(this.store).sort()},this.clear=function(){this.store.clear()},this.exists=function(e){return this.store.hasOwnProperty(e)},this.log=function(e,t,s){null==s&&(s=10);const n=this.get(e)||[];for(n.push(t);n.length>s;)n.shift();this.set(e,n)}}e.local=new t("local"),e.session=new t("session")})),t.load((e=>{function t(e,t,s){const n=[];return e=e||{},t.forEach((o=>{const i="Array"==typeof e?e.length==t.length?e[s]:e:void 0!==e[o.name]?e[o.name]:e;n.push({file:o,data:i,index:s++})})),n}function s(e,t,s,n,o){const i=new XMLHttpRequest;t=Array.from(t),i.upload.addEventListener("progress",(function(e){if(e.lengthComputable)if(n.oneByOne){const o=Math.round(100*e.loaded/e.total);n.onUpdate(o,t[0],s)}else{let s=0,o=0;t.some((t=>{s+=t.size;const i=e.loaded>=s?100:100-Math.round(100*(s-e.loaded)/t.size);return n.onUpdate(i,t,o++),s>=e.loaded}))}}),!1),i.addEventListener("load",(function(e){let a={};try{a=i.responseText?JSON.parse(i.responseText):{error:{type:"Unknown",reason:"Unknown Error"}}}catch(e){a.error={type:"Parse Error",reason:e.message}}i.status>=200&&i.status<400?o(n.onResponse(a),t,s):("string"==typeof a.error&&(a.error={type:"Exception",reason:a.error}),n.onError(a.error))}),!1),i.open("POST",n.upload);const a=Array(t.length).fill(!1),r=function(e,t){const s=new FormData;return t.forEach((t=>{s.append(e,t,t.name)})),s}(e,t);let l=0;t.forEach((e=>{const t=new FileReader;t.onload=function(e){a[l++]=!0,-1===a.indexOf(!1)&&i.send(r)},t.readAsBinaryString(e)}))}e.upload=function(e,n){const o=Object.assign({},{accept:"*/*",parallel:!1,field:"file",multiple:!0,maxFiles:0,maxSizeMb:0},n);n=null;let i=window._protected_reference=document.createElement("INPUT");i.name=o.field,i.type="file",1==o.multiple&&(i.multiple="multiple"),o.upload||(console.log("Upload not specified. Using current page."),o.upload=""),null==o.onDone&&(o.onDone=(e,t)=>{console.log(e)}),null==o.onError&&(o.onError=e=>{console.log("Error : "),console.log(e)}),null==o.onUpdate&&(o.onUpdate=(e,t,s)=>{console.log("Uploading : "+e+"% "+(o.oneByOne?"[ "+t.name+" ]":""))}),null==o.onResponse&&(o.onResponse=e=>e),i.addEventListener("change",(()=>{if(i.files.length){if(!(0===o.maxFiles|i.files.length<=o.maxFiles))return o.onError("Max file limit exceeded. Maximum files: "+o.maxFiles),!1;if(o.onSelect){const e=[];let t=0;Array.from(i.files).forEach((s=>{e.push(URL.createObjectURL(s)),t+=s.size}));const s=t/1048576;if(o.maxSizeMb&&s>o.maxSizeMb)return o.onError("Maximum size exceeded: "+Math.ceil(s)+"MB > "+o.maxSizeMb+"MB"),!1;o.onSelect(i.files,e)}new Promise((e=>{if(o.oneByOne){let n=0;const a=Array(i.files.length).fill(!1);Array.from(i.files).forEach((r=>{new s(i.name,[r],n++,o,((s,n,i)=>{a[i]=!0;const r=-1===a.indexOf(!1);o.onDone(t(s,n,i),r),r&&e()}))}))}else new s(i.name,i.files,0,o,((s,n,i)=>{o.onDone(t(s,n,i),!0),e()}))})).then((()=>{i=window._protected_reference=void 0}))}})),i.click()}})),t.load((e=>{e.ws=new class{request(e){if(e)try{this.webSocket.send(JSON.stringify(e))}catch(e){this.webSocket.onerror(e)}}getSocket(e,t,s){const n=new WebSocket(this.path);return n.onopen=t,n.onclose=s,n.onmessage=t=>{if(t.data)try{e(JSON.parse(t.data))}catch(e){n.onerror(e)}},n.onerror=e=>{console.error("Socket encountered error: ",e?e.message:"Unknown","Closing socket");const t=n||this;1===t.readyState&&t.close()},n}connect(e,t){this.initRequest=e.request||null,this.onConnect=e.connected||(()=>{}),this.onDisconnect=e.disconnected||(()=>{}),this.reconnect=!1!==e.reconnect,this.host=e.host||window.location.hostname,this.secure=!0===e.secure,this.port=e.port||(this.secure?443:80),this.path="ws"+(this.secure?"s":"")+"://"+this.host+":"+this.port+"/"+(e.path||""),this.connected=!1,this.interval=null;const s=e=>{this.connected=!0,this.request(this.initRequest),this.onConnect()},n=e=>{this.connected=!1,this.onDisconnect(),!this.interval&&this.reconnect&&(this.interval=setInterval((()=>{if(this.connected)console.log("Reconnected..."),clearInterval(this.interval),this.interval=null;else try{this.webSocket.close(),console.log("Reconnecting..."),this.webSocket=this.getSocket(t,s,n)}catch(e){}}),2e3))};this.webSocket=this.getSocket(t,s,n)}disconnect(){this.reconnect=!1,this.webSocket.close()}}})),t.load((e=>{const t=function(e,t,s,n,o,i){const a=new XMLHttpRequest;if(void 0===i&&(i=!1),void 0===o&&(o=function(e){console.log(e)}),s&&0===Object.entries(s).length&&(s=""),s)if(i)s=JSON.stringify(s);else if("GET"===e.toUpperCase())t+=(-1!==t.indexOf("?")?"&":"?")+Object.keys(s).map((e=>e+"="+s[e])).join("&"),s="";else s=Object.keys(s).map((e=>e+"="+s[e])).join("&");return a.open(e,t,!0),i?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onerror=function(e){o({type:"Connection",reason:"Connection Refused"})},a.onload=function(){let e={};try{e=a.responseText?JSON.parse(a.responseText):{error:{type:"Unknown",reason:"Unknown Error"}}}catch(t){e.error={type:"Parse Error",reason:t.message}}a.status>=200&&a.status<400?void 0!==n&&n(e):void 0!==o&&("string"==typeof e.error&&(e.error={type:"Exception",reason:e.error}),o(e.error))},a.send(s),a},s={};["get","post","put","delete","connect","options","trace","patch"].forEach((function(e){s[e]=function(){let s,n,o,i,a;switch(arguments.length){case 5:"boolean"==typeof arguments[4]?a=arguments[4]:console.log("Passed JSON argument: "+arguments[4]+" is not boolean.");case 4:"function"==typeof arguments[3]?i=arguments[3]:4===arguments.length&&"boolean"==typeof arguments[3]?a=arguments[3]:console.log("Passed argument 4: "+arguments[3]+" is mistaken");case 3:"function"==typeof arguments[2]?"function"==typeof arguments[1]&&arguments.length<5?i=arguments[2]:o=arguments[2]:3===arguments.length&&"boolean"==typeof arguments[2]?a=arguments[2]:console.log("Passed argument 3: "+arguments[2]+" is mistaken");case 2:"object"==typeof arguments[1]||"string"==typeof arguments[1]?n=arguments[1]:"function"==typeof arguments[1]?o=arguments[1]:console.log("Passed argument 2: "+arguments[1]+" is mistaken");case 1:"string"==typeof arguments[0]?s=arguments[0]:Array.isArray(arguments[0])?s=arguments[0].join("/"):console.log("Passed URL: "+arguments[0]+" was not a string.");break;default:console.log("Incorrect number of arguments passed to xhr")}return void 0===n&&(n={}),t(e.toUpperCase(),s,n,o,i,a)}})),Object.assign(e,s)})),t}));class NdJsonPlayer{fps;loop;showfirst;autoplay;path;playing=!1;loaded=!1;backwards=!1;started=!1;onStart;onLoad;onRender;onPlay;onStop;onFinish;onError;wrapper=null;canvas=null;ctx=null;timer=null;src="";frame=0;multiplier=1;_numFrames=0;_totTime=0;_frames=[];_frameBase="";_thumbBase="";_startTimeStamp=0;constructor(e,t,s,n){const o=this;o.src=e,window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame);const i=()=>{};n=Object.assign({},n),o.onStart=n.onstart||i,o.onLoad=n.onload||i,o.onRender=n.onrender||i,o.onPlay=n.onplay||i,o.onStop=n.onstop||i,o.onFinish=n.onfinish||i,o.onError=n.onerror||(e=>{console.log(e)});let a=null;if(t instanceof Node)a=t;else{if("object"==typeof t)s=t,t="canvas";else if("string"!=typeof t)throw"Incorrect parameter passed to constructor of NdJsonPlayer";a=document.querySelector(t||"canvas")}if(!a)throw"Canvas element was not found in DOM: "+t;if("CANVAS"===a.tagName){o.canvas=a;const e=document.createElement("div");a.parentNode.insertBefore(e,a),e.prepend(a),a=e}else if(a.hasChildNodes()){if(o.canvas=a.querySelector("canvas"),!o.canvas)throw"No canvas found in element"}else o.canvas=document.createElement("CANVAS"),a.prepend(o.canvas);o.wrapper=a,o.canvas.height=o.canvas.clientHeight,o.canvas.width=o.canvas.clientWidth,a.classList.add("ndjp"),o.ctx=o.canvas.getContext("2d"),o.fps=s.fps||24,o.loop=s.loop||!1,o.autoplay=s.autoplay||!1,o.showfirst=!1!==s.showfirst,o.path=s.path||"",o.timer=new TimerSrc(1e3/o.fps),o.load()}load(e,t){const s=this;void 0!==t&&(this.src=t,this._frames=[]);const n=new TextDecoder;let o="";return fetch(s.src).then((e=>e.body.getReader())).then((t=>t.read().then((function i({value:a,done:r}){if(r){const t=JSON.parse(o);return s.processFrame(t),e&&e(t),void s.onLoad(s)}const l=(o+n.decode(a,{stream:!0})).split(/[\r\n](?=.)/);return o=l.pop(),l.map(JSON.parse).forEach((t=>{s.processFrame(t),e&&e(t)})),t.read().then(i)})))).catch((e=>this.onError(e)))}append(e){this._frames.push(e)}prepend(e){this._frames.unshift(e),this.frame++}processFrame(e){const t=this;void 0!==e.w&&(t.canvas.width=e.w),void 0!==e.h&&(t.canvas.height=e.h),void 0!==e.fb&&(t._frameBase=e.fb),void 0!==e.thb&&(t._thumbBase=e.thb),void 0!==e.tf&&(t._numFrames=e.tf),void 0!==e.tt&&(t._totTime=e.tt),void 0!==e.ts&&(t._startTimeStamp||(t._startTimeStamp=e.ts)),void 0!==e.fps&&(t.fps=e.fps,t.timer=new TimerSrc(1e3/t.fps)),void 0!==e.f?(t._frames.push(e),t.loaded||(t.loaded=!0,t.autoplay?t.play():t.showfirst&&t.step())):t.onRender(e),t.started||(t.onStart(t),t.started=!0)}_render(e){if(null==this.timer)throw"TimerSrc was not initialized";if(0===this._frames.length)throw"Video is empty or no frames were found";this.frame>=this._frames.length-1&&(this.frame=this.loop?0:this._frames.length-1),this.frame<0&&(this.frame=this.loop?this._frames.length-1:0),this._displayImg(e)}_displayImg(e){const t=this,s=t._frames[t.frame],n=function(){t.onRender(s),t.timer.call((function(){t._increment(),e||t.timer.nocall(),t._displayImg()}))};if(void 0!==s.f){const e=t._frameBase+s.f;t._image(e,n)}else t.onRender(s),n()}_increment(){this.frame+=this.multiplier*(this.backwards?-1:1),this.frame<0&&(this.loop?this.frame=this._frames.length-1:(this.frame=0,this.pause(),this.onFinish(this))),this.frame>this.totalFrames()-1&&(this.loop?this.frame=0:(this.frame=this._frames.length-1,this.pause(),this.onFinish(this)))}_draw=function(e,t){const s=this;return 0===e.width&&0===e.height?(e.onerror(),void 0!==t&&t(!1)):(s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height),s.ctx.drawImage(e,0,0,e.width,e.height,0,0,s.canvas.width,s.canvas.height),void 0!==t&&t(!0)),this};_image=function(e,t){const s=this,n=new Image;return n.crossOrigin="",n.onload=function(){s._draw(n,(function(e){e&&void 0!==t&&t(n)}))},n.onerror=function(){const e=s.onError();e&&(n.src=e)},n.src="/"===e[0]||e.match(/^https?:/)||e.match(/^data:image/)?e:s.path+e,this};frameBase(){return this._frameBase}currentFrame(){return this.frame}totalFrames(){return this._numFrames||this._frames.length}totalTime(){return this._totTime||this.currentFrame()/this.fps}frameAt(e){const t=this;let s=e<this.totalFrames()?t._frames[e]:null;return s&&(s.fb=t._frameBase),s}indexAt(e){return~~(e*this.totalFrames()/100)}playerNode(){return this.wrapper}play(e){e<0?e=0:e>this._frames.length?e=this._frames.length-1:void 0!==e&&(this.frame=1*e),this.playing=!0,this.timer.play(),this._render(!1),this.onPlay(this)}playForward(e){this.backwards=!1,this.play(e)}playBackwards(e){this.backwards=!0,this.play(e)}pause(){this.playing=!1,this.timer.pause(),this.onStop(this)}stop(){this.playing=!1,this.frame=0,this.timer.pause(),this._displayImg(!0),this.onStop(this)}step(){this.onPlay(this),this.playing=!1,this.timer.step(),this._render(!0),this.onStop(this)}jumpTo(e){e<0?e=0:e>this._frames.length?e=this._frames.length-1:void 0!==e&&(this.frame=1*e),this._render(!0)}stepForwards(){this.backwards=!1,this.step()}stepBackwards(){this.backwards=!0,this.step()}reset(){return void 0!==this.ctx.reset&&(this.ctx.reset(),this.ctx.clear(),this.stop(),this.canvas.width=this.canvas.width),this}}class NDJPlayer{player;options;ui;constructor(e,t,s){const n=this;n.options=Object.assign({controls:!1,resize:!0,onaction:(e,t,s)=>{},onplay:e=>{},onstop:e=>{}},s||{}),this._create(t),this.player=new NdJsonPlayer(e,t,n.options,{onstart:function(e){n._adjustSize(),void 0!==n.options.onstart&&n.options.onstart(e)},onload:function(e){void 0!==n.options.onload&&n.options.onload(e)},onrender:function(e){n._onUpdate(e),void 0!==n.options.onrender&&n.options.onrender(e)},onplay:function(e){n.ui.play.show=!1,n.ui.step.disabled||(n.ui.step.show=!1),n.ui.pause.show=!0,n.options.onplay(e)},onstop:function(e){n.ui.play.show=!0,n.ui.step.disabled||(n.ui.step.show=!0),n.ui.pause.show=!1,n.options.onstop(e)},onfinish:function(e){},onerror:function(e){console.log(e)}})}_onUpdate(e){const t=this;if(void 0!==t.ui){if(void 0!==t.ui.frames&&(t.ui.frames.text=t.player.currentFrame()+1+"/"+t.player.totalFrames()),void 0!==t.ui.lapse){let s="";const n=t.player._startTimeStamp&&void 0!==e.ts,o=void 0!==e.t,i=t.player._totTime>0;e.d&&(s=e.d+" "),n?s+=t._formatMillis(e.ts-t.player._startTimeStamp):o&&(s+=e.t.indexOf(":")>0?e.t:t._fmtTime(e.t)),i&&(s+="/"+t.player.totalTime()),t.ui.lapse.text=s}void 0!==t.ui.progress&&(t.ui.progress.value=(t.player.currentFrame()+1)/t.player.totalFrames()*100)}}_adjustSize(){if(this.options.resize){let e=this.player.wrapper,t=e.parent();if(e.clientHeight>t.clientHeight){let s=this.player.canvas.height/this.player.canvas.width,n=1/s;this.player.canvas.height=t.clientHeight-(this.options.controls?e.querySelector(".panel").clientHeight:0),this.player.canvas.width=t.clientWidth*(s<1?s:n)}}}_create(e){const t=this,s=m2d2.load();t.ui=s(e,t._getUI(e)),["thumb","play","step","pause","stop","lapse","progress","frames","fullscreen"].forEach((e=>{t.ui[e]=t.ui.panel[e]}))}_getUI(e){const t=this;let s={html:e.innerHTML||""};if(t.options.controls){const e="full"===t.options.controls,n="common"===t.options.controls;s=this._getBasicUI(),e&&(s.panel.stop.show=!0,s.panel.lapse.show=!0,s.panel.step.disabled=!1,s.panel.frames.show=!0,s.panel.fullscreen.show=!0),n&&(s.panel.frames.show=!0)}this.options.controls;let n=e instanceof Node?e:document.querySelector(e);if(n){n.querySelector("canvas")||(s=Object.assign({canvas:""},s))}else console.log("Root element: "+e+" was not found in document"),s=Object.assign({canvas:""},s);return s}_getBasicUI(){const e=this;return document.addEventListener("fullscreenchange",(t=>{const s=e.player.wrapper;document.fullscreenElement?s.classList.add("fullscreen"):s.classList.remove("fullscreen")})),{caption:"",panel:{tagName:"div",className:"panel",thumb:{tagName:"figure",className:"thumb",show:!1,img:{src:""},caption:{tagName:"figCaption",className:"caption",show:!1}},play:{tagName:"a",className:"play",title:"Play",href:"#",show:!0,onclick:function(){return e.ui.onaction("play",e.player,e),e.player.play(),!1}},pause:{tagName:"a",className:"pause",title:"Pause",href:"#",show:!1,onclick:function(){return e.ui.onaction("pause",e.player,e),e.player.pause(),!1}},step:{tagName:"a",className:"step",title:"Step",href:"#",disabled:!0,show:!1,onclick:function(){return e.ui.onaction("step",e.player,e),e.player.step(),!1}},stop:{tagName:"a",className:"stop",title:"Stop",href:"#",show:!1,onclick:function(){return e.ui.onaction("stop",e.player,e),e.player.stop(),!1}},lapse:{tagName:"label",className:"lapse",title:"Time elapsed / Time Total",text:"0:00",show:!1},progress:{value:0,max:100,show:!0,onmousemove:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.player.frameAt(e.player.indexAt(s));n?(e.ui.thumb.show=!0,e.ui.thumb.img.src=e.player.frameBase()+(n.th||n.f),e.ui.thumb.img.onload=function(){const t=e.ui.thumb.img.naturalWidth||e.ui.thumb.img.width;e.ui.thumb.style.width=t+"px"},void 0!==n.tc&&(e.ui.thumb.caption=n.tc),e.ui.thumb.style.left=this.offsetLeft+t.offsetX-e.ui.thumb.clientWidth/2+"px"):e.ui.thumb.show=!1},onmouseleave:function(){e.ui.thumb.show=!1},onclick:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.player.indexAt(s);e.player.jumpTo(n),e.ui.onaction("progress",e.player,e)}},frames:{tagName:"label",className:"frames",title:"Current Frame / Total Frames",text:"0",show:!1},fullscreen:{tagName:"a",className:"fullscreen",title:"Full Screen",href:"#",show:!1,onclick:function(t){const s=e.player.wrapper;return s.classList.contains("fullscreen")?(e.ui.onaction("exit-fullscreen",e.player,e),document.exitFullscreen()):(e.ui.onaction("fullscreen",e.player,e),s.requestFullscreen()),!1}}},onaction:function(t,s,n){e.options.onaction(t,s,n)},onplay:function(t){e.options.onplay(t)},onstop:function(t){e.options.onstop(t,uiPlayer)}}}_fmtTime(e){let t=(e=e.toFixed(2)).split(".")[1]||"00";return(~~(e/60)+"").padStart(2,"0")+":"+(~~(e/60%1*60)+"").padStart(2,"0")+"."+t}_formatMillis(e){function t(e,t){return("00"+e).slice(-1*(t||2))}const s=Math.floor(e/1e3/60/60),n=Math.floor(60*(e/1e3/60/60-s)),o=Math.floor(60*(60*(e/1e3/60/60-s)-n)),i=parseInt(e%1e3/100);return t(s)+":"+t(n)+":"+t(o)+"."+t(i,3)}}function TimerSrc(e,t){let s,n,o,i,a={};a.interval=e,a.checker=50,a.status="init";let r=(new Date).getTime();return s=r-e,a.call=function(e){return t=e,a},a.nocall=function(){return t=null,a},a.exec=function(){return t&&t(),s=(new Date).getTime(),a},a.check=function(){return o&&o(),a},a.play=function(){return o=a.step,a.status="running",a},a.pause=function(){return o=null,a.status="paused",a},a.destroy=function(){for(var e in o=null,clearInterval(n),n=null,a)a[e]=null,delete a[e];a.status="destroyed"},a.step=function(){return r=(new Date).getTime(),i=Math.max(0,a.interval-(r-s)),0===i&&(i=a.interval,s=(new Date).getTime(),t&&t()),a},a.slow=function(){return a.interval=1e3,a},a.fast=function(){return a.interval=e,a},n=setInterval(a.check,a.checker),a}class VideoND extends HTMLElement{constructor(){super(),this._root=this;const e=this,t={autoplay:!1,controls:!1,loop:!1,width:"auto",height:"auto",poster:"",preload:"auto",src:"",cc:"auto",caption:"",fullscreen:!1,fps:"",speed:!1,autosize:"auto",sizes:{}||[],thumbs:"auto"},s={};for(let e in t)s[e]=this.getAttribute(e)||this.hasAttribute(e)||t[e];s.onstart=function(t){e.onstart&&e.onstart(t)},s.onload=function(t){e.onload&&e.onload(t)},s.onrender=function(t){e.onrender&&e.onrender(t,n.wrapper,n,n.player.canvas,n.player.ctx)},this.style.display="block",this.className="ndjp";const n=new NDJPlayer(s.src,this,s)}setCaption(e){this._root.querySelector("caption").innerText=e}static get observedAttributes(){return["width","height","caption"]}attributeChangedCallback(e,t,s){"caption"===e&&this.setCaption(s)}}document.addEventListener("DOMContentLoaded",(function(){window.customElements.define("video-nd",VideoND)}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm0yZDIuYWxsLnNyYy5qcyIsIm5kanNvbi1wbGF5ZXIuc3JjLmpzIiwibmRqc29uLXVpLnNyYy5qcyIsInRpbWVyLnNyYy5qcyIsInZpZGVvLW5kLnNyYy5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJtMmQyIiwidGhpcyIsIlV0aWxzIiwiaXNTdHJpbmciLCJ2IiwiaXNCb29sIiwiYiIsImlzTnVtZXJpYyIsIm4iLCJpc05hTiIsInBhcnNlRmxvYXQiLCJpc0Zpbml0ZSIsImlzU2VsZWN0b3JJRCIsInMiLCJ0cmltIiwiaW5kZXhPZiIsImlzUGxhaW5PYmplY3QiLCJvIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaXNPYmplY3QiLCJvYSIsImlzQXJyYXkiLCJhIiwiQXJyYXkiLCJpc0Z1bmN0aW9uIiwiZiIsImlzRWxlbWVudCIsIkhUTUxFbGVtZW50IiwiaXNOb2RlIiwiTm9kZSIsIkRvY3VtZW50RnJhZ21lbnQiLCJpc0h0bWwiLCJpc0VtcHR5Iiwib2JqIiwidW5kZWZpbmVkIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImlzVmlzaWJsZSIsImVsZW0iLCJjb25zb2xlIiwibG9nIiwiZGlzcGxheSIsInN0eWxlIiwibm90SGlkZGVuIiwidmlzaWJpbGl0eSIsImluVmlldyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJsZWZ0IiwiYm90dG9tIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsInJpZ2h0IiwiaW5uZXJXaWR0aCIsImNsaWVudFdpZHRoIiwid2lkdGgiLCJoZWlnaHQiLCJjbGVhbkFycmF5IiwiZmlsdGVyIiwiZSIsImlzVmFsaWRFbGVtZW50IiwidGFnTmFtZSIsIiRub2RlIiwibmV3RWxlbWVudCIsImV4aXN0cyIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImdldEF0dHJPclByb3AiLCJrZXkiLCJ2YWx1ZSIsImhhc0F0dHJPclByb3AiLCJoYXNBdHRyIiwiZ2V0QXR0cmlidXRlIiwiaGFzUHJvcCIsImF0dHIiLCJ0eXBlIiwiaGFzQXR0cmlidXRlIiwicHJvcCIsImhhcyIsInNldFByb3BPckF0dHIiLCJpZ25vcmUiLCJzZXRBdHRyIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiZGVmaW5lUHJvcCIsImRlZiIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiaHRtbEVsZW1lbnQiLCJodG1sIiwidGVtcGxhdGUiLCJpbm5lckhUTUwiLCJjb250ZW50IiwiZmlyc3RDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJuZXdFbXB0eU5vZGUiLCJnZXRNZXRob2RzIiwiUmVmbGVjdCIsImdldFByb3RvdHlwZU9mIiwieCIsIm93bktleXMiLCJpdCIsImFwcGVuZEFsbENoaWxkIiwiJHNyY05vZGUiLCIkdGd0Tm9kZSIsImFwcGVuZCIsInByZXBlbmRBbGxDaGlsZCIsInByZXBlbmQiLCJfc3RvcmVkIiwiZXZlbnRzIiwiZGF0YXNldE5vZGVzIiwiZGF0YXNldHMiLCJzdHlsZU5vZGVzIiwic3R5bGVzIiwic3RhdGljIiwib2JqZWN0Iiwibm9kZSIsImluc3RhbmNlIiwiZ2V0UHJveHlOb2RlIiwib25yZWFkeSIsInV0aWxzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uY2UiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZm9yRWFjaCIsImkiLCJwdXNoIiwiayIsImNhbGxiYWNrIiwibWFpbiIsImV4dCIsImV4dGVuc2lvbnMiLCJhc3NpZ24iLCJleHREb20iLCIkcm9vdCIsImVycm9yIiwiX20yZDIiLCJoYXNPd25Qcm9wZXJ0eSIsImdldCIsImNoaWxkTm9kZXMiLCJpbm5lclRleHQiLCJ0ZXh0Q29udGVudCIsInNldCIsImZvdW5kIiwibm9kZVZhbHVlIiwiY3JlYXRlVGV4dE5vZGUiLCJjbGFzc0xpc3QiLCJjbGFzc05hbWUiLCJqb2luIiwiYyIsImFkZCIsInJlbW92ZSIsInNob3ciLCJjc3NEaXNwbGF5IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRlZmF1bHREaXNwbGF5IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0IiwiX20yZDJfZGlzcGxheSIsInJlbW92ZVByb3BlcnR5IiwiZGVmYXVsdFNob3ciLCJkYXRhc2V0Iiwib25zaG93Iiwic3RvcmVkIiwiZXh0ZW5kIiwibmV4dCIsIm5leHRFbGVtZW50U2libGluZyIsInByZXYiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwicGFyZW50IiwicGFyZW50RWxlbWVudCIsInNpYmxpbmciLCJzZWwiLCJmaW5kIiwiZmluZEFsbCIsIm5vZGVMaXN0IiwiZnJvbSIsImNoaWxkcmVuIiwicXVlcnlTZWxlY3RvckFsbCIsImluZGV4IiwicGFyZW50Tm9kZSIsIm9uaW5wdXQiLCJnZXREYXRhIiwiaW5jbHVkZU5vdFZpc2libGUiLCJkYXRhIiwiZmQiLCJGb3JtRGF0YSIsImluY2x1ZGUiLCJwYWlyIiwiZW50cmllcyIsImZpbGVzIiwiZG9Eb20iLCJ3YXJuIiwicGxhaW5Ub09iamVjdCIsImluY2x1ZGVzIiwib3JpZ1ZhbHVlIiwidXBkYXRlVmFsdWUiLCJpc1Byb3AiLCJmb3VuZE1hdGNoIiwiRGF0ZSIsIm9wdGlvbnMiLCJtYXRjaCIsImVsZW1zIiwiaXRlbXMiLCJpdGVtIiwicmVuZGVyIiwibGlua05vZGUiLCJvcHQiLCJvcHRfa2V5IiwiZG9JdGVtcyIsInJlbmRlckFuZExpbmsiLCJpc0Z1bmMiLCIkbmV3Tm9kZSIsImFwcGVuZEVsZW1lbnQiLCJ2YWxUbXAiLCJkdCIsImRkIiwidGV4dCIsImlkIiwidXBkYXRlcyIsIm9ubG9hZCIsIm5hdGl2ZSIsImlucHV0SW1hZ2UiLCJpc1VwZGF0ZUxpbmsiLCJpc0xpbmsiLCJ0d29BcmdzIiwiYWNjZXB0ZWRUeXBlIiwiRE9NU3RyaW5nTWFwIiwiQ1NTU3R5bGVEZWNsYXJhdGlvbiIsIm90aGVyVHlwZXMiLCJ0bXBWYWwiLCJuZXdWYWx1ZSIsInNyYyIsIiRjaGlsZCIsIiRwcm94eSIsInByb3h5IiwiJG5ld0VsZW0iLCJnZXRJdGVtIiwiJHRlbXBsYXRlIiwiZ2V0VGVtcGxhdGUiLCIkbmV3SXRlbSIsImNsb25lTm9kZSIsImFkZFRlbXBsYXRlc1RvSXRlbSIsInNldFVuaXF1ZUF0dHJpYiIsImdldEl0ZW1XaXRoRXZlbnRzIiwiX190ZW1wbGF0ZSIsInNjYW4iLCJyZXN1bHQiLCJ0cmVlIiwidmFsdWVzIiwidmFsIiwiJHRlbXAiLCJyZW1vdmVDaGlsZCIsImV4dGVuZEl0ZW1zIiwiX3RlbXBsYXRlIiwiJGh0bWxUZW1wbGF0ZSIsIndyYXAiLCJjaGlsZEVsZW1lbnRDb3VudCIsIiR3cmFwIiwiY2hpbGRyZW5FbGVtZW50Q291bnQiLCIkc3BhbiIsInByZXZTZWwiLCJfdGhpcyIsIm9udXBkYXRlIiwiZXYiLCJkZXRhaWwiLCJwcm9wZXJ0eSIsInN0YXJ0c1dpdGgiLCJzZXRTaG9ydFZhbHVlIiwic2hvcnQiLCJnZXRTaG9ydFZhbHVlIiwic2FtcGxlIiwiZm9yY2UiLCJfcHJveHkiLCJQcm94eSIsInRhcmdldCIsImJpbmQiLCJvbGRWYWx1ZSIsImNsZWFyIiwib25PYnNlcnZlIiwibXV0YXRpb25zTGlzdCIsIm9ic2VydmVyIiwibSIsInNwbGljZSIsInN0b3JlZEV2ZW50c1RpbWVvdXQiLCJhdHRyaWJ1dGVOYW1lIiwiYWRkZWROb2RlcyIsInJlbW92ZWROb2RlcyIsIm5vZGVOYW1lIiwib2JzZXJ2ZSIsIm11dGF0aW9uT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiYXR0cmlidXRlT2xkVmFsdWUiLCJ0b09ic2VydmUiLCJyZWF0dGFjaCIsIml0bSIsImRldGF0Y2hlZEl0ZW0iLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJvdG90eXBlIiwiY29uY2F0IiwibWV0aG9kIiwiZnVuYyIsImFyZ3MiLCJyZXRPYmoiLCJzb21lIiwic2FtZUlkIiwiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRnVuYyIsInNvcnQiLCJsb2NhbGVDb21wYXJlIiwiYXJyTWV0aG9kIiwiYXJyRnVuYyIsInByb3hpZXMiLCJqIiwibG9hZCIsIiQiLCJjbG9zZSIsImFmdGVyQ2xvc2UiLCJjc3MiLCJmYUljb25zIiwicXVlc3Rpb24iLCJpbmZvIiwib2siLCJpbnB1dCIsIndhaXQiLCJtYXRlcmlhbCIsImRlZmF1bHRDc3MiLCJtZXNzYWdlIiwibWVzc2FnZUljb25zIiwibTJkMkFsZXJ0IiwiYmFjayIsInBvc2l0aW9uIiwiYmFja2dyb3VuZENvbG9yIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwiZnJvbnQiLCJpY29uIiwiekluZGV4Iiwic3BhbiIsInRpdGxlIiwic3VibXNnIiwiZmllbGRzZXQiLCJyZXBsYWNlIiwiZm9jdXMiLCJvbnN1Ym1pdCIsImJ1dHRvbiIsIm9iIiwibmV3QnV0dG9ucyIsImJ1dHRvbnMiLCJ0b0xvd2VyQ2FzZSIsImRpY3QiLCJhdXRvZm9jdXMiLCJmb3JtTm9WYWxpZGF0ZSIsIm9uY2xpY2siLCJjbG9zZXN0IiwiaGlkZSIsImFsZXJ0Iiwic3VjY2VzcyIsImZhaWx1cmUiLCJjb25maXJtIiwicHJvbXB0IiwiY2xvc2VBbGwiLCJsYW5ndWFnZSIsImxvY2FsU3RvcmFnZSIsIm5hdmlnYXRvciIsImxhbmciLCJrZXl3b3JkIiwidmFycyIsIm1zZyIsInBhaXJzIiwic3BsaXQiLCJwIiwicGFydCIsImt3ZCIsImRpY3Rpb25hcnkiLCJyZXBvcnQiLCJ0cmFuc2xhdGlvbiIsImJhc2VMYW5nIiwibGFuZ0V2ZW50cyIsIm5ld0xhbmciLCJzZXRJdGVtIiwidHh0IiwiY29udGFpbnMiLCJrdyIsImdldEtleXdvcmQiLCJ0aXRsZUt3IiwicGxhY2Vob2xkZXIiLCJyZWFkeSIsIm1hbnVhbExhbmciLCJib2R5TGFuZyIsImh0bWxMYW5nIiwiU3RvcmFnZSIsInN0b3JlIiwic2Vzc2lvblN0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJkZWwiLCJyZW1vdmVJdGVtIiwidG1wIiwic2hpZnQiLCJsb2NhbCIsInNlc3Npb24iLCJnZXRSZXNwb25zZSIsInJlc3BvbnNlIiwicm93IiwiZmlsZSIsIkZpbGVVcGxvYWQiLCJmaWVsZE5hbWUiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInVwbG9hZCIsImxlbmd0aENvbXB1dGFibGUiLCJvbmVCeU9uZSIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJsb2FkZWQiLCJ0b3RhbCIsIm9uVXBkYXRlIiwic2l6ZUFjY3VtIiwic2l6ZSIsInJlc3BvbnNlVGV4dCIsInJlYXNvbiIsImVyciIsInN0YXR1cyIsIm9uUmVzcG9uc2UiLCJvbkVycm9yIiwib3BlbiIsImZpbGwiLCJmb3JtIiwiZ2V0RmlsZUZvcm0iLCJsb2FkSW5kZXgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiZXZ0Iiwic2VuZCIsInJlYWRBc0JpbmFyeVN0cmluZyIsIm9wdHMiLCJhY2NlcHQiLCJwYXJhbGxlbCIsImZpZWxkIiwibXVsdGlwbGUiLCJtYXhGaWxlcyIsIm1heFNpemVNYiIsImVsIiwiX3Byb3RlY3RlZF9yZWZlcmVuY2UiLCJvbkRvbmUiLCJhbGxEb25lIiwicGN0IiwicmVzIiwib25TZWxlY3QiLCJzcmNzIiwidG90U2l6ZSIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm1icyIsImNlaWwiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZpbGVEb25lIiwidGhlbiIsImNsaWNrIiwid3MiLCJyZXF1ZXN0Iiwid2ViU29ja2V0Iiwib25lcnJvciIsImdldFNvY2tldCIsIm9uTWVzc2FnZSIsIm9uT3BlbiIsIm9uQ2xvc2UiLCJXZWJTb2NrZXQiLCJwYXRoIiwib25vcGVuIiwib25jbG9zZSIsIm9ubWVzc2FnZSIsIndzayIsInJlYWR5U3RhdGUiLCJjb25uZWN0IiwiaW5pdFJlcXVlc3QiLCJvbkNvbm5lY3QiLCJjb25uZWN0ZWQiLCJvbkRpc2Nvbm5lY3QiLCJkaXNjb25uZWN0ZWQiLCJyZWNvbm5lY3QiLCJob3N0IiwibG9jYXRpb24iLCJob3N0bmFtZSIsInNlY3VyZSIsInBvcnQiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImRpc2Nvbm5lY3QiLCJYSFIiLCJ1cmwiLCJlcnJvcl9jYWxsYmFjayIsImpzb24iLCJ0b1VwcGVyQ2FzZSIsIm1hcCIsInNldFJlcXVlc3RIZWFkZXIiLCJhcmd1bWVudHMiLCJOZEpzb25QbGF5ZXIiLCJmcHMiLCJsb29wIiwic2hvd2ZpcnN0IiwiYXV0b3BsYXkiLCJwbGF5aW5nIiwiYmFja3dhcmRzIiwic3RhcnRlZCIsIm9uU3RhcnQiLCJvbkxvYWQiLCJvblJlbmRlciIsIm9uUGxheSIsIm9uU3RvcCIsIm9uRmluaXNoIiwid3JhcHBlciIsImNhbnZhcyIsImN0eCIsInRpbWVyIiwiZnJhbWUiLCJtdWx0aXBsaWVyIiwiX251bUZyYW1lcyIsIl90b3RUaW1lIiwiX2ZyYW1lcyIsIl9mcmFtZUJhc2UiLCJfdGh1bWJCYXNlIiwiX3N0YXJ0VGltZVN0YW1wIiwiZWxlbWVudCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm5vRXZlbnQiLCJvbnN0YXJ0Iiwib25yZW5kZXIiLCJvbnBsYXkiLCJvbnN0b3AiLCJvbmZpbmlzaCIsInBsYXllciIsImluc2VydEJlZm9yZSIsImhhc0NoaWxkTm9kZXMiLCJnZXRDb250ZXh0IiwiVGltZXJTcmMiLCJuZXdTcmMiLCJkZWNvZGVyIiwiVGV4dERlY29kZXIiLCJidWZmZXIiLCJmZXRjaCIsInJlc3AiLCJib2R5IiwiZ2V0UmVhZGVyIiwicmVhZCIsInByb2Nlc3MiLCJkb25lIiwibGFzdCIsInByb2Nlc3NGcmFtZSIsImxpbmVzIiwiZGVjb2RlIiwic3RyZWFtIiwicG9wIiwiY2F0Y2giLCJ1bnNoaWZ0IiwidyIsImgiLCJmYiIsInRoYiIsInRmIiwidHQiLCJ0cyIsInBsYXkiLCJzdGVwIiwiX3JlbmRlciIsIl9kaXNwbGF5SW1nIiwiY2FsbCIsIl9pbmNyZW1lbnQiLCJub2NhbGwiLCJfaW1hZ2UiLCJwYXVzZSIsInRvdGFsRnJhbWVzIiwiX2RyYXciLCJpbWciLCJjbGVhclJlY3QiLCJkcmF3SW1hZ2UiLCJpbWFnZSIsIkltYWdlIiwiY3Jvc3NPcmlnaW4iLCJkcmF3biIsImZyYW1lQmFzZSIsImN1cnJlbnRGcmFtZSIsInRvdGFsVGltZSIsImZyYW1lQXQiLCJpbmRleEF0IiwicGxheWVyTm9kZSIsInN0YXJ0RnJhbWUiLCJwbGF5Rm9yd2FyZCIsInBsYXlCYWNrd2FyZHMiLCJzdG9wIiwianVtcFRvIiwic3RlcEZvcndhcmRzIiwic3RlcEJhY2t3YXJkcyIsInJlc2V0IiwiTkRKUGxheWVyIiwidWkiLCJjb250cm9scyIsInJlc2l6ZSIsIm9uYWN0aW9uIiwiYWN0aW9uIiwibmRqUGxheWVyIiwidWlQbGF5ZXIiLCJfY3JlYXRlIiwiX2FkanVzdFNpemUiLCJfb25VcGRhdGUiLCJkaXNhYmxlZCIsImZyYW1lcyIsImxhcHNlIiwiZCIsIl9mb3JtYXRNaWxsaXMiLCJfZm10VGltZSIsInByb2dyZXNzIiwicmF0aW9XIiwicmF0aW9IIiwiX2dldFVJIiwicGFuZWwiLCJmdWxsIiwiY29tbW9uIiwiX2dldEJhc2ljVUkiLCJmdWxsc2NyZWVuIiwiZXZlbnQiLCJmdWxsc2NyZWVuRWxlbWVudCIsImNhcHRpb24iLCJ0aHVtYiIsImhyZWYiLCJtYXgiLCJvbm1vdXNlbW92ZSIsIm9mZnNldFdpZHRoIiwidGgiLCJuYXR1cmFsV2lkdGgiLCJ0YyIsIm9mZnNldExlZnQiLCJvZmZzZXRYIiwib25tb3VzZWxlYXZlIiwiZXhpdEZ1bGxzY3JlZW4iLCJyZXF1ZXN0RnVsbHNjcmVlbiIsInRpbWUiLCJkZWNpbWFsIiwidG9GaXhlZCIsInBhZFN0YXJ0IiwibWlsbGlzIiwicGFkIiwibnVtIiwiZGlnaXRzIiwic2xpY2UiLCJmbG9vciIsIm1zIiwicGFyc2VJbnQiLCJvcmlnaW5hbF9tcyIsInN0YXJ0VGltZSIsImNoZWNrZXIiLCJub3dUaW1lIiwiZ2V0VGltZSIsImV4ZWMiLCJjaGVjayIsImRlc3Ryb3kiLCJzbG93IiwiZmFzdCIsIlZpZGVvTkQiLCJzdXBlciIsIl9yb290IiwiZGVmYXVsdE9wdGlvbnMiLCJwb3N0ZXIiLCJwcmVsb2FkIiwiY2MiLCJzcGVlZCIsImF1dG9zaXplIiwic2l6ZXMiLCJ0aHVtYnMiLCJzZXRDYXB0aW9uIiwib2JzZXJ2ZWRBdHRyaWJ1dGVzIiwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIiwiY3VzdG9tRWxlbWVudHMiXSwibWFwcGluZ3MiOiJDQVFBLFNBQUFBLEVBQUFDLEdBQ0EsbUJBQUFDLFFBQUFBLE9BQUFDLElBQ0FELE9BQUEsR0FBQUQsR0FDQSxpQkFBQUcsUUFDQUMsT0FBQUQsUUFBQUgsSUFFQUQsRUFBQU0sS0FBQUwsSUFOQSxDQVFBTSxNQUFBLFdBRUEsYUF1Q0EsTUFBQUMsRUFNQUMsU0FBQUMsR0FDQSxNQUFBLGlCQUFBQSxFQU9BQyxPQUFBQyxHQUNBLE1BQUEsa0JBQUFBLEVBT0FDLFVBQUFDLEdBQ0EsT0FBQUMsTUFBQUMsV0FBQUYsS0FBQUcsU0FBQUgsR0FPQUksYUFBQUMsR0FDQSxPQUFBLEtBQUFBLEVBQUEsSUFBQUMsT0FBQUMsUUFBQSxLQU9BQyxjQUFBQyxHQUNBLE1BQUEsV0FBQUEsRUFBQUMsWUFBQUMsS0FPQUMsU0FBQUMsR0FDQSxNQUFBLGlCQUFBQSxFQU9BQyxRQUFBQyxHQUNBLE9BQUFDLE1BQUFGLFFBQUFDLEdBT0FFLFdBQUFDLEdBQ0EsTUFBQSxtQkFBQUEsRUFPQUMsVUFBQW5CLEdBQ0EsT0FBQUEsYUFBQW9CLFlBUUFDLE9BQUFyQixHQUNBLE9BQUFBLGFBQUFzQixNQUFBdEIsYUFBQXVCLGlCQU9BQyxPQUFBbkIsR0FDQSxPQUFBLEtBQUFBLEVBQUEsSUFBQUMsT0FBQUMsUUFBQSxLQU9Ba0IsUUFBQUMsR0FDQSxZQUFBQyxJQUFBRCxHQUFBakMsS0FBQW1CLFNBQUFjLElBQUEsSUFBQUUsT0FBQUMsS0FBQUgsR0FBQUksUUFBQSxLQUFBSixFQU9BSyxVQUFBQyxH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d21CLE9BQUEsR0FDQUMsUUFBQSxPQUNBdGIsSUFBQSxHQUVBdWIsR0FBQSxPQUNBMUMsUUFBQSxHQUNBSCxZQUFBLEVBQ0EzSCxJQUFBLEdBQ0F5SyxPQUFBLEVBQ0FDLFNBQUEsT0FDQUMsTUFBQSxJQUFBLEdBQ0FDLE9BQUEsUUFFQTNkLEVBQUEsR0FDQSxJQUFBLElBQUErWixLQUFBcUQsRUFDQXBkLEVBQUErWixHQUFBL21CLEtBQUE2RSxhQUFBa2lCLElBQUEvbUIsS0FBQWlGLGFBQUE4aEIsSUFBQXFELEVBQUFyRCxHQUVBL1osRUFBQTZVLFFBQUEsU0FBQUssR0FDQXppQixFQUFBb2lCLFNBQ0FwaUIsRUFBQW9pQixRQUFBSyxJQUdBbFYsRUFBQW9CLE9BQUEsU0FBQThULEdBQ0F6aUIsRUFBQTJPLFFBQ0EzTyxFQUFBMk8sT0FBQThULElBR0FsVixFQUFBOFUsU0FBQSxTQUFBZCxHQUNBdmhCLEVBQUFxaUIsVUFDQXJpQixFQUFBcWlCLFNBQUFkLEVBQUF1RixFQUFBM0YsUUFBQTJGLEVBQUFBLEVBQUFyRSxPQUFBckIsT0FBQTBGLEVBQUFyRSxPQUFBcEIsTUFJQTlnQixLQUFBMkMsTUFBQUQsUUFBQSxRQUNBMUMsS0FBQTJKLFVBQUEsT0FDQSxNQUFBNGMsRUFBQSxJQUFBTixVQUFBalosRUFBQWdDLElBQUFoUCxLQUFBZ04sR0FHQTRkLFdBQUEvQyxHQUNBN25CLEtBQUFtcUIsTUFBQTVsQixjQUFBLFdBQUE2RSxVQUFBeWUsRUFHQWdELGdDQUNBLE1BQUEsQ0FBQSxRQUFBLFNBQUEsV0FHQUMseUJBQUE1cEIsRUFBQTJRLEVBQUE5QyxHQUNBLFlBQUE3TixHQUNBbEIsS0FBQTRxQixXQUFBN2IsSUFJQXpMLFNBQUF5RSxpQkFBQSxvQkFBQSxXQUNBM0UsT0FBQTJuQixlQUFBcHJCLE9BQUEsV0FBQXNxQiIsImZpbGUiOiJuZGpzb24tcGxheWVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXV0aG9yIDogQS5MZXBlIChkZXZAYWxlcGUuY29tKSAtIGludGVsbGlzcmMuY29tXG4gKiBMaWNlbnNlOiBNSVRcbiAqIFZlcnNpb246IDIuMS4xXG4gKiBVcGRhdGVkOiAyMDIyLTAyLTI0XG4gKiBDb250ZW50OiBGdWxsIEJ1bmRsZSAoRGVidWcpXG4gKi9cblxuOyhmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIHJvb3QubTJkMiA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpIHtcbi8vIC0tLS0tLS0gRnVuY3Rpb25zIC0tLS0tLS1cblwidXNlIHN0cmljdFwiO1xuLyoqXG4gKiBGdW5jdGlvbnMgdXNlZnVsIHRvIHdvcmsgd2l0aCBKYXZhc2NyaXB0IGRhdGEgYW5kIERPTVxuICogVXNlZCBtYWlubHkgaW4gTTJEMiBjb3JlIGxpYnJhcnkgYnV0IGV4cG9zZWQgdG8gdGhlXG4gKiBjb25zdW1lci5cbiAqIEBBdXRob3I6IEEuTGVwZSA8ZGV2QGFsZXBlLmNvbT5cbiAqXG4gKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAqICQuaXNTdHJpbmdcbiAqICQuaXNCb29sXG4gKiAkLmlzTnVtZXJpY1xuICogJC5pc1NlbGVjdG9ySURcbiAqICQuaXNQbGFpbk9iamVjdFxuICogJC5pc09iamVjdFxuICogJC5pc0FycmF5XG4gKiAkLmlzRnVuY3Rpb25cbiAqICQuaXNFbGVtZW50XG4gKiAkLmlzTm9kZVxuICogJC5pc0h0bWxcbiAqICQuaXNFbXB0eVxuICogJC5pc1Zpc2libGVcbiAqICQuaW5WaWV3XG4gKiAkLmNsZWFuQXJyYXlcbiAqICQuaXNWYWxpZEVsZW1lbnRcbiAqICQuZXhpc3RzXG4gKiAkLmdldEF0dHJPclByb3BcbiAqICQuaGFzQXR0ck9yUHJvcFxuICogJC5oYXNBdHRyXG4gKiAkLmhhc1Byb3BcbiAqICQuc2V0UHJvcE9yQXR0clxuICogJC5zZXRBdHRyXG4gKiAkLmRlZmluZVByb3BcbiAqICQuaHRtbEVsZW1lbnRcbiAqICQubmV3RWxlbWVudFxuICogJC5uZXdFbXB0eU5vZGVcbiAqICQuZ2V0TWV0aG9kc1xuICogJC5hcHBlbmRBbGxDaGlsZFxuICogJC5wcmVwZW5kQWxsQ2hpbGRcbiAqL1xuY2xhc3MgVXRpbHMge1xuXHQvKipcblx0ICogUmV0dXJuIHRydWUgaWYgdmFyaWFibGUgaXMgc3RyaW5nXG5cdCAqIEBwYXJhbSB7Kn0gdlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNTdHJpbmcodikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHYgPT09ICdzdHJpbmcnO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm4gdHJ1ZSBpZiB2YXJpYWJsZSBpcyBhIGJvb2xlYW5cblx0ICogQHBhcmFtIHsqfSBiXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc0Jvb2woYikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGIgPT09ICdib29sZWFuJztcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJuIHRydWUgaWYgdmFyaWFibGUgaXMgYSBudW1iZXJcblx0ICogQHBhcmFtIHsqfSBuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc051bWVyaWMobikge1xuICAgICAgICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQobikpICYmIGlzRmluaXRlKG4pO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm4gdHJ1ZSBpZiBzZWxlY3RvciB1cyBhbiBpZCBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc1xuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNTZWxlY3RvcklEKHMpIHtcbiAgICAgICAgcmV0dXJuIChzICsgXCJcIikudHJpbSgpLmluZGV4T2YoXCIjXCIpID09PSAwO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgXCJwbGFpblwiIG9iamVjdCAobm90IGFuIGFycmF5KVxuXHQgKiBAcGFyYW0gb1xuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNQbGFpbk9iamVjdChvKSB7XG4gICAgICAgIHJldHVybiBvLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiT2JqZWN0XCI7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiB2YXJpYWJsZSBpcyBhbiBvYmplY3QgKGFueSBraW5kLCBlLmcuIEFycmF5KVxuXHQgKiBAcGFyYW0geyp9IG9hXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc09iamVjdChvYSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9hID09PSAnb2JqZWN0JztcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhbiBhcnJheVxuXHQgKiBAcGFyYW0ge29iamVjdH0gYVxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNBcnJheShhKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGEpO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGEgZnVuY3Rpb25cblx0ICogQHBhcmFtIHtvYmplY3R9IGZcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzRnVuY3Rpb24oZikge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGYgPT09ICdmdW5jdGlvbic7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYW4gSFRNTEVsZW1lbnRcblx0ICogQHBhcmFtIHtvYmplY3R9IG5cblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzRWxlbWVudChuKSB7XG4gICAgICAgIHJldHVybiBuIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG4gICAgfTtcblxuXHQvKipcblx0ICogUmV0dXJuIHRydWUgaWYgb2JqZWN0IGlzIGEgTm9kZSBvciBEb2N1bWVudEZyYWdtZW50XG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc05vZGUobikge1xuICAgIFx0cmV0dXJuIChuIGluc3RhbmNlb2YgTm9kZSB8fCBuIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCk7XG5cdH1cblx0LyoqXG5cdCAqIFJldHVybiB0cnVlIGlmIHN0cmluZyBzZWVtcyB0byBiZSBhbiBIVE1MIGNvZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHNcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzSHRtbChzKSB7XG4gICAgICAgIHJldHVybiAocyArIFwiXCIpLnRyaW0oKS5pbmRleE9mKFwiPFwiKSAhPT0gLTE7XG4gICAgfTtcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhbiBvYmplY3QgaXMgZW1wdHlcblx0ICogQHBhcmFtIHtvYmplY3R9IG9ialxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNFbXB0eShvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkIHx8ICh0aGlzLmlzT2JqZWN0KG9iaikgJiYgT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDApIHx8IG9iaiA9PT0gXCJcIjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBhbiBlbGVtZW50IGlzIHZpc2libGVcbiAgICAgKiBAcGFyYW0ge0h0bWxFbGVtZW50fVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzVmlzaWJsZShlbGVtKSB7XG4gICAgICAgIGlmKCEgdGhpcy5pc0VsZW1lbnQoZWxlbSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiKGlzVmlzaWJsZSkgTm90IGFuIGVsZW1lbnQ6IFwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVsZW0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXkgIT09IFwibm9uZVwiO1xuICAgICAgICBjb25zdCBub3RIaWRkZW4gPSBlbGVtLnN0eWxlLnZpc2liaWxpdHkgIT09IFwiaGlkZGVuXCI7XG4gICAgICAgIHJldHVybiBkaXNwbGF5ICYmIG5vdEhpZGRlbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiBlbGVtZW50IGlzIGluIHZpZXdcbiAgICAgKiBAcGFyYW0ge0h0bWxFbGVtZW50fVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGluVmlldyhlbGVtKSB7XG4gICAgICAgIGNvbnN0IHJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICByZXR1cm4gcmVjdC50b3AgPj0gMCAmJiByZWN0LmxlZnQgPj0gMCAmJlxuICAgICAgICAgICAgICAgcmVjdC5ib3R0b20gPD0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSAmJlxuICAgICAgICAgICAgICAgcmVjdC5yaWdodCA8PSAod2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSAmJlxuICAgICAgICAgICAgICAgcmVjdC53aWR0aCA+IDAgJiYgcmVjdC5oZWlnaHQgPiAwXG4gICAgfVxuXHQvKipcblx0ICogUmVtb3ZlIG51bGwsIGVtcHR5IG9yIHVuZGVmaW5lZCB2YWx1ZXMgZnJvbSBhbiBhcnJheVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhXG5cdCAqIEByZXR1cm5zIHtBcnJheX1cblx0ICovXG4gICAgY2xlYW5BcnJheShhKSB7XG4gICAgICAgIHJldHVybiBhLmZpbHRlcihmdW5jdGlvbihlKXsgcmV0dXJuIGUgPT09IDAgfHwgZSB9KTtcbiAgICB9O1xuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgdGFnIG5hbWUgaXMgYSB2YWxpZCBIVE1MIGVsZW1lbnRcblx0ICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzVmFsaWRFbGVtZW50KHRhZ05hbWUpIHtcbiAgICAgICAgY29uc3QgJG5vZGUgPSB0aGlzLm5ld0VsZW1lbnQodGFnTmFtZSk7XG4gICAgICAgIHJldHVybiB0YWdOYW1lICE9PSBcInRlbXBsYXRlXCIgJiYgJG5vZGUuY29uc3RydWN0b3IubmFtZSAhPT0gXCJIVE1MVW5rbm93bkVsZW1lbnRcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGVsZW1lbnQgZXhpc3RzIGluIERPTSBiYXNlZCBvbiBzZWxlY3RvclxuICAgICAqL1xuICAgIGV4aXN0cyhzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgIT09IG51bGw7XG4gICAgfVxuXHQvKipcblx0ICogR2V0IGF0dHJpYnV0ZSBvciBwcm9wZXJ0eVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqIEByZXR1cm5zIHsqfVxuXHQgKi9cblx0Z2V0QXR0ck9yUHJvcCAoJG5vZGUsIGtleSkge1xuXHRcdGxldCB2YWx1ZSA9IFwiXCI7XG5cdFx0aWYodGhpcy5oYXNBdHRyT3JQcm9wKCRub2RlLCAga2V5KSkge1xuXHRcdFx0dmFsdWUgPSB0aGlzLmhhc0F0dHIoJG5vZGUsIGtleSkgPyAkbm9kZS5nZXRBdHRyaWJ1dGUoa2V5KTogJG5vZGVba2V5XTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlXG5cdH1cblx0LyoqXG5cdCAqIElmIGEgbm9kZSBjb250YWlucyBlaXRoZXIgYSBwcm9wZXJ0eSBvciBhbiBhdHRyaWJ1dGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcmV0dXJuIHtib29sZWFufVxuXHQgKi9cblx0aGFzQXR0ck9yUHJvcCAoJG5vZGUsIGtleSkge1xuXHRcdHJldHVybiB0aGlzLmhhc0F0dHIoJG5vZGUsIGtleSkgfHwgdGhpcy5oYXNQcm9wKCRub2RlLCBrZXkpO1xuXHR9XG5cdC8qKlxuXHQgKiBJZiBhIG5vZGUgaGFzIGFuIGF0dHJpYnV0ZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gYXR0clxuXHQgKiBAcmV0dXJuIHtib29sZWFufVxuXHQgKi9cblx0aGFzQXR0ciAoJG5vZGUsIGF0dHIpIHtcblx0XHRsZXQgaGFzQXR0ciA9IGZhbHNlO1xuXHRcdGlmKCRub2RlICYmICF0aGlzLmlzTnVtZXJpYyhhdHRyKSkge1xuXHRcdFx0c3dpdGNoKGF0dHIpIHtcblx0XHRcdFx0Y2FzZSBcImNoZWNrZWRcIjpcblx0XHRcdFx0XHRoYXNBdHRyID0gKCRub2RlLnR5cGUgIT09IHVuZGVmaW5lZCAmJiAoJG5vZGUudHlwZSA9PT0gXCJyYWRpb1wiIHx8ICRub2RlLnR5cGUgPT09IFwiY2hlY2tib3hcIikpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGhhc0F0dHIgPSAkbm9kZS5oYXNBdHRyaWJ1dGUgIT09IHVuZGVmaW5lZCA/ICRub2RlLmhhc0F0dHJpYnV0ZShhdHRyKSA6IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gaGFzQXR0cjtcblx0fVxuXHQvKipcblx0ICogSWYgYSBub2RlIGhhcyBhIHByb3BlcnR5IHdoaWNoIGlzIG5vdCBhbiBhdHRyaWJ1dGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHByb3Bcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuXHRoYXNQcm9wICgkbm9kZSwgcHJvcCkge1xuXHRcdGxldCBoYXNQcm9wID0gZmFsc2U7XG5cdFx0aWYoJG5vZGUgJiYgIXRoaXMuaXNOdW1lcmljKHByb3ApKSB7XG5cdFx0ICAgIGxldCBoYXMgPSAkbm9kZVtwcm9wXSAhPT0gdW5kZWZpbmVkO1xuXHRcdCAgICBpZihoYXMgJiYgJG5vZGVbcHJvcF0gPT09IG51bGwgJiYgcHJvcCA9PT0gXCJ2YWx1ZVwiKSB7XG5cdFx0XHRcdGhhcyA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aGFzUHJvcCA9IChoYXMgJiYhICgkbm9kZVtwcm9wXSBpbnN0YW5jZW9mIE5vZGUpKSAmJiEgJG5vZGUuaGFzQXR0cmlidXRlKHByb3ApO1xuXHRcdH1cblx0XHRyZXR1cm4gaGFzUHJvcDtcblx0fVxuXG5cdC8qKlxuXHQgKiBTZXQgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgd2hpY2ggaXMgdHJ1ZS9mYWxzZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdHNldFByb3BPckF0dHIgKCRub2RlLCBrZXksIHZhbHVlKSB7XG5cdCAgICBpZih0aGlzLmhhc1Byb3AoJG5vZGUsIGtleSkpIHtcblx0ICAgIFx0dHJ5IHtcblx0XHRcdFx0JG5vZGVba2V5XSA9IHZhbHVlO1xuXHRcdFx0fSBjYXRjaChpZ25vcmUpIHsgLy9JZiBmYWlscywgc2V0IGl0IGFzIGF0dHJpYnV0ZTogKGUuZy4gaW5wdXQubGlzdClcblx0XHRcdFx0dGhpcy5zZXRBdHRyKCRub2RlLCBrZXksIHZhbHVlKTtcblx0XHRcdH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyKCRub2RlLCBrZXksIHZhbHVlKTtcbiAgICBcdH1cblx0fVxuXG4gICAgLyoqXG4gICAgICogU2V0IGF0dHJpYnV0ZSB0byBub2RlLiBJZiB2YWx1ZSBpcyBmYWxzZSwgd2lsbCByZW1vdmUgaXQuXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqL1xuXHRzZXRBdHRyICgkbm9kZSwga2V5LCB2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSkge1xuICAgICAgICAgICAgJG5vZGUuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGUucmVtb3ZlQXR0cmlidXRlKGtleSk7XG4gICAgICAgIH1cblx0fVxuXHQvKipcblx0ICogRGVmaW5lIGEgcHJvcGVydHkgdG8gYW4gb2JqZWN0XG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHByb3Bcblx0ICogQHBhcmFtIHtzdHJpbmd9IGRlZlxuXHQgKi9cblx0ZGVmaW5lUHJvcCAob2JqLCBwcm9wLCBkZWYpIHtcblx0XHRpZih0aGlzLmlzT2JqZWN0KG9iaikpIHtcblx0XHRcdGlmKG9ialtwcm9wXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIHtcblx0XHRcdFx0XHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0XHRcdFx0XHR3cml0YWJsZTogdHJ1ZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0b2JqW3Byb3BdID0gZGVmO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHQvKipcblx0ICogQ3JlYXRlcyBhIE5vZGUgdXNpbmcgSFRNTCBjb2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBodG1sXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cblx0ICovXG5cdGh0bWxFbGVtZW50KGh0bWwpIHtcblx0XHQvL3JldHVybiBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTsgRklYTUVcblx0XHRjb25zdCB0ZW1wbGF0ZSA9IHRoaXMubmV3RWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sLnRyaW0oKTtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RDaGlsZDtcblx0fTtcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBOb2RlIHdpdGggYSB0YWcgbmFtZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG5cdCAqL1xuXHRuZXdFbGVtZW50KHRhZ05hbWUpIHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcblx0fTtcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gZW1wdHkgbm9kZSAoRG9jdW1lbnRGcmFnbWVudClcblx0ICogQHJldHVybnMge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRuZXdFbXB0eU5vZGUoKSB7XG5cdFx0cmV0dXJuIG5ldyBEb2N1bWVudEZyYWdtZW50KClcblx0fVxuXHQvKipcblx0ICogR2V0IGFsbCBtZXRob2RzIG9mIGNsYXNzIG9iamVjdFxuXHQgKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjcyNjAxMzEvMTk2NTA3XG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBvYmpcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKi9cblx0Z2V0TWV0aG9kcyhvYmopIHtcblx0XHRjb25zdCBvID0gUmVmbGVjdC5nZXRQcm90b3R5cGVPZihvYmopO1xuXHRcdGNvbnN0IHggPSBSZWZsZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuXHRcdHJldHVybiBSZWZsZWN0Lm93bktleXMobykuZmlsdGVyKGl0ID0+IFJlZmxlY3Qub3duS2V5cyh4KS5pbmRleE9mKGl0KSA8IDApO1xuXHR9O1xuXHQvKipcblx0ICogQXBwZW5kIGFsbCBjaGlsZCBmcm9tIG9uZSBub2RlIHRvIGFub3RoZXJcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJHNyY05vZGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJHRndE5vZGVcblx0ICovXG5cdGFwcGVuZEFsbENoaWxkKCRzcmNOb2RlLCAkdGd0Tm9kZSkge1xuXHRcdC8vVXBkYXRlIGFsbCBhdCBvbmNlXG5cdFx0Ly8kbm9kZS5hcHBlbmQoLi4uJG91dEVsZW0uY2hpbGROb2Rlcyk7IC8vPC0tIHdvcmtzIGJ1dCBpdCBpcyBzbG93ZXJcblx0XHR3aGlsZSAoJHNyY05vZGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0JHRndE5vZGUuYXBwZW5kKCRzcmNOb2RlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0fVxuXHQvKipcblx0ICogUHJlcGVuZCBhbGwgY2hpbGQgZnJvbSBvbmUgbm9kZSB0byBhbm90aGVyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRzcmNOb2RlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICR0Z3ROb2RlXG5cdCAqL1xuXHRwcmVwZW5kQWxsQ2hpbGQoJHNyY05vZGUsICR0Z3ROb2RlKSB7XG5cdFx0Ly9VcGRhdGUgYWxsIGF0IG9uY2Vcblx0XHQvLyRub2RlLmFwcGVuZCguLi4kb3V0RWxlbS5jaGlsZE5vZGVzKTsgLy88LS0gd29ya3MgYnV0IGl0IGlzIHNsb3dlclxuXHRcdHdoaWxlICgkc3JjTm9kZS5maXJzdENoaWxkKSB7XG5cdFx0XHQkdGd0Tm9kZS5wcmVwZW5kKCRzcmNOb2RlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEBhdXRob3I6IEEuIExlcGVcbiAqIEB1cmwgOiBodHRwczovL2dpdGxhYi5jb20vaW50ZWxsaXNyYy9tMmQyL1xuICogQHNpbmNlOiBNYXksIDIwMThcbiAqIEB2ZXJzaW9uOiAyLjAuMFxuICogQHVwZGF0ZWQ6IDIwMjEtMDQtMTZcbiAqXG4gKlxuICogTTJEMiBDbGFzc1xuICovXG5jbGFzcyBtMmQyIHtcbiAgICAndXNlIHN0cmljdCc7XG5cdF9zdG9yZWQgPSB7XG5cdFx0ZXZlbnRzIDogW10sXG5cdFx0ZGF0YXNldE5vZGVzIDogW10sXG5cdFx0ZGF0YXNldHMgOiBbXSxcblx0XHRzdHlsZU5vZGVzIDogW10sXG5cdFx0c3R5bGVzIDogW11cblx0fVxuXHRzdGF0aWMgc3RvcmVkRXZlbnRzVGltZW91dCA9IDUwOyAvL21zIHRvIGdyb3VwIHNhbWUgZXZlbnRzXG5cdHN0YXRpYyBzaG9ydCA9IHRydWU7IC8vRW5hYmxlIHNob3J0IGFzc2lnbmF0aW9uIChmYWxzZSA9IGJldHRlciBwZXJmb3JtYW5jZSkgVE9ETzogZG9jdW1lbnQgKHVzZSBQcm94eSBsaWtlOiBvYmouYSA9IFwidGV4dFwiKVxuXHRzdGF0aWMgdXBkYXRlcyA9IHRydWU7IC8vRW5hYmxlIFwib251cGRhdGVcIiAoZmFsc2UgPSBiZXR0ZXIgcGVyZm9ybWFuY2UpIFRPRE86IGRvY3VtZW50ICh1c2UgTXV0YXRpb25PYnNlcnZlcilcblx0c3RhdGljIHV0aWxzID0gbmV3IFV0aWxzKCk7XG5cblx0Y29uc3RydWN0b3IoKSB7fVxuXHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU1RBVElDIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdHN0YXRpYyBpbnN0YW5jZSA9IG5ldyBtMmQyKCk7XG5cdHN0YXRpYyBleHRlbnNpb25zID0ge307IC8vIEFkZGl0aW9uYWwgcHJvcGVydGllcyBmb3IgRE9NXG5cdHN0YXRpYyBtYWluID0gKCgpID0+IHtcblx0XHRjb25zdCBmID0gKHNlbGVjdG9yLCBvYmplY3QpID0+IHtcblx0XHRcdGNvbnN0IG5vZGUgPSB0aGlzLmluc3RhbmNlLmdldFByb3h5Tm9kZShzZWxlY3Rvciwgb2JqZWN0KTtcblx0XHRcdC8vIFRFU1Q6IDEzXG5cdFx0XHRpZihub2RlICYmIG5vZGUub25yZWFkeSAmJiBtMmQyLnV0aWxzLmlzRnVuY3Rpb24obm9kZS5vbnJlYWR5KSkge1xuXHRcdFx0XHRub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeVwiLCBub2RlLm9ucmVhZHksIHsgb25jZSA6IHRydWUgfSk7XG5cdFx0XHRcdC8vIFRoaXMgd2lsbCBiZSBjYWxsZWQganVzdCBhZnRlciB0aGUgb2JqZWN0IGhhcyBiZWVuIHJldHVybmVkICh0byBiZSBzdXJlIGl0IHdhcyBjcmVhdGVkKVxuXHRcdFx0XHQvLyBXaXRob3V0IHNldFRpbWVvdXQgXCJvbnJlYWR5XCIgd291bGQgYmUgdGhlIHNhbWUgYXMgXCJvbmxvYWRcIi5cblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3JlYWR5JykpO1xuXHRcdFx0XHR9LCAxMCk7IC8vVE9ETzogRG9jdW1lbnRcblx0XHRcdH1cblx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZXMgdG8gZGF0YXNldHMgKHVzZWQgbGF0ZXIgaW4gb25wdWRhdGUgZGF0YXNldCwgc3R5bGUpOlxuXHRcdFx0W1wiZGF0YXNldFwiLFwic3R5bGVcIl0uZm9yRWFjaChpID0+IHtcblx0XHRcdCAgICBpZihub2RlICYmIG5vZGVbaV0pIHtcblx0XHRcdFx0ICAgIHRoaXMuaW5zdGFuY2UuX3N0b3JlZFtpICsgXCJzXCJdLnB1c2gobm9kZVtpXSk7XG5cdFx0XHRcdCAgICB0aGlzLmluc3RhbmNlLl9zdG9yZWRbaSArIFwiTm9kZXNcIl0ucHVzaChub2RlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdHJldHVybiBub2RlO1xuXHRcdH1cblx0ICAgIC8vIEV4dGVuZHMgVXRpbHM6XG5cdCAgICBtMmQyLnV0aWxzLmdldE1ldGhvZHMobTJkMi51dGlscykuZm9yRWFjaChrID0+IHsgZltrXSA9IG0yZDIudXRpbHNba10gfSk7XG5cdFx0cmV0dXJuIGY7XG5cdH0pKCk7XG5cdC8qKlxuXHQgKiBJbml0aWFsaXphdGlvbi4gVXNlOiBtMmQyLnJlYWR5KClcblx0ICogQHBhcmFtIHsgZnVuY3Rpb24gfSBjYWxsYmFja1xuXHQgKi9cblx0c3RhdGljIHJlYWR5KGNhbGxiYWNrKSB7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobTJkMi5tYWluKTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBFeGVjdXRlIHNvbWV0aGluZyBvbiBsb2FkLiBJdCB3aWxsIHNlYXJjaCBmb3IgZXh0ZW5zaW9ucy5cblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcblx0ICogVEVTVDogMDBcblx0ICovXG5cdHN0YXRpYyBsb2FkKGNhbGxiYWNrKSB7XG5cdCAgICBpZihjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBleHQgPSBjYWxsYmFjayhtMmQyLm1haW4pOyAvL21haW4gY2FuIGJlIGV4dGVuZGVkIGhlcmVcbiAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaXNPYmplY3QoZXh0KSAmJiAhbTJkMi51dGlscy5pc0VtcHR5KGV4dCkpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhleHQpLmZvckVhY2goayA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaXNWYWxpZEVsZW1lbnQoaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG0yZDIuZXh0ZW5zaW9uc1trXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbTJkMi5leHRlbnNpb25zW2tdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGF0IHdlIGFyZSBub3QgcmVwbGFjaW5nIGFueSBleGlzdGluZyBwcm9wZXJ0eTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICRub2RlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXh0W2tdKS5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtMmQyLnV0aWxzLmhhc1Byb3AoJG5vZGUsIGl0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIldhcm5pbmc6IHByb3BlcnR5IFtcIiArIGl0ICsgXCJdIGFscmVhZHkgZXhpc3RzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaW4gbm9kZTogW1wiICsgayArIFwiXSB3aGlsZSB0cnlpbmcgdG8gZXh0ZW5kIGl0LiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlVuZXhwZWN0ZWQgYmVoYXZpb3VyIG1heSBoYXBwZW4uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtMmQyLmV4dGVuc2lvbnNba10sIGV4dFtrXSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtMmQyLmV4dGVuc2lvbnNbXCIqXCJdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtMmQyLmV4dGVuc2lvbnNbXCIqXCJdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCAkbm9kZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dFtrXSkuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5oYXNQcm9wKCRub2RlLCBpdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJXYXJuaW5nOiBwcm9wZXJ0eSBbXCIgKyBpdCArIFwiXSBhbHJlYWR5IGV4aXN0cyBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImluIE5vZGUgd2hpbGUgdHJ5aW5nIHRvIGV4dGVuZCBpdC4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJVbmV4cGVjdGVkIGJlaGF2aW91ciBtYXkgaGFwcGVuLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obTJkMi5leHRlbnNpb25zW1wiKlwiXSwgZXh0W2tdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXHRcdH1cblx0XHRyZXR1cm4gbTJkMi5tYWluOyAvL1RPRE86IGRvY3VtZW50YXRpb24gOiBjb25zdCAkID0gbTJkMi5sb2FkKCk7XG5cdH1cblx0LyoqXG5cdCAqIE0yRDIgV2lsbCBzZXQgYWxsIGV4dGVuc2lvbnMgdG8gRE9NIG9iamVjdHMgLy9UT0RPOiBkb2N1bWVudGF0aW9uXG5cdCAqIEBwYXJhbSB7c3RyaW5nLCBIVE1MRWxlbWVudH0gc2VsZWN0b3Jcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudCwgTm9kZX0gWyRyb290XVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG5cdCAqIFRFU1Q6IDAxXG5cdCAqL1xuXHRleHREb20oc2VsZWN0b3IsICRyb290KSB7XG5cdFx0aWYoISBzZWxlY3RvcikgeyAgLy8gRG8gbm90IHByb2NlZWQgaWYgc2VsZWN0b3IgaXMgbnVsbCwgZW1wdHkgb3IgdW5kZWZpbmVkXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiU2VsZWN0b3Igd2FzIGVtcHR5XCIpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGlmKCRyb290ID09PSB1bmRlZmluZWQpIHsgJHJvb3QgPSBkb2N1bWVudCB9XG5cdFx0Y29uc3QgJG5vZGUgPSBtMmQyLnV0aWxzLmlzTm9kZShzZWxlY3RvcikgPyBzZWxlY3RvciA6ICRyb290LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuXHRcdGlmKCEgJG5vZGUpIHtcblx0XHRcdGlmKG0yZDIudXRpbHMuaXNTdHJpbmcoc2VsZWN0b3IpKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJTZWxlY3RvcjogXCIgKyBzZWxlY3RvciArIFwiIGRpZG4ndCBtYXRjaCBhbnkgZWxlbWVudCBpbiBub2RlOlwiKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJHJvb3QpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIk5vZGUgd2FzIG51bGxcIik7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0aWYoJG5vZGUuX20yZDIgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0JG5vZGUuX20yZDIgPSB0cnVlOyAvL2ZsYWcgdG8gcHJldmVudCBpdCBmcm9tIHJlLWFzc2lnbiBtZXRob2RzXG5cdFx0XHRbXCJwYXJlbnRcIixcInNpYmxpbmdcIixcIm5leHRcIixcInByZXZcIixcImZpbmRcIixcImZpbmRBbGxcIixcIm9udXBkYXRlXCIsXCJvbnJlYWR5XCIsXCJzaG93XCIsXCJvbnNob3dcIixcImluVmlld1wiLFwiY3NzXCIsXCJ0ZXh0XCIsXCJodG1sXCIsXCJnZXREYXRhXCIsXCJpbmRleFwiXS5mb3JFYWNoKGYgPT4ge1xuXHRcdFx0XHRpZigkbm9kZS5oYXNPd25Qcm9wZXJ0eShmKSkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTm9kZSBhbHJlYWR5IGhhZCBbXCIrZitcIl0gcHJvcGVydHkuIEl0IG1pZ2h0IGNhdXNlIHVuZXhwZWN0ZWQgYmVoYXZpb3VyLlwiKVxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiWW91IG1heSBuZWVkIHRvIHVwZGF0ZSB0aGUgTTJEMiB2ZXJzaW9uIG9yIHJlcG9ydCBpdCB0bzogZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvXCIpXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Ly8gUHJvcGVydGllczpcblx0XHRcdC8vIFRFU1Q6IDAxLCAuLi5cblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgkbm9kZSwgXCJ0ZXh0XCIsIHtcblx0XHRcdFx0Z2V0KCkgeyByZXR1cm4gdGhpcy5jaGlsZE5vZGVzLmxlbmd0aCA/IHRoaXMuaW5uZXJUZXh0IDogdGhpcy50ZXh0Q29udGVudDsgfSxcblx0XHRcdFx0c2V0KHZhbHVlKSB7XG5cdFx0XHRcdFx0Ly8gdGV4dCBzaG91bGQgb25seSBjaGFuZ2UgVGV4dCBub2RlcyBhbmQgbm90IGNoaWxkcmVuOiAvL1RPRE86IGRvY3VtZW50YXRpb25cblx0XHRcdFx0XHRpZih0aGlzLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRsZXQgZm91bmQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdHRoaXMuY2hpbGROb2Rlcy5mb3JFYWNoKG4gPT4ge1xuXHRcdFx0XHRcdFx0XHRpZihuLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiVGV4dFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0bi5ub2RlVmFsdWUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYoISBmb3VuZCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnByZXBlbmQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodmFsdWUpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdC8vIFRFU1Q6IDQzLDEzLDI3LC4uLlxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCRub2RlLCBcImh0bWxcIiwge1xuXHRcdFx0XHRnZXQoKSB7IHJldHVybiB0aGlzLmlubmVySFRNTDsgfSxcblx0XHRcdFx0c2V0KHZhbHVlKSB7IHRoaXMuaW5uZXJIVE1MID0gdmFsdWU7ICB9XG5cdFx0XHR9KTtcblx0XHRcdC8vIFRFU1Q6IDAyXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoJG5vZGUsIFwiY3NzXCIsIHsgICAvL1RPRE86IGRvY3VtZW50IG5ldyBiZWhhdmlvdXJcblx0XHRcdFx0Z2V0KCkge1xuXHRcdFx0XHQgICAgcmV0dXJuIHRoaXMuY2xhc3NMaXN0O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQodmFsdWUpIHtcblx0XHRcdFx0ICAgIGlmKG0yZDIudXRpbHMuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBcdFx0XHRcdCAgICB0aGlzLmNsYXNzTmFtZSA9IHZhbHVlLmpvaW4oXCIgXCIpO1xuXHRcdFx0XHQgICAgfSBlbHNlIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgXHRcdFx0XHQgICAgdGhpcy5jbGFzc05hbWUgPSB2YWx1ZTtcblx0XHRcdFx0ICAgIH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdFx0XHRcdCAgICAgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goYyA9PiB7XG5cdFx0XHRcdCAgICAgICAgICAgIGlmKHZhbHVlW2NdKSB7XG5cdFx0XHRcdCAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoYyk7XG5cdFx0XHRcdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoYyk7XG5cdFx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdFx0ICAgICAgICB9KTtcblx0XHRcdFx0ICAgIH0gZWxzZSB7XG5cdFx0XHRcdCAgICAgICAgY29uc29sZS5lcnJvcihcIlRyeWluZyB0byBhc3NpZ24gYSB3cm9uZyB2YWx1ZSB0byBjc3MgOiBcIiArIHZhbHVlKTtcblx0XHRcdFx0ICAgIH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvLyBURVNUOiAxNlxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCRub2RlLCBcInNob3dcIiwge1xuXHRcdFx0XHRnZXQoKSB7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0ICAgIHJldHVybiBtMmQyLnV0aWxzLmlzVmlzaWJsZSh0aGlzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2V0KHNob3cpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3NzRGlzcGxheSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRoaXMsIG51bGwpLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHREaXNwbGF5ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLnRhZ05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5hcHBlbmQobik7XG4gICAgICAgICAgICAgICAgICAgICAgICBiLmFwcGVuZCh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXkgPSBnZXRDb21wdXRlZFN0eWxlKG4sIG51bGwpLmRpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmKHNob3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNzc0Rpc3BsYXkoKSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLl9tMmQyX2Rpc3BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gdGhpcy5fbTJkMl9kaXNwbGF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjc3NEaXNwbGF5KCkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0U2hvdyA9IGRlZmF1bHREaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSB0aGlzLmRhdGFzZXQuZGlzcGxheSB8fCAoZGVmYXVsdFNob3cgIT09IFwibm9uZVwiID8gZGVmYXVsdFNob3cgOiBcImJsb2NrXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRFU1Q6IDE2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5vbnNob3cgIT09IHVuZGVmaW5lZCAmJiBtMmQyLnV0aWxzLmlzRnVuY3Rpb24odGhpcy5vbnNob3cpKSB7IC8vVE9ETzogZG9jdW1lbnQgb25zaG93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25zaG93KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlZCA9IHRoaXMuc3R5bGUuZGlzcGxheSAhPT0gXCJub25lXCIgPyB0aGlzLnN0eWxlLmRpc3BsYXkgOiBjc3NEaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzdG9yZWQgIT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbTJkMl9kaXNwbGF5ID0gc3RvcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdC8vVE9ETzogZG9jdW1lbnQgaG93IHRvIGV4dGVuZFxuXHRcdFx0Ly9UT0RPOiB0ZXN0XG5cdFx0XHRsZXQgZXh0ZW5kID0ge307XG5cdFx0XHRpZihtMmQyLmV4dGVuc2lvbnNbXCIqXCJdICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0T2JqZWN0LmFzc2lnbihleHRlbmQsIG0yZDIuZXh0ZW5zaW9uc1tcIipcIl0pO1xuXHRcdFx0fVxuXHRcdFx0aWYobTJkMi5leHRlbnNpb25zWyRub2RlLnRhZ05hbWVdICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0T2JqZWN0LmFzc2lnbihleHRlbmQsIG0yZDIuZXh0ZW5zaW9uc1skbm9kZS50YWdOYW1lXSk7XG5cdFx0XHR9XG5cdFx0XHQvLyBGdW5jdGlvbnM6XG5cdFx0XHRPYmplY3QuYXNzaWduKCRub2RlLCB7XG5cdFx0XHQgICAgaW5WaWV3OiAoKSA9PiB7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdCAgICAgICAgcmV0dXJuIG0yZDIudXRpbHMuaW5WaWV3KCRub2RlKTtcblx0XHRcdCAgICB9LFxuXHRcdFx0XHRuZXh0OiAoKSA9PiB7IC8vVEVTVDogMDdcblx0XHRcdFx0ICAgIHJldHVybiAkbm9kZS5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHByZXY6ICgpID0+IHsgLy9URVNUOiAwN1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJG5vZGUucHJldmlvdXNFbGVtZW50U2libGluZztcblx0XHRcdFx0fSxcblx0XHRcdFx0cGFyZW50OiAoKSA9PiB7IC8vVE9ETzogdGVzdFxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmV4dERvbSgkbm9kZS5wYXJlbnRFbGVtZW50KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2libGluZzogKHNlbCkgPT4geyAvL1RPRE86IHRlc3Rcblx0XHRcdFx0XHRyZXR1cm4gJG5vZGUucGFyZW50RWxlbWVudC5maW5kKHNlbCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZpbmQ6IChpdCkgPT4geyAvLyBUZXN0OiAwNFxuXHRcdFx0XHRcdGNvbnN0IG5vZGUgPSAkbm9kZS5xdWVyeVNlbGVjdG9yKGl0KVxuXHRcdFx0XHRcdHJldHVybiBub2RlID8gdGhpcy5leHREb20obm9kZSkgOiBudWxsO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmaW5kQWxsOiAoaXQpID0+IHsgLy9URVNUOiAwNVxuXHRcdFx0XHRcdGNvbnN0IG5vZGVMaXN0ID0gaXQgPT09IHVuZGVmaW5lZCA/IEFycmF5LmZyb20oJG5vZGUuY2hpbGRyZW4pIDogJG5vZGUucXVlcnlTZWxlY3RvckFsbChpdCk7XG5cdFx0XHRcdFx0bm9kZUxpc3QuZm9yRWFjaChuID0+IHsgdGhpcy5leHREb20obikgfSk7XG5cdFx0XHRcdFx0cmV0dXJuIG5vZGVMaXN0O1xuXHRcdFx0XHR9LFxuXHRcdFx0fSwgZXh0ZW5kKTtcblx0XHRcdC8vIFNvbWUgZWxlbWVudHMgbGlrZSA8T1BUSU9OPiBhbHJlYWR5IGhhdmUgaW5kZXhcblx0XHRcdGlmKCRub2RlLmluZGV4ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0JG5vZGUuaW5kZXggPSAoKSA9PiB7IC8vVEVTVDogMDdcblx0XHRcdFx0XHRyZXR1cm4gQXJyYXkuZnJvbSgkbm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuKS5pbmRleE9mKCRub2RlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gTGV0IGF0dHJpYnV0ZXMga25vdyBhYm91dCBjaGFuZ2VzIGluIHZhbHVlcyAvL1RPRE86IHRlc3Rcblx0XHRcdGlmKFtcIklOUFVUXCIsIFwiVEVYVEFSRUFcIiwgXCJTRUxFQ1RcIl0uaW5kZXhPZigkbm9kZS50YWdOYW1lKSA+PSAwICYmIG0yZDIudXRpbHMuaGFzQXR0ck9yUHJvcCgkbm9kZSwgXCJ2YWx1ZVwiKSkge1xuXHRcdFx0XHQkbm9kZS5vbmlucHV0ID0gZnVuY3Rpb24oKSB7IHRoaXMuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdGhpcy52YWx1ZSApfVxuXHRcdFx0fVxuXHRcdFx0Ly8gQWRkIGdldERhdGEoKSB0byBmb3JtOiAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRpZigkbm9kZS50YWdOYW1lID09PSBcIkZPUk1cIikge1xuXHRcdFx0XHQkbm9kZS5nZXREYXRhID0gZnVuY3Rpb24gKGluY2x1ZGVOb3RWaXNpYmxlKSB7IC8vVE9ETyBkb2N1bWVudDogaW5jbHVkZU5vdFZpc2libGVcblx0XHRcdFx0XHRjb25zdCBkYXRhID0ge307XG5cdFx0XHRcdFx0Y29uc3QgZmQgPSBuZXcgRm9ybURhdGEodGhpcyk7XG5cdFx0XHRcdFx0Y29uc3QgaW5jbHVkZSA9IGluY2x1ZGVOb3RWaXNpYmxlIHx8IGZhbHNlO1xuXHRcdFx0XHRcdGZvciAobGV0IHBhaXIgb2YgZmQuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtID0gJG5vZGUuZmluZChcIltuYW1lPSdcIitwYWlyWzBdK1wiJ11cIik7XG5cdFx0XHRcdFx0XHRpZihpbmNsdWRlIHx8IGVsZW0udHlwZSA9PT0gXCJoaWRkZW5cIiB8fCBlbGVtLnNob3cpIHtcblx0XHRcdFx0XHRcdFx0ZGF0YVtwYWlyWzBdXSA9IGVsZW0udHlwZSA9PT0gXCJmaWxlXCIgPyBlbGVtLmZpbGVzIDogcGFpclsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiAkbm9kZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuICRub2RlO1xuXHRcdH1cblx0fVxuXHQvKipcblx0ICogTTJEMiB3aWxsIGNyZWF0ZSBjdXN0b20gbGlua3MgYW5kIHByb3BlcnRpZXNcblx0ICogQHBhcmFtIHtzdHJpbmcsIEhUTUxFbGVtZW50LCBOb2RlfSBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudCwgUHJveHl9XG5cdCAqIFRFU1Q6IDAzLC4uLlxuXHQgKi9cblx0ZG9Eb20oc2VsZWN0b3IsIG9iamVjdCkge1xuXHRcdC8vIFdoZW4gbm8gc2VsZWN0b3IgaXMgc3BlY2lmaWVkLCBzZXQgXCJib2R5XCJcblx0XHRpZihtMmQyLnV0aWxzLmlzT2JqZWN0KHNlbGVjdG9yKSAmJiBvYmplY3QgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0b2JqZWN0ID0gc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IG0yZDIudXRpbHMubmV3RW1wdHlOb2RlKCk7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdGlmKG9iamVjdC53YXJuID09PSB1bmRlZmluZWQpIHtcblx0XHRcdCAgICBvYmplY3Qud2FybiA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZighKG0yZDIudXRpbHMuaXNTdHJpbmcoc2VsZWN0b3IpIHx8IG0yZDIudXRpbHMuaXNFbGVtZW50KHNlbGVjdG9yKSB8fCBtMmQyLnV0aWxzLmlzTm9kZShzZWxlY3RvcikpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiU2VsZWN0b3IgaXMgbm90IGEgc3RyaW5nIG9yIGEgTm9kZTpcIilcblx0XHRcdGNvbnNvbGUubG9nKHNlbGVjdG9yKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRpZihtMmQyLnV0aWxzLmlzU3RyaW5nKHNlbGVjdG9yKSAmJiEgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikpIHtcblx0XHQgICAgY29uc29sZS5sb2coXCJTZWxlY3RlZCBlbGVtZW50IGRvZXNuJ3QgZXhpc3RzOiBcIiArIHNlbGVjdG9yKVxuXHRcdCAgICByZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0Y29uc3QgJG5vZGUgPSB0aGlzLmV4dERvbShzZWxlY3Rvcik7IC8vIEJlIHN1cmUgdGhhdCAkbm9kZSBpcyBhbiBleHRlbmRlZCBET00gb2JqZWN0XG5cdFx0Ly8gSWYgdGhlcmUgaXMgbm8gb2JqZWN0IHJldHVybiBvbmx5IGV4dGVuc2lvblxuXHRcdGlmKG9iamVjdCA9PT0gdW5kZWZpbmVkKSB7IC8vVE9ETzogZG9jdW1lbnRhdGlvbjogZXh0ZW5kaW5nIG5vZGVzXG5cdFx0XHRyZXR1cm4gJG5vZGU7XG5cdFx0fVxuXHRcdG9iamVjdCA9IHRoaXMucGxhaW5Ub09iamVjdCgkbm9kZSwgb2JqZWN0KTsgLy8gQmUgc3VyZSBpdCdzIGFuIG9iamVjdFxuXG5cdFx0Ly8gVEVTVDogMDNcblx0XHQvLyBXZSBmaWx0ZXItb3V0IHNvbWUga25vd24ga2V5czpcblx0XHRPYmplY3Qua2V5cyhvYmplY3QpLmZpbHRlcihpdCA9PiAhIFtcInRhZ05hbWVcIl0uaW5jbHVkZXMoaXQpKS5mb3JFYWNoKGtleSA9PiB7XG5cdFx0XHRsZXQgb3JpZ1ZhbHVlID0gb2JqZWN0W2tleV07XG5cdFx0XHRpZihvcmlnVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBvcmlnVmFsdWUgPT09IG51bGwpIHtcblx0XHRcdCAgICBjb25zb2xlLmxvZyhcIlZhbHVlIHdhcyBub3Qgc2V0IGZvciBrZXk6IFwiICsga2V5ICsgXCIsICdlbXB0eScgd2FzIHVzZWQgaW4gb2JqZWN0OiBcIik7XG5cdFx0XHQgICAgY29uc29sZS5sb2cob2JqZWN0KTtcblx0XHRcdCAgICBjb25zb2xlLmxvZyhcIkluIG5vZGU6XCIpO1xuXHRcdFx0ICAgIGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdCAgICBvcmlnVmFsdWUgPSBcIlwiO1xuXHQgXHRcdH1cbiAgICAgICAgICAgIC8vTG9vayBmb3Igb251cGRhdGUgaW5saW5lIChbIE5vZGUsIHN0cmluZyBdKVxuICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy51cGRhdGVWYWx1ZSgkbm9kZSwga2V5LCBvcmlnVmFsdWUpO1xuXHRcdFx0Ly9Mb29rIGZvciBwcm9wZXJ0eSBmaXJzdDpcblx0XHRcdGxldCBpc1Byb3AgPSBtMmQyLnV0aWxzLmhhc1Byb3AoJG5vZGUsIGtleSk7XG5cdFx0XHRsZXQgaXNBdHRyID0gbTJkMi51dGlscy5oYXNBdHRyKCRub2RlLCBrZXkpO1xuXHRcdFx0Ly9JZGVudGlmeSBpZiB2YWx1ZSBtYXRjaGVzIHByb3BlcnR5IHR5cGU6XG5cdFx0XHRsZXQgZm91bmRNYXRjaCA9IGZhbHNlO1xuXHRcdFx0aWYoaXNBdHRyIHx8IGlzUHJvcCkge1xuXHRcdFx0XHQvLyBub2luc3BlY3Rpb24gRmFsbFRocm91Z2hJblN3aXRjaFN0YXRlbWVudEpTXG5cdFx0XHRcdHN3aXRjaCh0cnVlKSB7XG5cdFx0XHRcdFx0Ly8gTWF0aCBmb3VuZDpcblx0XHRcdFx0XHRjYXNlIGtleSA9PT0gXCJ2YWx1ZVwiICYmIG0yZDIudXRpbHMuaGFzUHJvcCgkbm9kZSwgXCJ2YWx1ZUFzRGF0ZVwiKSAmJiB2YWx1ZSBpbnN0YW5jZW9mIERhdGU6IC8vIERhdGVzXG5cdFx0XHRcdFx0XHRrZXkgPSBcInZhbHVlQXNEYXRlXCI7IC8vcmVuYW1lZCB2YWx1ZSB0byB2YWx1ZUFzRGF0ZVxuXHRcdFx0XHRcdGNhc2Uga2V5ID09PSBcImNzc1wiOiAvLyBjc3MgaXMgYSBQcm94eSBzbyBpdCBmYWlscyB0byB2ZXJpZnk6XG5cdFx0XHRcdFx0Y2FzZSB0eXBlb2YgdmFsdWUgPT09IHR5cGVvZiAkbm9kZVtrZXldOiAvL1NhbWUgVGltZVxuXHRcdFx0XHRcdGNhc2UgbTJkMi51dGlscy5pc1N0cmluZygkbm9kZVtrZXldKSAmJiBtMmQyLnV0aWxzLmlzTnVtZXJpYyh2YWx1ZSk6IC8vTnVtZXJpYyBwcm9wZXJ0aWVzXG5cdFx0XHRcdFx0Y2FzZSAobTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlKSAmJiBtMmQyLnV0aWxzLmlzT2JqZWN0KCRub2RlW2tleV0pKTogLy9GdW5jdGlvbnNcblx0XHRcdFx0XHRjYXNlIG0yZDIudXRpbHMuaXNCb29sKHZhbHVlKSAmJiBtMmQyLnV0aWxzLmlzU3RyaW5nKCRub2RlW2tleV0pOiAvL0Jvb2xlYW5cblx0XHRcdFx0XHRjYXNlIHR5cGVvZiAkbm9kZVtrZXldID09PSBcIm9iamVjdFwiICYmICRub2RlLnRhZ05hbWUgPT09IFwiSU5QVVRcIjogLy9DYXNlcyBsaWtlIFwibGlzdFwiIGluIGlucHV0XG5cdFx0XHRcdFx0XHRmb3VuZE1hdGNoID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBQcm9wZXJ0aWVzIGFuZCBBdHRyaWJ1dGVzOlxuXHRcdFx0aWYoZm91bmRNYXRjaCkge1xuXHRcdFx0XHRsZXQgZXJyb3IgPSBmYWxzZTtcblx0XHRcdFx0c3dpdGNoKGtleSkge1xuXHRcdFx0XHRcdGNhc2UgXCJjbGFzc0xpc3RcIjogLy9UT0RPOiB0ZXN0XG5cdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRcdHZhbHVlLmZvckVhY2godiA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0JG5vZGVba2V5XS5hZGQodik7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRcdCRub2RlW2tleV0uYWRkKHZhbHVlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGVycm9yID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0Y2FzZSBcInN0eWxlXCI6IC8vVE9ETzogdGVzdFxuXHRcdFx0XHRcdGNhc2UgXCJkYXRhc2V0XCI6IC8vVE9ETzogYXMgaXQgaXMgYWxyZWFkeSBhIERPTSwgd2UgZG9uJ3QgbmVlZCBpdCBtYXliZT9cblx0XHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0XHRcdFx0XHRcdFx0T2JqZWN0LmtleXModmFsdWUpLmZvckVhY2goayA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0JG5vZGVba2V5XVtrXSA9IHRoaXMudXBkYXRlVmFsdWUoJG5vZGVba2V5XSwgaywgdmFsdWVba10pO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGVycm9yID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdHN3aXRjaCh0cnVlKSB7XG5cdFx0XHRcdFx0XHRcdGNhc2UgbTJkMi51dGlscy5pc0Jvb2wodmFsdWUpOiAvLyBib29sZWFuIHByb3BlcnRpZXNcblx0XHRcdFx0XHRcdFx0Y2FzZSBtMmQyLnV0aWxzLmhhc0F0dHJPclByb3AoJG5vZGUsIGtleSk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0yZDIudXRpbHMuc2V0UHJvcE9yQXR0cigkbm9kZSwga2V5LCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHQkbm9kZVtrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiSW52YWxpZCB2YWx1ZSBwYXNzZWQgdG8gJ1wiICsga2V5ICsgXCInOiBcIilcblx0XHRcdFx0XHRjb25zb2xlLmxvZyh2YWx1ZSk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJJbnRvIE5vZGU6XCIpO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdFx0fVxuXHRcdFx0Ly8gTG9vayBmb3IgZWxlbWVudHM6XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0ICAgIGNvbnN0IG9wdGlvbnMgPSBbXTtcblx0XHRcdCAgICB0cnkge1xuXHRcdFx0ICAgICAgICAvLyBURVNUOiAwM1xuXHRcdFx0ICAgICAgICAvLyBGdW5jdGlvbnMgY2FuIG5vdCBiZSBwbGFjZWQgZGlyZWN0bHkgaW50byBlbGVtZW50cywgc28gd2Ugc2tpcFxuXHRcdFx0ICAgICAgICBpZihrZXkgIT09IFwidGVtcGxhdGVcIiAmJiEgbTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9Mb29rIGZvciBJRDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGtleSAmJiBrZXkubWF0Y2goL15cXHcvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbGVtID0gJG5vZGUuZmluZChcIiNcIiArIGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbSAmJiBvcHRpb25zLmluZGV4T2YoZWxlbSkgPT09IC0xKSB7IG9wdGlvbnMucHVzaChlbGVtKTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTG9vayBmb3IgbmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gJG5vZGUuZmluZChcIltuYW1lPSdcIitrZXkrXCInXVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtICYmIG9wdGlvbnMuaW5kZXhPZihlbGVtKSA9PT0gLTEpIHsgb3B0aW9ucy5wdXNoKGVsZW0pOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Mb29rIGZvciBjbGFzczpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtcyA9IEFycmF5LmZyb20oJG5vZGUuZmluZEFsbChcIi5cIiArIGtleSkpLmZpbHRlcihpID0+IG9wdGlvbnMuaW5kZXhPZihpKSA8IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbXMubGVuZ3RoID4gMCkgeyBlbGVtcy5mb3JFYWNoKGUgPT4gb3B0aW9ucy5wdXNoKGUpKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0xvb2sgZm9yIGVsZW1lbnQgb3IgZnJlZSBzZWxlY3RvciAoZS5nOiBcImRpdiA+IHNwYW5cIik6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtcyA9ICBBcnJheS5mcm9tKCRub2RlLmZpbmRBbGwoa2V5KSkuZmlsdGVyKGkgPT4gb3B0aW9ucy5pbmRleE9mKGkpIDwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW1zLmxlbmd0aCA+IDApIHsgZWxlbXMuZm9yRWFjaChlID0+IG9wdGlvbnMucHVzaChlKSkgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHQgICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgc2VsZWN0b3I6IFwiICsga2V5KTtcblx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKGUpO1xuXHRcdFx0XHQgICAgcmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKG9wdGlvbnMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdGNvbnN0IGl0ZW1zID0gW107XG5cdFx0XHRcdFx0b3B0aW9ucy5mb3JFYWNoKGl0ZW0gPT4ge1xuXHRcdFx0XHRcdFx0aXRlbXMucHVzaCh0aGlzLnJlbmRlcihpdGVtLCBrZXksIHZhbHVlKSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dGhpcy5saW5rTm9kZSgkbm9kZSwga2V5LCBpdGVtcyk7XG5cdFx0XHRcdFx0aWYodmFsdWUud2FybiA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlLndhcm4gIT09IGZhbHNlKSB7IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiTXVsdGlwbGUgZWxlbWVudHMgd2VyZSBhc3NpZ25lZCB3aXRoIGtleTogW1wiICsga2V5ICsgXCJdIHVuZGVyIG5vZGU6IFwiKVxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJG5vZGUpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJJdCBtaWdodCBiZSB3aGF0IHdlIGV4cGVjdCwgYnV0IGlmIGl0IGlzIG5vdCBleHBlY3RlZCBpdCBjb3VsZCByZXN1bHQgXCIgK1xuXHRcdFx0XHRcdFx0XHRcdFx0XCJvbiBzb21lIGVsZW1lbnRzIG1pc3Rha2VubHkgcmVuZGVyZWQuIFlvdSBjYW4gc3BlY2lmeSBcIiArXG5cdFx0XHRcdFx0XHRcdFx0XHRcIid3YXJuIDogZmFsc2UnIHVuZGVyIHRoYXQgZWxlbWVudCB0byBoaWRlIHRoaXMgbWVzc2FnZS5cIikgLy9UT0RPOiBhZGQgbGluayB0byByZWZlcmVuY2Vcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZihvcHRpb25zLmxlbmd0aCA9PT0gMSkgeyAvLyBGb3VuZCBzaW5nbGUgb3B0aW9uOiBwbGFjZSB2YWx1ZXNcblx0XHRcdFx0XHRjb25zdCBvcHQgPSBvcHRpb25zWzBdO1xuXHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNFbGVtZW50KG9wdCkpIHsgLy9UT0RPOiB0ZXN0IChubyB0ZW1wbGF0ZSBvciBubyBpdGVtcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMucGxhaW5Ub09iamVjdChvcHQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdF9rZXkgPSBtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3Qob2JqKSAmJiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA+PSAxID8gT2JqZWN0LmtleXMob2JqKVswXSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvcHRfa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnVwZGF0ZVZhbHVlKG9wdCwgb3B0X2tleSwgb3JpZ1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNBcnJheSh2YWx1ZSkpIHsgLy8gUHJvY2VzcyBBcnJheVxuXHRcdFx0XHRcdFx0XHRjb25zdCB0ZW1wbGF0ZSA9IG9iamVjdFtcInRlbXBsYXRlXCJdO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRvSXRlbXMob3B0LCB2YWx1ZSwgdGVtcGxhdGUpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmxpbmtOb2RlKCRub2RlLCBrZXksIG9wdCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgeyAvLyBOb3JtYWwgT2JqZWN0czpcblx0XHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJBbmRMaW5rKCRub2RlLCBvcHQsIGtleSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiQlVHOiBJdCBzaG91bGQgaGF2ZSBiZWVuIGEgbm9kZSBidXQgZ290OiBcIik7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhvcHQpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQYXJlbnQgbm9kZTpcIilcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZihvcHRpb25zLmxlbmd0aCA9PT0gMCkgeyAvL05vIG9wdGlvbnMgZm91bmQ6IGNyZWF0ZSBub2Rlc1xuXHRcdFx0XHQgICAgLy8gTWFrZSBcIml0ZW1zXCIgb3B0aW9uYWw6IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdFx0XHRpZihrZXkgPT09IFwidGVtcGxhdGVcIiAmJiBvYmplY3RbXCJpdGVtc1wiXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0ICAgIGtleSA9IFwiaXRlbXNcIjtcblx0XHRcdFx0XHQgICAgdmFsdWUgPSBbXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgaXNGdW5jID0gbTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlKTtcblx0XHRcdFx0XHRpZih2YWx1ZS50YWdOYW1lICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdGNvbnN0ICRuZXdOb2RlID0gdGhpcy5hcHBlbmRFbGVtZW50KCRub2RlLCB2YWx1ZS50YWdOYW1lKTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQW5kTGluaygkbm9kZSwgJG5ld05vZGUsIGtleSwgdmFsdWUpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzVmFsaWRFbGVtZW50KGtleSkgJiYhIGlzRnVuYykge1xuXHRcdFx0XHRcdFx0Y29uc3QgJG5ld05vZGUgPSB0aGlzLmFwcGVuZEVsZW1lbnQoJG5vZGUsIGtleSk7XG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlckFuZExpbmsoJG5vZGUsICRuZXdOb2RlLCBrZXksIHZhbHVlKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYoa2V5ID09PSBcIml0ZW1zXCIpIHsgLy9JdGVtcyBjcmVhdGlvblxuXHRcdFx0XHRcdFx0Y29uc3QgdGVtcGxhdGUgPSBvYmplY3RbXCJ0ZW1wbGF0ZVwiXTtcblx0XHRcdFx0XHRcdC8vIEFsbG93IHVzZSBvZiBwbGFpbiBvYmplY3QgdG8gc3BlY2lmeSB2YWx1ZSAtPiB0ZXh0IC8vVE9ETzogZG9jdW1lbnRhdGlvblxuXHRcdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0ICAgIGNvbnN0IHZhbFRtcCA9IFtdO1xuXHRcdFx0XHRcdFx0ICAgIE9iamVjdC5rZXlzKHZhbHVlKS5mb3JFYWNoKG8gPT4ge1xuXHRcdFx0XHRcdFx0ICAgIFx0bGV0IG9iajtcblx0XHRcdFx0XHRcdCAgICBcdGlmKCRub2RlLnRhZ05hbWUgPT09IFwiRExcIikgeyAvL1RPRE86IGRvY3VtZW50IERMXG5cdFx0XHRcdFx0XHRcdFx0XHRvYmogPSB7IGR0IDogbywgZGQgOiB2YWx1ZVtvXSB9XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdG9iaiA9IHsgdGV4dDogdmFsdWVbb10gfTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChtMmQyLnV0aWxzLmhhc0F0dHJPclByb3AoJG5vZGUsIFwidmFsdWVcIikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqLnZhbHVlID0gbztcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG9iai5kYXRhc2V0ID0ge2lkOiBvfTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0dmFsVG1wLnB1c2gob2JqKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHQgICAgdmFsdWUgPSB2YWxUbXA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyBQcm9jZXNzIEFycmF5OlxuXHRcdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRvSXRlbXMoJG5vZGUsIHZhbHVlLCB0ZW1wbGF0ZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIldhcm5pbmc6ICdpdGVtcycgc3BlY2lmaWVkIGJ1dCB2YWx1ZSBpcyBub3QgYW5kIGFycmF5LCBpbiBlbGVtZW50OiBcIik7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJQYXNzZWQgdmFsdWVzIGFyZTogXCIpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh2YWx1ZSk7XG5cdFx0XHRcdFx0XHR9XG4gICAgXHRcdFx0XHR9IGVsc2UgaWYoaXNGdW5jKSB7XG5cdFx0XHRcdFx0XHRpZihtMmQyLnVwZGF0ZXMpIHtcblx0XHRcdFx0XHRcdCAgICAvLyBCeSB1c2luZyBhZGRFdmVudExpc3RlbmVyIHdlIGNhbiBhc3NpZ24gbXVsdGlwbGUgbGlzdGVuZXJzIHRvIGEgc2luZ2xlIG5vZGUgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdFx0XHRpZiAoa2V5ID09PSBcIm9udXBkYXRlXCIpIHtcblx0XHRcdFx0XHRcdFx0XHQkbm9kZS5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlXCIsIHZhbHVlLCB0cnVlKTsgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQkbm9kZVtrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKGtleSAhPT0gXCJ0ZW1wbGF0ZVwiICYmIChrZXkgIT09IFwid2FyblwiICYmIHZhbHVlICE9PSBmYWxzZSkpIHsgLy9XZSBoYW5kbGUgdGVtcGxhdGVzIGluc2lkZSBpdGVtc1xuXHRcdFx0XHRcdFx0aWYob2JqZWN0Lndhcm4gPT09IHVuZGVmaW5lZCB8fCBvYmplY3Qud2FybiAhPT0gZmFsc2UpIHsgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiTm90IHN1cmUgd2hhdCB5b3Ugd2FudCB0byBkbyB3aXRoIGtleTogXCIgKyBrZXkgKyBcIiB1bmRlciBlbGVtZW50OiBcIik7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJBbmQgb2JqZWN0OlwiKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2cob2JqZWN0KTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJNb3N0IGxpa2VseSB0aGUgZWxlbWVudCdzIHByb3BlcnR5IG9yIGNoaWxkIG5vIGxvbmdlciBleGlzdHMgb3IgdGhlIHZhbHVlXCIgK1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIiBwYXNzZWQgdG8gaXQgaXMgaW5jb3JyZWN0LlwiKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJZb3UgY2FuIHNldCAnd2FybiA6IGZhbHNlJyBwcm9wZXJ0eSB0byB0aGUgZWxlbWVudCB0byBkaXNtaXNzIHRoaXMgbWVzc2FnZS5cIik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQkbm9kZVtrZXldID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Ly8gRGlzcGF0Y2ggb25sb2FkIGV2ZW50IChpZiBpdHMgbm90IG5hdGl2ZSk6IC8vVE9ETzogRG9jdW1lbnRcblx0XHRpZigkbm9kZS5vbmxvYWQpIHtcblx0XHQgICAgY29uc3QgbmF0aXZlID0gW1wiQk9EWVwiLFwiRlJBTUVcIixcIklGUkFNRVwiLFwiSU1HXCIsXCJMSU5LXCIsXCJTQ1JJUFRcIixcIlNUWUxFXCJdLmluZGV4T2YoJG5vZGUudGFnTmFtZSkgPj0gMDtcblx0XHQgICAgY29uc3QgaW5wdXRJbWFnZSA9ICRub2RlLnRhZ05hbWUgPT09IFwiSU5QVVRcIiAmJiAkbm9kZS50eXBlID09PSBcImltYWdlXCI7XG5cdFx0ICAgIGlmKCEgKG5hdGl2ZSB8fCBpbnB1dEltYWdlKSkge1xuXHRcdCAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBhZGQgdGhlIGV2ZW50IGFzIGl0IGV4aXN0cyBuYXRpdmVseSBhbmQgaXQgd2FzIGFzc2lnbmVkIGR1cmluZzogJG5vZGUub25sb2FkID0gLi4uO1xuICAgICAgICAgICAgICAgICRub2RlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdsb2FkJykpO1xuXHRcdCAgICB9XG5cdFx0fVxuXHRcdHJldHVybiAkbm9kZTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogSWRlbnRpZnkgaWYgdmFsdWUgaXMgYW4gdXBkYXRlIGxpbmsgKGlubGluZSBvbnVwZGF0ZSlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzVXBkYXRlTGluayh2YWx1ZSkge1xuICAgICAgICBsZXQgaXNMaW5rID0gZmFsc2VcbiAgICAgICAgaWYobTJkMi51dGlscy5pc0FycmF5KHZhbHVlKSAmJiAodmFsdWUubGVuZ3RoID09PSAyIHx8IHZhbHVlLmxlbmd0aCA9PT0gMykpIHtcbiAgICAgICAgICAgIGNvbnN0IHR3b0FyZ3MgPSB2YWx1ZS5sZW5ndGggPT09IDI7XG4gICAgICAgICAgICAvLyBGaXJzdCBlbGVtZW50IGluIGFycmF5IG11c3QgYmUgTm9kZSB8fCBEb21TdHJpbmdNYXAgKGRhdGFzZXQpIHx8IENTU1N0eWxlRGVjbGFyYXRpb24gKHN0eWxlKVxuICAgICAgICAgICAgY29uc3QgYWNjZXB0ZWRUeXBlID0gbTJkMi51dGlscy5pc05vZGUodmFsdWVbMF0pIHx8XG4gICAgICAgICAgICAgICAgdmFsdWVbMF0gaW5zdGFuY2VvZiBET01TdHJpbmdNYXAgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZVswXSBpbnN0YW5jZW9mIENTU1N0eWxlRGVjbGFyYXRpb25cbiAgICAgICAgICAgIC8vIFNlY29uZCBtdXN0IGJlICdzdHJpbmcnIGFuZCBUaGlyZCBjYW4gYmUgYSAnZnVuY3Rpb24nXG4gICAgICAgICAgICBjb25zdCBvdGhlclR5cGVzID0gdHdvQXJncyA/IG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWVbMV0pIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbTJkMi51dGlscy5pc1N0cmluZyh2YWx1ZVsxXSkgJiYgbTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlWzJdKTtcbiAgICAgICAgICAgIC8vIElmIG9ubHkgdHdvIGFyZ3MgYXJlIGluIGFycmF5LCBhZGQgYW4gZW1wdHkgZnVuY3Rpb246XG4gICAgICAgICAgICBpc0xpbmsgPSBhY2NlcHRlZFR5cGUgJiYgb3RoZXJUeXBlcztcbiAgICAgICAgICAgIGlmKGlzTGluayAmJiB0d29BcmdzKSB7IHZhbHVlLnB1c2godiA9PiB7IHJldHVybiB2OyB9KSB9IC8vVE9ETzogRG9jdW1lbnQgZnVuY3Rpb25cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNMaW5rXG4gICAgfVxuXG4gICAgLyoqXG5cdCAqIENvbnZlcnQgcGxhaW4gdmFsdWUgaW50byBvYmplY3QgaWYgbmVlZGVkXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnQsIE5vZGV9ICRub2RlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG4gICAgcGxhaW5Ub09iamVjdCgkbm9kZSwgdmFsdWUpIHtcblx0XHRpZighbTJkMi51dGlscy5pc1BsYWluT2JqZWN0KHZhbHVlKSAmJiEgbTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlKSAmJiEgbTJkMi51dGlscy5pc0VsZW1lbnQodmFsdWUpKSB7XG5cdFx0XHQvLyBXaGVuIHNldHRpbmcgdmFsdWVzIHRvIHRoZSBub2RlIChzaW1wbGlmaWVkIHZlcnNpb24pOlxuXHRcdFx0aWYobTJkMi51dGlscy5pc0h0bWwodmFsdWUpKSB7XG5cdFx0XHRcdHZhbHVlID0geyBodG1sIDogdmFsdWUgfTtcblx0XHQgICAgfSBlbHNlIGlmKHRoaXMuaXNVcGRhdGVMaW5rKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9iaiAgPSB2YWx1ZVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdmFsdWVbMV07XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSB2YWx1ZVsyXTtcblx0XHQgICAgICAgIGxldCB0bXBWYWwgPSB0aGlzLnBsYWluVG9PYmplY3QoJG5vZGUsIGNhbGxiYWNrKG9ialtwcm9wXSkpO1xuXHRcdCAgICAgICAgaWYobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KHRtcFZhbCkpIHtcblx0XHQgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHt9O1xuXHRcdCAgICAgICAgICAgIE9iamVjdC5rZXlzKHRtcFZhbCkuZm9yRWFjaChrID0+IHtcblx0XHQgICAgICAgICAgICAgICAgbmV3VmFsdWVba10gPSB2YWx1ZTtcblx0XHQgICAgICAgICAgICB9KTtcblx0XHQgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xuXHRcdCAgICAgICAgfVxuXHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdCAgICB2YWx1ZSA9IHsgaXRlbXMgOiB2YWx1ZSB9O1xuXHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaGFzQXR0ck9yUHJvcCgkbm9kZSwgXCJ2YWx1ZVwiKSkge1xuXHRcdFx0XHQvLyBJZiB0aGUgcGFyZW50IGlzIDxzZWxlY3Q+IHNldCBhbHNvIGFzIHRleHQgdG8gaXRlbTpcblx0XHRcdFx0aWYoJG5vZGUudGFnTmFtZSA9PT0gXCJTRUxFQ1RcIikge1xuXHRcdFx0XHQgICAgdmFsdWUgPSB7XG5cdFx0XHRcdCAgICAgICAgdmFsdWUgOiB2YWx1ZSxcblx0XHRcdFx0ICAgICAgICB0ZXh0ICA6IHZhbHVlXG5cdFx0XHRcdCAgICB9O1xuXHRcdFx0XHR9IGVsc2UgaWYoJG5vZGUudGFnTmFtZSA9PT0gXCJCVVRUT05cIikge1xuXHRcdFx0XHQgICAgdmFsdWUgPSB7IHRleHQgOiB2YWx1ZSB9O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQgICAgdmFsdWUgPSB7IHZhbHVlIDogdmFsdWUgfTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWUpICYmICRub2RlLnRhZ05hbWUgPT09IFwiSU1HXCIpIHtcblx0XHRcdCAgICB2YWx1ZSA9IHsgc3JjIDogdmFsdWUgfTtcblx0XHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmlzU3RyaW5nKHZhbHVlKSB8fCBtMmQyLnV0aWxzLmlzTnVtZXJpYyh2YWx1ZSkpIHtcblx0XHRcdFx0dmFsdWUgPSB7IHRleHQgOiB2YWx1ZSB9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG4gICAgfVxuXHQvKipcblx0ICogUmVuZGVyIGFuZCBMaW5rIGEgbm9kZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkcm9vdFxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdHJlbmRlckFuZExpbmsoJHJvb3QsICRub2RlLCBrZXksIHZhbHVlKSB7XG5cdFx0Y29uc3QgJGNoaWxkID0gdGhpcy5yZW5kZXIoJG5vZGUsIGtleSwgdmFsdWUpO1xuXHRcdHRoaXMubGlua05vZGUoJHJvb3QsIGtleSwgJGNoaWxkKTtcblx0fVxuXHQvKipcblx0ICogUmVuZGVyIHNvbWUgdmFsdWUgaW4gYSBub2RlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJucyB7UHJveHksIEhUTUxFbGVtZW50fVxuXHQgKi9cblx0cmVuZGVyKCRub2RlLCBrZXksIHZhbHVlKSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMucGxhaW5Ub09iamVjdCgkbm9kZSwgdmFsdWUpO1xuXHRcdHJldHVybiB0aGlzLmRvRG9tKCRub2RlLCB2YWx1ZSk7IC8vIFJlY3Vyc2l2ZSBmb3IgZWFjaCBlbGVtZW50XG5cdH1cblxuXHQvKipcblx0ICogTGlua3MgYSBwcm9wZXJ0eSB0byBhIGNoaWxkIG5vZGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkY2hpbGRcblx0ICovXG5cdGxpbmtOb2RlKCRub2RlLCBrZXksICRjaGlsZCkge1xuXHRcdGlmKCRub2RlW2tleV0gPT09ICRjaGlsZCkge1xuXHRcdFx0Y29uc3QgJHByb3h5ID0gdGhpcy5wcm94eSgkY2hpbGQpO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0JG5vZGVba2V5XSA9ICRwcm94eTtcblx0XHRcdH0gY2F0Y2goaWdub3JlKSB7XG5cdFx0XHRcdC8vTk9URTogYWx0aG91Z2ggaXQgZmFpbHMgd2hlbiB1c2luZyBmb3JtcywgZm9ybSBpcyBhIHByb3h5IHNvIGl0IHN0aWxsIHdvcmtzLlxuXHRcdFx0fVxuXHRcdFx0JG5vZGVbXCIkXCIgKyBrZXldID0gJHByb3h5O1xuXHRcdH0gZWxzZSBpZihtMmQyLnV0aWxzLmhhc0F0dHJPclByb3AoJG5vZGUsIGtleSkpIHsgLy8gT25seSBpZiBpdHMgbm90IGFuIGF0dHJpYnV0ZSBvciBwcm9wZXJ0eSwgd2UgXCJsaW5rXCIgaXQuXG5cdFx0XHQkbm9kZVtcIiRcIiArIGtleV0gPSAkY2hpbGQ7IC8vUmVwbGFjZSBuYW1lIHdpdGggXCIkXCIgKyBuYW1lXG5cdFx0XHRjb25zb2xlLmxvZyhcIlByb3BlcnR5IDogXCIgKyBrZXkgKyBcIiBleGlzdGVkIGluIG5vZGU6IFwiICsgJG5vZGUudGFnTmFtZSArXG5cdFx0XHRcIi4gVXNpbmcgJFwiICsga2V5ICsgXCIgaW5zdGVhZCBmb3Igbm9kZTogXCIgKyAkY2hpbGQudGFnTmFtZSArIFwiLlwiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbm9kZVtrZXldID0gdGhpcy5wcm94eSgkY2hpbGQpO1xuXHRcdH1cblx0fVxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGRvbSBlbGVtZW50IGluc2lkZSAkbm9kZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG5cdCAqL1xuXHRhcHBlbmRFbGVtZW50ICgkbm9kZSwgdGFnTmFtZSkge1xuXHRcdGNvbnN0ICRuZXdFbGVtID0gbTJkMi51dGlscy5uZXdFbGVtZW50KHRhZ05hbWUpO1xuXHRcdCRub2RlLmFwcGVuZCgkbmV3RWxlbSk7XG5cdFx0cmV0dXJuICRuZXdFbGVtO1xuXHR9XG5cbiAgICAvKipcblx0ICogR2V0IGFuIGl0ZW0gdG8gYmUgYWRkZWRcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudHxudWxsfSAkbm9kZVxuXHQgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IGluZGV4XG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICR0ZW1wbGF0ZVxuXHQgKi9cblx0Z2V0SXRlbSgkbm9kZSwgaW5kZXgsIG9iaiwgJHRlbXBsYXRlKSB7XG5cdCAgICBpZighJHRlbXBsYXRlKSB7XG5cdFx0ICAgICR0ZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGUoJG5vZGUpO1xuXHRcdH1cbiAgICAgICAgY29uc3QgJG5ld0l0ZW0gPSAkdGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpO1xuXHQgICAgLy8gQ29weSB0ZW1wbGF0ZXMgdG8gbmV3IGl0ZW06XG5cdCAgICB0aGlzLmFkZFRlbXBsYXRlc1RvSXRlbSgkdGVtcGxhdGUsICRuZXdJdGVtKTtcbiAgICAgICAgJG5ld0l0ZW0uZGF0YXNldC5pZCA9IGluZGV4O1xuICAgICAgICAvLyBBZGQgXCJzZWxlY3RlZFwiIHByb3BlcnR5XG4gICAgICAgIHRoaXMuc2V0VW5pcXVlQXR0cmliKCRuZXdJdGVtLCBcInNlbGVjdGVkXCIpOyAvL1RPRE86IERvY3VtZW50XG4gICAgICAgIC8vIFNldCB2YWx1ZXMgYW5kIGxpbmtzXG5cdFx0bGV0ICRuZXdOb2RlID0gdGhpcy5kb0RvbSgkbmV3SXRlbSwgb2JqKTtcblx0XHQvLyBQbGFjZSBFdmVudHM6XG5cdFx0cmV0dXJuIHRoaXMuZ2V0SXRlbVdpdGhFdmVudHMoJG5vZGUsICRuZXdOb2RlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWFzc2lnbiB0ZW1wbGF0ZXNcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudCwgTm9kZX0gJHRlbXBsYXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnQsIE5vZGV9ICRuZXdOb2RlXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxQcm94eX1cblx0IC8vIFRPRE86IHRoaXMgZG9lcyBub3Qgc3VwcG9ydCBkZWVwIGxvY2F0aW9uIG9mIHRlbXBsYXRlc1xuXHQgKi9cblx0YWRkVGVtcGxhdGVzVG9JdGVtKCR0ZW1wbGF0ZSwgJG5ld05vZGUpIHtcblx0ICAgIFtcIl90ZW1wbGF0ZVwiLFwiX190ZW1wbGF0ZVwiXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICBpZigkdGVtcGxhdGVba2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJG5ld05vZGVba2V5XSA9ICR0ZW1wbGF0ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgTm9kZSB3aXRoIGV2ZW50c1xuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSAkbm9kZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSAkbmV3Tm9kZVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR8UHJveHl9XG5cdCAvL0ZJWE1FOiBJIHRoaW5rIGB0aGlzLmRvRG9tYCBjb3VsZCBiZSByZW1vdmVkIGZyb20gaGVyZSBhbmQgb25seSBcImxpbmtcIiBldmVudHNcblx0ICovXG5cdGdldEl0ZW1XaXRoRXZlbnRzKCRub2RlLCAkbmV3Tm9kZSkge1xuXHRcdGlmKCRub2RlLl9fdGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc3Qgc2NhbiA9IChvYmplY3QsIHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRyZXN1bHQgPSByZXN1bHQgfHwge307XG5cdFx0XHRcdE9iamVjdC5rZXlzKG9iamVjdCkuZm9yRWFjaChrZXk9PiB7XG5cdFx0XHRcdFx0aWYgKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdChvYmplY3Rba2V5XSkpIHtcblx0XHRcdFx0XHRcdHJlc3VsdFtrZXldID0gc2NhbihvYmplY3Rba2V5XSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNGdW5jdGlvbihvYmplY3Rba2V5XSkpIHtcblx0XHRcdFx0XHRcdHJlc3VsdFtrZXldID0gb2JqZWN0W2tleV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHRcdH1cblx0XHRcdGxldCB0cmVlID0gc2Nhbigkbm9kZS5fX3RlbXBsYXRlKTtcblx0XHRcdGlmKCFtMmQyLnV0aWxzLmlzRW1wdHkodHJlZSkpIHtcblx0XHRcdFx0dHJlZSA9IHRyZWVbT2JqZWN0LmtleXModHJlZSlbMF1dO1xuXHRcdFx0XHQkbmV3Tm9kZSA9IHRoaXMuZG9Eb20oJG5ld05vZGUsIHRyZWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gJG5ld05vZGU7XG5cdH1cblxuXHQvKipcblx0ICogUHJvY2VzcyBpdGVtc1xuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXNcblx0ICogQHBhcmFtIHtPYmplY3R9IHRlbXBsYXRlXG5cdCAqL1xuXHRkb0l0ZW1zICgkbm9kZSwgdmFsdWVzLCB0ZW1wbGF0ZSkge1xuXHQgICAgLy8gQ3JlYXRlIHRoZSBzdHJ1Y3R1cmUgZm9yIHRoZSBpdGVtOlxuXHRcdGNvbnN0ICR0ZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGUoJG5vZGUsIHRlbXBsYXRlKTtcblx0XHRpZigkdGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIlRlbXBsYXRlIG5vdCBmb3VuZC4gUHJvYmFibHkgYW4gYXJyYXkgaXMgYmVpbmcgdXNlZCB3aGVyZSBpdCBpcyBub3QgZXhwZWN0ZWQuIE5vZGU6XCIpO1xuXHRcdFx0Y29uc29sZS5sb2coJG5vZGUpO1xuXHRcdFx0Y29uc29sZS5sb2coXCJWYWx1ZSAobWlzdGFrZW4/KTpcIilcblx0XHRcdGNvbnNvbGUubG9nKHZhbHVlcyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdC8vIEZpbGwgdGhlIHRlbXBsYXRlIHdpdGggZGF0YTpcblx0XHRsZXQgaSA9IDA7XG5cdFx0dmFsdWVzLmZvckVhY2godmFsID0+IHtcblx0XHQgICAgdmFsID0gdGhpcy5wbGFpblRvT2JqZWN0KCRub2RlLCB2YWwpO1xuXHRcdCAgICBjb25zdCAkbmV3SXRlbSA9IHRoaXMuZ2V0SXRlbSgkbm9kZSwgaSsrLCB2YWwsICR0ZW1wbGF0ZSk7XG5cdFx0ICAgIGlmKCRuZXdJdGVtKSB7XG5cdFx0XHQgICAgJG5vZGUuYXBwZW5kKCRuZXdJdGVtKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyBDbGVhbnVwXG5cdFx0Y29uc3QgJHRlbXAgPSAkbm9kZS5maW5kKFwidGVtcGxhdGVcIik7XG5cdFx0aWYoJHRlbXApIHsgJG5vZGUucmVtb3ZlQ2hpbGQoJHRlbXApOyB9XG5cdFx0Ly8gU2V0IFwiaXRlbXNcIiBsaW5rOlxuXHRcdCRub2RlLml0ZW1zID0gJG5vZGUuY2hpbGRyZW47XG5cdFx0dGhpcy5leHRlbmRJdGVtcygkbm9kZSk7XG5cdH1cblx0LyoqIFJldHVybnMgYW4gSFRNTEVsZW1lbnQgd2l0aCB0aGUgc3RydWN0dXJlIHdpdGhvdXQgZXZlbnRzXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7T2JqZWN0LCBzdHJpbmd9IFt0ZW1wbGF0ZV1cblx0ICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuXHQgKi9cblx0Z2V0VGVtcGxhdGUgKCRub2RlLCB0ZW1wbGF0ZSkge1xuXHRcdC8vIElmIHdlIGFscmVhZHkgaGF2ZSB0aGUgdGVtcGxhdGUsIHJldHVybiBpdDpcblx0XHRpZigkbm9kZS5fdGVtcGxhdGUgIT09IHVuZGVmaW5lZCAmJiAkbm9kZS5fdGVtcGxhdGUgIT09IFwiXCIpIHtcblx0XHRcdHJldHVybiAkbm9kZS5fdGVtcGxhdGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxldCAkdGVtcGxhdGU7XG5cdFx0XHRjb25zdCAkaHRtbFRlbXBsYXRlID0gJG5vZGUucXVlcnlTZWxlY3RvcihcInRlbXBsYXRlXCIpOyAvLyBsb29rIGludG8gSFRNTCB1bmRlciBub2RlXG5cdFx0XHRpZigkaHRtbFRlbXBsYXRlKSB7XG5cdFx0XHRcdCR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMuaHRtbEVsZW1lbnQoJGh0bWxUZW1wbGF0ZS5pbm5lckhUTUwudHJpbSgpKTtcblx0XHRcdH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICgkbm9kZS50YWdOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJTRUxFQ1RcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkRBVEFMSVNUXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlVMXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJPTFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk5BVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiRExcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcImRkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gT2JqZWN0LmtleXModGVtcGxhdGUpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjaGlsZHJlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRlbXBsYXRlLnRhZ05hbWUgIT09IHVuZGVmaW5lZCkgeyAvL1RPRE86IGRvY3VtZW50IChvcHRpb25hbCB0b3AgY2hpbGQgd2hlbiB1c2luZyB0YWdOYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3cmFwID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFt0ZW1wbGF0ZS50YWdOYW1lXSA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gd3JhcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUZW1wbGF0ZSBoYXMgbW9yZSB0aGFuIG9uZSB0b3AgZWxlbWVudHMuIFVzaW5nIHRoZSBmaXJzdCBvbmUuIEluOiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm9kZTogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyh0ZW1wbGF0ZSlbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHRlbXBsYXRlW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaXNWYWxpZEVsZW1lbnQoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZih2YWwudGFnTmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQodmFsLnRhZ05hbWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGVtcGxhdGVbdmFsLnRhZ05hbWVdID0gdmFsO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGVsZXRlKHRlbXBsYXRlW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRlbXBsYXRlIGRlZmluZWQgYW4gZWxlbWVudCB3aGljaCBjYW4gbm90IGJlIGlkZW50aWZpZWQ6IFtcIiArIGtleSArIFwiXSwgdXNpbmcgPHNwYW4+IGluOlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm9kZTogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUZW1wbGF0ZSBoYXMgbm8gZGVmaW5pdGlvbiwgYW5kIGl0IGNhbiBub3QgYmUgZ3Vlc3NlZC4gVXNpbmcgPHNwYW4+LiBUZW1wbGF0ZTogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm9kZTogXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBub3QgdGVtcGxhdGUgaXMgZm91bmQsIHVzZSBodG1sIGFzIG9mIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkbm9kZS5jaGlsZEVsZW1lbnRDb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5odG1sRWxlbWVudCgkbm9kZS5pbm5lckhUTUwudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cdFx0XHRpZiAodGVtcGxhdGUpIHtcblx0XHRcdFx0aWYgKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdCh0ZW1wbGF0ZSkpIHtcblx0XHRcdFx0ICAgIGNvbnN0ICR3cmFwID0gbTJkMi51dGlscy5uZXdFbXB0eU5vZGUoKTtcblx0XHRcdFx0ICAgICR3cmFwLmFwcGVuZCgkdGVtcGxhdGUpO1xuXHRcdFx0XHRcdGNvbnN0ICRmcmFnbWVudCA9IHRoaXMuZG9Eb20oJHdyYXAsIHRlbXBsYXRlKTtcblx0XHRcdFx0XHQkdGVtcGxhdGUgPSAkZnJhZ21lbnQuY2hpbGRyZW5bMF07XG5cdFx0XHRcdFx0bTJkMi51dGlscy5kZWZpbmVQcm9wKCRub2RlLCBcIl9fdGVtcGxhdGVcIiwgdGVtcGxhdGUpOyAvLyBUaGlzIGlzIHRoZSBvcmlnaW5hbCB0ZW1wbGF0ZSB3aXRoIGV2ZW50c1xuXHRcdFx0XHR9IGVsc2UgaWYgKG0yZDIudXRpbHMuaXNIdG1sKHRlbXBsYXRlKSkge1xuXHRcdFx0XHRcdCR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMuaHRtbEVsZW1lbnQodGVtcGxhdGUpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG0yZDIudXRpbHMuaXNTZWxlY3RvcklEKHRlbXBsYXRlKSkgeyAvL09ubHkgSURzIGFyZSBhbGxvd2VkIC8vVE9ETyBkb2N1bWVudFxuXHRcdFx0XHRcdCR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMuaHRtbEVsZW1lbnQoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZSkuaW5uZXJIVE1MKTtcblx0XHRcdFx0fSBlbHNlIHsgLy9XaGVuIGl0cyBqdXN0IGEgdGFnIG5hbWVcblx0XHRcdFx0XHQkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQodGVtcGxhdGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZigkdGVtcGxhdGUuY2hpbGRyZW5FbGVtZW50Q291bnQgPiAxKSB7XG5cdFx0XHQgICAgY29uc29sZS5sb2coXCJUZW1wbGF0ZXMgb25seSBzdXBwb3J0cyBhIHNpbmdsZSBjaGlsZC4gTXVsdGlwbGUgY2hpbGRyZW4gd2VyZSBkZXRlY3RlZCwgd3JhcHBpbmcgdGhlbSB3aXRoIDxzcGFuPi4gVGVtcGxhdGU6XCIpO1xuXHRcdFx0ICAgIGNvbnNvbGUubG9nKCR0ZW1wbGF0ZSk7XG5cdFx0XHQgICAgY29uc3QgJHNwYW4gPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJzcGFuXCIpO1xuXHRcdFx0ICAgICRzcGFuLmFwcGVuZCgkdGVtcGxhdGUpO1xuXHRcdFx0ICAgICR0ZW1wbGF0ZSA9ICRzcGFuO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCR0ZW1wbGF0ZSkge1xuXHRcdFx0XHRtMmQyLnV0aWxzLmRlZmluZVByb3AoJG5vZGUsIFwiX3RlbXBsYXRlXCIsICR0ZW1wbGF0ZSk7IC8vIFRoaXMgaXMgdGhlIERPTVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuICR0ZW1wbGF0ZTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSXQgd2lsbCBzZXQgYSB1bmlxdWUgYXR0cmlidXRlIGFtb25nIGEgZ3JvdXAgb2Ygbm9kZXMgKGdyb3VwZWQgYnkgcGFyZW50KVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqL1xuXHRzZXRVbmlxdWVBdHRyaWIoJG5vZGUsIGtleSkge1xuICAgICAgICBpZighICRub2RlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgkbm9kZSwga2V5LCB7XG4gICAgICAgICAgICAgICAgZ2V0IDogZnVuY3Rpb24oKSAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShrZXkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0IDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZTZWwgPSB0aGlzLnBhcmVudE5vZGUgPyB0aGlzLnBhcmVudE5vZGUuZmluZChcIltcIitrZXkrXCJdXCIpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYocHJldlNlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdG0yZDIudXRpbHMuc2V0QXR0cih0aGlzLCBrZXksIHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblx0fVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIFsgTm9kZSwgc3RyaW5nIF0gdmFsdWVzIChpbmxpbmUgb251cGRhdGUpXG4gICAgICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICovXG4gICAgdXBkYXRlVmFsdWUoJG5vZGUsIGtleSwgdmFsdWUpIHtcblx0XHQvLyBURVNUOiAwNlxuICAgICAgICBpZih0aGlzLmlzVXBkYXRlTGluayh2YWx1ZSkpIHtcblx0XHRcdGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGNvbnN0IG9iaiAgPSB2YWx1ZVswXTtcbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSB2YWx1ZVsxXTtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdmFsdWVbMl07XG5cdFx0XHR2YWx1ZSA9IG9ialtwcm9wXTtcblx0XHRcdGlmKG9iaiBpbnN0YW5jZW9mIENTU1N0eWxlRGVjbGFyYXRpb24gJiYgdGhpcy5fc3RvcmVkLnN0eWxlcy5pbmNsdWRlcyhvYmopKSB7XG5cdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuX3N0b3JlZC5zdHlsZU5vZGVzW3RoaXMuX3N0b3JlZC5zdHlsZXMuaW5kZXhPZihvYmopXTtcblx0XHRcdFx0aWYobTJkMi51cGRhdGVzKSB7XG5cdFx0XHRcdFx0cGFyZW50Lm9udXBkYXRlID0gZnVuY3Rpb24gKGV2KSB7XG5cdFx0XHRcdFx0XHRpZiAoZXYuZGV0YWlsICYmIGV2LmRldGFpbC5wcm9wZXJ0eSA9PT0gXCJzdHlsZVwiICYmIGV2LmRldGFpbC5uZXdWYWx1ZS5zdGFydHNXaXRoKHByb3AgKyBcIjpcIikpIHtcblx0XHRcdFx0XHRcdFx0X3RoaXMuc2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCBjYWxsYmFjayh0aGlzLnN0eWxlW3Byb3BdKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYob2JqIGluc3RhbmNlb2YgRE9NU3RyaW5nTWFwICYmIHRoaXMuX3N0b3JlZC5kYXRhc2V0cy5pbmNsdWRlcyhvYmopKSB7XG5cdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuX3N0b3JlZC5kYXRhc2V0Tm9kZXNbdGhpcy5fc3RvcmVkLmRhdGFzZXRzLmluZGV4T2Yob2JqKV07XG5cdFx0XHRcdGlmKG0yZDIudXBkYXRlcykge1xuXHRcdFx0XHRcdHBhcmVudC5vbnVwZGF0ZSA9IChldikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGV2LmRldGFpbCAmJiBldi5kZXRhaWwucHJvcGVydHkgPT09IFwiZGF0YS1cIiArIHByb3ApIHtcblx0XHRcdFx0XHRcdFx0X3RoaXMuc2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCBjYWxsYmFjayhldi5kZXRhaWwubmV3VmFsdWUpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmKG0yZDIudXBkYXRlcykge1xuXHRcdFx0XHRcdG9iai5vbnVwZGF0ZSA9IChldikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGV2LmRldGFpbCAmJiBldi5kZXRhaWwucHJvcGVydHkgPT09IHByb3ApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCFtMmQyLnV0aWxzLmlzT2JqZWN0KCRub2RlW2tleV0pKSB7XG5cdFx0XHRcdFx0XHRcdFx0X3RoaXMuc2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCBjYWxsYmFjayhldi5kZXRhaWwubmV3VmFsdWUpKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogUGxhY2UgYSB2YWx1ZSBlaXRoZXIgaW4gYSBwcm9wZXJ0eSBvciBpbiBhIG5vZGUgKHNob3J0KVxuXHQgKiBAcGFyYW0gJG5vZGUge05vZGV9XG5cdCAqIEBwYXJhbSBrZXkge3N0cmluZ31cblx0ICogQHBhcmFtIHZhbHVlIHsqfVxuXHQgKi9cblx0c2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCB2YWx1ZSkge1xuXHRcdGlmKG0yZDIudXRpbHMuaXNOb2RlKCRub2RlW2tleV0pKSB7XG5cdFx0XHRpZihtMmQyLnNob3J0KSB7XG5cdFx0XHRcdGNvbnN0IG8gPSB0aGlzLnBsYWluVG9PYmplY3QoJG5vZGVba2V5XSwgdmFsdWUpO1xuXHRcdFx0XHRjb25zdCBrID0gbTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG8pICYmIE9iamVjdC5rZXlzKG8pLmxlbmd0aCA+PSAxID8gT2JqZWN0LmtleXMobylbMF0gOiBudWxsO1xuXHRcdFx0XHRpZiAoaykge1xuXHRcdFx0XHRcdCRub2RlW2tleV1ba10gPSB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTaG9ydCBpcyBkaXNhYmxlZC4gVHJ5aW5nIHRvIHNldCBhIHZhbHVlIChcIit2YWx1ZStcIikgaW4gYSBub2RlOlwiKVxuXHRcdFx0XHRjb25zb2xlLmxvZygkbm9kZVtrZXldKTtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJFaXRoZXIgdHVybiBvbiAnc2hvcnQnIGZ1bmN0aW9uYWxpdHksIG9yIGJlIHN1cmUgeW91IHNwZWNpZnkgdGhlIHByb3BlcnR5LCBsaWtlOiAnbm9kZS50ZXh0J1wiKVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkbm9kZVtrZXldID0gdmFsdWVcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUGxhY2UgYSB2YWx1ZSBlaXRoZXIgaW4gYSBwcm9wZXJ0eSBvciBpbiBhIG5vZGUgKHNob3J0KVxuXHQgKiBAcGFyYW0gJG5vZGUge05vZGV9XG5cdCAqIEBwYXJhbSBrZXkge3N0cmluZ31cblx0ICogQHBhcmFtIHNhbXBsZSB7Kn0gU2FtcGxlIHZhbHVlICh0byBhdXRvbWF0aWNhbGx5IGd1ZXNzIHByb3BlcnR5KVxuXHQgKiBAcmV0dXJucyB7Kn0gY3VycmVudCB2YWx1ZVxuXHQgKi9cblx0Z2V0U2hvcnRWYWx1ZSgkbm9kZSwga2V5LCBzYW1wbGUpIHtcblx0XHRsZXQgdmFsdWUgPSBudWxsO1xuXHRcdGlmKG0yZDIudXRpbHMuaXNOb2RlKCRub2RlW2tleV0pKSB7XG5cdFx0XHRpZihtMmQyLnNob3J0KSB7XG5cdFx0XHRcdGNvbnN0IG8gPSB0aGlzLnBsYWluVG9PYmplY3QoJG5vZGVba2V5XSwgc2FtcGxlIHx8IFwiXCIpO1xuXHRcdFx0XHRjb25zdCBrID0gbTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG8pICYmIE9iamVjdC5rZXlzKG8pLmxlbmd0aCA+PSAxID8gT2JqZWN0LmtleXMobylbMF0gOiBudWxsO1xuXHRcdFx0XHRpZiAoaykge1xuXHRcdFx0XHRcdHZhbHVlID0gJG5vZGVba2V5XVtrXTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJTaG9ydCBpcyBkaXNhYmxlZC4gVHJ5aW5nIHRvIGdldCBhIHZhbHVlIGZyb20gbm9kZTpcIilcblx0XHRcdFx0Y29uc29sZS5sb2coJG5vZGVba2V5XSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRWl0aGVyIHR1cm4gb24gJ3Nob3J0JyBmdW5jdGlvbmFsaXR5LCBvciBiZSBzdXJlIHlvdSBzcGVjaWZ5IHRoZSBwcm9wZXJ0eSwgbGlrZTogJ25vZGUudGV4dCdcIilcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFsdWUgPSAkbm9kZVtrZXldO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogQmFzaWMgUHJveHkgdG8gZW5hYmxlIGFzc2lnbiB2YWx1ZXMgdG8gZWxlbWVudHNcblx0ICogZm9yIGV4YW1wbGU6IGRpdi5hID0gXCJDbGljayBtZVwiIChpbnN0ZWFkIG9mIHVzaW5nOiBkaXYuYS50ZXh0KVxuXHQgKiBOT1RFOiBmb3IgcmVhZGluZywgXCJkaXYuYVwiIHdpbGwgcmV0dXJuIGEgTm9kZSBhbmQgbm90IHRoZSB2YWx1ZS5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZV0gRm9yY2UgdG8gdXBkYXRlXG5cdCAqIEByZXR1cm5zIHtQcm94eSwgT2JqZWN0fVxuXHQgKi9cblx0cHJveHkgKG9iaiwgZm9yY2UpIHtcblx0ICAgIGlmKCFtMmQyLnNob3J0IHx8IChvYmogPT09IG51bGwgfHwgKG9iai5fcHJveHkgIT09IHVuZGVmaW5lZCAmJiBmb3JjZSA9PT0gdW5kZWZpbmVkKSkpIHtcblx0ICAgICAgICByZXR1cm4gb2JqO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBvYmouX3Byb3h5ID0gb2JqO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IHtcbiAgICAgICAgICAgICAgICBnZXQ6ICh0YXJnZXQsIHByb3BlcnR5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0YXJnZXRbcHJvcGVydHldO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRydWUpIHtcblx0XHRcdFx0XHRcdGNhc2UgdCA9PT0gbnVsbCB8fCB0ID09PSB1bmRlZmluZWQ6IHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBcdC8vIEZ1bmN0aW9ucyBzaG91bGQgYmluZCB0YXJnZXQgYXMgXCJ0aGlzXCJcblx0XHRcdFx0XHRcdGNhc2UgbTJkMi51dGlscy5pc0Z1bmN0aW9uKHQpOiByZXR1cm4gdC5iaW5kKHRhcmdldCk7XG5cdFx0XHRcdFx0XHQvLyBJZiB0aGVyZSB3YXMgYSBmYWlsZWQgYXR0ZW1wdCB0byBzZXQgcHJveHksIHJldHVybiBpdCBvbiByZWFkOlxuXHRcdFx0XHRcdFx0Y2FzZSB0Ll9wcm94eSAmJiB0YXJnZXRbXCIkXCIgKyBwcm9wZXJ0eV0gIT09IHVuZGVmaW5lZDogcmV0dXJuIHRhcmdldFtcIiRcIiArIHByb3BlcnR5XTtcblx0XHRcdFx0XHRcdGNhc2UgdC5fcHJveHkgPT09IHVuZGVmaW5lZCAmJiBtMmQyLnV0aWxzLmlzRWxlbWVudCh0KTogcmV0dXJuIHRoaXMucHJveHkodCk7XG5cdFx0XHRcdFx0XHRkZWZhdWx0OiByZXR1cm4gdDtcblx0XHRcdFx0XHR9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6ICh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb2xkVmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBpZihtMmQyLnV0aWxzLmlzRWxlbWVudCh0YXJnZXRbcHJvcGVydHldKSkge1xuXHRcdFx0XHRcdFx0b2xkVmFsdWUgPSB0aGlzLmdldFNob3J0VmFsdWUodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5zZXRTaG9ydFZhbHVlKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHByb3BlcnR5ID09PSBcIm9udXBkYXRlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgXHRpZihtMmQyLnVwZGF0ZXMpIHtcblx0XHRcdFx0XHRcdFx0aWYgKG0yZDIudXRpbHMuaXNGdW5jdGlvbih2YWx1ZSkpIHtcblx0XHRcdFx0XHRcdCAgICAgICAgLy8gQnkgdXNpbmcgYWRkRXZlbnRMaXN0ZW5lciB3ZSBjYW4gYXNzaWduIG11bHRpcGxlIGxpc3RlbmVycyB0byBhIHNpbmdsZSBub2RlXG5cdFx0XHRcdFx0XHRcdFx0dGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVcIiwgdmFsdWUsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdG9sZFZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTtcblx0XHRcdFx0XHRcdFx0XHR0YXJnZXRbcHJvcGVydHldID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcIlZhbHVlIHBhc3NlZCB0byAnb251cGRhdGUnIGlzIGluY29ycmVjdCwgaW4gbm9kZTpcIik7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2codGFyZ2V0KTtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlZhbHVlOiAobm90IGEgZnVuY3Rpb24pXCIpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgXHRcdGNvbnNvbGUubG9nKFwiVXBkYXRlcyBhcmUgbm90IGF2YWlsYWJsZSB3aGVuIGBtMmQyLnVwZGF0ZXMgPT0gZmFsc2VgOlwiKVxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh0YXJnZXQpO1xuXHRcdFx0XHRcdFx0fVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYocHJvcGVydHkgPT09IFwiaXRlbXNcIikgeyAvL1Jlc2V0IGl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbXMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG9JdGVtcyh0YXJnZXQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy51cGRhdGVWYWx1ZSh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHQvLyBDaGVjayBmb3Igb251cGRhdGUgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCBvYnNlcnZlIGNoYW5nZXMgb24gdmFsdWVzXG5cdFx0XHRcdFx0aWYobTJkMi51cGRhdGVzICYmIHRhcmdldC5vbnVwZGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0ICAgIGlmKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInVwZGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICAgOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA6IHByb3BlcnR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlIDogb2xkVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJveHkob2JqLCBoYW5kbGVyKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogRnVuY3Rpb24gcGFzc2VkIHRvIE11dGF0aW9uT2JzZXJ2ZXJcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtNdXRhdGlvblJlY29yZH0gbXV0YXRpb25zTGlzdFxuXHQgKiBAcGFyYW0ge011dGF0aW9uT2JzZXJ2ZXJ9IG9ic2VydmVyXG5cdCAqL1xuXHRvbk9ic2VydmUobXV0YXRpb25zTGlzdCwgb2JzZXJ2ZXIpIHtcblx0XHRtdXRhdGlvbnNMaXN0LmZvckVhY2gobSA9PiB7XG5cdFx0XHRjb25zdCB0YXJnZXQgPSBtLnRhcmdldDtcblx0XHRcdC8vIFdlIHN0b3JlIHRoZSBldmVudHMgdG8gcmVtb3ZlIGltbWVkaWF0ZWx5IHJlcGVhdGVkIGV2ZW50cy5cblx0XHRcdC8vIEZvcm1zIHdpbGwgbGluayBlbGVtZW50cyB3aGljaCBjYW4gbm90IGJlIHNldCBhcyBwcm94eSBzbyB3ZVxuXHRcdFx0Ly8gYWRkIGEgbGluayBuYW1lZCBgXCIkXCIgKyBrZXlgIGJ1dCB0aGlzIGhhdmUgdGhlIHNpZGUgZWZmZWN0IHRvXG5cdFx0XHQvLyBnZW5lcmF0ZSB0d28gdHJpZ2dlcnMgKG9uZSBmb3IgdGhlIGVsZW1lbnQgYW5kIG9uZSBmb3IgdGhlIFByb3h5KS5cblx0XHRcdGlmKHRoaXMuX3N0b3JlZC5ldmVudHMuaW5kZXhPZihtKSA+PSAwKSB7IHJldHVybiB9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9zdG9yZWQuZXZlbnRzLnB1c2gobSk7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGkgPSB0aGlzLl9zdG9yZWQuZXZlbnRzLmluZGV4T2YobSk7XG5cdFx0XHRcdFx0aWYoaSA+PSAwKSB7IHRoaXMuX3N0b3JlZC5ldmVudHMuc3BsaWNlKGksIDEpOyB9XG5cdFx0XHRcdH0sIG0yZDIuc3RvcmVkRXZlbnRzVGltZW91dCk7IC8vVE9ETzogdGhpcyB3aWxsIHByZXZlbnQgcmVwZWF0ZWQgZXZlbnRzIHRvIGJlIHRyaWdnZXJlZCBpbiBsZXNzIHRoYW4gNTBtcyA6IGRvY3VtZW50XG5cdFx0XHR9XG5cdFx0XHQvLyBDaGVjayBmb3Igb251cGRhdGUgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0aWYodGFyZ2V0Lm9udXBkYXRlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0aWYobS50eXBlID09PSBcImF0dHJpYnV0ZXNcIikge1xuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gbTJkMi51dGlscy5nZXRBdHRyT3JQcm9wKHRhcmdldCwgbS5hdHRyaWJ1dGVOYW1lKTtcblx0XHRcdFx0XHRpZih2YWx1ZSAhPT0gbS5vbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwidXBkYXRlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICAgOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5IDogbS5hdHRyaWJ1dGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA6IG0ub2xkVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0fSBlbHNlIGlmKG0udHlwZSA9PT0gXCJjaGlsZExpc3RcIikgeyAvL1RPRE86IGltcHJvdmUgZm9yIG90aGVyIHR5cGVzXG5cdFx0XHRcdCAgICBjb25zdCAkY2hpbGQgPSBtLmFkZGVkTm9kZXNbMF0gfHwgbS5yZW1vdmVkTm9kZXNbMF07XG5cdFx0XHRcdFx0aWYoJGNoaWxkLm5vZGVOYW1lID09PSBcIiN0ZXh0XCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gbS5hZGRlZE5vZGVzWzBdLnRleHRDb250ZW50O1xuXHRcdFx0XHRcdFx0Y29uc3Qgb2xkVmFsdWUgPSBtLnJlbW92ZWROb2Rlcy5sZW5ndGggPyBtLnJlbW92ZWROb2Rlc1swXS50ZXh0Q29udGVudCA6IG51bGw7XG5cdFx0XHRcdFx0XHRpZih2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJ1cGRhdGVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSAgICAgOiB0eXBlb2YgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlIDogb2xkVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHR9IGVsc2UgaWYodGFyZ2V0Lml0ZW1zICE9PSB1bmRlZmluZWQpIHsgLy9JdGVtcyB1cGRhdGVkXG5cdFx0XHRcdFx0ICAgIC8vVE9ETzogRG9jdW1lbnQ6IGluIGNhc2Ugb2YgaXRlbXMsIFwibmV3ID0gYWRkZWRcIiwgXCJvbGQgPSByZW1vdmVkXCJcblx0XHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gbS5hZGRlZE5vZGVzO1xuXHRcdFx0XHRcdFx0Y29uc3Qgb2xkVmFsdWUgPSBtLnJlbW92ZWROb2Rlcztcblx0XHRcdFx0XHRcdGlmKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInVwZGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlICAgICA6IHR5cGVvZiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA6IFwiaXRlbXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlIDogb2xkVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHQvKipcblx0ICogQWRkIE11dGF0aW9uT2JzZXJ2ZXIgdG8gb2JqZWN0XG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7IEhUTUxFbGVtZW50IH0gJG5vZGVcblx0ICovXG5cdG9ic2VydmUoJG5vZGUpIHtcblx0XHRpZihtMmQyLnVwZGF0ZXMpIHtcblx0XHRcdGNvbnN0IG11dGF0aW9uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLm9uT2JzZXJ2ZS5iaW5kKHRoaXMpKVxuXHRcdFx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRcdFx0YXR0cmlidXRlT2xkVmFsdWU6IHRydWVcblx0XHRcdH1cblx0XHRcdG9wdGlvbnMuc3VidHJlZSA9IHRydWU7XG5cdFx0XHRvcHRpb25zLmNoaWxkTGlzdCA9IHRydWU7XG5cdFx0XHRjb25zdCB0b09ic2VydmUgPSAkbm9kZS5fcHJveHkgfHwgJG5vZGU7XG5cdFx0XHRtdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodG9PYnNlcnZlLCBvcHRpb25zKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2V0IHRoZSByb290IG5vZGUgYXMgcHJveHlcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd8SFRNTEVsZW1lbnR9IHNlbGVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICovXG5cdGdldFByb3h5Tm9kZShzZWxlY3Rvciwgb2JqKSB7XG5cdFx0Y29uc3QgJG5vZGUgPSB0aGlzLmRvRG9tKHNlbGVjdG9yLCBvYmopO1xuXHRcdGlmKCRub2RlKSB7XG5cdFx0ICAgIHRoaXMub2JzZXJ2ZSgkbm9kZSk7XG5cdFx0ICAgIHJldHVybiB0aGlzLnByb3h5KCRub2RlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogRXh0ZW5kcyBcIml0ZW1zXCJcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtOb2RlTGlzdCwgSFRNTENvbGxlY3Rpb259ICRub2RlXG5cdCAqL1xuXHRleHRlbmRJdGVtcygkbm9kZSkge1xuXHRcdC8vIFdlIHRyeSB0byBhZGQgbW9zdCBvZiB0aGUgYXJyYXkgZnVuY3Rpb25zIGludG8gTm9kZUxpc3QgYW5kIEhUTUxDb2xsZWN0aW9uOlxuXHRcdC8vIE5PVEU6IE5vdCBhbGwgd2lsbCB3b3JrIGFzIGV4cGVjdGVkLlxuXHRcdC8vIE5PVEU6IGZ1bmN0aW9uKCkge30gaXMgbm90IHRoZSBzYW1lIGhlcmUgYXMgKCkgPT4ge30gYXMgXCJ0aGlzXCIgaXMgbm90IGFzIGV4cGVjdGVkXG5cdFx0ZnVuY3Rpb24gcmVhdHRhY2goaXRlbXMpIHtcblx0XHRcdGl0ZW1zLmZvckVhY2goaXRtID0+IHtcblx0XHRcdFx0Y29uc3QgcGFyZW50ID0gaXRtLnBhcmVudE5vZGU7XG5cdFx0XHRcdGNvbnN0IGRldGF0Y2hlZEl0ZW0gPSBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRtKTtcdC8vV2UgZGV0YWNoIGZyb20gb3JpZ2luYWwgcGFyZW50XG5cdFx0XHRcdCRub2RlLmFwcGVuZChkZXRhdGNoZWRJdGVtKTsgLy9BdHRhY2ggdG8gJG5vZGUgKHdvcmtzIHdpdGggbm9uLWV4aXN0aW5nIGVsZW1lbnRzKVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGNvbnN0IGl0ZW1zID0gJG5vZGUuaXRlbXM7XG5cdFx0Ly8gTm9uLVN0YW5kYXJkIG9yIG5vbi1leGlzdGVudCBpbiBBcnJheTpcblx0XHRjb25zdCBub25TdGQgPSBbXCJjbGVhclwiLCBcImdldFwiLCBcInJlbW92ZVwiLCBcInNlbGVjdGVkXCIsIFwiZmlyc3RcIiwgXCJsYXN0XCIsIFwiZmluZEFsbFwiXTtcblx0XHQvLyBBcnJheSBwcm9wZXJ0aWVzOlxuXHRcdE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKEFycmF5LnByb3RvdHlwZSkuY29uY2F0KG5vblN0ZCkuZm9yRWFjaChtZXRob2QgPT4ge1xuXHRcdFx0aWYoaXRlbXNbbWV0aG9kXSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGxldCBmdW5jID0gbnVsbDtcblx0XHRcdFx0Y29uc3QgX3RoaXMgPSB0aGlzO1xuXHRcdFx0XHRzd2l0Y2ggKG1ldGhvZCkge1xuXHRcdFx0XHQgICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLSBTYW1lIGFzIGluIEFycmF5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRcdFx0Y2FzZSBcImNvcHlXaXRoaW5cIjogLy8gY29weSBlbGVtZW50IGZyb20gaW5kZXggdG8gaW5kZXhcblx0XHRcdFx0XHRjYXNlIFwiZmlsbFwiOiAvLyByZXBsYWNlIE4gZWxlbWVudHMgaW4gYXJyYXlcblx0XHRcdFx0XHRjYXNlIFwic3BsaWNlXCI6IC8vIGFkZCBvciByZW1vdmUgZWxlbWVudHNcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgICAgICAgY29uc29sZS5sb2coXCJOb3QgYXZhaWxhYmxlIHlldDogXCIgKyBtZXRob2QpO1xuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJyZXZlcnNlXCI6IC8vIHJldmVyc2UgdGhlIG9yZGVyXG5cdFx0XHRcdFx0XHRmdW5jID0gZnVuY3Rpb24oLi4uYXJncykge1xuXHRcdFx0XHRcdCAgICAgICAgaWYodGhpcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKHRoaXMuaXRlbXMpOyAvL0tlZXAgYSBjb3B5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldE9iaiA9IGl0ZW1zW21ldGhvZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXR0YWNoKGl0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldE9iajtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0gU3BlY2lhbCBJbXBsZW1lbnRhdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHRcdGNhc2UgXCJjbGVhclwiOiAvLyBwYXJlbnROb2RlLnJlcGxhY2VDaGlsZHJlbigpIGNhbiBhbHNvIGJlIHVzZWRcblx0XHRcdFx0XHRcdGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUodGhpcy5pdGVtc1swXSkgdGhpcy5pdGVtc1swXS5yZW1vdmUoKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImdldFwiOiAvLyB3aWxsIHJldHVybiB0aGUgaXRlbSB3aXRoIGRhdGEtaWQ6XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbihpZCkge1xuXHRcdFx0XHRcdCAgICAgICAgbGV0IGZvdW5kID0gbnVsbDtcblx0XHRcdFx0XHQgICAgICAgIGlmKHRoaXMuaXRlbXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgdGhpcy5pdGVtcy5zb21lKGl0ZW0gPT4ge1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICBjb25zdCBzYW1lSWQgPSBtMmQyLnV0aWxzLmlzTnVtZXJpYyhpZCkgPyAoaXRlbS5kYXRhc2V0LmlkICogMSkgPT09IGlkICogMSA6IGl0ZW0uZGF0YXNldC5pZCA9PT0gaWQ7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgIGlmKGl0ZW0uZGF0YXNldCAmJiBzYW1lSWQpIHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gaXRlbTtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0ICAgICAgICAgICAgfSk7XG5cdFx0XHRcdFx0ICAgICAgICB9XG5cdFx0XHRcdFx0ICAgICAgICByZXR1cm4gZm91bmQ7XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNlbGVjdGVkXCI6IC8vIHdpbGwgcmV0dXJuIHRoZSBzZWxlY3RlZCBpdGVtIGluIGxpc3Rcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgICAgICAgcmV0dXJuIF90aGlzLnByb3h5KHRoaXMuZmluZChcIjpzY29wZSA+IFwiICsgXCJbc2VsZWN0ZWRdXCIpKTsgLy9vbmx5IGRpcmVjdCBjaGlsZHJlblxuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJmaXJzdFwiOiAvLyByZXR1cm5zIHRoZSBmaXJzdCBpdGVtIGluIGxpc3Rcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgICAgICAgcmV0dXJuIF90aGlzLnByb3h5KHRoaXMuaXRlbXNbMF0pO1xuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJsYXN0XCI6IC8vIHJldHVybnMgdGhlIGxhc3QgaXRlbSBpbiBsaXN0XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgICAgICAgIHJldHVybiBfdGhpcy5wcm94eSh0aGlzLml0ZW1zW3RoaXMuaXRlbXMubGVuZ3RoIC0gMV0pO1xuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJwb3BcIiA6IC8vUmVtb3ZlIGFuZCByZXR1cm4gbGFzdCBlbGVtZW50OlxuXHRcdFx0XHRcdCAgICBmdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICAgICAgICBpZih0aGlzLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzWzBdLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm94eShwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5pdGVtc1t0aGlzLml0ZW1zLmxlbmd0aCAtIDFdKSk7XG5cdFx0XHRcdFx0ICAgICAgICB9XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInB1c2hcIjogLy8gQWRkIG9uZSBpdGVtIGF0IHRoZSBlbmQ6XG5cdFx0XHRcdFx0XHRmdW5jID0gZnVuY3Rpb24ob2JqKSB7XG5cdFx0XHRcdFx0XHQgICAgb2JqID0gX3RoaXMucGxhaW5Ub09iamVjdCh0aGlzLCBvYmopO1xuXHRcdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzRWxlbWVudChvYmopKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hcHBlbmQob2JqKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3Qob2JqKSkge1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnN0ICRjaGlsZCA9IF90aGlzLmdldEl0ZW0odGhpcywgaW5kZXgsIG9iaik7XG5cdFx0XHRcdFx0XHRcdCAgICB0aGlzLmFwcGVuZENoaWxkKCRjaGlsZCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zb2xlLmxvZyhcIlRyeWluZyB0byBwdXNoIGFuIHVua25vd24gdmFsdWUgaW50byBhIGxpc3Q6XCIpO1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc29sZS5sb2cob2JqKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwicmVtb3ZlXCI6IC8vIHdpbGwgcmV0dXJuIHRoZSBpdGVtIHdpdGggZGF0YS1pZDpcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRcdFx0ICAgICAgICBpZih0aGlzLml0ZW1zLmxlbmd0aCkge1xuXHRcdFx0XHRcdCAgICAgICAgICAgIGNvbnN0IGVsZW0gPSB0aGlzLml0ZW1zLmdldChpZCk7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgaWYoZWxlbS5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgZWxlbS5yZW1vdmUoKTtcblx0XHRcdFx0XHQgICAgICAgICAgICB9XG5cdFx0XHRcdFx0ICAgICAgICB9XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNoaWZ0XCI6IC8vIHJlbW92ZSBhbmQgcmV0dXJuIGZpcnN0IGl0ZW06XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgICAgICAgIGlmKHRoaXMuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuaXRlbXNbMF0ucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb3h5KHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLml0ZW1zWzBdKSk7XG5cdFx0XHRcdFx0ICAgICAgICB9XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNvcnRcIjogLy8gWW91IGNhbiBwYXNzIGEgZnVuY3Rpb24gdG8gY29tcGFyZSBpdGVtczpcblx0XHRcdFx0XHRcdGZ1bmMgPSBmdW5jdGlvbihjb21wYXJlRnVuYykge1xuXHRcdFx0XHRcdCAgICAgICAgaWYodGhpcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKHRoaXMuaXRlbXMpOyAvL0tlZXAgY29weVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5zb3J0KGNvbXBhcmVGdW5jIHx8ICgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudGV4dC5sb2NhbGVDb21wYXJlKGIudGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhdHRhY2goaXRlbXMpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwidW5zaGlmdFwiOiAvLyBBZGQgYW4gaXRlbSB0byB0aGUgYmVnaW5uaW5nXG5cdFx0XHRcdFx0XHRmdW5jID0gZnVuY3Rpb24ob2JqKSB7XG5cdFx0XHRcdFx0XHQgICAgb2JqID0gX3RoaXMucGxhaW5Ub09iamVjdCh0aGlzLCBvYmopO1xuXHRcdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzRWxlbWVudChvYmopKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wcmVwZW5kKG9iaik7XG5cdFx0XHRcdFx0XHQgICAgfSBlbHNlIGlmIChtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3Qob2JqKSkge1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmxlbmd0aDtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnN0ICRjaGlsZCA9IF90aGlzLmdldEl0ZW0odGhpcywgaW5kZXgsIG9iaik7XG5cdFx0XHRcdFx0XHRcdCAgICB0aGlzLnByZXBlbmQoJGNoaWxkKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKFwiVHJ5aW5nIHRvIHVuc2hpZnQgYW4gdW5rbm93biB2YWx1ZSBpbnRvIGEgbGlzdDpcIik7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zb2xlLmxvZyhvYmopXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0ZGVmYXVsdDogLy8tLS0tLS0tLS0tLS0tLS0tLSBMaW5rIHRvIEFycmF5IC0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdFx0XHQgICAgbGV0IGFyck1ldGhvZCA9IG1ldGhvZDtcblx0XHRcdFx0XHRcdC8vIG5vaW5zcGVjdGlvbiBGYWxsVGhyb3VnaEluU3dpdGNoU3RhdGVtZW50SlNcblx0XHRcdFx0XHRcdHN3aXRjaCh0cnVlKSB7XG5cdFx0XHRcdFx0ICAgICAgICBjYXNlIG1ldGhvZCA9PT0gXCJmaW5kQWxsXCI6XG5cdFx0XHRcdFx0ICAgICAgICAgICAgYXJyTWV0aG9kID0gXCJmaWx0ZXJcIjsgLy8gVXNlIFwiZmlsdGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIG0yZDIudXRpbHMuaXNGdW5jdGlvbihBcnJheS5wcm90b3R5cGVbbWV0aG9kXSk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgbm9kZXMgdG8gcHJveHkgc28gd2UgY2FuIHVzZSBzaG9ydCBhc3NpZ25tZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0LCBjb25jYXQsIGV2ZXJ5LCBmaWx0ZXIsIGZpbmQsIGZpbmRJbmRleCwgZm9yRWFjaCwgaW5jbHVkZXMsIGluZGV4T2YsIGpvaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtleXMsIGxhc3RJbmRleE9mLCBtYXAsIHJlZHVjZSwgcmVkdWNlUmlnaHQsIHNsaWNlLCBzb21lLCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyRnVuYyA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm94aWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKCRub2RlLml0ZW1zKS5mb3JFYWNoKG4gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3hpZXMucHVzaChfdGhpcy5wcm94eShuKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHByb3hpZXMpW2Fyck1ldGhvZF0oLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hhbmdlIGJlaGF2aW91ciBvZiBmaW5kOiAvL1RPRE86IGRvY3VtZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmaW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5pc1N0cmluZyhhcmdzWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZChhcmdzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJGdW5jKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZmluZEFsbFwiOiAgLy9UT0RPOiBkb2N1bWVudGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9IGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcoYXJnc1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRBbGwoYXJnc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyRnVuYyguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbmNhdFwiOiAvL1RPRE86IGRvY3VtZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5pc0FycmF5KGFyZ3NbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGFyZ3NbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9iaiA9IGFyZ3NbaV1bal07XG5cdFx0XHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighIG0yZDIudXRpbHMuaXNFbGVtZW50KG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IF90aGlzLnBsYWluVG9PYmplY3QodGhpcywgYXJnc1tpXVtqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG9iaikpIHtcblx0XHRcdFx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBfdGhpcy5nZXRJdGVtKHRoaXMsIGluZGV4LCBvYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaChvYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gYXJyRnVuYztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoZnVuYykge1xuXHRcdFx0XHRcdG0yZDIudXRpbHMuZGVmaW5lUHJvcChpdGVtcywgbWV0aG9kLCBmdW5jLmJpbmQoJG5vZGUpKTsgLy9iaW5kOiBzcGVjaWZ5IHRoZSBcInRoaXNcIiB2YWx1ZVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cbi8qKlxuICogTTJEMiBBbGVydHMgRXh0ZW5zaW9uXG4gKiBAc2luY2UgMjAyMS0wNS0yMFxuICpcbiAqIEEgcmVwbGFjZW1lbnQgb2YgYGFsZXJ0YCxgcHJvbXB0YCBhbmQgYGNvbmZpcm1gLiBJbnNwaXJlZCBieSBgU3dlZXRBbGVydGAsIHdpdGhcbiAqIGN1c3RvbWl6YWJsZSB0aGVtZSBhbmQgYmV0dGVyIE0yRDIgaW50ZWdyYXRpb24uXG4gKlxuICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gKiAkLndhaXQgICAgICAgOiBEaXNwbGF5cyBhIHNwaW5uZXIgd2l0aG91dCBhbnkgYnV0dG9uIGluIGl0LlxuICogJC5hbGVydCAgICAgIDogRGlzcGxheXMgYSBzaW1wbGUgbWVzc2FnZSB3aXRoIFwib2tcIiBidXR0b24uXG4gKiAkLnN1Y2Nlc3MgICAgOiBTYW1lIGFzICQuYWxlcnQsIGJ1dCBzaG93IGEgXCJjaGVja1wiIGljb24uXG4gKiAkLmZhaWx1cmUgICAgOiBTYW1lIGFzICQuYWxlcnQsIGJ1dCBzaG93cyBhIFwid2FybmluZ1wiIGljb24uXG4gKiAkLmNvbmZpcm0gICAgOiBEaXNwbGF5cyBhIGNvbmZpcm1hdGlvbiBtZXNzYWdlIHdpdGggXCJ5ZXNcIiBhbmQgXCJub1wiIGJ1dHRvbnMuXG4gKiAkLnByb21wdCAgICAgOiBEaXNwbGF5cyBhbiBpbnB1dCBwcm9tcHQgd2l0aCBcImNhbmNlbFwiIGFuZCBcInNlbmRcIiBidXR0b25zLlxuICogJC5tZXNzYWdlICAgIDogRnJlZSBmb3JtIG1lc3NhZ2UgKGFsbCB0aGUgcHJldmlvdXMgaW1wbGVtZW50YXRpb25zIHVzZXMgdGhpcyBmdW5jdGlvbilcbiAqICQuY2xvc2VBbGwgICA6IENsb3NlIGFueSBtZXNzYWdlIHRoYXQgbWlnaHQgYmUgb3BlblxuXG4gKiBEb2N1bWVudGF0aW9uIDpcbiAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi9hbGVydC5tZFxuICogaHR0cHM6Ly9naXRodWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL2FsZXJ0Lm1kXG4gKi9cbm0yZDIubG9hZCgkID0+IHtcbiAgICBmdW5jdGlvbiBjbG9zZShhZnRlckNsb3NlKSB7XG4gICAgICAgIGxldCB3aW5FeGlzdHMgPSAkLmV4aXN0cyhcIiNtMmQyLWFsZXJ0IC5tMmQyLWFsZXJ0LWZyb250XCIpO1xuICAgICAgICBpZih3aW5FeGlzdHMpIHtcbiAgICAgICAgICAgIGxldCB3aW4gPSAkKFwiI20yZDItYWxlcnQgLm0yZDItYWxlcnQtZnJvbnRcIik7XG4gICAgICAgICAgICB3aW4uY3NzLmFkZChcInZhbmlzaFwiKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB3aW5FeGlzdHMgPSAkLmV4aXN0cyhcIiNtMmQyLWFsZXJ0IC5tMmQyLWFsZXJ0LWZyb250XCIpO1xuICAgICAgICAgICAgICAgIGlmKHdpbkV4aXN0cykge1xuICAgICAgICAgICAgICAgICAgICAkKFwiI20yZDItYWxlcnRcIikucmVtb3ZlKCk7IC8vIEJlIHN1cmUgaXQgZXhpc3RzIGJlZm9yZSB0cnlpbmcgdG8gcmVtb3ZlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKGFmdGVyQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJDbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDQwMCk7IC8vQW5pbWF0aW9uIHRha2VzIDUwMCwgYWZ0ZXIgdGhhdCB3aWxsIGJlIHJlc3RvcmVkLCBzbyB3ZSBuZWVkIHRvIHJlbW92ZSBpdCBiZWZvcmUgdGhhdCB0aW1lLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYoYWZ0ZXJDbG9zZSkge1xuICAgICAgICAgICAgICAgIGFmdGVyQ2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBmYUljb25zID0ge1xuICAgICAgICB3cmFwICAgICA6IGZhbHNlLFxuICAgICAgICBxdWVzdGlvbiA6IFtcImZhXCIsIFwiZmEtcXVlc3Rpb24tY2lyY2xlXCJdLFxuICAgICAgICBpbmZvICAgICA6IFtcImZhXCIsIFwiZmEtZXhjbGFtYXRpb24tY2lyY2xlXCJdLFxuICAgICAgICBlcnJvciAgICA6IFtcImZhXCIsIFwiZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIl0sXG4gICAgICAgIG9rICAgICAgIDogW1wiZmFcIiwgXCJmYS1jaGVja1wiXSxcbiAgICAgICAgaW5wdXQgICAgOiBbXCJmYVwiLCBcImZhLWVkaXRcIl0sXG4gICAgICAgIHdhaXQgICAgIDogW1wiZmFcIiwgXCJmYS1jb2dcIiwgXCJmYS1zcGluXCJdXG4gICAgfVxuICAgIGNvbnN0IG1hdGVyaWFsID0ge1xuICAgICAgICB3cmFwICAgICA6IFwibWF0ZXJpYWwtaWNvbnNcIixcbiAgICAgICAgcXVlc3Rpb24gOiBcImhlbHBcIixcbiAgICAgICAgaW5mbyAgICAgOiBcImluZm9cIixcbiAgICAgICAgZXJyb3IgICAgOiBcImVycm9yXCIsXG4gICAgICAgIG9rICAgICAgIDogXCJkb25lXCIsXG4gICAgICAgIGlucHV0ICAgIDogXCJlZGl0XCIsXG4gICAgICAgIHdhaXQgICAgIDogXCJwZW5kaW5nXCJcbiAgICB9XG4gICAgY29uc3QgZGVmYXVsdENzcyA9IHtcbiAgICAgICAgd3JhcCAgICAgOiBmYWxzZSxcbiAgICAgICAgcXVlc3Rpb24gOiBcImljb25fcXVlc3Rpb25cIixcbiAgICAgICAgaW5mbyAgICAgOiBcImljb25faW5mb1wiLFxuICAgICAgICBlcnJvciAgICA6IFwiaWNvbl9lcnJvclwiLFxuICAgICAgICBvayAgICAgICA6IFwiaWNvbl9va1wiLFxuICAgICAgICBpbnB1dCAgICA6IFwiaWNvbl9pbnB1dFwiLFxuICAgICAgICB3YWl0ICAgICA6IFwiaWNvbl93YWl0XCJcbiAgICB9XG4gICAgJC5tZXNzYWdlID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBsZXQgY3NzID0gZGVmYXVsdENzcztcbiAgICAgICAgc3dpdGNoICgkLm1lc3NhZ2VJY29ucykge1xuICAgICAgICAgICAgY2FzZSBcImZhXCI6IGNzcyA9IGZhSWNvbnM7IGJyZWFrXG4gICAgICAgICAgICBjYXNlIFwibWF0ZXJpYWxcIiA6IGNzcyA9IG1hdGVyaWFsOyBicmVha1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZigkLmlzT2JqZWN0KCQubWVzc2FnZUljb25zKSkge1xuICAgICAgICAgICAgICAgICAgICBjc3MgPSAkLm1lc3NhZ2VJY29ucztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYob3B0aW9ucykge1xuICAgICAgICAgICAgaWYoISAkLmlzRnVuY3Rpb24ob3B0aW9ucy5jYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICBpZihvcHRpb25zLmNhbGxiYWNrICYmISBvcHRpb25zLnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50ZXh0ID0gb3B0aW9ucy5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayA9ICgpID0+IHt9XG4gICAgICAgICAgICB9XG4gXHRcdCAgICBpZighIG9wdGlvbnMudGV4dCkgeyBvcHRpb25zLnRleHQgPSBcIlwiIH1cbiAgICAgICAgfVxuICAgICAgICBjbG9zZSgoKSA9PiB7IC8vIEJlIHN1cmUgd2UgaGF2ZSBubyBvdGhlciBhbGVydFxuICAgICAgICAgICAgJChcImJvZHlcIiwge1xuICAgICAgICAgICAgICAgIG0yZDJBbGVydCA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgIGlkIDogXCJtMmQyLWFsZXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIGJhY2sgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFwibTJkMi1hbGVydC1iYWNrXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA6IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0IDowLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgOiBcIiMwMDA1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb250IDogT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZm9ybVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IChvcHRpb25zLmNzcyA/ICgkLmlzQXJyYXkob3B0aW9ucy5jc3MpID8gb3B0aW9ucy5jc3MgOiBbb3B0aW9ucy5jc3NdKSA6IFtdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoW1wibTJkMi1hbGVydC1mcm9udFwiLCBcInBvcHVwXCIsIG9wdGlvbnMuaWNvbl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6SW5kZXggOiAxMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb24gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcInNwYW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogW1wiaWNvblwiLCBvcHRpb25zLmljb25dLmNvbmNhdChjc3Mud3JhcCA/IFtjc3Mud3JhcF0gOiBjc3Nbb3B0aW9ucy5pY29uXSkuY29uY2F0KG9wdGlvbnMuaWNvbiA9PT0gXCJ3YWl0XCIgPyBcInNwaW5cIiA6IFwiXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0IDogY3NzLndyYXAgPyBjc3Nbb3B0aW9ucy5pY29uXSA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBcIm0yZDItYWxlcnQtdGl0bGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbiA6IG9wdGlvbnMudGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1zZyA6ICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwcm9wcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFwibTJkMi1hbGVydC10ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYob3B0aW9ucy5pY29uID09PSBcImlucHV0XCIgJiYhIG9wdGlvbnMudGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNldCA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogXCJtMmQyLWFsZXJ0LWZpZWxkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IFwiYW5zd2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZigkLmlzUGxhaW5PYmplY3Qob3B0aW9ucy50ZXh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNldCA6IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBcIm0yZDItYWxlcnQtZmllbGRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMudGV4dClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB7IHNwYW4gOiBvcHRpb25zLnRleHQucmVwbGFjZShcIlxcblwiLFwiPGJyPlwiKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocHJvcHMsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKG9wdGlvbnMuaWNvbiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25zdWJtaXQgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnVuYztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGRhdGEuYnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwib2tcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ5ZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gKCkgPT4geyBvcHRpb25zLmNhbGxiYWNrKHRydWUsIGRhdGEpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayhmYWxzZSwgZGF0YSkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2FuY2VsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayhudWxsLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSAoKSA9PiB7IG9wdGlvbnMuY2FsbGJhY2soZGF0YVtPYmplY3Qua2V5cyhkYXRhKVswXV0sIGRhdGEpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gKCkgPT4geyBvcHRpb25zLmNhbGxiYWNrKGRhdGFbT2JqZWN0LmtleXMoZGF0YSkuZmluZChpdCA9PiBpdCAhPT0gXCJidXR0b25cIildLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIElmIHdlIGhhdmUgbW9yZSB0aGFuIG9uZSBmaWVsZCwgd2Ugc2VuZCBhbGw6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSAoKSA9PiB7IG9wdGlvbnMuY2FsbGJhY2soZGF0YSwgZGF0YSkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogLy8gV2hlbiBzZXR0aW5nIGN1c3RvbWl6ZWQgYnV0dG9ucywgd2Ugc2VuZCBhbGw6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayhkYXRhLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZShmdW5jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25sb2FkIDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWYgPSB0aGlzLmZpbmQoXCJbYXV0b2ZvY3VzXVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGVmKSB7IGRlZi5mb2N1cygpOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKG9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0J1dHRvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvYi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QnV0dG9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnMgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogXCJtMmQyLWFsZXJ0LWJ1dHRvbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYi5mb3JFYWNoKGIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYi50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16IF0vZyxcIlwiKS5yZXBsYWNlKFwiIFwiLFwiX1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0J1dHRvbnMuYnV0dG9uc1trZXldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiBcInN1Ym1pdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlIDoga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFtcImNvbG9yXCIsIGtleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA6ICQuZGljdCAhPT0gdW5kZWZpbmVkID8gJC5kaWN0KGIpIDogYixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvZm9jdXMgOiBbXCJva1wiLFwieWVzXCJdLmluY2x1ZGVzKGIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1Ob1ZhbGlkYXRlIDogW1wiY2FuY2VsXCJdLmluY2x1ZGVzKGIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFwcGVuZCBhIGhpZGRlbiBpbnB1dCB3aXRoIHRoZSB2YWx1ZSBvZiB0aGUgYnV0dG9uIGNsaWNrZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljayA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMuY2xvc2VzdChcImZvcm1cIiksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGUgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiaW5wdXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogXCJoaWRkZW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogXCJidXR0b25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA6IHRoaXMudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0J1dHRvbnM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KG9wdGlvbnMuYnV0dG9ucylcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQWRkIGF1dG9tYXRpY2FsbHkgbmFtZSB0byBmaWVsZHMgaW4gY2FzZSBpdCBpcyBub3Qgc3BlY2lmaWVkOlxuICAgICAgICBsZXQgaSA9IDE7XG4gICAgICAgICQoXCIjbTJkMi1hbGVydCAubTJkMi1hbGVydC1mcm9udFwiKS5maW5kQWxsKFwiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWFcIikuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgIGlmKGVsZW0ubmFtZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGVsZW0ubmFtZSA9IFwiZmllbGRfXCIgKyBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBjbG9zZSA6IGNsb3NlIH07XG4gICAgfVxuICAgICQud2FpdCA9ICh0aXRsZSwgdGV4dCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuICQubWVzc2FnZSh7XG4gICAgICAgICAgICBpY29uIDogXCJ3YWl0XCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5hbGVydCA9ICh0aXRsZSwgdGV4dCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuICQubWVzc2FnZSh7XG4gICAgICAgICAgICBpY29uIDogXCJpbmZvXCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtcIm9rXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5zdWNjZXNzID0gKHRpdGxlLCB0ZXh0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gJC5tZXNzYWdlKHtcbiAgICAgICAgICAgIGljb24gOiBcIm9rXCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtcIm9rXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5mYWlsdXJlID0gKHRpdGxlLCB0ZXh0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gJC5tZXNzYWdlKHtcbiAgICAgICAgICAgIGljb24gOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtcIm9rXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5jb25maXJtID0gKHRpdGxlLCB0ZXh0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gJC5tZXNzYWdlKHtcbiAgICAgICAgICAgIGljb24gOiBcInF1ZXN0aW9uXCIsXG4gICAgICAgICAgICB0aXRsZSA6IHRpdGxlLFxuICAgICAgICAgICAgYnV0dG9ucyA6IFtcInllc1wiLCBcIm5vXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5wcm9tcHQgPSAodGl0bGUsIHRleHQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHJldHVybiAkLm1lc3NhZ2Uoe1xuICAgICAgICAgICAgaWNvbiA6IFwiaW5wdXRcIixcbiAgICAgICAgICAgIHRpdGxlIDogdGl0bGUsXG4gICAgICAgICAgICBidXR0b25zIDogW1wiY2FuY2VsXCIsXCJzZW5kXCJdLFxuICAgICAgICAgICAgdGV4dCA6IGNhbGxiYWNrID09PSB1bmRlZmluZWQgPyBudWxsIDogdGV4dCxcbiAgICAgICAgICAgIGNhbGxiYWNrIDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRleHQgOiBjYWxsYmFja1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgJC5jbG9zZUFsbCA9ICgpID0+IHtcbiAgICAgICAgY2xvc2UoKTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBNMkQyIExhbmd1YWdlIEV4dGVuc2lvblxuICogQHNpbmNlIDIwMjEtMDYtMDFcbiAqXG4gKiBBZGQgc3VwcG9ydHMgZm9yIG11bHRpLWxhbmd1YWdlIGludGVyZmFjZXNcbiAqXG4gKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAqICQuZGljdChrZXl3b3JkLCBbdmFyaWFibGVzXSkgIDogVG8gZ2V0IHRyYW5zbGF0aW9ucyBmcm9tIGRpY3Rpb25hcnlcbiAqICQubGFuZyhsYW5nKSAgICAgICAgICAgICAgICAgIDogU2V0IG5ldyBsYW5ndWFnZVxuICpcbiAqIERvY3VtZW50YXRpb24gOlxuICogaHR0cHM6Ly9naXRsYWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL2xhbmcubWRcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi9sYW5nLm1kXG4gKi9cbm0yZDIubG9hZCgkID0+IHtcbiAgICBsZXQgbWFudWFsTGFuZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibTJkMi5sYW5nXCIpIHx8IFwiXCJcbiAgICBsZXQgbGFuZ3VhZ2UgPSBtYW51YWxMYW5nIHx8IG5hdmlnYXRvci5sYW5ndWFnZTtcbiAgICBmdW5jdGlvbiBEaWN0aW9uYXJ5KGxhbmcpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oa2V5d29yZCwgdmFycykge1xuICAgICAgICAgICAgaWYoa2V5d29yZCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIGxldCBtc2cgPSBvYmoudmFsKGtleXdvcmQsdHJ1ZSk7XG4gICAgICAgICAgICBpZih2YXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgdmFycyA9PSBcInN0cmluZ1wiKXtcbiAgICAgICAgICAgICAgICAgICAgaWYodmFycyAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFycyA9IHZhcnMucmVwbGFjZSgvOyQvLFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFpcnMgPSB2YXJzLnNwbGl0KFwiO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhcnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhaXJzLmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IHBhaXJzW3BdLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXJzW3BhcnRbMF1dID0gcGFydFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB2YXJzID09IFwib2JqZWN0XCIpe1xuICAgICAgICAgICAgICAgICAgICB2YXJzLmZvckVhY2godiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga3dkID0gdmFyc1t2XSArIFwiXCI7IC8vQmUgc3VyZSBpdHMgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBrd2QgPSBvYmoudmFsKGt3ZCxmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSBtc2cucmVwbGFjZSh2LGt3ZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgfVxuICAgICAgICBvYmoubGFuZyA9IGxhbmcgfHwgXCJlblwiO1xuICAgICAgICBvYmouZGF0YSA9IHt9O1xuICAgICAgICBvYmouc2V0ID0gZnVuY3Rpb24oZGljdGlvbmFyeSkge1xuICAgICAgICAgICAgdGhpcy5kYXRhID0gZGljdGlvbmFyeTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICBvYmouaGFzID0gZnVuY3Rpb24oa2V5d29yZCwgbGFuZykge1xuICAgICAgICAgICAgcmV0dXJuIGxhbmcgPT09IHVuZGVmaW5lZCA/IHRoaXMuZGF0YVtrZXl3b3JkXSAhPT0gdW5kZWZpbmVkIDogdGhpcy5kYXRhW2tleXdvcmRdW2xhbmddICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIG9iai52YWwgPSBmdW5jdGlvbihrZXl3b3JkLCByZXBvcnQpe1xuICAgICAgICAgICAgaWYoJC5pc0VtcHR5KG9iai5kYXRhKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJEaWN0aW9uYXJ5IGlzIGVtcHR5LiBZb3UgbmVlZCB0byBhZGQgYSBkaWN0aW9uYXJ5LCBmb3IgZXhhbXBsZTogYCQuZGljdC5zZXQoe1xcblwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJzYXZlICAgOiB7IGVuIDogJ1NhdmUnLCBlcyA6ICdHdWFyZGFyJyB9LFxcblwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJjYW5jZWwgOiB7IGVuIDogJ0NhbmNlbCcsIGVzIDogJ0NhbmNlbGFyJyB9XFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInllcyAgICA6IHsgZW4gOiAnWWVzJywgZXMgOiAnU2knIH0sXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIm5vICAgICA6IHsgZW4gOiAnTm8nLCBlcyA6ICdObycgfVxcblwiICtcbiAgICAgICAgICAgICAgICBcIn0pYFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCFrZXl3b3JkKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8ga2V5d29yZCBzcGVjaWZpZWQuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRyYW5zbGF0aW9uID0ga2V5d29yZDtcbiAgICAgICAgICAgIGlmKHJlcG9ydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXl3b3JkID0ga2V5d29yZC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYodGhpcy5oYXMoa2V5d29yZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlTGFuZyA9IHRoaXMubGFuZy5zcGxpdChcIi1cIilbMF07XG4gICAgICAgICAgICAgICAgaWYodGhpcy5oYXMoa2V5d29yZCwgdGhpcy5sYW5nKSkge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbiA9IHRoaXMuZGF0YVtrZXl3b3JkXVt0aGlzLmxhbmddO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLmhhcyhrZXl3b3JkLGJhc2VMYW5nKSkge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbiA9IHRoaXMuZGF0YVtrZXl3b3JkXVtiYXNlTGFuZ107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVwb3J0KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyB0cmFuc2xhdGlvbiBmb3IgbGFuZyBbXCIrdGhpcy5sYW5nK1wiXTogXCIra2V5d29yZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmKHJlcG9ydCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyBrZXl3b3JkOiBcIitrZXl3b3JkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRpb247XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBkaWN0aW9uYXJ5XG4gICAgJC5kaWN0ID0gbmV3IERpY3Rpb25hcnkobGFuZ3VhZ2UpO1xuXG4gICAgY29uc3QgbGFuZ0V2ZW50cyA9IFtdO1xuICAgICQubGFuZyA9IGZ1bmN0aW9uKG5ld0xhbmcpIHtcbiAgICAgICAgaWYobmV3TGFuZykge1xuICAgICAgICAgICAgJC5kaWN0LmxhbmcgPSBuZXdMYW5nO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtMmQyLmxhbmdcIiwgJC5kaWN0LmxhbmcpO1xuICAgICAgICB9XG4gICAgICAgICQoXCJib2R5XCIpLmZpbmRBbGwoXCJbbGFuZ11cIikuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICAgICAgbGV0IHR4dCA9IGVsZW0udGV4dDtcbiAgICAgICAgICAgIC8vIFdoZW4gZWxlbWVudCBoYXMgY29udGVudCBhbmQgKG9wdGlvbmFsKSB0aXRsZVxuICAgICAgICAgICAgaWYodHh0ICYmISBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhcIm5vdHh0XCIpKSB7XG4gICAgICAgICAgICAgICAgaWYoZWxlbS5kYXRhc2V0Lmt3ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5kYXRhc2V0Lmt3ID0gJC5sYW5nLmdldEtleXdvcmQodHh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxlbS50ZXh0ID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGl0bGVLdyA9IGVsZW0uZGF0YXNldC5rdyArIFwiX3RpdGxlXCI7XG4gICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gJC5kaWN0Lmhhcyh0aXRsZUt3KSA/ICQuZGljdCh0aXRsZUt3KSA6IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYodGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXaGVuIGVsZW1lbnQgb25seSBoYXMgdGl0bGU6XG4gICAgICAgICAgICB9IGVsc2UgaWYoZWxlbS50aXRsZSkge1xuICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IFwiXCJcbiAgICAgICAgICAgICAgICBpZihlbGVtLmRhdGFzZXQua3cpIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAkLmRpY3QoZWxlbS5kYXRhc2V0Lmt3KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLmRhdGFzZXQua3cgPSAkLmxhbmcuZ2V0S2V5d29yZChlbGVtLnRpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAkLmRpY3QoZWxlbS5kYXRhc2V0Lmt3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZihlbGVtLnBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBsYWNlaG9sZGVyID0gXCJcIlxuICAgICAgICAgICAgICAgIGlmKGVsZW0uZGF0YXNldC5rdykge1xuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA9ICQuZGljdChlbGVtLmRhdGFzZXQua3cpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uZGF0YXNldC5rdyA9ICQubGFuZy5nZXRLZXl3b3JkKGVsZW0ucGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA9ICQuZGljdChlbGVtLmRhdGFzZXQua3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihwbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmKGVsZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBcIlwiXG4gICAgICAgICAgICAgICAgaWYoZWxlbS5kYXRhc2V0Lmt3KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5kYXRhc2V0Lmt3ID0gJC5sYW5nLmdldEtleXdvcmQoZWxlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsYW5nRXZlbnRzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3TGFuZyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IHRleHQgdG8ga2V5d29yZFxuICAgICAqL1xuICAgICQubGFuZy5nZXRLZXl3b3JkID0gZnVuY3Rpb24odGV4dCkge1xuICAgICAgICByZXR1cm4gdGV4dC50b0xvd2VyQ2FzZSgpLnRyaW0oKS5yZXBsYWNlKC8gL2csXCJfXCIpLnJlcGxhY2UoL1teXFx3XS9nLFwiXCIpLnJlcGxhY2UoL18kLyxcIlwiKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KCQubGFuZywgXCJvbmNoYW5nZVwiLCB7XG4gICAgICAgIGdldCgpIHsgcmV0dXJuIHRoaXMgfSxcbiAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICBpZigkLmlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgbGFuZ0V2ZW50cy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVbmFibGUgdG8gc2V0IGxhbmcub25jaGFuZ2UsIGJlY2F1c2UgaXQgaXMgbm90IGEgZnVuY3Rpb246IFwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxufSk7XG4vLyBUcmFuc2xhdGUgSFRNTCBvbiByZWFkeTpcbm0yZDIucmVhZHkoJCA9PiB7XG4gICAgY29uc3QgbWFudWFsTGFuZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibTJkMi5sYW5nXCIpIHx8IFwiXCJcbiAgICBjb25zdCBib2R5TGFuZyA9ICQoXCJib2R5XCIpLmZpbmQoXCJbbGFuZ11cIik7XG4gICAgY29uc3QgaHRtbExhbmcgPSAkKFwiaHRtbFwiKS5sYW5nIHx8IChib2R5TGFuZyA/IGJvZHlMYW5nLmxhbmcgOiBudWxsKSB8fCBcImVuXCI7XG4gICAgY29uc3QgaXNEaWZmZXJlbnQgPSBtYW51YWxMYW5nID8gaHRtbExhbmcgIT09IG1hbnVhbExhbmcgOiBodG1sTGFuZyAhPT0gbmF2aWdhdG9yLmxhbmd1YWdlLnNwbGl0KFwiLVwiKVswXTtcbiAgICBpZihpc0RpZmZlcmVudCkgeyAkLmxhbmcoKSB9XG59KTtcbm0yZDIubG9hZCgkID0+IHtcbiAgICAvKlxuICAgICAqIE0yRDIgU3RvcmFnZSBFeHRlbnNpb25cbiAgICAgKiBAYXV0aG9yOiBBLiBMZXBlXG4gICAgICogQHNpbmNlIDIwMjEtMDYtMDJcbiAgICAgKlxuICAgICAqIFdyYXBwZXIgZm9yIGRpZmZlcmVudCBraW5kcyBvZiBzdG9yYWdlLlxuICAgICAqIE9uZSBhZHZhbnRhZ2UgaXMgdGhhdCBvYmplY3RzIGFyZSBzdG9yZWQgd2l0aCB0eXBlIGluc3RlYWQgb2Ygc3RyaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gICAgICogJC5sb2NhbCA6IFRvIGdldC9zZXQgdmFsdWVzIGluIGxvY2FsU3RvcmFnZVxuICAgICAqICQuc2Vzc2lvbiA6IFRvIGdldC9zZXQgdmFsdWVzIGluIHNlc3Npb25TdG9yYWdlXG4gICAgICpcbiAgICAgKiBEb2N1bWVudGF0aW9uOlxuICAgICAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi9zdG9yYWdlLm1kXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL3N0b3JhZ2UubWRcbiAgICAgKlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFN0b3JhZ2UodHlwZSkge1xuICAgICAgICBzd2l0Y2godHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnbG9jYWwnICA6IGlmKHdpbmRvdy5sb2NhbFN0b3JhZ2UpICAgICB0aGlzLnN0b3JlID0gbG9jYWxTdG9yYWdlOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3Nlc3Npb24nOiBpZih3aW5kb3cuc2Vzc2lvblN0b3JhZ2UpICAgdGhpcy5zdG9yZSA9IHNlc3Npb25TdG9yYWdlOyBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLnN0b3JlID09IHVuZGVmaW5lZCkgdGhpcy5zdG9yZSA9IGxvY2FsU3RvcmFnZTsgLy9EZWZhdWx0XG4gICAgICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZih2YWwpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHZhbCA9IHsgJyQnIDogdmFsIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0b3JlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWwpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgbGV0IHZhbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsID0gSlNPTi5wYXJzZSh0aGlzLnN0b3JlLmdldEl0ZW0oa2V5KSkgfHwge307XG4gICAgICAgICAgICB9IGNhdGNoKGlnbm9yZSkge1xuICAgICAgICAgICAgICAgIHZhbCA9IHRoaXMuc3RvcmUuZ2V0SXRlbShrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsW1wiJFwiXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gdmFsW1wiJFwiXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZihPYmplY3Qua2V5cyh2YWwpLmxlbmd0aCA9PT0gMCAmJiB2YWwuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgIHZhbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVsID0gZnVuY3Rpb24oa2V5KSB7IHRoaXMuc3RvcmUucmVtb3ZlSXRlbShrZXkpOyB9XG4gICAgICAgIHRoaXMua2V5cyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gT2JqZWN0LmtleXModGhpcy5zdG9yZSkuc29ydCgpOyB9XG4gICAgICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbigpIHsgdGhpcy5zdG9yZS5jbGVhcigpOyB9XG4gICAgICAgIHRoaXMuZXhpc3RzID0gZnVuY3Rpb24oa2V5KSB7IHJldHVybiB0aGlzLnN0b3JlLmhhc093blByb3BlcnR5KGtleSk7IH1cbiAgICAgICAgdGhpcy5sb2cgPSBmdW5jdGlvbihrZXksIHZhbCwgbikge1xuICAgICAgICAgICAgaWYobiA9PSB1bmRlZmluZWQpIG4gPSAxMDtcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IHRoaXMuZ2V0KGtleSkgfHwgW107XG4gICAgICAgICAgICB0bXAucHVzaCh2YWwpO1xuICAgICAgICAgICAgd2hpbGUodG1wLmxlbmd0aCA+IG4pIHRtcC5zaGlmdCgpO1xuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LHRtcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJC5sb2NhbCA9IG5ldyBTdG9yYWdlKFwibG9jYWxcIik7XG4gICAgJC5zZXNzaW9uID0gbmV3IFN0b3JhZ2UoXCJzZXNzaW9uXCIpO1xufSk7XG4vKipcbiAqXG4gKiBNMkQyIFVwbG9hZCBQbHVnaW5cbiAqIHZlci4gMjAyMS0xMi0wM1xuICpcbiAqIFRoaXMgZXh0ZW5zaW9uIHByb3ZpZGVzOlxuICogJC51cGxvYWRcbiAqXG4gKiBEb2N1bWVudGF0aW9uIDpcbiAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi91cGxvYWQubWRcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi91cGxvYWQubWRcbiAqL1xuIG0yZDIubG9hZCgkID0+IHtcbiAgICAkLnVwbG9hZCA9IGZ1bmN0aW9uKGV2LCBvcHRpb25zKSB7XG4gICAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICAgICAgLy8gdXBsb2FkICAgOiBcImh0dHA6Ly9sb2NhbGhvc3QvcGFnZVwiLFxuICAgICAgICAgICAgLy8gb25TZWxlY3QgOiAoZmlsZXMsIHNvdXJjZXMpID0+IHsgLi4uIH0sXG4gICAgICAgICAgICAvLyBvblVwZGF0ZSA6IChwcm9ncmVzc19wY3QsIGZpbGUsIGluZGV4KSA9PiB7IC4uLiB9LFxuICAgICAgICAgICAgLy8gb25Eb25lICAgOiAocmVzcG9uc2UsIGFsbERvbmUpID0+IHsgLi4uIH0sIC8vIHJlc3BvbnNlOiBjb250YWlucyByZXN1bHQgZnJvbSB0aGUgc2VydmVyIChKU09OKSwgaW4gKFMpIHdpbGwgdHJpZ2dlciBlYWNoIGZpbGUuXG4gICAgICAgICAgICAvLyBvbkVycm9yICA6IChyZXNwb25zZSkgPT4geyAuLi4gfSwgLy8gcmVzcG9uc2U6IG9iamVjdCB3aXRoIHJlbGV2YW50IGluZm9ybWF0aW9uLiBJbiAoUykgd2lsbCB0cmlnZ2VyIGluZGVwZW5kZW50bHkuXG4gICAgICAgICAgICAvLyBvblJlc3BvbnNlIDogKHJlc3BvbnNlKSA9PiB7IC4uLiB9LCAvLyBNb2RpZnkgcmVzcG9uc2UgZnJvbSBzZXJ2ZXIgKGlmIG5lZWRlZClcbiAgICAgICAgICAgIGFjY2VwdCAgIDogXCIqLypcIiwgLy8gWW91IGNhbiBsaW1pdCB0aGUgZmlsZSB0eXBlLCBmb3IgZXhhbXBsZTogXCJpbWFnZS8qXCIsIFwiaW1hZ2UvanBnXCIsIGV0Yy5cbiAgICAgICAgICAgIHBhcmFsbGVsIDogZmFsc2UsIC8vIElmIGZhbHNlLCBpdCB3aWxsIHNlbmQgYWxsIGZpbGVzIGluIGEgc2VxdWVuY2UgKFMpXG4gICAgICAgICAgICBmaWVsZCAgICA6IFwiZmlsZVwiLCAvL0ZpZWxkIG5hbWVcbiAgICAgICAgICAgIG11bHRpcGxlIDogdHJ1ZSwgLy8gQWxsb3cgbXVsdGlwbGUgZmlsZXMgdG8gYmUgc2VsZWN0ZWQgdG8gdXBsb2FkLFxuICAgICAgICAgICAgbWF4RmlsZXMgOiAwLCAvLyBNYXhpbXVtIG51bWJlciBvZiBmaWxlcyB0byBhbGxvdyB0byB1cGxvYWQuIDAgPSB1bmxpbWl0ZWRcbiAgICAgICAgICAgIG1heFNpemVNYjogMCwgLy8gTWF4aW11bSBzaXplIHBlciBmaWxlIChQKSBvciB0b3RhbCAoUykgdG8gYWxsb3dcbiAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucyA9IG51bGw7IC8vIERvIG5vdCB1c2UgaXQgbGF0ZXI6XG4gICAgICBsZXQgZWwgPSB3aW5kb3cuX3Byb3RlY3RlZF9yZWZlcmVuY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiSU5QVVRcIik7XG4gICAgICBlbC5uYW1lID0gb3B0cy5maWVsZDtcbiAgICAgIGVsLnR5cGUgPSBcImZpbGVcIjtcbiAgICAgIGlmKG9wdHMubXVsdGlwbGUgPT0gdHJ1ZSkge1xuICAgICAgICBlbC5tdWx0aXBsZSA9IFwibXVsdGlwbGVcIjtcbiAgICAgICAgLy9lbC5uYW1lICs9IFwiW11cIjsgIC8vRW5hYmxlIGlmIHlvdSBhcmUgdXNpbmcgUEhQXG4gICAgICB9XG4gICAgICBpZighIG9wdHMudXBsb2FkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXBsb2FkIG5vdCBzcGVjaWZpZWQuIFVzaW5nIGN1cnJlbnQgcGFnZS5cIilcbiAgICAgICAgb3B0cy51cGxvYWQgPSBcIlwiO1xuICAgICAgfVxuICAgICAgaWYob3B0cy5vbkRvbmUgPT0gdW5kZWZpbmVkKSAgICAgIHsgb3B0cy5vbkRvbmUgPSAocmVzcG9uc2UsIGFsbERvbmUpID0+IHsgY29uc29sZS5sb2cocmVzcG9uc2UpIH19XG4gICAgICBpZihvcHRzLm9uRXJyb3IgID09IHVuZGVmaW5lZCkgICAgeyBvcHRzLm9uRXJyb3IgID0gKHJlc3BvbnNlKSA9PiB7IGNvbnNvbGUubG9nKFwiRXJyb3IgOiBcIik7IGNvbnNvbGUubG9nKHJlc3BvbnNlKTsgfX1cbiAgICAgIGlmKG9wdHMub25VcGRhdGUgPT0gdW5kZWZpbmVkKSAgICB7IG9wdHMub25VcGRhdGUgPSAocGN0LCBmaWxlLCBpbmRleCkgPT4geyBjb25zb2xlLmxvZyhcIlVwbG9hZGluZyA6IFwiICsgcGN0ICsgXCIlIFwiICsgKG9wdHMub25lQnlPbmUgPyBcIlsgXCIgKyBmaWxlLm5hbWUgKyBcIiBdXCIgOiBcIlwiKSkgfSB9XG4gICAgICBpZihvcHRzLm9uUmVzcG9uc2UgPT0gdW5kZWZpbmVkKSAgeyBvcHRzLm9uUmVzcG9uc2UgPSAocmVzKSA9PiB7IHJldHVybiByZXMgfSB9IC8vIFJldHVybiBpdCB3aXRob3V0IG1vZGlmeWluZyBpdFxuXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgIGlmIChlbC5maWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmKG9wdHMubWF4RmlsZXMgPT09IDAgfCBlbC5maWxlcy5sZW5ndGggPD0gb3B0cy5tYXhGaWxlcykge1xuICAgICAgICAgICAgICAgIGlmKG9wdHMub25TZWxlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG90U2l6ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZWwuZmlsZXMpLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNzLnB1c2goVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdFNpemUgKz0gZmlsZS5zaXplO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWJzID0gdG90U2l6ZSAvICgxMDI0ICogMTAyNCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKG9wdHMubWF4U2l6ZU1iICYmIG1icyA+IG9wdHMubWF4U2l6ZU1iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzLm9uRXJyb3IoXCJNYXhpbXVtIHNpemUgZXhjZWVkZWQ6IFwiICsgTWF0aC5jZWlsKG1icykgKyBcIk1CID4gXCIgKyBvcHRzLm1heFNpemVNYiArIFwiTUJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMub25TZWxlY3QoZWwuZmlsZXMsIHNyY3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZihvcHRzLm9uZUJ5T25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZURvbmUgPSBBcnJheShlbC5maWxlcy5sZW5ndGgpLmZpbGwoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbShlbC5maWxlcykuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRmlsZVVwbG9hZChlbC5uYW1lLCBbZmlsZV0sIGluZGV4KyssIG9wdHMsIChkYXRhLCBmaWxlcywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZURvbmVbaW5kZXhdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsRG9uZSA9IGZpbGVEb25lLmluZGV4T2YoZmFsc2UpID09PSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5vbkRvbmUoZ2V0UmVzcG9uc2UoZGF0YSwgZmlsZXMsIGluZGV4KSwgYWxsRG9uZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFsbERvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRmlsZVVwbG9hZChlbC5uYW1lLCBlbC5maWxlcywgMCwgb3B0cywgKGRhdGEsIGZpbGVzLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMub25Eb25lKGdldFJlc3BvbnNlKGRhdGEsIGZpbGVzLCBpbmRleCksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7IC8vIGNsZWFyIC8gZnJlZSByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICAgIGVsID0gd2luZG93Ll9wcm90ZWN0ZWRfcmVmZXJlbmNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRzLm9uRXJyb3IoXCJNYXggZmlsZSBsaW1pdCBleGNlZWRlZC4gTWF4aW11bSBmaWxlczogXCIgKyBvcHRzLm1heEZpbGVzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZWwuY2xpY2soKTsgLy8gb3BlbiBkaWFsb2dcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRSZXNwb25zZShkYXRhLCBmaWxlcywgaW5kZXgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBbXTtcbiAgICAgICAgZGF0YSA9IGRhdGEgfHwge307XG4gICAgICAgIGZpbGVzLmZvckVhY2goZiA9PiB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSAodHlwZW9mIGRhdGEgPT0gXCJBcnJheVwiKSA/IChkYXRhLmxlbmd0aCA9PSBmaWxlcy5sZW5ndGggPyBkYXRhW2luZGV4XSA6IGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoZGF0YVtmLm5hbWVdICE9PSB1bmRlZmluZWQgPyBkYXRhW2YubmFtZV0gOiBkYXRhKVxuICAgICAgICAgICAgcmVzcG9uc2UucHVzaCh7XG4gICAgICAgICAgICAgICAgZmlsZSAgOiBmLFxuICAgICAgICAgICAgICAgIGRhdGEgIDogcm93LFxuICAgICAgICAgICAgICAgIGluZGV4IDogaW5kZXgrKywgICAgLy8gaW4gY2FzZSBvZiAxeDEgaXQgd2lsbCBiZSBjYWxsZWQgb25seSBvbmNlLCBvdGhlcndpc2UsIGl0IHdpbGwgYmUgaW5jcmVtZW50ZWQuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBsb2FkIGZpbGUgdXNpbmcgWEhSXG4gICAgICovXG4gICAgZnVuY3Rpb24gRmlsZVVwbG9hZChmaWVsZE5hbWUsIGZpbGVzLCBpbmRleCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IHhociAgICAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIGZpbGVzICAgICAgICAgPSBBcnJheS5mcm9tKGZpbGVzKTtcblxuICAgICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgaWYob3B0aW9ucy5vbmVCeU9uZSkge1xuICAgICAgICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgoZS5sb2FkZWQgKiAxMDApIC8gZS50b3RhbCk7XG4gICAgICAgICAgICAgIG9wdGlvbnMub25VcGRhdGUocGVyY2VudGFnZSwgZmlsZXNbMF0sIGluZGV4KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBsZXQgc2l6ZUFjY3VtID0gMDtcbiAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICBmaWxlcy5zb21lKGYgPT4ge1xuICAgICAgICAgICAgICAgICAgc2l6ZUFjY3VtICs9IGYuc2l6ZTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBlLmxvYWRlZCA+PSBzaXplQWNjdW0gPyAxMDAgOiAxMDAgLSBNYXRoLnJvdW5kKCgoc2l6ZUFjY3VtIC0gZS5sb2FkZWQpICogMTAwKSAvIGYuc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiRmlsZTogXCIgKyBmLm5hbWUgKyBcIiBTaXplOiBcIiArIGYuc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTG9hZGVkOiBcIiArIGUubG9hZGVkICsgXCIgQWNjdW06IFwiICsgc2l6ZUFjY3VtICsgXCIgVG90YWw6IFwiICsgZS50b3RhbCArIFwiIFBjdDogXCIgKyBwZXJjZW50YWdlKVxuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vblVwZGF0ZShwZXJjZW50YWdlLCBmLCBpKyspO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpemVBY2N1bSA+PSBlLmxvYWRlZDtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBmYWxzZSk7XG5cbiAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkYXRhID0geGhyLnJlc3BvbnNlVGV4dCA/IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCkgOiB7XG4gICAgICAgICAgICAgICAgZXJyb3I6IHt0eXBlOiBcIlVua25vd25cIiwgcmVhc29uOiBcIlVua25vd24gRXJyb3JcIn1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICBkYXRhLmVycm9yID0geyB0eXBlIDogXCJQYXJzZSBFcnJvclwiLCByZWFzb24gOiBlcnIubWVzc2FnZSB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCA0MDApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG9wdGlvbnMub25SZXNwb25zZShkYXRhKSwgZmlsZXMsIGluZGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZiBkYXRhLmVycm9yID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBkYXRhLmVycm9yID0geyB0eXBlIDogXCJFeGNlcHRpb25cIiwgcmVhc29uIDogZGF0YS5lcnJvciB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLm9uRXJyb3IoZGF0YS5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIG9wdGlvbnMudXBsb2FkKTtcblxuICAgICAgY29uc3QgbG9hZGVkID0gQXJyYXkoZmlsZXMubGVuZ3RoKS5maWxsKGZhbHNlKTtcbiAgICAgIGNvbnN0IGZvcm0gICAgPSBnZXRGaWxlRm9ybShmaWVsZE5hbWUsIGZpbGVzKTtcbiAgICAgIGxldCBsb2FkSW5kZXggPSAwO1xuICAgICAgZmlsZXMuZm9yRWFjaChmID0+IHtcbiAgICAgICAgICBjb25zdCByZWFkZXIgID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBsb2FkZWRbbG9hZEluZGV4KytdID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmKGxvYWRlZC5pbmRleE9mKGZhbHNlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB4aHIuc2VuZChmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoZik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJlcGFyZXMgZm9ybVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEZpbGVGb3JtKGZpZWxkTmFtZSwgZmlsZXMpIHtcbiAgICAgICAgY29uc3QgZm9ybSAgICA9IG5ldyBGb3JtRGF0YSgpO1xuXG4gICAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgICBmb3JtLmFwcGVuZChmaWVsZE5hbWUsIGZpbGUsIGZpbGUubmFtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmb3JtXG4gICAgfVxuIH0pO1xuXG5tMmQyLmxvYWQoJCA9PiB7XG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gV1MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvKipcbiAgICAgKiBAYXV0aG9yOiBBLkxlcGVcbiAgICAgKiBAdmVyc2lvbjogMjEwNDI1IDogQWRkZWQgc2VjdXJlLCBob3N0IGFuZCBjb252ZXJ0ZWQgdG8gbTJkMiBleHRlbnNpb25cbiAgICAgKiAgICAgICAgICAgMjEwNDA2IDogUmV0cnkgdW50aWwgcmVjb25uZWN0XG4gICAgICogQHNpbmNlIDogMjAxOFxuICAgICAqIFdlYlNvY2tldCB3cmFwcGVyXG4gICAgICpcbiAgICAgKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAgICAgKiAkLndzXG4gICAgICpcbiAgICAgKiBEb2N1bWVudGF0aW9uIDpcbiAgICAgKiBodHRwczovL2dpdGxhYi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vd3MubWRcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vd3MubWRcbiAgICAgKi9cbiAgICBjbGFzcyB3cyB7XG4gICAgICAgIHJlcXVlc3QobXNnKSB7XG4gICAgICAgICAgICBpZiAobXNnKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQub25lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbm5lY3QgYW5kIHJldHVybiB0aGUgd2Vic29ja2V0IG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0U29ja2V0KG9uTWVzc2FnZSwgb25PcGVuLCBvbkNsb3NlKSB7XG4gICAgICAgICAgICBjb25zdCB3ZWJTb2NrZXQgPSBuZXcgV2ViU29ja2V0KHRoaXMucGF0aCk7XG4gICAgICAgICAgICB3ZWJTb2NrZXQub25vcGVuID0gb25PcGVuO1xuICAgICAgICAgICAgd2ViU29ja2V0Lm9uY2xvc2UgPSBvbkNsb3NlO1xuICAgICAgICAgICAgd2ViU29ja2V0Lm9ubWVzc2FnZSA9IChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVzc2FnZShKU09OLnBhcnNlKHJlcy5kYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2ViU29ja2V0Lm9uZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3ZWJTb2NrZXQub25lcnJvciA9IChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTb2NrZXQgZW5jb3VudGVyZWQgZXJyb3I6ICcsIGVyciA/IGVyci5tZXNzYWdlIDogJ1Vua25vd24nLCAnQ2xvc2luZyBzb2NrZXQnKTtcbiAgICAgICAgICAgICAgICBjb25zdCB3c2sgPSB3ZWJTb2NrZXQgfHwgdGhpcztcbiAgICAgICAgICAgICAgICBpZih3c2sucmVhZHlTdGF0ZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB3c2suY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gd2ViU29ja2V0O1xuICAgICAgICB9XG4gICAgICAgIGNvbm5lY3Qob3B0aW9ucywgb25NZXNzYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmluaXRSZXF1ZXN0ID0gb3B0aW9ucy5yZXF1ZXN0IHx8IG51bGw7XG4gICAgICAgICAgICB0aGlzLm9uQ29ubmVjdCA9IG9wdGlvbnMuY29ubmVjdGVkIHx8ICgoKSA9PiB7fSk7XG4gICAgICAgICAgICB0aGlzLm9uRGlzY29ubmVjdCA9IG9wdGlvbnMuZGlzY29ubmVjdGVkIHx8ICgoKSA9PiB7fSk7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdCA9IG9wdGlvbnMucmVjb25uZWN0ICE9PSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IG9wdGlvbnMuaG9zdCB8fCB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWU7XG4gICAgICAgICAgICB0aGlzLnNlY3VyZSA9IG9wdGlvbnMuc2VjdXJlID09PSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5wb3J0ID0gb3B0aW9ucy5wb3J0IHx8ICh0aGlzLnNlY3VyZSA/IDQ0MyA6IDgwKTtcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IFwid3NcIiArICh0aGlzLnNlY3VyZSA/IFwic1wiIDogXCJcIikgKyBcIjovL1wiICsgdGhpcy5ob3N0ICsgXCI6XCIgKyB0aGlzLnBvcnQgKyBcIi9cIiArIChvcHRpb25zLnBhdGggfHwgXCJcIik7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICAvLy0tLS0tLS0tIENvbm5lY3QgLS0tLS0tLS0tLVxuICAgICAgICAgICAgY29uc3Qgb25PcGVuID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0KHRoaXMuaW5pdFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Db25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvbkNsb3NlID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuaW50ZXJ2YWwgJiYgdGhpcy5yZWNvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWNvbm5lY3RlZC4uLlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVjb25uZWN0aW5nLi4uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2ViU29ja2V0ID0gdGhpcy5nZXRTb2NrZXQob25NZXNzYWdlLCBvbk9wZW4sIG9uQ2xvc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goaWdub3JlKSB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndlYlNvY2tldCA9IHRoaXMuZ2V0U29ja2V0KG9uTWVzc2FnZSwgb25PcGVuLCBvbkNsb3NlKTtcbiAgICAgICAgfVxuICAgICAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICAgICAgdGhpcy5yZWNvbm5lY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0LmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJC53cyA9IG5ldyB3cygpO1xufSk7XG5tMmQyLmxvYWQoJCA9PiB7XG4gICAgLyoqXG4gICAgICogQHZlcnNpb24gMjAyMC0wNS0wOVxuICAgICAqIEBhdXRob3IgQS5MZXBlIChkZXZAYWxlcGUuY29tKVxuICAgICAqIFhIUiBpbXBsZW1lbnRhdGlvblxuICAgICAqXG4gICAgICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gICAgICogJC5nZXRcbiAgICAgKiAkLnBvc3RcbiAgICAgKiAkLnB1dFxuICAgICAqICQuZGVsZXRlXG4gICAgICogJC5jb25uZWN0XG4gICAgICogJC5vcHRpb25zXG4gICAgICogJC50cmFjZVxuICAgICAqICQucGF0Y2hcbiAgICAgKlxuICAgICAqIERvY3VtZW50YXRpb24gOlxuICAgICAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi94aHIubWRcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24veGhyLm1kXG4gICAgICovXG5cbiAgICAgLyoqXG4gICAgICogQHBhcmFtIG1ldGhvZDogSFRUUCBtZXRob2QgKEdFVCwgUE9TVCwgUFVULCBERUxFVEUpXG4gICAgICogQHBhcmFtIHVybDogc2VydmljZSBVUkxcbiAgICAgKiBAcGFyYW0gZGF0YTogRGF0YSBvYmplY3QgdG8gc2VuZCAoaW4gY2FzZSBvZiBQT1NUIGFuZCBQVVQpXG4gICAgICogQHBhcmFtIGNhbGxiYWNrOiBDYWxsYmFjayBvbiBTdWNjZXNzIChpdCB3aWxsIHJldHVybiBkYXRhKVxuICAgICAqIEBwYXJhbSBlcnJvcl9jYWxsYmFjazogQ2FsbGJhY2sgb24gRmFpbHVyZVxuICAgICAqIEBwYXJhbSBqc29uIDogQm9vbGVhbiAoaWYgc2V0LCBpdCB3aWxsIHNldCByZXF1ZXN0IGNvbnRlbnQtdHlwZSBhcyBqc29uIGFuZCBpbiBjYXNlIG9mIEdFVCwgaXQgd2lsbCBzZW5kIGl0IGFzIGJvZHkgaW5zdGVhZCBvZiBxdWVyeSlcbiAgICAgKi9cbiAgICBjb25zdCBYSFIgPSBmdW5jdGlvbihtZXRob2QsIHVybCwgZGF0YSwgY2FsbGJhY2ssIGVycm9yX2NhbGxiYWNrLCBqc29uKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgaWYoanNvbiA9PT0gdW5kZWZpbmVkKSB7IGpzb24gPSBmYWxzZSB9XG4gICAgICAgIGlmKGVycm9yX2NhbGxiYWNrID09PSB1bmRlZmluZWQpIHsgZXJyb3JfY2FsbGJhY2sgPSBmdW5jdGlvbihlKSB7IGNvbnNvbGUubG9nKGUpOyB9IH1cbiAgICAgICAgaWYoZGF0YSAmJiBPYmplY3QuZW50cmllcyhkYXRhKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGRhdGEgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmKGRhdGEpIHtcbiAgICAgICAgICAgIGlmKGpzb24pIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaChtZXRob2QudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiR0VUXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgKz0gKHVybC5pbmRleE9mKFwiP1wiKSAhPT0gLTEgPyBcIiZcIiA6IFwiP1wiKSArIChPYmplY3Qua2V5cyhkYXRhKS5tYXAoa2V5ID0+IGtleSArICc9JyArIGRhdGFba2V5XSkuam9pbignJicpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSAoT2JqZWN0LmtleXMoZGF0YSkubWFwKGtleSA9PiBrZXkgKyAnPScgKyBkYXRhW2tleV0pLmpvaW4oJyYnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3Qub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gICAgICAgIGlmKGpzb24pIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlcnJvcl9jYWxsYmFjayh7dHlwZSA6IFwiQ29ubmVjdGlvblwiLCByZWFzb246IFwiQ29ubmVjdGlvbiBSZWZ1c2VkXCJ9KTtcbiAgICAgICAgfVxuICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSB7fTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3QucmVzcG9uc2VUZXh0ID8gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCkgOiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiB7dHlwZTogXCJVbmtub3duXCIsIHJlYXNvbjogXCJVbmtub3duIEVycm9yXCJ9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5lcnJvciA9IHsgdHlwZSA6IFwiUGFyc2UgRXJyb3JcIiwgcmVhc29uIDogZXJyLm1lc3NhZ2UgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDQwMCkge1xuICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZihlcnJvcl9jYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBkYXRhLmVycm9yID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZXJyb3IgPSB7IHR5cGUgOiBcIkV4Y2VwdGlvblwiLCByZWFzb24gOiBkYXRhLmVycm9yIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlcnJvcl9jYWxsYmFjayhkYXRhLmVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3Quc2VuZChkYXRhKTtcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTaG9ydCBtZXRob2QuIEl0IGFsc28gdmFsaWRhdGVzIGFyZ3VtZW50cyBhbmQgYWxsb3cgb21pdHRpbmcgc29tZSwgZWcuOlxuICAgICAqIHhoci5nZXQodXJsLCBkYXRhLCBjYWxsYmFjaywgZXJyb3JfY2FsbGJhY2ssIGpzb24pO1xuICAgICAqIHhoci5nZXQodXJsLCBjYWxsYmFjaywgZXJyb3JfY2FsbGJhY2ssIGpzb24pO1xuICAgICAqIHhoci5nZXQodXJsLCBkYXRhLCBjYWxsYmFjaywganNvbik7XG4gICAgICogeGhyLmdldCh1cmwsIGRhdGEsIGpzb24pO1xuICAgICAqIHhoci5nZXQodXJsLCBjYWxsYmFjaywganNvbik7XG4gICAgICovXG4gICAgY29uc3QgeGhyID0ge307XG4gICAgW1wiZ2V0XCIsXCJwb3N0XCIsXCJwdXRcIixcImRlbGV0ZVwiLFwiY29ubmVjdFwiLFwib3B0aW9uc1wiLFwidHJhY2VcIixcInBhdGNoXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgIHhoclttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsZXQgdXJsLCBkYXRhLCBjYWxsYmFjaywgZXJyb3JfY2FsbGJhY2ssIGpzb247XG4gICAgICAgICAgICAvLyBub2luc3BlY3Rpb24gRmFsbFRocm91Z2hJblN3aXRjaFN0YXRlbWVudEpTXG4gICAgICAgICAgICBzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1s0XSA9PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGFyZ3VtZW50c1s0XTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGFzc2VkIEpTT04gYXJndW1lbnQ6IFwiICsgYXJndW1lbnRzWzRdICsgXCIgaXMgbm90IGJvb2xlYW4uXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJndW1lbnRzWzNdID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY2FsbGJhY2sgPSBhcmd1bWVudHNbM107XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoID09PSA0ICYmIHR5cGVvZiBhcmd1bWVudHNbM10gPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgZXJyb3IgY2FsbGJhY2sgb3B0aW9uYWw6XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gYXJndW1lbnRzWzNdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXNzZWQgYXJndW1lbnQgNDogXCIgKyBhcmd1bWVudHNbM10gKyBcIiBpcyBtaXN0YWtlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1syXSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmd1bWVudHNbMV0gPT0gXCJmdW5jdGlvblwiICYmIGFyZ3VtZW50cy5sZW5ndGggPCA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfY2FsbGJhY2sgPSBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCA9PT0gMyAmJiB0eXBlb2YgYXJndW1lbnRzWzJdID09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIGNhbGxiYWNrIGFuZCBlcnJvciBjYWxsYmFjayBvcHRpb25hbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhc3NlZCBhcmd1bWVudCAzOiBcIiArIGFyZ3VtZW50c1syXSArIFwiIGlzIG1pc3Rha2VuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJndW1lbnRzWzFdID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mIGFyZ3VtZW50c1sxXSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgZGF0YSBvcHRpb25hbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXNzZWQgYXJndW1lbnQgMjogXCIgKyBhcmd1bWVudHNbMV0gKyBcIiBpcyBtaXN0YWtlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1swXSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGFyZ3VtZW50c1swXS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGFzc2VkIFVSTDogXCIrYXJndW1lbnRzWzBdK1wiIHdhcyBub3QgYSBzdHJpbmcuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW5jb3JyZWN0IG51bWJlciBvZiBhcmd1bWVudHMgcGFzc2VkIHRvIHhoclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGRhdGEgPT09IHVuZGVmaW5lZCkgeyBkYXRhID0ge30gfVxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVVJMOiBcIiArIHVybCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRBVEE6IFwiICsgZGF0YSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNBTExCQUNLOiBcIiArIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IgQ0FMTEJBQ0s6IFwiICsgZXJyb3JfY2FsbGJhY2spO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJKU09OOiBcIiArIGpzb24pO1xuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJldHVybiBYSFIobWV0aG9kLnRvVXBwZXJDYXNlKCksIHVybCwgZGF0YSwgY2FsbGJhY2ssIGVycm9yX2NhbGxiYWNrLCBqc29uKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIE9iamVjdC5hc3NpZ24oJCwgeGhyKTtcbn0pO1xucmV0dXJuIG0yZDI7XG59KSk7XG4iLCIvKipcbiAgVGhpcyBwbGF5ZXIgdXNlcyBOREpTT04gZmlsZXMgdG8gcGxheSBpbiBzZXF1ZW5jZSBhcyBhIHZpZGVvXG4gIEFkZGl0aW9uYWxseSwgaXQgbWF5IGNvbnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIGZyYW1lXG4gIEluc3BpcmVkIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXBlL2ZyYW1lLXBsYXllci8gKGJ5IFZhZ25lciBTYW50YW5hKVxuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbGVwZS9uZGpzb24tcGxheWVyXG4gKiBAYXV0aG9yIEEuTGVwZVxuICogQFNpbmNlIDIwMjAtMDQtMTlcbiAqL1xuY2xhc3MgTmRKc29uUGxheWVyIHtcbiAgICAvLyBPcHRpb25zXG4gICAgZnBzOyAgICAgICAgLy9kZWZhdWx0OiAyNEZQU1xuICAgIGxvb3A7ICAgICAgIC8vZGVmYXVsdDogZmFsc2VcbiAgICBzaG93Zmlyc3Q7ICAvL2RlZmF1bHQ6IHRydWUgOiBzaG93IGZpcnN0IGltYWdlXG4gICAgYXV0b3BsYXk7ICAgLy9kZWZhdWx0OiBmYWxzZVxuICAgIHBhdGg7ICAgICAgIC8vZGVmYXVsdDogXCJcIiA6IFNwZWNpZnkgY29tbW9uIHBhdGggZm9yIGltYWdlcyBpbiBjYXNlIFVSTCBpcyB1c2VkLlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICBGb3IgZXhhbXBsZTogcGF0aCA9IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2ltYWdlcy9cIlxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICB0aGVuLCB1c2UgXCJpbWcxMjMzNC5qcGdcIiBhcyBmcmFtZSBpbiBOREpTT04gKHRvIHJlZHVjZSBzaXplIG9mIGZpbGUpXG5cbiAgICAvLyBTdGF0dXNcbiAgICBwbGF5aW5nID0gZmFsc2U7ICAgLy8gU3RhdHVzXG4gICAgbG9hZGVkICA9IGZhbHNlOyAgIC8vIElmIGEgZnJhbWUgaGFzIGJlZW4gbG9hZGVkIG9yIG5vdFxuICAgIGJhY2t3YXJkcyA9IGZhbHNlOyAvLyBJZiBwbGF5aW5nIGJhY2t3YXJkc1xuICAgIHN0YXJ0ZWQgPSBmYWxzZTsgLy8gSWYgdGhlIHBsYXllciBhbHJlYWR5IHN0YXJ0IHBsYXlpbmcgYXQgbGVhc3QgMSBmcmFtZVxuXG4gICAgLy8gRXZlbnRzXG4gICAgb25TdGFydDsgICAgLy8gQ2FsbGJhY2sgd2hlbiB3ZSBwcm9jZXNzZWQgZmlyc3QgaW1hZ2VcbiAgICBvbkxvYWQ7ICAgICAvLyBDYWxsYmFjayB3aGVuIGRhdGEgaXMgY29tcGxldGVkIGxvYWRpbmdcbiAgICBvblJlbmRlcjsgICAvLyBDYWxsYmFjayB0byByZXR1cm4gbWV0YWRhdGEgd2hlbiBhIGZyYW1lIGlzIHJlbmRlcmVkXG4gICAgb25QbGF5OyAgICAgLy8gQ2FsbGJhY2sgd2hlbiB3ZSBzdGFydCBwbGF5aW5nXG4gICAgb25TdG9wOyAgICAgLy8gQ2FsbGJhY2sgd2hlbiB3ZSBzdG9wIHBsYXlpbmdcbiAgICBvbkZpbmlzaDsgICAvLyBDYWxsYmFjayB3aGVuIHZpZGVvIHJlYWNoZXMgdGhlIGxhc3QgZnJhbWVcbiAgICBvbkVycm9yOyAgICAvLyBDYWxsYmFjayB3aGVuIHRoZXJlIGlzIGFuIGVycm9yIHdpdGggdGhlIHNvdXJjZVxuXG4gICAgLy8gSW50ZXJuYWwgdXNlIG1haW5seVxuICAgIHdyYXBwZXIgPSBudWxsOyAgICAgLy8gRE9NIGVsZW1lbnQgd2hpY2ggY29udGFpbnMgdGhlIDxjYW52YXM+IG5vZGVcbiAgICBjYW52YXMgPSBudWxsOyAgICAgLy8gPGNhbnZhcz4gRE9NIG9iamVjdFxuICAgIGN0eCA9IG51bGw7ICAgICAgICAvLyBjYW52YXMuY3R4IG9iamVjdFxuICAgIHRpbWVyID0gbnVsbDsgICAgICAvLyBUaW1lclNyYyB1c2VkIHRvIG1hbmFnZSBGUFNcbiAgICBzcmMgPSBcIlwiOyAgICAgICAgICAvLyBWaWRlbyBzb3VyY2UgVVJJIChOREpTT04pXG4gICAgZnJhbWUgPSAwOyAgICAgICAgIC8vIEN1cnJlbnQgZnJhbWUgYmVpbmcgcGxheWVkXG4gICAgbXVsdGlwbGllciA9IDE7ICAgIC8vIE11bHRpcGxpZXIgdG8gY29udHJvbCBzcGVlZFxuXG4gICAgLy8gUHJpdmF0ZVxuICAgIF9udW1GcmFtZXMgPSAwOyAgICAgLy8gTnVtYmVyIG9mIHRvdGFsIGZyYW1lcyAoaW4gaGVhZGVyKVxuICAgIF90b3RUaW1lICAgPSAwOyAgICAgLy8gTnVtYmVyIG9mIHRvdGFsIHRpbWUgKGluIGhlYWRlcilcbiAgICBfZnJhbWVzID0gW107ICAgICAgIC8vIFZpZGVvIGNvbnRlbnQgaW5jbHVkaW5nIG1ldGFkYXRhIChhcnJheSlcbiAgICBfZnJhbWVCYXNlID0gXCJcIiAgICAgLy8gQmFzZSBmb3IgYWxsIGZyYW1lcyAnZmInXG4gICAgX3RodW1iQmFzZSA9IFwiXCIgICAgIC8vIEJhc2UgZm9yIGFsbCB0aHVtYm5haWxzICd0aGInXG4gICAgX3N0YXJ0VGltZVN0YW1wID0gMDsvLyBTdGFydGluZyB0aW1lIHN0YW1wXG5cbiAgICAvKipcbiAgICAgKiBFeGFtcGxlczpcbiAgICAgKiBuZXcgTmRKc29uUGxheWVyKFwiL3ZpZGVvcy90ZXN0Lm5kanNvblwiLFwiY2FudmFzXCIsIHsgbG9vcDogdHJ1ZSB9KVxuICAgICAqIG5ldyBOZEpzb25QbGF5ZXIoXCIvdmlkZW9zL3Rlc3QubmRqc29uXCIsIHsgbG9vcDogdHJ1ZSB9KVxuICAgICAqIG5ldyBOZEpzb25QbGF5ZXIoXCIvdmlkZW9zL3Rlc3QubmRqc29uXCIpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3JjICAgICAubmRqc29uIGZpbGUgKHNlZSBmb3JtYXQpXG4gICAgICogQHBhcmFtIGVsZW1lbnQgOiBOb2RlLCBIVE1MIGVsZW1lbnQgKG11c3QgYmUgYSBjYW52YXMpLiBJZiBub3Qgc2V0LCBpdCB3aWxsIHVzZSAnPGNhbnZhcz4nXG4gICAgICogQHBhcmFtIG9wdGlvbnMgOiBPYmplY3QgcmVwbGFjaW5nIGRlZmF1bHQgdmFsdWVzXG4gICAgICogQHBhcmFtIGV2ZW50cyAgOiBPYmplY3QgY29udGFpbmluZyBldmVudHM6IChvbnN0YXJ0LCBvbmxvYWQsIG9ucmVuZGVyLCBvbnBsYXksIG9uc3RvcCwgb25maW5pc2gsIG9uZXJyb3IpXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3JjLCBlbGVtZW50LCBvcHRpb25zLCBldmVudHMpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBfdGhpcy5zcmMgPSBzcmM7XG4gICAgICAgIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub0V2ZW50ID0gKCgpID0+IHt9KTtcbiAgICAgICAgZXZlbnRzID0gT2JqZWN0LmFzc2lnbih7fSwgZXZlbnRzKTtcbiAgICAgICAgLy8gQWRkIGV2ZW50czpcbiAgICAgICAgX3RoaXMub25TdGFydCAgICA9IGV2ZW50cy5vbnN0YXJ0ICB8fCBub0V2ZW50O1xuICAgICAgICBfdGhpcy5vbkxvYWQgICAgID0gZXZlbnRzLm9ubG9hZCAgIHx8IG5vRXZlbnQ7XG4gICAgICAgIF90aGlzLm9uUmVuZGVyICAgPSBldmVudHMub25yZW5kZXIgfHwgbm9FdmVudDtcbiAgICAgICAgX3RoaXMub25QbGF5ICAgICA9IGV2ZW50cy5vbnBsYXkgICB8fCBub0V2ZW50O1xuICAgICAgICBfdGhpcy5vblN0b3AgICAgID0gZXZlbnRzLm9uc3RvcCAgIHx8IG5vRXZlbnQ7XG4gICAgICAgIF90aGlzLm9uRmluaXNoICAgPSBldmVudHMub25maW5pc2ggfHwgbm9FdmVudDtcbiAgICAgICAgX3RoaXMub25FcnJvciAgICA9IGV2ZW50cy5vbmVycm9yICB8fCAoZSA9PiB7IGNvbnNvbGUubG9nKGUpOyB9KVxuICAgICAgICAvLyBGaXggYW5kIGNoZWNrIGFyZ3VtZW50c1xuICAgICAgICBsZXQgcGxheWVyID0gbnVsbDtcbiAgICAgICAgaWYoZWxlbWVudCBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgIHBsYXllciA9IGVsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBcImNhbnZhc1wiO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZWxlbWVudCAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJJbmNvcnJlY3QgcGFyYW1ldGVyIHBhc3NlZCB0byBjb25zdHJ1Y3RvciBvZiBOZEpzb25QbGF5ZXJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIExvb2sgZm9yIGNhbnZhc1xuICAgICAgICAgICAgcGxheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50IHx8IFwiY2FudmFzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwbGF5ZXIpIHtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIudGFnTmFtZSA9PT0gXCJDQU5WQVNcIikge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbnZhcyA9IHBsYXllcjtcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgd3JhcHBlciBjb250YWluZXJcbiAgICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIHBsYXllcik7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5wcmVwZW5kKHBsYXllcik7XG4gICAgICAgICAgICAgICAgcGxheWVyID0gd3JhcHBlcjtcbiAgICAgICAgICAgIH0gZWxzZSBpZihwbGF5ZXIuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2FudmFzID0gcGxheWVyLnF1ZXJ5U2VsZWN0b3IoXCJjYW52YXNcIik7XG4gICAgICAgICAgICAgICAgaWYoIV90aGlzLmNhbnZhcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBcIk5vIGNhbnZhcyBmb3VuZCBpbiBlbGVtZW50XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQ0FOVkFTXCIpO1xuICAgICAgICAgICAgICAgIHBsYXllci5wcmVwZW5kKF90aGlzLmNhbnZhcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBcIkNhbnZhcyBlbGVtZW50IHdhcyBub3QgZm91bmQgaW4gRE9NOiBcIiArIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMud3JhcHBlciA9IHBsYXllcjtcbiAgICAgICAgX3RoaXMuY2FudmFzLmhlaWdodCA9IF90aGlzLmNhbnZhcy5jbGllbnRIZWlnaHQ7XG4gICAgICAgIF90aGlzLmNhbnZhcy53aWR0aCAgPSBfdGhpcy5jYW52YXMuY2xpZW50V2lkdGg7XG4gICAgICAgIC8vIFNldCBjbGFzc25hbWUgZm9yIHN0eWxlXG4gICAgICAgIHBsYXllci5jbGFzc0xpc3QuYWRkKFwibmRqcFwiKTtcblxuICAgICAgICAvLyBTZXQgY29udGV4dFxuICAgICAgICBfdGhpcy5jdHggPSBfdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIC8vIE9wdGlvbnM6XG4gICAgICAgIF90aGlzLmZwcyAgICAgICAgPSBvcHRpb25zLmZwcyB8fCAyNDtcbiAgICAgICAgX3RoaXMubG9vcCAgICAgICA9IG9wdGlvbnMubG9vcCB8fCBmYWxzZTtcbiAgICAgICAgX3RoaXMuYXV0b3BsYXkgICA9IG9wdGlvbnMuYXV0b3BsYXkgfHwgZmFsc2U7XG4gICAgICAgIF90aGlzLnNob3dmaXJzdCAgPSBvcHRpb25zLnNob3dmaXJzdCAhPT0gZmFsc2U7XG4gICAgICAgIF90aGlzLnBhdGggICAgICAgPSBvcHRpb25zLnBhdGggfHwgXCJcIjtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHRpbWVyOlxuICAgICAgICBfdGhpcy50aW1lciA9IG5ldyBUaW1lclNyYygxMDAwIC8gX3RoaXMuZnBzKTtcblxuICAgICAgICAvLyBMb2FkIHZpZGVvOlxuICAgICAgICBfdGhpcy5sb2FkKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9hZCBhIHZpZGVvIGZpbGUgb3IgY2hhbmdlIGN1cnJlbnQgdmlkZW8gZmlsZS5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgd2hlbiBlYWNoIGZyYW1lIGlzIHJlYWR5XG4gICAgICogQHBhcmFtIG5ld1NyYyBvcHRpb25hbCAoaWYgbm90IHNldCB3aWxsIHJlYWQgXCJzcmNcIiBwYXNzZWQgaW4gY29uc3RydWN0b3IpXG4gICAgICovXG4gICAgbG9hZChjYWxsYmFjaywgbmV3U3JjKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgaWYobmV3U3JjICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3JjID0gbmV3U3JjO1xuICAgICAgICAgICAgdGhpcy5fZnJhbWVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgICBsZXQgYnVmZmVyID0gJyc7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIHJldHVybiBmZXRjaChfdGhpcy5zcmMpXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHJlc3AuYm9keS5nZXRSZWFkZXIoKSlcbiAgICAgICAgICAgIC50aGVuKHJlYWRlciA9PiByZWFkZXIucmVhZCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gcHJvY2VzcyAoeyB2YWx1ZSwgZG9uZSB9KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0ID0gSlNPTi5wYXJzZShidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0ZyYW1lKGxhc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhsYXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBkb25lIGxvYWRpbmcgYWxsIGZyYW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25Mb2FkKF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciArIGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgICApLnNwbGl0KC9bXFxyXFxuXSg/PS4pLyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGxpbmVzLnBvcCgpOyAvLyBCdWZmZXIgaXMgdXNlZCB0byBrZWVwIHRoZSBcInVuZmluaXNoZWRcIiBsaW5lcyB0b2dldGhlclxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5tYXAoSlNPTi5wYXJzZSkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NGcmFtZShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4ocHJvY2Vzcyk7XG4gICAgICAgICAgICB9KSkuY2F0Y2gocmVhc29uID0+IHRoaXMub25FcnJvcihyZWFzb24pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGZyYW1lIGF0IHRoZSBlbmRcbiAgICAgKi9cbiAgICBhcHBlbmQoZnJhbWUpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBfdGhpcy5fZnJhbWVzLnB1c2goZnJhbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgZnJhbWUgYXQgdGhlIGJlZ2lubmluZ1xuICAgICAqL1xuICAgIHByZXBlbmQoZnJhbWUpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBfdGhpcy5fZnJhbWVzLnVuc2hpZnQoZnJhbWUpO1xuICAgICAgICBfdGhpcy5mcmFtZSArKzsgLy9UT0RPOiB0ZXN0XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYSBmcmFtZVxuICAgICAqL1xuICAgIHByb2Nlc3NGcmFtZShpdGVtKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgaWYoaXRlbS53ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmNhbnZhcy53aWR0aCAgPSBpdGVtLnc7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS5oICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmNhbnZhcy5oZWlnaHQgPSBpdGVtLmg7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS5mYiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5fZnJhbWVCYXNlID0gaXRlbS5mYjtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLnRoYiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5fdGh1bWJCYXNlID0gaXRlbS50aGI7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS50ZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5fbnVtRnJhbWVzID0gaXRlbS50ZjtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLnR0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLl90b3RUaW1lID0gaXRlbS50dDtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmKCFfdGhpcy5fc3RhcnRUaW1lU3RhbXApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fc3RhcnRUaW1lU3RhbXAgPSBpdGVtLnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0uZnBzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmZwcz0gaXRlbS5mcHM7XG4gICAgICAgICAgICBfdGhpcy50aW1lciA9IG5ldyBUaW1lclNyYygxMDAwIC8gX3RoaXMuZnBzKTtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLmYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuX2ZyYW1lcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgLy8gQXV0b1BsYXk6XG4gICAgICAgICAgICBpZiAoIV90aGlzLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmF1dG9wbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnNob3dmaXJzdCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGVwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMub25SZW5kZXIoaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoIV90aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIF90aGlzLm9uU3RhcnQoX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHZpZGVvXG4gICAgICogQHBhcmFtIG9uY2Ugc2luZ2xlIHN0ZXBcbiAgICAgKi9cbiAgICBfcmVuZGVyKG9uY2UpIHtcbiAgICAgICAgaWYgKHRoaXMudGltZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgXCJUaW1lclNyYyB3YXMgbm90IGluaXRpYWxpemVkXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5fZnJhbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgXCJWaWRlbyBpcyBlbXB0eSBvciBubyBmcmFtZXMgd2VyZSBmb3VuZFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5mcmFtZSA+PSB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMubG9vcCA/IDAgOiB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmZyYW1lIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMubG9vcCA/IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxOiAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Rpc3BsYXlJbWcob25jZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheSBuZXh0IGltYWdlXG4gICAgICogQHBhcmFtIG9uY2Ugc2luZ2xlIHN0ZXBcbiAgICAgKi9cbiAgICBfZGlzcGxheUltZyhvbmNlKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgY29uc3QgaXRlbSA9IF90aGlzLl9mcmFtZXNbX3RoaXMuZnJhbWVdO1xuICAgICAgICBjb25zdCBuZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy5vblJlbmRlcihpdGVtKTtcbiAgICAgICAgICAgIF90aGlzLnRpbWVyLmNhbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9pbmNyZW1lbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9uY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9EbyBub3QgZXhlY3V0ZSBhbnl0aGluZyB1bnRpbCBpdHMgbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRpbWVyLm5vY2FsbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5fZGlzcGxheUltZygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS5mICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gX3RoaXMuX2ZyYW1lQmFzZSArIGl0ZW0uZjtcbiAgICAgICAgICAgIF90aGlzLl9pbWFnZShmcmFtZSwgbmV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5vblJlbmRlcihpdGVtKTtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCBmcmFtZVxuICAgICAqL1xuICAgIF9pbmNyZW1lbnQoKSB7XG4gICAgICAgIHRoaXMuZnJhbWUgKz0gKHRoaXMubXVsdGlwbGllciAqICh0aGlzLmJhY2t3YXJkcyA/IC0xIDogMSkpO1xuICAgICAgICBpZih0aGlzLmZyYW1lIDwgMCkge1xuICAgICAgICAgICAgaWYodGhpcy5sb29wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbmlzaCh0aGlzKTsgLy9CYWNrd2FyZHMgcGxheWluZ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuZnJhbWUgPiB0aGlzLnRvdGFsRnJhbWVzKCkgLSAxKSB7XG4gICAgICAgICAgICBpZih0aGlzLmxvb3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRmluaXNoKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgYW4gaW1hZ2Ugb2JqZWN0XG4gICAgICogQHBhcmFtIGltZ1xuICAgICAqIEBwYXJhbSBjYWxsYmFjayBzZW5kcyBcInRydWVcIiBvbiBzdWNjZXNzXG4gICAgICogQHJldHVybiB0aGlzXG4gICAgICovXG4gICAgX2RyYXcgPSBmdW5jdGlvbihpbWcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgLy8vIHNldCBzaXplIHByb3BvcnRpb25hbCB0byBpbWFnZVxuICAgICAgICBpZihpbWcud2lkdGggPT09IDAgJiYgaW1nLmhlaWdodCA9PT0gMCkge1xuICAgICAgICAgICAgaW1nLm9uZXJyb3IoKTtcbiAgICAgICAgICAgIGlmKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIF90aGlzLmNhbnZhcy53aWR0aCwgX3RoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICAvL190aGlzLmN0eC5zYXZlKCk7XG4gICAgICAgICAgICBfdGhpcy5jdHguZHJhd0ltYWdlKGltZywgMCwgMCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0LCAwLCAwLCBfdGhpcy5jYW52YXMud2lkdGgsIF90aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgLy9fdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgaWYoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkIGFuIGltYWdlIGludG8gY2FudmFzLlxuICAgICAqIEBwYXJhbSBpbWFnZSBwYXRoIG9yIHVybCBvZiBpbWFnZVxuICAgICAqIEBwYXJhbSBjYWxsYmFjayByZXR1cm5zIGltZyBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHRoaXNcbiAgICAgKi9cbiAgICBfaW1hZ2UgPSBmdW5jdGlvbihpbWFnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJyc7XG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgX3RoaXMuX2RyYXcoaW1nLGZ1bmN0aW9uKGRyYXduKXtcbiAgICAgICAgICAgICAgICBpZihkcmF3bikge1xuICAgICAgICAgICAgICAgICAgICBpZihjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhpbWcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBlcnIgPSBfdGhpcy5vbkVycm9yKCk7XG4gICAgICAgICAgICBpZihlcnIpIHtcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gaW1hZ2VbMF0gPT09IFwiL1wiIHx8IGltYWdlLm1hdGNoKC9eaHR0cHM/Oi8pIHx8IGltYWdlLm1hdGNoKC9eZGF0YTppbWFnZS8pID8gaW1hZ2UgOiBfdGhpcy5wYXRoICsgaW1hZ2U7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBmcmFtZSBiYXNlXG4gICAgICovXG4gICAgZnJhbWVCYXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnJhbWVCYXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBvc2UgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgZnJhbWVcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgY3VycmVudEZyYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gbnVtYmVyIG9mIGZyYW1lc1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0b3RhbEZyYW1lcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX251bUZyYW1lcyB8fCB0aGlzLl9mcmFtZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0b3RhbCB0aW1lIG9mIHZpZGVvXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRvdGFsVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvdFRpbWUgfHwgdGhpcy5jdXJyZW50RnJhbWUoKSAvIHRoaXMuZnBzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZyYW1lIGluIHBvc2l0aW9uXG4gICAgICogQHBhcmFtIGluZGV4IDogcG9zaXRpb25cbiAgICAgKi9cbiAgICBmcmFtZUF0KGluZGV4KSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgbGV0IGZyYW1lID0gKGluZGV4IDwgdGhpcy50b3RhbEZyYW1lcygpKSA/IF90aGlzLl9mcmFtZXNbaW5kZXhdIDogbnVsbDtcbiAgICAgICAgaWYoZnJhbWUpIHtcbiAgICAgICAgICAgIGZyYW1lLmZiID0gX3RoaXMuX2ZyYW1lQmFzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJhbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGluZGV4IG51bWJlciBhdCBwZXJjZW50YWdlIG9mIHZpZGVvXG4gICAgICogQHBhcmFtIHBlcmNlbnRhZ2VcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIGluZGV4QXQocGVyY2VudGFnZSkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB+figocGVyY2VudGFnZSAqIF90aGlzLnRvdGFsRnJhbWVzKCkpIC8gMTAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gcGxheWVyIE5vZGVcbiAgICAgKiBAcmV0dXJucyBET00gbm9kZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcGxheWVyTm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5IHZpZGVvIGluIGN1cnJlbnQgZGlyZWN0aW9uXG4gICAgICogQHBhcmFtIHN0YXJ0RnJhbWVcbiAgICAgKi9cbiAgICBwbGF5KHN0YXJ0RnJhbWUpIHtcbiAgICAgICAgaWYgKHN0YXJ0RnJhbWUgPCAwKSB7XG4gICAgICAgICAgICBzdGFydEZyYW1lID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChzdGFydEZyYW1lID4gdGhpcy5fZnJhbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3RhcnRGcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0RnJhbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHN0YXJ0RnJhbWUgKiAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGxheWluZyA9IHRydWU7XG4gICAgICAgIHRoaXMudGltZXIucGxheSgpO1xuICAgICAgICB0aGlzLl9yZW5kZXIoZmFsc2UpO1xuICAgICAgICB0aGlzLm9uUGxheSh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5IHZpZGVvIGluIGZvcndhcmQgZGlyZWN0aW9uXG4gICAgICogKHVzZWQgbWFpbmx5IHRvIGNoYW5nZSBkaXJlY3Rpb24pXG4gICAgICogQHBhcmFtIHN0YXJ0RnJhbWVcbiAgICAgKi9cbiAgICBwbGF5Rm9yd2FyZChzdGFydEZyYW1lKSB7XG4gICAgICAgIHRoaXMuYmFja3dhcmRzID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGxheShzdGFydEZyYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5IHZpZGVvIGluIGJhY2t3YXJkcyBkaXJlY3Rpb25cbiAgICAgKiBAcGFyYW0gc3RhcnRGcmFtZVxuICAgICAqL1xuICAgIHBsYXlCYWNrd2FyZHMoc3RhcnRGcmFtZSkge1xuICAgICAgICB0aGlzLmJhY2t3YXJkcyA9IHRydWU7XG4gICAgICAgIHRoaXMucGxheShzdGFydEZyYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSB0aGUgdmlkZW9cbiAgICAgKi9cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGltZXIucGF1c2UoKTtcbiAgICAgICAgdGhpcy5vblN0b3AodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcCB0aGUgdmlkZW8gKGFuZCBnbyBiYWNrIHRvIHRoZSBiZWdpbm5pbmcpXG4gICAgICovXG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZnJhbWUgPSAwO1xuICAgICAgICB0aGlzLnRpbWVyLnBhdXNlKCk7XG4gICAgICAgIHRoaXMuX2Rpc3BsYXlJbWcodHJ1ZSk7XG4gICAgICAgIHRoaXMub25TdG9wKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmUgdGhlIHZpZGVvIG9uZSBmcmFtZSBpbiB0aGUgY3VycmVudCBkaXJlY3Rpb25cbiAgICAgKi9cbiAgICBzdGVwKCkge1xuICAgICAgICB0aGlzLm9uUGxheSh0aGlzKTtcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGltZXIuc3RlcCgpO1xuICAgICAgICB0aGlzLl9yZW5kZXIodHJ1ZSk7XG4gICAgICAgIHRoaXMub25TdG9wKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEp1bXAgdG8gZnJhbWVcbiAgICAgKi9cbiAgICBqdW1wVG8oc3RhcnRGcmFtZSkge1xuICAgICAgICBpZiAoc3RhcnRGcmFtZSA8IDApIHtcbiAgICAgICAgICAgIHN0YXJ0RnJhbWUgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0RnJhbWUgPiB0aGlzLl9mcmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGFydEZyYW1lID0gdGhpcy5fZnJhbWVzLmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhcnRGcmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gc3RhcnRGcmFtZSAqIDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVuZGVyKHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmUgb25lIGZyYW1lIGZvcndhcmRzIChhbmQgY2hhbmdlIGRpcmVjdGlvbilcbiAgICAgKi9cbiAgICBzdGVwRm9yd2FyZHMoKSB7XG4gICAgICAgIHRoaXMuYmFja3dhcmRzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RlcCgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZSBvbmUgZnJhbWUgYmFja3dhcmRzIChhbmQgY2hhbmdlIGRpcmVjdGlvbilcbiAgICAgKi9cbiAgICBzdGVwQmFja3dhcmRzKCkge1xuICAgICAgICB0aGlzLmJhY2t3YXJkcyA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RlcCgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhpcyBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7TmRKc29uUGxheWVyfVxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICBpZiAodGhpcy5jdHgucmVzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jdHgucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICAgIC8vUmVzZXQgYWxsOiBUaGUgZm9sbG93aW5nIGxpbmUgaXMgYSBcImhhY2tcIiB0byBmb3JjZSBpdCB0byByZXNldDpcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBUaGlzIGNsYXNzIGNyZWF0ZXMgdGhlIHBsYXllciBVSVxuICogaHR0cHM6Ly9naXRodWIuY29tL2xlcGUvbmRqc29uLXBsYXllclxuICogQGF1dGhvciBBLkxlcGVcbiAqIEBzaW5jZSAwNC8yMDIwXG4gKi9cbmNsYXNzIE5ESlBsYXllciB7XG4gICAgcGxheWVyOyAgICAvL05kSnNvblBsYXllciBvYmplY3RcbiAgICBvcHRpb25zOyAgIC8vT3B0aW9ucyBmb3IgdGhlIFVJXG4gICAgdWk7ICAgICAgICAvL1RoZSBVSVxuXG4gICAgY29uc3RydWN0b3Ioc3JjLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgX3RoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgY29udHJvbHM6IGZhbHNlLFxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIGNvbnRyb2xzIDogeyAvL0V4YW1wbGUgb24gaG93IHRvIHNob3cvaGlkZSBlbGVtZW50c1xuICAgICAgICAgICAgICAgIGJhc2UgOiBcImZ1bGxcIiwgLy9XaGljaCBvbmUgdG8gdXNlIGFzIGJhc2VcbiAgICAgICAgICAgICAgICBwbGF5OiB0cnVlLCAvL3Nob3cgcGxheS9wYXVzZVxuICAgICAgICAgICAgICAgIHN0b3A6IHRydWUsXG4gICAgICAgICAgICAgICAgc3RlcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0aHVtYnM6IHRydWUsXG4gICAgICAgICAgICAgICAgZnVsbHNjcmVlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzcGVlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXBzZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmcmFtZXM6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmVzaXplOiB0cnVlLCAvL3NldCBpdCB0byBmYWxzZSB0byBkaXNhYmxlIGFkanVzdGluZyB0aGUgc2l6ZSBiZWZvcmUgc3RhcnRpbmdcbiAgICAgICAgICAgIG9uYWN0aW9uIDogKGFjdGlvbiwgbmRqUGxheWVyLCB1aVBsYXllcikgPT4ge30sXG4gICAgICAgICAgICBvbnBsYXkgOiAobmRqUGxheWVyKSA9PiB7fSxcbiAgICAgICAgICAgIG9uc3RvcCA6IChuZGpQbGF5ZXIpID0+IHt9XG4gICAgICAgIH0sIG9wdGlvbnMgfHwge30pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBVSVxuICAgICAgICB0aGlzLl9jcmVhdGUoZWxlbWVudCk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgcGxheWVyXG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IE5kSnNvblBsYXllcihzcmMsIGVsZW1lbnQsIF90aGlzLm9wdGlvbnMsIHtcbiAgICAgICAgICAgIG9uc3RhcnQgOiBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2FkanVzdFNpemUoKVxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLm9uc3RhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uc3RhcnQocGxheWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25sb2FkIDogZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICAgIGlmKF90aGlzLm9wdGlvbnMub25sb2FkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbmxvYWQocGxheWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25yZW5kZXIgOiBmdW5jdGlvbiAoZnJhbWUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fb25VcGRhdGUoZnJhbWUpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLm9ucmVuZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbnJlbmRlcihmcmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9ucGxheSA6IGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgIF90aGlzLnVpLnBsYXkuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmKCEgX3RoaXMudWkuc3RlcC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5zdGVwLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMudWkucGF1c2Uuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbnBsYXkocGxheWVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnN0b3AgOiBmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5wbGF5LnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmKCEgX3RoaXMudWkuc3RlcC5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5zdGVwLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy51aS5wYXVzZS5zaG93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbnN0b3AocGxheWVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmZpbmlzaDogZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICAgIC8vcGxheWVyLnN0b3AoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uZXJyb3IgOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgIC8vVE9ETzogRGlzcGxheSBlcnJvciBpbiBwbGF5ZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBVSVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX29uVXBkYXRlKGZyYW1lKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgaWYoX3RoaXMudWkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYoX3RoaXMudWkuZnJhbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5mcmFtZXMudGV4dCA9IChfdGhpcy5wbGF5ZXIuY3VycmVudEZyYW1lKCkgKyAxKSArIFwiL1wiICsgX3RoaXMucGxheWVyLnRvdGFsRnJhbWVzKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF90aGlzLnVpLmxhcHNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgdHMgPSBfdGhpcy5wbGF5ZXIuX3N0YXJ0VGltZVN0YW1wICYmIGZyYW1lLnRzICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGZyYW1lLnQgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBjb25zdCB0dCA9IF90aGlzLnBsYXllci5fdG90VGltZSA+IDA7XG4gICAgICAgICAgICAgICAgaWYoZnJhbWUuZCkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gZnJhbWUuZCArIFwiIFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih0cykge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IF90aGlzLl9mb3JtYXRNaWxsaXMoZnJhbWUudHMgLSBfdGhpcy5wbGF5ZXIuX3N0YXJ0VGltZVN0YW1wKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYodCkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IGZyYW1lLnQuaW5kZXhPZihcIjpcIikgPiAwID8gZnJhbWUudCA6IF90aGlzLl9mbXRUaW1lKGZyYW1lLnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih0dCkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IFwiL1wiICsgX3RoaXMucGxheWVyLnRvdGFsVGltZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLnVpLmxhcHNlLnRleHQgPSB0ZXh0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihfdGhpcy51aS5wcm9ncmVzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMudWkucHJvZ3Jlc3MudmFsdWUgPSAoKF90aGlzLnBsYXllci5jdXJyZW50RnJhbWUoKSArIDEpIC8gKF90aGlzLnBsYXllci50b3RhbEZyYW1lcygpKSkgKiAxMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJdCB3aWxsIGFkanVzdCB0aGUgdmlkZW8gYW5kIGNhbnZhcyBzaXplXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfYWRqdXN0U2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZXNpemUpIHtcbiAgICAgICAgICAgIGxldCBwbGF5ZXIgPSB0aGlzLnBsYXllci53cmFwcGVyO1xuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHBsYXllci5wYXJlbnQoKTtcbiAgICAgICAgICAgIGlmIChwbGF5ZXIuY2xpZW50SGVpZ2h0ID4gcGFyZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgICAgICAgICAgIGxldCByYXRpb1cgPSB0aGlzLnBsYXllci5jYW52YXMuaGVpZ2h0IC8gdGhpcy5wbGF5ZXIuY2FudmFzLndpZHRoO1xuICAgICAgICAgICAgICAgIGxldCByYXRpb0ggPSAxIC8gcmF0aW9XO1xuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmNhbnZhcy5oZWlnaHQgPSBwYXJlbnQuY2xpZW50SGVpZ2h0IC0gKHRoaXMub3B0aW9ucy5jb250cm9scyA/IHBsYXllci5xdWVyeVNlbGVjdG9yKFwiLnBhbmVsXCIpLmNsaWVudEhlaWdodCA6IDApO1xuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmNhbnZhcy53aWR0aCA9IHBhcmVudC5jbGllbnRXaWR0aCAqIChyYXRpb1cgPCAxID8gcmF0aW9XIDogcmF0aW9IKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIFVJXG4gICAgICogQHBhcmFtIGVsZW1lbnQgU2VsZWN0b3JcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jcmVhdGUoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGNvbnN0ICQgPSBtMmQyLmxvYWQoKTtcbiAgICAgICAgX3RoaXMudWkgPSAkKGVsZW1lbnQsIF90aGlzLl9nZXRVSShlbGVtZW50KSk7XG4gICAgICAgIFtcInRodW1iXCIsIFwicGxheVwiLCBcInN0ZXBcIiwgXCJwYXVzZVwiLCBcInN0b3BcIiwgXCJsYXBzZVwiLCBcInByb2dyZXNzXCIsIFwiZnJhbWVzXCIsIFwiZnVsbHNjcmVlblwiXS5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgIF90aGlzLnVpW2l0XSA9IF90aGlzLnVpLnBhbmVsW2l0XTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hvb3NlIHRoZSBVSSB0byBkaXNwbGF5XG4gICAgICogQHBhcmFtIGVsZW1lbnQgU2VsZWN0b3JcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0VUkoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGxldCB1aSA9IHsgaHRtbCA6IChlbGVtZW50LmlubmVySFRNTCB8fCBcIlwiKSB9OyAvLyBJZiBubyBjb250cm9scyBhcmUgc3BlY2lmaWVkXG5cbiAgICAgICAgLy8gbm9pbnNwZWN0aW9uIEZhbGxUaHJvdWdoSW5Td2l0Y2hTdGF0ZW1lbnRKU1xuICAgICAgICBpZihfdGhpcy5vcHRpb25zLmNvbnRyb2xzKSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsID0gX3RoaXMub3B0aW9ucy5jb250cm9scyA9PT0gXCJmdWxsXCI7XG4gICAgICAgICAgICBjb25zdCBjb21tb24gPSBfdGhpcy5vcHRpb25zLmNvbnRyb2xzID09PSBcImNvbW1vblwiO1xuICAgICAgICAgICAgdWkgPSB0aGlzLl9nZXRCYXNpY1VJKCk7XG4gICAgICAgICAgICBpZihmdWxsKSB7XG4gICAgICAgICAgICAgICAgdWkucGFuZWwuc3RvcC5zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB1aS5wYW5lbC5sYXBzZS5zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB1aS5wYW5lbC5zdGVwLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdWkucGFuZWwuZnJhbWVzLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHVpLnBhbmVsLmZ1bGxzY3JlZW4uc2hvdyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihjb21tb24pIHtcbiAgICAgICAgICAgICAgICB1aS5wYW5lbC5mcmFtZXMuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuY29udHJvbHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAvL1RPRE86IHdoYXQgdG8gc2hvdyBhbmQgd2hhdCBub3QgdG8gc2hvd1xuICAgICAgICB9XG4gICAgICAgIGxldCByb290ID0gZWxlbWVudCBpbnN0YW5jZW9mIE5vZGUgPyBlbGVtZW50IDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50KTtcbiAgICAgICAgaWYgKHJvb3QpIHtcbiAgICAgICAgICAgIGxldCBjYW52YXMgPSByb290LnF1ZXJ5U2VsZWN0b3IoXCJjYW52YXNcIik7XG4gICAgICAgICAgICBpZiAoIWNhbnZhcykge1xuICAgICAgICAgICAgICAgIHVpID0gT2JqZWN0LmFzc2lnbih7IGNhbnZhcyA6IFwiXCIgfSwgdWkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJSb290IGVsZW1lbnQ6IFwiICsgZWxlbWVudCArIFwiIHdhcyBub3QgZm91bmQgaW4gZG9jdW1lbnRcIik7XG4gICAgICAgICAgICB1aSA9IE9iamVjdC5hc3NpZ24oeyBjYW52YXMgOiBcIlwiIH0sIHVpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdWk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmFzaWMgVUlcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldEJhc2ljVUkoKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZnVsbHNjcmVlbmNoYW5nZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGxheWVyID0gX3RoaXMucGxheWVyLndyYXBwZXI7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY2xhc3NMaXN0LmFkZChcImZ1bGxzY3JlZW5cIilcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLmNsYXNzTGlzdC5yZW1vdmUoXCJmdWxsc2NyZWVuXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FwdGlvbiA6IFwiXCIsXG4gICAgICAgICAgICBwYW5lbCA6IHtcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwicGFuZWxcIixcbiAgICAgICAgICAgICAgICB0aHVtYiA6IHsgLy9DcmVhdGUgXCJ0aHVtYlwiIGluc2lkZSBwYW5lbFxuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJmaWd1cmVcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJ0aHVtYlwiLFxuICAgICAgICAgICAgICAgICAgICBzaG93IDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGltZyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FwdGlvbiA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImZpZ0NhcHRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjYXB0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93IDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gQnV0dG9uc1xuICAgICAgICAgICAgICAgIHBsYXkgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJwbGF5XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlBsYXlcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwicGxheVwiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXllci5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhdXNlIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwicGF1c2VcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUGF1c2VcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5vbmFjdGlvbihcInBhdXNlXCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGxheWVyLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0ZXAgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJzdGVwXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlN0ZXBcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkIDogdHJ1ZSwgLy8gRG8gbm90IHNob3cgYnkgZGVmYXVsdFxuICAgICAgICAgICAgICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkub25hY3Rpb24oXCJzdGVwXCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGxheWVyLnN0ZXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RvcCA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcInN0b3BcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiU3RvcFwiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwic3RvcFwiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXllci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIFRpbWUgTGFwc2VcbiAgICAgICAgICAgICAgICBsYXBzZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwibGFiZWxcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJsYXBzZVwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJUaW1lIGVsYXBzZWQgLyBUaW1lIFRvdGFsXCIsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiMDowMFwiLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgYmFyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgICAgICAgICBtYXg6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgc2hvdyA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG9ubW91c2Vtb3ZlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gfn4oKChlLm9mZnNldFgpIC8gdGhpcy5vZmZzZXRXaWR0aCkgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZyYW1lID0gX3RoaXMucGxheWVyLmZyYW1lQXQoX3RoaXMucGxheWVyLmluZGV4QXQocG9zaXRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLmltZy5zcmMgPSBfdGhpcy5wbGF5ZXIuZnJhbWVCYXNlKCkgKyAoZnJhbWUudGggfHwgZnJhbWUuZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IF90aGlzLnVpLnRodW1iLmltZy5uYXR1cmFsV2lkdGggfHwgX3RoaXMudWkudGh1bWIuaW1nLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS50aHVtYi5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJhbWUudGMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS50aHVtYi5jYXB0aW9uID0gZnJhbWUudGM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLnN0eWxlLmxlZnQgPSAodGhpcy5vZmZzZXRMZWZ0ICsgZS5vZmZzZXRYIC0gKF90aGlzLnVpLnRodW1iLmNsaWVudFdpZHRoIC8gMikpICsgXCJweFwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25tb3VzZWxlYXZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS50aHVtYi5zaG93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSB+figoKGUub2Zmc2V0WCkgLyB0aGlzLm9mZnNldFdpZHRoKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBfdGhpcy5wbGF5ZXIuaW5kZXhBdChwb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wbGF5ZXIuanVtcFRvKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwicHJvZ3Jlc3NcIiwgX3RoaXMucGxheWVyLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIEZyYW1lIGNvdW50XG4gICAgICAgICAgICAgICAgZnJhbWVzIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJsYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcImZyYW1lc1wiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJDdXJyZW50IEZyYW1lIC8gVG90YWwgRnJhbWVzXCIsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gRnVsbHNjcmVlbiB0b2dnbGVcbiAgICAgICAgICAgICAgICBmdWxsc2NyZWVuIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwiZnVsbHNjcmVlblwiLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJGdWxsIFNjcmVlblwiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIixcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheWVyID0gX3RoaXMucGxheWVyLndyYXBwZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihwbGF5ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZnVsbHNjcmVlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwiZXhpdC1mdWxsc2NyZWVuXCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwiZnVsbHNjcmVlblwiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy9zaXplcyA6IFtcIlNEXCIsIFwiSERcIiwgXCI0S1wiXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmFjdGlvbiA6IGZ1bmN0aW9uKGFjdGlvbiwgbmRqUGxheWVyLCB1aVBsYXllcikge1xuICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25hY3Rpb24oYWN0aW9uLCBuZGpQbGF5ZXIsIHVpUGxheWVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnBsYXkgOiBmdW5jdGlvbihuZGpQbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9ucGxheShuZGpQbGF5ZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uc3RvcCA6IGZ1bmN0aW9uKG5kalBsYXllcikge1xuICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25zdG9wKG5kalBsYXllciwgdWlQbGF5ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0IGEgdGltZSwgZm9yIGV4YW1wbGU6IDEyMC4zNCB3aWxsIGJlIGNvbnZlcnRlZCBpbnRvOiAwMjowMC4zNFxuICAgICAqIEBwYXJhbSB0aW1lIGludFxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZm10VGltZSh0aW1lKSB7XG4gICAgICAgIHRpbWUgPSB0aW1lLnRvRml4ZWQoMik7XG4gICAgICAgIGxldCBkZWNpbWFsID0gdGltZS5zcGxpdChcIi5cIilbMV0gfHwgXCIwMFwiO1xuICAgICAgICByZXR1cm4gKH5+KHRpbWUgLyA2MCkgKyBcIlwiKS5wYWRTdGFydCgyLCAnMCcpICsgXCI6XCIgKyAofn4oKHRpbWUgLyA2MCkgJSAxICogNjApICsgXCJcIikucGFkU3RhcnQoMiwgJzAnKSArIFwiLlwiICsgZGVjaW1hbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0IG1pbGxpc2Vjb25kcywgZm9yIGV4YW1wbGU6IDkwMDAwIHdpbGwgYmUgY29udmVydGVkIGludG86IDAwOjAxOjMwLjAwMFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2Zvcm1hdE1pbGxpcyhtaWxsaXMpIHtcbiAgICAgICAgZnVuY3Rpb24gcGFkKG51bSwgZGlnaXRzKSB7XG4gICAgICAgICAgICByZXR1cm4gKFwiMDBcIiArIG51bSkuc2xpY2UoKGRpZ2l0cyB8fCAyKSAqIC0xKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoID0gTWF0aC5mbG9vcihtaWxsaXMvMTAwMC82MC82MCk7XG4gICAgICAgIGNvbnN0IG0gPSBNYXRoLmZsb29yKChtaWxsaXMvMTAwMC82MC82MCAtIGgpKjYwKTtcbiAgICAgICAgY29uc3QgcyA9IE1hdGguZmxvb3IoKChtaWxsaXMvMTAwMC82MC82MCAtIGgpKjYwIC0gbSkqNjApO1xuICAgICAgICBjb25zdCBtcyA9IHBhcnNlSW50KChtaWxsaXMgJSAxMDAwKSAvIDEwMCk7XG4gICAgICAgIHJldHVybiBwYWQoaCkgKyBcIjpcIiArIHBhZChtKSArIFwiOlwiICsgcGFkKHMpICsgXCIuXCIgKyBwYWQobXMsIDMpO1xuICAgIH1cbn0iLCIvKipcbiAqIEBhdXRob3I6IEEuIExlcGVcbiAqIE1hbmFnZSBUaW1lcnNcbiAqIFVzYWdlOlxuICogdmFyIHQgPSBuZXcgVGltZXJTcmMoMTAwMCk7XG4gKiB0LmNhbGwoZnVuY3Rpb24oKSB7IDxkbz4gfSk7XG4gKiBvcjpcbiAqIHZhciB0ID0gbmV3IFRpbWVyU3JjKDEwMDAsZnVuY3Rpb24oKXsgPGRvPiB9KTtcbiAqIHQucGF1c2UoKTtcbiAqIHQuZGVzdHJveSgpO1xuICovXG5mdW5jdGlvbiBUaW1lclNyYyhvcmlnaW5hbF9tcywgY2FsbGJhY2spIHtcblx0bGV0IHN0YXJ0VGltZSwgdGltZXIsIG9iaiA9IHt9LCBhY3Rpb24sIG1zO1xuXHRvYmouaW50ZXJ2YWwgPSBvcmlnaW5hbF9tczsgLy9QdWJsaWMuIENhbiBiZSB1cGRhdGVkXG5cdG9iai5jaGVja2VyID0gNTA7IC8vIGFkanVzdCB0aGlzIG51bWJlciB0byBhZmZlY3QgZ3JhbnVsYXJpdHlcblx0b2JqLnN0YXR1cyA9IFwiaW5pdFwiO1xuXHRsZXQgbm93VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRzdGFydFRpbWUgPSBub3dUaW1lIC0gb3JpZ2luYWxfbXM7IC8vc3RhcnQgcmlnaHQgYXdheVxuXHRvYmouY2FsbCA9IGZ1bmN0aW9uKGZ1bmMpIHtcblx0XHRjYWxsYmFjayA9IGZ1bmM7XG5cdFx0cmV0dXJuIG9iajtcblx0fTtcblx0b2JqLm5vY2FsbCA9IGZ1bmN0aW9uKCkge1xuXHRcdGNhbGxiYWNrID0gbnVsbDtcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuXHQvL0V4ZWN1dGUgdGhlIGNhbGxiYWNrIG1hbnVhbGx5IGFuZCByZXNldCB0aGUgdGltZXJcblx0b2JqLmV4ZWMgPSBmdW5jdGlvbigpIHtcblx0XHRpZihjYWxsYmFjaykgY2FsbGJhY2soKTtcblx0XHRzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuXHQvLyBDaGVja3MgdGhlIHN0YXR1cyBvZiB0aGUgdGltZXJcblx0b2JqLmNoZWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYoYWN0aW9uKSBhY3Rpb24oKTtcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuICAgIG9iai5wbGF5ID0gZnVuY3Rpb24oKSB7XG5cdFx0YWN0aW9uID0gb2JqLnN0ZXA7XG5cdFx0b2JqLnN0YXR1cyA9IFwicnVubmluZ1wiO1xuXHRcdHJldHVybiBvYmo7XG4gICAgfTtcbiAgICBvYmoucGF1c2UgPSBmdW5jdGlvbigpIHtcblx0XHRhY3Rpb24gPSBudWxsO1xuXHRcdG9iai5zdGF0dXMgPSBcInBhdXNlZFwiO1xuXHRcdHJldHVybiBvYmo7XG4gICAgfTtcblx0b2JqLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcblx0XHRhY3Rpb24gPSBudWxsO1xuICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcblx0XHR0aW1lciA9IG51bGw7XG5cdFx0Zm9yKHZhciBvIGluIG9iaikge1xuXHRcdFx0b2JqW29dID0gbnVsbDtcblx0XHRcdGRlbGV0ZSBvYmpbb107XG5cdFx0fVxuXHRcdG9iai5zdGF0dXMgPSBcImRlc3Ryb3llZFwiO1xuXHR9O1xuICAgIG9iai5zdGVwID0gZnVuY3Rpb24oKSB7XG5cdFx0bm93VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBtcyA9IE1hdGgubWF4KDAsIG9iai5pbnRlcnZhbCAtIChub3dUaW1lIC0gc3RhcnRUaW1lKSk7XG4gICAgICAgIGlmKG1zID09PSAwKSB7XG5cdFx0XHRtcyA9IG9iai5pbnRlcnZhbDtcblx0XHRcdHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRcdFx0aWYoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuXHRvYmouc2xvdyA9IGZ1bmN0aW9uKCkge1xuXHRcdG9iai5pbnRlcnZhbCA9IDEwMDA7XG5cdFx0cmV0dXJuIG9iajtcblx0fTtcblx0b2JqLmZhc3QgPSBmdW5jdGlvbigpIHtcblx0XHRvYmouaW50ZXJ2YWwgPSBvcmlnaW5hbF9tcztcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuICAgIHRpbWVyID0gc2V0SW50ZXJ2YWwob2JqLmNoZWNrLCBvYmouY2hlY2tlcik7XG4gICAgcmV0dXJuIG9iajtcbn1cbiIsIi8qKlxuICogSFRNTCBpbXBsZW1lbnRhdGlvbiBvZiBuZGpzb24tcGxheWVyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbGVwZS9uZGpzb24tcGxheWVyXG4gKiBAYXV0aG9yIEEuTGVwZVxuICogQHNpbmNlIDA0LzIwMjBcbiAqXG4gKiBFeGFtcGxlIHNwZWNpZnlpbmcgbXVsdGlwbGUgc2l6ZXM6XG4gKiA8dmlkZW8tbmQgc3JjPVwiL3ZpZGVvL2RlbW8ubmRqc29uXCIgY29udHJvbHMgbG9vcCBhdXRvcGxheT5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby1RVkdBLm5kanNvblwiIHdpZHRoPVwiMzIwXCI+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tVkdBLm5kanNvblwiIHdpZHRoPVwiNjQwXCI+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tU1ZHQS5uZGpzb25cIiB3aWR0aD1cIjgwMFwiPlxuICogICAgICA8c291cmNlIHNyYz1cIi92aWRlby9kZW1vLUhELm5kanNvblwiIHdpZHRoPVwiMTI4MFwiIGhlaWdodD1cIjcyMFwiPlxuICogICAgICA8c291cmNlIHNyYz1cIi92aWRlby9kZW1vLUZ1bGxIRC5uZGpzb25cIiB3aWR0aD1cIjE5MjBcIiBoZWlnaHQ9XCIxMDgwXCI+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tNEsubmRqc29uXCIgd2lkdGg9XCIzODQwXCIgaGVpZ2h0PVwiMjE2MFwiPlxuICogPC92aWRlby1uZD5cbiAqXG4gKiBFeGFtcGxlIHNwZWNpZnlpbmcgdHJhY2tzOlxuICogICh0cnlpbmcgdG8gYmUgYXMgY2xvc2UgdG86IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvRWxlbWVudC90cmFjaylcbiAqIE5PVEU6IFZUVCBmb3JtYXQgaXMgbm90IHN1cHBvcnRlZCBhcyBpdCBpcyBiYXNlZCBpbiB0aW1lZCB0ZXh0LCB3aGlsZVxuICogd2UgbmVlZCB0byBiZSBzdXJlIHRoZXkgYXJlIHN5bmMgd2l0aCBpbWFnZXMgdXNpbmcgZnJhbWVzIGluc3RlYWQgb2YgdGltZS5cbiAqXG4gKiA8dmlkZW8tbmQgc3JjPVwiL3ZpZGVvL2RlbW8ubmRqc29uXCIgY29udHJvbHMgbG9vcCBhdXRvcGxheT5cbiAqICAgIDx0cmFjayBzcmM9XCIvaW5mby9kYXRhLnR4dFwiIGtpbmQ9XCJkZXNjcmlwdGlvbnNcIiBsYWJlbD1cIkRhdGFcIj5cbiAqIDwvdmlkZW8tbmQ+XG4gKlxuICogVHJhY2sgdHlwZXM6XG4gKiBjYXB0aW9ucyAgICAgOiBEaXNwbGF5ZWQgb24gdGhlIGNlbnRlclxuICogY2hhcHRlcnMgICAgIDogSXQgd2lsbCBiZSBkaXNwbGF5ZWQgaW4gdGhlIHRvcCAoYWxzbyB1c2VmdWwgZm9yIG5hdmlnYXRpb24pXG4gKiBkZXNjcmlwdGlvbnMgOiBEaXNwbGF5ZWQgb24gdG9wIGxlZnQgY29ybmVyXG4gKiBtZXRhZGF0YSAgICAgOiBEaXNwbGF5ZWQgb24gdG9wIHJpZ2h0IGNvcm5lclxuICogc3VidGl0bGVzICAgIDogRGlzcGxheWVkIG9uIHRoZSBib3R0b21cbiAqXG4gKiBUaGUgZm9ybWF0IG9mIHRoZSBUWFQgZmlsZSBpcyBcImZyYW1lLW9yLXJhbmdlIyBzcGFjZS1vci10YWIgdGV4dFwiLCBmb3IgZXhhbXBsZTpcbiAqIDIwLTMwICAgIE9iamVjdHM8YnI+YnkgY29sb3I6XG4gKiAzNSAgIEJsdWU6IDIsIFJlZDogMVxuICogMzYgICBCbHVlOiAzLCBSZWQ6IDFcbiAqIDM3ICAgQmx1ZTogMiwgUmVkOiAyXG4gKlxuICogQWJvdXQgY2hhcHRlcnM6XG4gKiBBZGRpdGlvbmFsbHkgdG8gYmVpbmcgZGlzcGxheWVkIG9uIHRoZSB0b3AgYXMgYSB0aXRsZSwgaWYgdXNlZCwgaXQgd2lsbCBkaXNwbGF5IG5leHQgYW5kIHByZXYgYnV0dG9ucy5cbiAqIEZvciBleGFtcGxlOlxuICogYDx0cmFjayBzcmM9XCIvY2hhcHRlcnMvZmlsZS50eHRcIiBraW5kPVwiY2hhcHRlcnNcIj5gXG4gKlxuICogZmlsZS50eHQ6XG4gKiAwLTEwIENoYXB0ZXIgMTo8YnI+VGhlIGJlZ2lubmluZ1xuICogMzUyLTM2MCBDaGFwdGVyIDI6PGJyPlRoZSBtb21lbnRcbiAqIDY4OS03MTAgTGFzdCBDaGFwdGVyOjxicj5UaGUgZW5kXG4gKlxuICogV2hlbmV2ZXIgeW91IGNsaWNrIG9uICdwcmV2JyBvciAnbmV4dCcgaXQgd2lsbCB1c2UgdGhlIGJlZ2lubmluZyBvZiBlYWNoIGNoYXB0ZXIgdG8ganVtcCBpbnRvIHNjZW5lcy5cbiAqIFRoZSByYW5nZSBpcyB1c2VkIHRvIGRpc3BsYXkgaXQuIElmIHlvdSBkb24ndCBzZXQgYSByYW5nZSAoanVzdCBhIGZyYW1lIG51bWJlciksIGl0IHdpbGwgYmUgZGlzcGxheWVkIGZvciAzcy5cbiAqL1xuY2xhc3MgVmlkZW9ORCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLy8gY3JlYXRlIHNoYWRvdyBkb20gcm9vdFxuICAgICAgICB0aGlzLl9yb290ID0gdGhpczsgLy90aGlzLmF0dGFjaFNoYWRvdyh7bW9kZTogJ29wZW4nfSk7XG4gICAgICAgIC8vdGhpcy5fcm9vdC5pbm5lckhUTUwgPSBgYDtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXM7XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAvLyBBdHRyaWJ1dGVzIHNpbWlsYXIgdG8gPHZpZGVvPiB0YWc6XG4gICAgICAgICAgICBhdXRvcGxheSA6IGZhbHNlLFxuICAgICAgICAgICAgY29udHJvbHMgOiBmYWxzZSzjgIAvL3RydWU6IG1vc3QgYmFzaWMgVUksICdjb21tb24nLCAnZnVsbCcsIG9yIGxpc3QsIGZvciBleGFtcGxlOiAncGxheSBwcm9ncmVzcyBsYXBzZSBmcmFtZXMnXG4gICAgICAgICAgICBsb29wICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgd2lkdGggICAgOiAnYXV0bycsXG4gICAgICAgICAgICBoZWlnaHQgICA6ICdhdXRvJyxcbiAgICAgICAgICAgIHBvc3RlciAgIDogJycsXG4gICAgICAgICAgICBwcmVsb2FkICA6ICdhdXRvJywgLy9PcHRpb25zIGFyZTogJ21ldGFkYXRhJywgJ25vbmUnLFxuICAgICAgICAgICAgc3JjICAgICAgOiAnJywgICAgIC8vVVJMICFpbXBvcnRhbnRcbiAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgYXR0cmlidXRlczpcbiAgICAgICAgICAgIGNjICAgICAgICAgIDogJ2F1dG8nLCAvL0VuYWJsZSBDQyBidXR0b25cbiAgICAgICAgICAgIGNhcHRpb24gICAgIDogJycsIC8vU2V0IHNvbWUgY2FwdGlvbiBvdmVyIHRoZSB2aWRlb1xuICAgICAgICAgICAgZnVsbHNjcmVlbiAgOiBmYWxzZSwgLy9Vc2UgJ2F1dG8nIHRvIG9ubHkgZGlzcGxheSBidXR0b24uIHRydWUgPSBzdGFydCBhcyBmdWxsc2NyZWVuXG4gICAgICAgICAgICBmcHMgICAgICAgICA6ICcnLCAvL3NwZWNpZnkgdmlkZW8gZnBzIChpZiBpdHMgbm90IGluIHRoZSBtZXRhZGF0YSlcbiAgICAgICAgICAgIHNwZWVkICAgICAgIDogZmFsc2UsIC8vRGlzcGxheSBzcGVlZCBtZW51XG4gICAgICAgICAgICBhdXRvc2l6ZSAgICA6ICdhdXRvJywgLy9BdXRvbWF0aWNhbGx5IGNob29zZSBiZXN0IHNpemUgZnJvbSBzaXplc1xuICAgICAgICAgICAgc2l6ZXMgICAgICAgOiB7fSB8fCBbXSwgLy9TcGVjaWZ5IGF2YWlsYWJsZSBzaXplcy4gRXhhbXBsZTogeyBIRCA6IDEyMDAgfSBvciBbODAwLCAxMjAwLCAxODAwXVxuICAgICAgICAgICAgdGh1bWJzICAgICAgOiAnYXV0bycsIC8vU2hvdyB0aHVtYm5haWxzIHdoZW4gcGxhY2luZyBtb3VzZSBvdmVyIHByb2dyZXNzXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgICAgICAgZm9yKGxldCBkIGluIGRlZmF1bHRPcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zW2RdID0gdGhpcy5nZXRBdHRyaWJ1dGUoZCkgfHwgdGhpcy5oYXNBdHRyaWJ1dGUoZCkgfHwgZGVmYXVsdE9wdGlvbnNbZF07XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5vbnN0YXJ0ID0gZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgaWYocm9vdC5vbnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcm9vdC5vbnN0YXJ0KHBsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5vbmxvYWQgPSBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICBpZihyb290Lm9ubG9hZCkge1xuICAgICAgICAgICAgICAgIHJvb3Qub25sb2FkKHBsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5vbnJlbmRlciA9IGZ1bmN0aW9uKGZyYW1lKSB7XG4gICAgICAgICAgICBpZihyb290Lm9ucmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgcm9vdC5vbnJlbmRlcihmcmFtZSwgbmRqUGxheWVyLndyYXBwZXIsIG5kalBsYXllciwgbmRqUGxheWVyLnBsYXllci5jYW52YXMsIG5kalBsYXllci5wbGF5ZXIuY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBcIm5kanBcIjtcbiAgICAgICAgY29uc3QgbmRqUGxheWVyID0gbmV3IE5ESlBsYXllcihvcHRpb25zLnNyYywgdGhpcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgc2V0Q2FwdGlvbihjYXB0aW9uKSB7XG4gICAgICAgIHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvcihcImNhcHRpb25cIikuaW5uZXJUZXh0ID0gY2FwdGlvbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFsgJ3dpZHRoJywgJ2hlaWdodCcsICdjYXB0aW9uJyBdO1xuICAgIH1cblxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdjYXB0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5zZXRDYXB0aW9uKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3ZpZGVvLW5kJywgVmlkZW9ORCk7XG59KTtcbiJdfQ==

//# sourceMappingURL=ndjson-player.min.js.map
