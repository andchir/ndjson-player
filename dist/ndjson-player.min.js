/**
 * Author : A.Lepe (dev@alepe.com)
 * License: MIT
 * Version: 0.1.8
 * Updated: 2022-05-11
 * Content: ndjson-player.min.js (Bundle Minimized)
 */

!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.m2d2=t()}(this,(function(){"use strict";class e{isString(e){return"string"==typeof e}isBool(e){return"boolean"==typeof e}isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}isSelectorID(e){return 0===(e+"").trim().indexOf("#")}isPlainObject(e){return"Object"===e.constructor.name}isObject(e){return"object"==typeof e}isArray(e){return Array.isArray(e)}isFunction(e){return"function"==typeof e}isElement(e){return e instanceof HTMLElement}isNode(e){return e instanceof Node||e instanceof DocumentFragment}isHtml(e){return-1!==(e+"").trim().indexOf("<")}isEmpty(e){return void 0===e||this.isObject(e)&&0===Object.keys(e).length||""===e}isVisible(e){if(!this.isElement(e))return console.log("(isVisible) Not an element: "),console.log(e),!1;const t="none"!==e.style.display,s="hidden"!==e.style.visibility;return t&&s}inView(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.width>0&&t.height>0}cleanArray(e){return e.filter((function(e){return 0===e||e}))}isValidElement(e){const t=this.newElement(e);return"template"!==e&&"HTMLUnknownElement"!==t.constructor.name}exists(e){return null!==document.querySelector(e)}getAttrOrProp(e,t){let s="";return this.hasAttrOrProp(e,t)&&(s=this.hasAttr(e,t)?e.getAttribute(t):e[t]),s}hasAttrOrProp(e,t){return this.hasAttr(e,t)||this.hasProp(e,t)}hasAttr(e,t){let s=!1;if(e&&!this.isNumeric(t))if("checked"===t)s=void 0!==e.type&&("radio"===e.type||"checkbox"===e.type);else s=void 0!==e.hasAttribute&&e.hasAttribute(t);return s}hasProp(e,t){let s=!1;if(e&&!this.isNumeric(t)){let n=void 0!==e[t];n&&null===e[t]&&"value"===t&&(n=!1),s=n&&!(e[t]instanceof Node)&&!e.hasAttribute(t)}return s}setPropOrAttr(e,t,s){if(this.hasProp(e,t))try{e[t]=s}catch(n){this.setAttr(e,t,s)}else this.setAttr(e,t,s)}setAttr(e,t,s){s?e.setAttribute(t,s):e.removeAttribute(t)}defineProp(e,t,s){this.isObject(e)&&void 0===e[t]&&(Object.defineProperty(e,t,{enumerable:!1,writable:!0}),e[t]=s)}htmlElement(e){const t=this.newElement("template");return t.innerHTML=e.trim(),t.content.firstChild}newElement(e){return document.createElement(e)}newEmptyNode(){return new DocumentFragment}getMethods(e){const t=Reflect.getPrototypeOf(e),s=Reflect.getPrototypeOf(t);return Reflect.ownKeys(t).filter((e=>Reflect.ownKeys(s).indexOf(e)<0))}appendAllChild(e,t){for(;e.firstChild;)t.append(e.firstChild)}prependAllChild(e,t){for(;e.firstChild;)t.prepend(e.firstChild)}}class t{"use strict";_stored={events:[],datasetNodes:[],datasets:[],styleNodes:[],styles:[]};static storedEventsTimeout=50;static short=!0;static updates=!0;static utils=new e;constructor(){}static instance=new t;static extensions={};static main=(()=>{const e=(e,s)=>{const n=this.instance.getProxyNode(e,s);return n&&n.onready&&t.utils.isFunction(n.onready)&&(n.addEventListener("ready",n.onready,{once:!0}),setTimeout((()=>{n.dispatchEvent(new CustomEvent("ready"))}),10)),["dataset","style"].forEach((e=>{n&&n[e]&&(this.instance._stored[e+"s"].push(n[e]),this.instance._stored[e+"Nodes"].push(n))})),n};return t.utils.getMethods(t.utils).forEach((s=>{e[s]=t.utils[s]})),e})();static ready(e){document.addEventListener("DOMContentLoaded",(()=>{e(t.main)}))}static load(e){if(void 0!==e){const s=e(t.main);t.utils.isObject(s)&&!t.utils.isEmpty(s)&&Object.keys(s).forEach((e=>{if(t.utils.isValidElement(e)){void 0===t.extensions[e]&&(t.extensions[e]={});const n=t.utils.newElement(e);Object.keys(s[e]).forEach((s=>{t.utils.hasProp(n,s)&&console.log("Warning: property ["+s+"] already exists in node: ["+e+"] while trying to extend it. Unexpected behaviour may happen.")})),Object.assign(t.extensions[e],s[e])}else{void 0===t.extensions["*"]&&(t.extensions["*"]={});const n=t.utils.newElement("div");Object.keys(s[e]).forEach((e=>{t.utils.hasProp(n,e)&&console.log("Warning: property ["+e+"] already exists in Node while trying to extend it. Unexpected behaviour may happen.")})),Object.assign(t.extensions["*"],s[e])}}))}return t.main}extDom(e,s){if(!e)return console.error("Selector was empty"),null;void 0===s&&(s=document);const n=t.utils.isNode(e)?e:s.querySelector(e);if(!n)return t.utils.isString(e)?(console.error("Selector: "+e+" didn't match any element in node:"),console.log(s)):console.error("Node was null"),null;if(void 0===n._m2d2){n._m2d2=!0,["parent","sibling","next","prev","find","findAll","onupdate","onready","show","onshow","inView","css","text","html","getData","index"].forEach((e=>{n.hasOwnProperty(e)&&(console.log("Node already had ["+e+"] property. It might cause unexpected behaviour."),console.log("You may need to update the M2D2 version or report it to: github.com/intellisrc/m2d2/"))})),Object.defineProperty(n,"text",{get(){return this.childNodes.length?this.innerText:this.textContent},set(e){if(this.childNodes.length){let t=!1;this.childNodes.forEach((s=>{"Text"===s.constructor.name&&(s.nodeValue=e,t=!0)})),t||this.prepend(document.createTextNode(e))}else this.textContent=e}}),Object.defineProperty(n,"html",{get(){return this.innerHTML},set(e){this.innerHTML=e}}),Object.defineProperty(n,"css",{get(){return this.classList},set(e){t.utils.isArray(e)?this.className=e.join(" "):t.utils.isString(e)?this.className=e:t.utils.isPlainObject(e)?Object.keys(e).forEach((t=>{e[t]?this.classList.add(t):this.classList.remove(t)})):console.error("Trying to assign a wrong value to css : "+e)}}),Object.defineProperty(n,"show",{get(){return t.utils.isVisible(this)},set(e){const s=()=>getComputedStyle(this,null).display,n=()=>{const e=document.getElementsByTagName("body")[0],t=document.createElement("template"),s=document.createElement(this.tagName);t.append(s),e.append(t);const n=getComputedStyle(s,null).display;return t.remove(),n};if(e){if("none"===s()){if(this._m2d2_display)this.style.display=this._m2d2_display;else if(this.style.removeProperty("display"),"none"===s()){const e=n();this.style.display=this.dataset.display||("none"!==e?e:"block")}void 0!==this.onshow&&t.utils.isFunction(this.onshow)&&this.onshow(this)}}else{const e="none"!==this.style.display?this.style.display:s();"none"!==e&&(this._m2d2_display=e),this.style.display="none"}}});let e={};return void 0!==t.extensions["*"]&&Object.assign(e,t.extensions["*"]),void 0!==t.extensions[n.tagName]&&Object.assign(e,t.extensions[n.tagName]),Object.assign(n,{inView:()=>t.utils.inView(n),next:()=>n.nextElementSibling,prev:()=>n.previousElementSibling,parent:()=>this.extDom(n.parentElement),sibling:e=>n.parentElement.find(e),find:e=>{const t=n.querySelector(e);return t?this.extDom(t):null},findAll:e=>{const t=void 0===e?Array.from(n.children):n.querySelectorAll(e);return t.forEach((e=>{this.extDom(e)})),t}},e),void 0===n.index&&(n.index=()=>Array.from(n.parentNode.children).indexOf(n)),["INPUT","TEXTAREA","SELECT"].indexOf(n.tagName)>=0&&t.utils.hasAttrOrProp(n,"value")&&(n.oninput=function(){this.setAttribute("value",this.value)}),"FORM"===n.tagName&&(n.getData=function(e){const t={},s=new FormData(this),o=e||!1;for(let e of s.entries()){const s=n.find("[name='"+e[0]+"']");(o||"hidden"===s.type||s.show)&&(t[e[0]]="file"===s.type?s.files:e[1])}return t}),n}return n}doDom(e,s){if(t.utils.isObject(e)&&void 0===s&&(s=e,e=t.utils.newEmptyNode(),void 0===s.warn&&(s.warn=!1)),!(t.utils.isString(e)||t.utils.isElement(e)||t.utils.isNode(e)))return console.error("Selector is not a string or a Node:"),console.log(e),null;if(t.utils.isString(e)&&!document.querySelector(e))return console.log("Selected element doesn't exists: "+e),null;const n=this.extDom(e);if(void 0===s)return n;if(s=this.plainToObject(n,s),Object.keys(s).filter((e=>!["tagName"].includes(e))).forEach((e=>{let o=s[e];null==o&&(console.log("Value was not set for key: "+e+", 'empty' was used in object: "),console.log(s),console.log("In node:"),console.log(n),o="");let i=this.updateValue(n,e,o),a=t.utils.hasProp(n,e),r=!1;if(t.utils.hasAttr(n,e)||a)switch(!0){case"value"===e&&t.utils.hasProp(n,"valueAsDate")&&i instanceof Date:e="valueAsDate";case"css"===e:case typeof i==typeof n[e]:case t.utils.isString(n[e])&&t.utils.isNumeric(i):case t.utils.isFunction(i)&&t.utils.isObject(n[e]):case t.utils.isBool(i)&&t.utils.isString(n[e]):case"object"==typeof n[e]&&"INPUT"===n.tagName:r=!0}if(r){let s=!1;switch(e){case"classList":t.utils.isArray(i)?i.forEach((t=>{n[e].add(t)})):t.utils.isString(i)?n[e].add(i):s=!0;break;case"style":case"dataset":t.utils.isPlainObject(i)?Object.keys(i).forEach((t=>{n[e][t]=this.updateValue(n[e],t,i[t])})):s=!0;break;default:switch(!0){case t.utils.isBool(i):case t.utils.hasAttrOrProp(n,e):t.utils.setPropOrAttr(n,e,i);break;default:n[e]=i}}s&&(console.error("Invalid value passed to '"+e+"': "),console.log(i),console.log("Into Node:"),console.log(n))}else{const a=[];try{if("template"!==e&&!t.utils.isFunction(i)){if(e&&e.match(/^\w/)){let t=n.find("#"+e);t&&-1===a.indexOf(t)&&a.push(t),t=n.find("[name='"+e+"']"),t&&-1===a.indexOf(t)&&a.push(t);const s=Array.from(n.findAll("."+e)).filter((e=>a.indexOf(e)<0));s.length>0&&s.forEach((e=>a.push(e)))}const t=Array.from(n.findAll(e)).filter((e=>a.indexOf(e)<0));t.length>0&&t.forEach((e=>a.push(e)))}}catch(t){return console.error("Invalid selector: "+e),void console.log(t)}if(a.length>1){const t=[];a.forEach((s=>{t.push(this.render(s,e,i))})),this.linkNode(n,e,t),void 0!==i.warn&&!1===i.warn||(console.log("Multiple elements were assigned with key: ["+e+"] under node: "),console.log(n),console.log("It might be what we expect, but if it is not expected it could result on some elements mistakenly rendered. You can specify 'warn : false' under that element to hide this message."))}else if(1===a.length){const r=a[0];if(t.utils.isElement(r)){const a=this.plainToObject(r,i),l=t.utils.isPlainObject(a)&&Object.keys(a).length>=1?Object.keys(a)[0]:null;if(l&&(i=this.updateValue(r,l,o)),t.utils.isArray(i)){const t=s.template;this.doItems(r,i,t),this.linkNode(n,e,r)}else this.renderAndLink(n,r,e,i)}else console.error("BUG: It should have been a node but got: "),console.log(r),console.log("Parent node:"),console.log(n)}else if(0===a.length){"template"===e&&void 0===s.items&&(e="items",i=[]);const o=t.utils.isFunction(i);if(void 0!==i.tagName){const t=this.appendElement(n,i.tagName);this.renderAndLink(n,t,e,i)}else if(t.utils.isValidElement(e)&&!o){const t=this.appendElement(n,e);this.renderAndLink(n,t,e,i)}else if("items"===e){const e=s.template;if(t.utils.isPlainObject(i)){const e=[];Object.keys(i).forEach((s=>{let o;"DL"===n.tagName?o={dt:s,dd:i[s]}:(o={text:i[s]},t.utils.hasAttrOrProp(n,"value")?o.value=s:o.dataset={id:s}),e.push(o)})),i=e}t.utils.isArray(i)?this.doItems(n,i,e):(console.log("Warning: 'items' specified but value is not and array, in element: "),console.log(n),console.log("Passed values are: "),console.log(i))}else o?(t.updates&&"onupdate"===e&&n.addEventListener("update",i,!0),n[e]=i):"template"!==e&&"warn"!==e&&!1!==i&&(void 0!==s.warn&&!1===s.warn||(console.error("Not sure what you want to do with key: "+e+" under element: "),console.log(n),console.log("And object:"),console.log(s),console.log("Most likely the element's property or child no longer exists or the value passed to it is incorrect."),console.log("You can set 'warn : false' property to the element to dismiss this message.")),n[e]=i)}}})),n.onload){const e=["BODY","FRAME","IFRAME","IMG","LINK","SCRIPT","STYLE"].indexOf(n.tagName)>=0,t="INPUT"===n.tagName&&"image"===n.type;e||t||n.dispatchEvent(new CustomEvent("load"))}return n}isUpdateLink(e){let s=!1;if(t.utils.isArray(e)&&(2===e.length||3===e.length)){const n=2===e.length,o=t.utils.isNode(e[0])||e[0]instanceof DOMStringMap||e[0]instanceof CSSStyleDeclaration,i=n?t.utils.isString(e[1]):t.utils.isString(e[1])&&t.utils.isFunction(e[2]);s=o&&i,s&&n&&e.push((e=>e))}return s}plainToObject(e,s){if(!t.utils.isPlainObject(s)&&!t.utils.isFunction(s)&&!t.utils.isElement(s))if(t.utils.isHtml(s))s={html:s};else if(this.isUpdateLink(s)){const n=s[0],o=s[1],i=s[2];let a=this.plainToObject(e,i(n[o]));if(t.utils.isPlainObject(a)){const e={};Object.keys(a).forEach((t=>{e[t]=s})),s=e}}else t.utils.isArray(s)?s={items:s}:t.utils.hasAttrOrProp(e,"value")?s="SELECT"===e.tagName?{value:s,text:s}:"BUTTON"===e.tagName?{text:s}:{value:s}:t.utils.isString(s)&&"IMG"===e.tagName?s={src:s}:(t.utils.isString(s)||t.utils.isNumeric(s))&&(s={text:s});return s}renderAndLink(e,t,s,n){const o=this.render(t,s,n);this.linkNode(e,s,o)}render(e,t,s){return s=this.plainToObject(e,s),this.doDom(e,s)}linkNode(e,s,n){if(e[s]===n){const t=this.proxy(n);try{e[s]=t}catch(e){}e["$"+s]=t}else t.utils.hasAttrOrProp(e,s)?(e["$"+s]=n,console.log("Property : "+s+" existed in node: "+e.tagName+". Using $"+s+" instead for node: "+n.tagName+".")):e[s]=this.proxy(n)}appendElement(e,s){const n=t.utils.newElement(s);return e.append(n),n}getItem(e,t,s,n){n||(n=this.getTemplate(e));const o=n.cloneNode(!0);this.addTemplatesToItem(n,o),o.dataset.id=t,this.setUniqueAttrib(o,"selected");let i=this.doDom(o,s);return this.getItemWithEvents(e,i)}addTemplatesToItem(e,t){["_template","__template"].forEach((s=>{void 0!==e[s]&&(t[s]=e[s])}))}getItemWithEvents(e,s){if(void 0!==e.__template){const n=(e,s)=>(s=s||{},Object.keys(e).forEach((o=>{t.utils.isPlainObject(e[o])?s[o]=n(e[o]):t.utils.isFunction(e[o])&&(s[o]=e[o])})),s);let o=n(e.__template);t.utils.isEmpty(o)||(o=o[Object.keys(o)[0]],s=this.doDom(s,o))}return s}doItems(e,t,s){const n=this.getTemplate(e,s);if(void 0===n)return console.error("Template not found. Probably an array is being used where it is not expected. Node:"),console.log(e),console.log("Value (mistaken?):"),void console.log(t);let o=0;t.forEach((t=>{t=this.plainToObject(e,t);const s=this.getItem(e,o++,t,n);s&&e.append(s)}));const i=e.find("template");i&&e.removeChild(i),e.items=e.children,this.extendItems(e)}getTemplate(e,s){if(void 0!==e._template&&""!==e._template)return e._template;{let n;const o=e.querySelector("template");if(o)n=t.utils.htmlElement(o.innerHTML.trim());else switch(e.tagName){case"SELECT":case"DATALIST":n=t.utils.newElement("option");break;case"UL":case"OL":n=t.utils.newElement("li");break;case"NAV":n=t.utils.newElement("a");break;case"DL":n=t.utils.newElement("dd");break;default:if(s){const o=Object.keys(s).length;if(o){if(o>1)if(void 0!==s.tagName){let e={};e[s.tagName]=s,s=e}else console.log("Template has more than one top elements. Using the first one. In: "),console.log(s),console.log("Node: "),console.log(e);const i=Object.keys(s)[0],a=s[i];t.utils.isValidElement(i)?n=t.utils.newElement(i):void 0!==a.tagName?(n=t.utils.newElement(a.tagName),s[a.tagName]=a,delete s[i]):(console.error("Template defined an element which can not be identified: ["+i+"], using <span> in:"),console.log(s),console.log("Node: "),console.log(e),n=t.utils.newElement("span"))}else console.error("Template has no definition, and it can not be guessed. Using <span>. Template: "),console.log(s),console.log("Node: "),console.log(e),n=t.utils.newElement("span")}else e.childElementCount>0&&(n=t.utils.htmlElement(e.innerHTML.trim()))}if(s)if(t.utils.isPlainObject(s)){const o=t.utils.newEmptyNode();o.append(n);n=this.doDom(o,s).children[0],t.utils.defineProp(e,"__template",s)}else n=t.utils.isHtml(s)?t.utils.htmlElement(s):t.utils.isSelectorID(s)?t.utils.htmlElement(document.querySelector(s).innerHTML):t.utils.newElement(s);if(n.childrenElementCount>1){console.log("Templates only supports a single child. Multiple children were detected, wrapping them with <span>. Template:"),console.log(n);const e=t.utils.newElement("span");e.append(n),n=e}return n&&t.utils.defineProp(e,"_template",n),n}}setUniqueAttrib(e,s){e.hasOwnProperty(s)||Object.defineProperty(e,s,{get:function(){return this.hasAttribute(s)},set:function(e){const n=this.parentNode?this.parentNode.find("["+s+"]"):null;n&&n.removeAttribute(s),t.utils.setAttr(this,s,e)}})}updateValue(e,s,n){if(this.isUpdateLink(n)){const o=this,i=n[0],a=n[1],r=n[2];if(n=i[a],i instanceof CSSStyleDeclaration&&this._stored.styles.includes(i)){const n=this._stored.styleNodes[this._stored.styles.indexOf(i)];t.updates&&(n.onupdate=function(t){t.detail&&"style"===t.detail.property&&t.detail.newValue.startsWith(a+":")&&o.setShortValue(e,s,r(this.style[a]))})}else if(i instanceof DOMStringMap&&this._stored.datasets.includes(i)){const n=this._stored.datasetNodes[this._stored.datasets.indexOf(i)];t.updates&&(n.onupdate=t=>{t.detail&&t.detail.property==="data-"+a&&o.setShortValue(e,s,r(t.detail.newValue))})}else t.updates&&(i.onupdate=n=>{n.detail&&n.detail.property===a&&(t.utils.isObject(e[s])||o.setShortValue(e,s,r(n.detail.newValue)))})}return n}setShortValue(e,s,n){if(t.utils.isNode(e[s]))if(t.short){const o=this.plainToObject(e[s],n),i=t.utils.isPlainObject(o)&&Object.keys(o).length>=1?Object.keys(o)[0]:null;i&&(e[s][i]=n)}else console.log("Short is disabled. Trying to set a value ("+n+") in a node:"),console.log(e[s]),console.log("Either turn on 'short' functionality, or be sure you specify the property, like: 'node.text'");else e[s]=n}getShortValue(e,s,n){let o=null;if(t.utils.isNode(e[s]))if(t.short){const i=this.plainToObject(e[s],n||""),a=t.utils.isPlainObject(i)&&Object.keys(i).length>=1?Object.keys(i)[0]:null;a&&(o=e[s][a])}else console.log("Short is disabled. Trying to get a value from node:"),console.log(e[s]),console.log("Either turn on 'short' functionality, or be sure you specify the property, like: 'node.text'");else o=e[s];return o}proxy(e,s){if(!t.short||null===e||void 0!==e._proxy&&void 0===s)return e;e._proxy=e;return new Proxy(e,{get:(e,s)=>{const n=e[s];switch(!0){case null==n:return null;case t.utils.isFunction(n):return n.bind(e);case n._proxy&&void 0!==e["$"+s]:return e["$"+s];case void 0===n._proxy&&t.utils.isElement(n):return this.proxy(n);default:return n}},set:(e,s,n)=>{let o="";return t.utils.isElement(e[s])?(o=this.getShortValue(e,s,n),this.setShortValue(e,s,n)):"onupdate"===s?t.updates?t.utils.isFunction(n)?(e.addEventListener("update",n,!0),o=e[s],e[s]=n):(console.error("Value passed to 'onupdate' is incorrect, in node:"),console.log(e),console.log("Value: (not a function)"),console.log(n)):(console.log("Updates are not available when `m2d2.updates == false`:"),console.log(e)):"items"===s?(e.items.clear(),this.doItems(e,n)):(o=e[s],n=this.updateValue(e,s,n),e[s]=n),t.updates&&void 0!==e.onupdate&&n!==o&&e.dispatchEvent(new CustomEvent("update",{detail:{type:typeof n,property:s,newValue:n,oldValue:o}})),!0}})}onObserve(e,s){e.forEach((e=>{const s=e.target;if(!(this._stored.events.indexOf(e)>=0)&&(this._stored.events.push(e),setTimeout((()=>{const t=this._stored.events.indexOf(e);t>=0&&this._stored.events.splice(t,1)}),t.storedEventsTimeout),void 0!==s.onupdate))if("attributes"===e.type){const n=t.utils.getAttrOrProp(s,e.attributeName);n!==e.oldValue&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof n,property:e.attributeName,newValue:n,oldValue:e.oldValue}}))}else if("childList"===e.type){if("#text"===(e.addedNodes[0]||e.removedNodes[0]).nodeName){const t=e.addedNodes[0].textContent,n=e.removedNodes.length?e.removedNodes[0].textContent:null;t!==n&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof t,property:"text",newValue:t,oldValue:n}}))}else if(void 0!==s.items){const t=e.addedNodes,n=e.removedNodes;t!==n&&s.dispatchEvent(new CustomEvent("update",{detail:{type:typeof t,property:"items",newValue:t,oldValue:n}}))}}}))}observe(e){if(t.updates){const t=new MutationObserver(this.onObserve.bind(this)),s={attributeOldValue:!0,subtree:!0,childList:!0},n=e._proxy||e;t.observe(n,s)}}getProxyNode(e,t){const s=this.doDom(e,t);if(s)return this.observe(s),this.proxy(s)}extendItems(e){function s(t){t.forEach((t=>{const s=t.parentNode.removeChild(t);e.append(s)}))}const n=e.items;Object.getOwnPropertyNames(Array.prototype).concat(["clear","get","remove","selected","first","last","findAll"]).forEach((o=>{if(void 0===n[o]){let i=null;const a=this;switch(o){case"copyWithin":case"fill":case"splice":i=function(){console.log("Not available yet: "+o)};break;case"reverse":i=function(...e){if(this.items.length){const t=Array.from(this.items),n=t[o](...e);return s(t),n}};break;case"clear":i=function(){for(;this.items[0];)this.items[0].remove()};break;case"get":i=function(e){let s=null;return this.items.length&&this.items.some((n=>{const o=t.utils.isNumeric(e)?1*n.dataset.id==1*e:n.dataset.id===e;if(n.dataset&&o)return s=n,!0})),s};break;case"selected":i=function(){return a.proxy(this.find(":scope > [selected]"))};break;case"first":i=function(){return a.proxy(this.items[0])};break;case"last":i=function(){return a.proxy(this.items[this.items.length-1])};break;case"pop":i=function(){if(this.items.length){const e=this[0].parentNode;return a.proxy(e.removeChild(this.items[this.items.length-1]))}};break;case"push":i=function(e){if(e=a.plainToObject(this,e),t.utils.isElement(e))this.append(e);else if(t.utils.isPlainObject(e)){const t=this.items.length,s=a.getItem(this,t,e);this.appendChild(s)}else console.log("Trying to push an unknown value into a list:"),console.log(e)};break;case"remove":i=function(e){if(this.items.length){const t=this.items.get(e);1===t.length&&t.remove()}};break;case"shift":i=function(){if(this.items.length){const e=this.items[0].parentNode;return a.proxy(e.removeChild(this.items[0]))}};break;case"sort":i=function(e){if(this.items.length){const t=Array.from(this.items);t.sort(e||((e,t)=>e.text.localeCompare(t.text))),s(t)}};break;case"unshift":i=function(e){if(e=a.plainToObject(this,e),t.utils.isElement(e))this.prepend(e);else if(t.utils.isPlainObject(e)){const t=this.items.length,s=a.getItem(this,t,e);this.prepend(s)}else console.log("Trying to unshift an unknown value into a list:"),console.log(e)};break;default:let n=o;switch(!0){case"findAll"===o:n="filter";case t.utils.isFunction(Array.prototype[o]):const s=function(...t){const s=[];return Array.from(e.items).forEach((e=>{s.push(a.proxy(e))})),Array.from(s)[n](...t)};switch(o){case"find":i=function(...e){return t.utils.isString(e[0])?this.find(e[0]):s(...e)};break;case"findAll":i=function(...e){return 0===e.length?this.findAll():t.utils.isString(e[0])?this.findAll(e[0]):s(...e)};break;case"concat":i=function(...e){for(let s=0;s<e.length;s++)if(t.utils.isArray(e[s]))for(let n=0;n<e[s].length;n++){let o=e[s][n];if(!t.utils.isElement(o)&&(o=a.plainToObject(this,e[s][n]),t.utils.isPlainObject(o))){const e=this.items.length;o=a.getItem(this,e,o)}this.items.push(o)}};break;default:i=s}}}i&&t.utils.defineProp(n,o,i.bind(e))}}))}}return t.load((e=>{function t(t){if(e.exists("#m2d2-alert .m2d2-alert-front")){e("#m2d2-alert .m2d2-alert-front").css.add("vanish"),setTimeout((()=>{e.exists("#m2d2-alert .m2d2-alert-front")&&e("#m2d2-alert").remove(),t&&t()}),400)}else t&&t()}const s={wrap:!1,question:["fa","fa-question-circle"],info:["fa","fa-exclamation-circle"],error:["fa","fa-exclamation-triangle"],ok:["fa","fa-check"],input:["fa","fa-edit"],wait:["fa","fa-cog","fa-spin"]},n={wrap:"material-icons",question:"help",info:"info",error:"error",ok:"done",input:"edit",wait:"pending"},o={wrap:!1,question:"icon_question",info:"icon_info",error:"icon_error",ok:"icon_ok",input:"icon_input",wait:"icon_wait"};e.message=function(i){let a=o;switch(e.messageIcons){case"fa":a=s;break;case"material":a=n;break;default:e.isObject(e.messageIcons)&&(a=e.messageIcons)}i&&(e.isFunction(i.callback)||(i.callback&&!i.text&&(i.text=i.callback),i.callback=()=>{}),i.text||(i.text="")),t((()=>{e("body",{m2d2Alert:{tagName:"div",id:"m2d2-alert",back:{tagName:"div",css:"m2d2-alert-back",style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"#0005",display:"flex",justifyContent:"center",alignItems:"center"},front:Object.assign({tagName:"form",css:(i.css?e.isArray(i.css)?i.css:[i.css]:[]).concat(["m2d2-alert-front","popup",i.icon]),style:{zIndex:100},icon:{tagName:"span",css:["icon",i.icon].concat(a.wrap?[a.wrap]:a[i.icon]).concat("wait"===i.icon?"spin":""),text:a.wrap?a[i.icon]:""},message:{tagName:"div",css:"m2d2-alert-title",span:i.title},submsg:(()=>{let t;return t="input"!==i.icon||i.text?e.isPlainObject(i.text)?{fieldset:Object.assign({css:"m2d2-alert-field"},i.text)}:{span:i.text.replace("\n","<br>")}:{fieldset:{css:"m2d2-alert-field",input:{type:"text",name:"answer",onload:function(){this.focus()}}}},Object.assign({tagName:"div",css:"m2d2-alert-text"},t)})(i.icon),onsubmit:function(){const e=this.getData();let s;switch(e.button){case"ok":case"yes":s=()=>{i.callback(!0,e)};break;case"no":s=()=>{i.callback(!1,e)};break;case"cancel":s=()=>{i.callback(null,e)};break;case"send":s=1===Object.keys(e).length?()=>{i.callback(e[Object.keys(e)[0]],e)}:2===Object.keys(e).length?()=>{i.callback(e[Object.keys(e).find((e=>"button"!==e))],e)}:()=>{i.callback(e,e)};break;default:s=()=>{i.callback(e,e)}}return t(s),!1},onload:function(){const e=this.find("[autofocus]");e&&e.focus()}},function(t){let s={};return t.length&&(s={buttons:{tagName:"div",css:"m2d2-alert-buttons"}},t.forEach((t=>{const n=t.toLowerCase().replace(/[^a-z ]/g,"").replace(" ","_");s.buttons[n]={tagName:"button",type:"submit",value:n,css:["color",n],text:void 0!==e.dict?e.dict(t):t,autofocus:["ok","yes"].includes(t),formNoValidate:["cancel"].includes(t),onclick:function(){e(this.closest("form"),{hide:{tagName:"input",type:"hidden",name:"button",value:this.value}})}}}))),s}(i.buttons))}}})}));let r=1;return e("#m2d2-alert .m2d2-alert-front").findAll("input, select, textarea").forEach((e=>{""===e.name&&(e.name="field_"+r++)})),{close:t}},e.wait=(t,s,n)=>e.message({icon:"wait",title:t,buttons:[],text:void 0===n?null:s,callback:void 0===n?s:n}),e.alert=(t,s,n)=>e.message({icon:"info",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.success=(t,s,n)=>e.message({icon:"ok",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.failure=(t,s,n)=>e.message({icon:"error",title:t,buttons:["ok"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.confirm=(t,s,n)=>e.message({icon:"question",title:t,buttons:["yes","no"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.prompt=(t,s,n)=>e.message({icon:"input",title:t,buttons:["cancel","send"],text:void 0===n?null:s,callback:void 0===n?s:n}),e.closeAll=()=>{t()}})),t.load((e=>{let t=localStorage.getItem("m2d2.lang")||""||navigator.language;e.dict=new function(t){const s=function(e,t){if(void 0===e)return"";let n=s.val(e,!0);if(void 0!==t){if("string"==typeof t&&""!==t){const e=(t=t.replace(/;$/,"")).split(";");t={},e.forEach((s=>{const n=e[s].split(":");t[n[0]]=n[1]}))}"object"==typeof t&&t.forEach((e=>{let o=t[e]+"";o=s.val(o,!1),n=n.replace(e,o)}))}return n};return s.lang=t||"en",s.data={},s.set=function(e){return this.data=e,this},s.has=function(e,t){return void 0===t?void 0!==this.data[e]:void 0!==this.data[e][t]},s.val=function(t,n){if(e.isEmpty(s.data))return console.error("Dictionary is empty. You need to add a dictionary, for example: `$.dict.set({\nsave   : { en : 'Save', es : 'Guardar' },\ncancel : { en : 'Cancel', es : 'Cancelar' }\nyes    : { en : 'Yes', es : 'Si' },\nno     : { en : 'No', es : 'No' }\n})`"),"";if(!t)return console.error("No keyword specified."),"";let o=t;if(void 0===n&&(n=!1),t=t.toLowerCase(),this.has(t)){const e=this.lang.split("-")[0];this.has(t,this.lang)?o=this.data[t][this.lang]:this.has(t,e)?o=this.data[t][e]:n&&console.log("Missing translation for lang ["+this.lang+"]: "+t)}else n&&console.log("Missing keyword: "+t);return o},s}(t);const s=[];e.lang=function(t){t&&(e.dict.lang=t,localStorage.setItem("m2d2.lang",e.dict.lang)),e("body").findAll("[lang]").forEach((t=>{let s=t.text;if(s&&!t.classList.contains("notxt")){void 0===t.dataset.kw&&(t.dataset.kw=e.lang.getKeyword(s)),t.text=e.dict(t.dataset.kw);const n=t.dataset.kw+"_title";let o=e.dict.has(n)?e.dict(n):"";o&&(t.title=o)}else if(t.title){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.title)),s=e.dict(t.dataset.kw),s&&(t.title=s)}else if(t.placeholder){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.placeholder)),s=e.dict(t.dataset.kw),s&&(t.placeholder=s)}else if(t.value){let s="";t.dataset.kw||(t.dataset.kw=e.lang.getKeyword(t.value)),s=e.dict(t.dataset.kw),s&&(t.value=s)}})),s.forEach((e=>{e(t)}))},e.lang.getKeyword=function(e){return e.toLowerCase().trim().replace(/ /g,"_").replace(/[^\w]/g,"").replace(/_$/,"")},Object.defineProperty(e.lang,"onchange",{get(){return this},set(t){e.isFunction(t)?s.push(t):(console.log("Unable to set lang.onchange, because it is not a function: "),console.log(t))}})})),t.ready((e=>{const t=localStorage.getItem("m2d2.lang")||"",s=e("body").find("[lang]"),n=e("html").lang||(s?s.lang:null)||"en";(t?n!==t:n!==navigator.language.split("-")[0])&&e.lang()})),t.load((e=>{function t(e){switch(e){case"local":window.localStorage&&(this.store=localStorage);break;case"session":window.sessionStorage&&(this.store=sessionStorage)}null==this.store&&(this.store=localStorage),this.set=function(e,t){"string"==typeof t&&(t={$:t}),this.store.setItem(e,JSON.stringify(t))},this.get=function(e){let t;try{t=JSON.parse(this.store.getItem(e))||{}}catch(s){t=this.store.getItem(e)}return void 0!==t.$?t=t.$:0===Object.keys(t).length&&t.constructor===Object&&(t=null),t},this.del=function(e){this.store.removeItem(e)},this.keys=function(){return Object.keys(this.store).sort()},this.clear=function(){this.store.clear()},this.exists=function(e){return this.store.hasOwnProperty(e)},this.log=function(e,t,s){null==s&&(s=10);const n=this.get(e)||[];for(n.push(t);n.length>s;)n.shift();this.set(e,n)}}e.local=new t("local"),e.session=new t("session")})),t.load((e=>{function t(e,t,s){const n=[];return e=e||{},t.forEach((o=>{const i="Array"==typeof e?e.length==t.length?e[s]:e:void 0!==e[o.name]?e[o.name]:e;n.push({file:o,data:i,index:s++})})),n}function s(e,t,s,n,o){const i=new XMLHttpRequest;t=Array.from(t),i.upload.addEventListener("progress",(function(e){if(e.lengthComputable)if(n.oneByOne){const o=Math.round(100*e.loaded/e.total);n.onUpdate(o,t[0],s)}else{let s=0,o=0;t.some((t=>{s+=t.size;const i=e.loaded>=s?100:100-Math.round(100*(s-e.loaded)/t.size);return n.onUpdate(i,t,o++),s>=e.loaded}))}}),!1),i.addEventListener("load",(function(e){let a={};try{a=i.responseText?JSON.parse(i.responseText):{error:{type:"Unknown",reason:"Unknown Error"}}}catch(e){a.error={type:"Parse Error",reason:e.message}}i.status>=200&&i.status<400?o(n.onResponse(a),t,s):("string"==typeof a.error&&(a.error={type:"Exception",reason:a.error}),n.onError(a.error))}),!1),i.open("POST",n.upload);const a=Array(t.length).fill(!1),r=function(e,t){const s=new FormData;return t.forEach((t=>{s.append(e,t,t.name)})),s}(e,t);let l=0;t.forEach((e=>{const t=new FileReader;t.onload=function(e){a[l++]=!0,-1===a.indexOf(!1)&&i.send(r)},t.readAsBinaryString(e)}))}e.upload=function(e,n){const o=Object.assign({},{accept:"*/*",parallel:!1,field:"file",multiple:!0,maxFiles:0,maxSizeMb:0},n);n=null;let i=window._protected_reference=document.createElement("INPUT");i.name=o.field,i.type="file",1==o.multiple&&(i.multiple="multiple"),o.upload||(console.log("Upload not specified. Using current page."),o.upload=""),null==o.onDone&&(o.onDone=(e,t)=>{console.log(e)}),null==o.onError&&(o.onError=e=>{console.log("Error : "),console.log(e)}),null==o.onUpdate&&(o.onUpdate=(e,t,s)=>{console.log("Uploading : "+e+"% "+(o.oneByOne?"[ "+t.name+" ]":""))}),null==o.onResponse&&(o.onResponse=e=>e),i.addEventListener("change",(()=>{if(i.files.length){if(!(0===o.maxFiles|i.files.length<=o.maxFiles))return o.onError("Max file limit exceeded. Maximum files: "+o.maxFiles),!1;if(o.onSelect){const e=[];let t=0;Array.from(i.files).forEach((s=>{e.push(URL.createObjectURL(s)),t+=s.size}));const s=t/1048576;if(o.maxSizeMb&&s>o.maxSizeMb)return o.onError("Maximum size exceeded: "+Math.ceil(s)+"MB > "+o.maxSizeMb+"MB"),!1;o.onSelect(i.files,e)}new Promise((e=>{if(o.oneByOne){let n=0;const a=Array(i.files.length).fill(!1);Array.from(i.files).forEach((r=>{new s(i.name,[r],n++,o,((s,n,i)=>{a[i]=!0;const r=-1===a.indexOf(!1);o.onDone(t(s,n,i),r),r&&e()}))}))}else new s(i.name,i.files,0,o,((s,n,i)=>{o.onDone(t(s,n,i),!0),e()}))})).then((()=>{i=window._protected_reference=void 0}))}})),i.click()}})),t.load((e=>{e.ws=new class{request(e){if(e)try{this.webSocket.send(JSON.stringify(e))}catch(e){this.webSocket.onerror(e)}}getSocket(e,t,s){const n=new WebSocket(this.path);return n.onopen=t,n.onclose=s,n.onmessage=t=>{if(t.data)try{e(JSON.parse(t.data))}catch(e){n.onerror(e)}},n.onerror=e=>{console.error("Socket encountered error: ",e?e.message:"Unknown","Closing socket");const t=n||this;1===t.readyState&&t.close()},n}connect(e,t){this.initRequest=e.request||null,this.onConnect=e.connected||(()=>{}),this.onDisconnect=e.disconnected||(()=>{}),this.reconnect=!1!==e.reconnect,this.host=e.host||window.location.hostname,this.secure=!0===e.secure,this.port=e.port||(this.secure?443:80),this.path="ws"+(this.secure?"s":"")+"://"+this.host+":"+this.port+"/"+(e.path||""),this.connected=!1,this.interval=null;const s=e=>{this.connected=!0,this.request(this.initRequest),this.onConnect()},n=e=>{this.connected=!1,this.onDisconnect(),!this.interval&&this.reconnect&&(this.interval=setInterval((()=>{if(this.connected)console.log("Reconnected..."),clearInterval(this.interval),this.interval=null;else try{this.webSocket.close(),console.log("Reconnecting..."),this.webSocket=this.getSocket(t,s,n)}catch(e){}}),2e3))};this.webSocket=this.getSocket(t,s,n)}disconnect(){this.reconnect=!1,this.webSocket.close()}}})),t.load((e=>{const t=function(e,t,s,n,o,i){const a=new XMLHttpRequest;if(void 0===i&&(i=!1),void 0===o&&(o=function(e){console.log(e)}),s&&0===Object.entries(s).length&&(s=""),s)if(i)s=JSON.stringify(s);else if("GET"===e.toUpperCase())t+=(-1!==t.indexOf("?")?"&":"?")+Object.keys(s).map((e=>e+"="+s[e])).join("&"),s="";else s=Object.keys(s).map((e=>e+"="+s[e])).join("&");return a.open(e,t,!0),i?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onerror=function(e){o({type:"Connection",reason:"Connection Refused"})},a.onload=function(){let e={};try{e=a.responseText?JSON.parse(a.responseText):{error:{type:"Unknown",reason:"Unknown Error"}}}catch(t){e.error={type:"Parse Error",reason:t.message}}a.status>=200&&a.status<400?void 0!==n&&n(e):void 0!==o&&("string"==typeof e.error&&(e.error={type:"Exception",reason:e.error}),o(e.error))},a.send(s),a},s={};["get","post","put","delete","connect","options","trace","patch"].forEach((function(e){s[e]=function(){let s,n,o,i,a;switch(arguments.length){case 5:"boolean"==typeof arguments[4]?a=arguments[4]:console.log("Passed JSON argument: "+arguments[4]+" is not boolean.");case 4:"function"==typeof arguments[3]?i=arguments[3]:4===arguments.length&&"boolean"==typeof arguments[3]?a=arguments[3]:console.log("Passed argument 4: "+arguments[3]+" is mistaken");case 3:"function"==typeof arguments[2]?"function"==typeof arguments[1]&&arguments.length<5?i=arguments[2]:o=arguments[2]:3===arguments.length&&"boolean"==typeof arguments[2]?a=arguments[2]:console.log("Passed argument 3: "+arguments[2]+" is mistaken");case 2:"object"==typeof arguments[1]||"string"==typeof arguments[1]?n=arguments[1]:"function"==typeof arguments[1]?o=arguments[1]:console.log("Passed argument 2: "+arguments[1]+" is mistaken");case 1:"string"==typeof arguments[0]?s=arguments[0]:Array.isArray(arguments[0])?s=arguments[0].join("/"):console.log("Passed URL: "+arguments[0]+" was not a string.");break;default:console.log("Incorrect number of arguments passed to xhr")}return void 0===n&&(n={}),t(e.toUpperCase(),s,n,o,i,a)}})),Object.assign(e,s)})),t}));class NdJsonPlayer{fps;loop;showfirst;autoplay;live;path;playing=!1;loaded=!1;backwards=!1;started=!1;onStart;onLoad;onRender;onPlay;onStop;onFinish;onError;wrapper=null;canvas=null;ctx=null;timer=null;src="";frame=0;multiplier=1;_numFrames=0;_totTime=0;_frames=[];_frameBase="";_thumbBase="";_startTimeStamp=0;constructor(e,t,s,n){const o=this;o.src=e,window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame);const i=()=>{};n=Object.assign({},n),o.onStart=n.onstart||i,o.onLoad=n.onload||i,o.onRender=n.onrender||i,o.onPlay=n.onplay||i,o.onStop=n.onstop||i,o.onFinish=n.onfinish||i,o.onError=n.onerror||(e=>{console.log(e)});let a=null;if(t instanceof Node)a=t;else{if("object"==typeof t)s=t,t="canvas";else if("string"!=typeof t)throw"Incorrect parameter passed to constructor of NdJsonPlayer";a=document.querySelector(t||"canvas")}if(!a)throw"Canvas element was not found in DOM: "+t;if("CANVAS"===a.tagName){o.canvas=a;const e=document.createElement("div");a.parentNode.insertBefore(e,a),e.prepend(a),a=e}else if(a.hasChildNodes()){if(o.canvas=a.querySelector("canvas"),!o.canvas)throw"No canvas found in element"}else o.canvas=document.createElement("CANVAS"),a.prepend(o.canvas);o.wrapper=a,o.canvas.height=o.canvas.clientHeight,o.canvas.width=o.canvas.clientWidth,a.classList.add("ndjp"),o.ctx=o.canvas.getContext("2d"),o.fps=s.fps||24,o.loop=s.loop||!1,o.live=s.live||!1,o.autoplay=s.autoplay||o.live||!1,o.showfirst=!1!==s.showfirst,o.path=s.path||"",o.timer=new TimerSrc(1e3/o.fps),o.live?new TimerSrc(1e3/o.fps,(()=>{fetch(o.src).then((e=>e.json())).then((e=>{o.reload(e)}))})).play():o.src?o.load():console.log("Initializing without source...")}_reset(){this._frames=[],this._totTime=0,this._numFrames=0,this._startTimeStamp=0,this.loaded=!1}load(e,t){const s=this;void 0!==t&&(this.src=t,this._reset());const n=new TextDecoder;let o="";return fetch(s.src).then((e=>e.body.getReader())).then((t=>t.read().then((function i({value:a,done:r}){if(r){const t=JSON.parse(o);return s.processFrame(t),e&&e(t),void s.onLoad(s)}const l=(o+n.decode(a,{stream:!0})).split(/[\r\n](?=.)/);return o=l.pop(),l.map(JSON.parse).forEach((t=>{s.processFrame(t),e&&e(t)})),t.read().then(i)})))).catch((e=>this.onError(e)))}reload(e,t){const s=this,n=[];switch(s._reset(),!0){case"string"==typeof e:n=e.split(/[\r\n](?=.)/.map(JSON.parse));break;case Array.isArray(e):n=e;break;case"Object"===e.constructor.name:n.push(e);break;default:return void console.log("Unable to reload frames. ")}n.forEach((e=>{s.processFrame(e),t&&t(e)}))}append(e){this._frames.push(e)}prepend(e){this._frames.unshift(e),this.frame++}processFrame(e){const t=this;void 0!==e.w&&(t.canvas.width=e.w),void 0!==e.h&&(t.canvas.height=e.h),void 0!==e.fb&&(t._frameBase=e.fb),void 0!==e.thb&&(t._thumbBase=e.thb),void 0!==e.tf&&(t._numFrames=e.tf),void 0!==e.tt&&(t._totTime=e.tt),void 0!==e.ts&&(t._startTimeStamp||(t._startTimeStamp=e.ts)),void 0!==e.fps&&(t.fps=e.fps,t.timer=new TimerSrc(1e3/t.fps)),void 0!==e.f?(t._frames.push(e),t.loaded||(t.loaded=!0,t.autoplay?t.play():t.showfirst&&t.step())):t.onRender(e),t.started||(t.onStart(t),t.started=!0)}_render(e){if(null==this.timer)throw"TimerSrc was not initialized";if(0===this._frames.length)throw"Video is empty or no frames were found";this.frame>=this._frames.length-1&&(this.frame=this.loop?0:this._frames.length-1),this.frame<0&&(this.frame=this.loop?this._frames.length-1:0),this._displayImg(e)}_displayImg(e){const t=this,s=t._frames[t.frame],n=function(){t.onRender(s),t.timer.call((function(){t._increment(),e||t.timer.nocall(),t._displayImg()}))};if(void 0!==s.f){const e=t._frameBase+s.f;t._image(e,n)}else t.onRender(s),n()}_increment(){this.frame+=this.multiplier*(this.backwards?-1:1),this.frame<0&&(this.loop?this.frame=this._frames.length-1:(this.frame=0,this.pause(),this.onFinish(this))),this.frame>this.totalFrames()-1&&(this.loop?this.frame=0:(this.frame=this._frames.length-1,this.pause(),this.onFinish(this)))}_draw=function(e,t){const s=this;return 0===e.width&&0===e.height?(e.onerror(),void 0!==t&&t(!1)):(s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height),s.ctx.drawImage(e,0,0,e.width,e.height,0,0,s.canvas.width,s.canvas.height),void 0!==t&&t(!0)),this};_image=function(e,t){const s=this,n=new Image;return n.crossOrigin="",n.onload=function(){s._draw(n,(function(e){e&&void 0!==t&&t(n)}))},n.onerror=function(){const e=s.onError();e&&(n.src=e)},n.src="/"===e[0]||e.match(/^https?:/)||e.match(/^data:image/)?e:s.path+e,this};frameBase(){return this._frameBase}currentFrame(){return this.frame}totalFrames(){return this._numFrames||this._frames.length}totalTime(){return this._totTime||this.currentFrame()/this.fps}frameAt(e){const t=this;let s=e<this.totalFrames()?t._frames[e]:null;return s&&(s.fb=t._frameBase),s}indexAt(e){return~~(e*this.totalFrames()/100)}playerNode(){return this.wrapper}play(e){e<0?e=0:e>this._frames.length?e=this._frames.length-1:void 0!==e&&(this.frame=1*e),this.playing=!0,this.timer.play(),this._render(!1),this.onPlay(this)}playForward(e){this.backwards=!1,this.play(e)}playBackwards(e){this.backwards=!0,this.play(e)}pause(){this.playing=!1,this.timer.pause(),this.onStop(this)}stop(){this.playing=!1,this.frame=0,this.timer.pause(),this._displayImg(!0),this.onStop(this)}step(){this.onPlay(this),this.playing=!1,this.timer.step(),this._render(!0),this.onStop(this)}jumpTo(e){e<0?e=0:e>this._frames.length?e=this._frames.length-1:void 0!==e&&(this.frame=1*e),this._render(!0)}stepForwards(){this.backwards=!1,this.step()}stepBackwards(){this.backwards=!0,this.step()}reset(){return void 0!==this.ctx.reset&&(this.ctx.reset(),this.ctx.clear(),this.stop(),this.canvas.width=this.canvas.width),this}}class NDJPlayer{player;options;ui;constructor(e,t,s){const n=this;function o(e){return e.indexOf(".")>0||-1!==e.indexOf("/")}function i(e){return"."===e[0]||"#"===e[0]||null!==document.querySelector(e)}switch(arguments.length){case 2:"Object"===arguments[1].constructor.name&&(s=arguments[1],o(arguments[0])?t=null:(arguments[0]instanceof HTMLElement||i(arguments[0]))&&(t=arguments[0],e=null));break;case 1:switch(!0){case"Object"===arguments[0].constructor.name:s=arguments[0],e=null,t=null;break;case o(arguments[0]):e=arguments[0],t=null,s={};break;case arguments[0]instanceof HTMLElement||i(arguments[0]):t=arguments[0],e=null,s={};break;default:console.log("Unknown parameter was passed to NDJPlayer constructor."),e=null,t=null,s={}}break;case 0:s={}}n.options=Object.assign({controls:!1,resize:!0,onaction:(e,t,s)=>{},onplay:e=>{},onstop:e=>{}},s||{}),this._create(t),this.player=new NdJsonPlayer(e,t,n.options,{onstart:function(e){n._adjustSize(),void 0!==n.options.onstart&&n.options.onstart(e)},onload:function(e){void 0!==n.options.onload&&n.options.onload(e)},onrender:function(e){n._onUpdate(e),void 0!==n.options.onrender&&n.options.onrender(e)},onplay:function(e){n.ui.panel&&(n.ui.play.show=!1,n.ui.step.css.contains("disabled")||(n.ui.step.show=!1),n.ui.pause.show=!0),n.options.onplay(e)},onstop:function(e){n.ui.panel&&(n.ui.play.show=!0,n.ui.step.css.contains("disabled")||(n.ui.step.show=!0),n.ui.pause.show=!1),n.options.onstop(e)},onfinish:function(e){},onerror:function(e){console.log(e)}})}_onUpdate(e){const t=this;if(t.ui){if(t.ui.frames&&(t.ui.frames.text=t.player.currentFrame()+1+"/"+t.player.totalFrames()),t.ui.lapse){let s="";const n=t.player._startTimeStamp&&void 0!==e.ts,o=void 0!==e.t,i=t.player._totTime>0;e.d&&(s=e.d+" "),n?s+=t._formatMillis(e.ts-t.player._startTimeStamp):o&&(s+=e.t.indexOf(":")>0?e.t:t._fmtTime(e.t)),i&&(s+="/"+t.player.totalTime()),t.ui.lapse.text=s}t.ui.progress&&(t.ui.progress.value=(t.player.currentFrame()+1)/t.player.totalFrames()*100)}}_adjustSize(){if(this.options.resize){let e=this.player.wrapper,t=e.parent();if(e.clientHeight>t.clientHeight){let s=this.player.canvas.height/this.player.canvas.width,n=1/s;this.player.canvas.height=t.clientHeight-(this.options.controls?e.querySelector(".panel").clientHeight:0),this.player.canvas.width=t.clientWidth*(s<1?s:n)}}}_create(e){const t=this,s=m2d2.load();t.ui=s(e,t._getUI(e)),t.ui.panel&&["thumb","play","step","pause","stop","lapse","progress","frames","fullscreen"].forEach((e=>{t.ui[e]=t.ui.panel[e]}))}_getUI(e){const t=this;let s={html:e.innerHTML||""};if(t.options.controls&&(s=this._getBasicUI(),"full"===t.options.controls))s.panel.step.css.remove("disabled");this.options.controls;let n=e instanceof Node?e:document.querySelector(e);if(n){n.querySelector("canvas")||(s=Object.assign({canvas:""},s))}else console.log("Root element: "+e+" was not found in document"),s=Object.assign({canvas:""},s);return s}_getBasicUI(){const e=this;return document.addEventListener("fullscreenchange",(t=>{const s=e.player.wrapper;document.fullscreenElement?s.classList.add("fullscreen"):s.classList.remove("fullscreen")})),{caption:"",css:e.options.controls,panel:{tagName:"div",className:"panel",thumb:{tagName:"figure",className:"thumb",img:{src:""},caption:{tagName:"figCaption",className:"caption"}},rec:{tagName:"a",className:"rec",title:"Live",href:"#"},play:{tagName:"a",className:"play",title:"Play",href:"#",onclick:function(){return e.ui.onaction("play",e.player,e),e.player.play(),!1}},pause:{tagName:"a",className:"pause",title:"Pause",href:"#",onclick:function(){return e.ui.onaction("pause",e.player,e),e.player.pause(),!1}},step:{tagName:"a",css:["step","disabled"],title:"Step",href:"#",onclick:function(){return e.ui.onaction("step",e.player,e),e.player.step(),!1}},stop:{tagName:"a",className:"stop",title:"Stop",href:"#",onclick:function(){return e.ui.onaction("stop",e.player,e),e.player.stop(),!1}},lapse:{tagName:"label",className:"lapse",title:"Time elapsed / Time Total",text:"0:00"},live:{tagName:"label",className:"live",text:"Live Feed"},progress:{value:0,max:100,onmousemove:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.player.frameAt(e.player.indexAt(s));n?(e.ui.thumb.show=!0,e.ui.thumb.img.src=e.player.frameBase()+(n.th||n.f),e.ui.thumb.img.onload=function(){const t=e.ui.thumb.img.naturalWidth||e.ui.thumb.img.width;e.ui.thumb.style.width=t+"px"},void 0!==n.tc&&(e.ui.thumb.caption=n.tc),e.ui.thumb.style.left=this.offsetLeft+t.offsetX-e.ui.thumb.clientWidth/2+"px"):e.ui.thumb.show=!1},onmouseleave:function(){e.ui.thumb.show=!1},onclick:function(t){let s=~~(t.offsetX/this.offsetWidth*100),n=e.player.indexAt(s);e.player.jumpTo(n),e.ui.onaction("progress",e.player,e)}},frames:{tagName:"label",className:"frames",title:"Current Frame / Total Frames",text:"0"},fullscreen:{tagName:"a",className:"fullscreen",title:"Full Screen",href:"#",onclick:function(t){const s=e.player.wrapper;return s.classList.contains("fullscreen")?(e.ui.onaction("exit-fullscreen",e.player,e),document.exitFullscreen()):(e.ui.onaction("fullscreen",e.player,e),s.requestFullscreen()),!1}}},onaction:function(t,s,n){e.options.onaction(t,s,n)},onplay:function(t){e.options.onplay(t)},onstop:function(t){e.options.onstop(t,uiPlayer)}}}_fmtTime(e){let t=(e=e.toFixed(2)).split(".")[1]||"00";return(~~(e/60)+"").padStart(2,"0")+":"+(~~(e/60%1*60)+"").padStart(2,"0")+"."+t}_formatMillis(e){function t(e,t){return("00"+e).slice(-1*(t||2))}const s=Math.floor(e/1e3/60/60),n=Math.floor(60*(e/1e3/60/60-s)),o=Math.floor(60*(60*(e/1e3/60/60-s)-n)),i=parseInt(e%1e3/100);return t(s)+":"+t(n)+":"+t(o)+"."+t(i,3)}}function TimerSrc(e,t){let s,n,o,i,a={};a.interval=e,a.checker=50,a.status="init";let r=(new Date).getTime();return s=r-e,a.call=function(e){return t=e,a},a.nocall=function(){return t=null,a},a.exec=function(){return t&&t(),s=(new Date).getTime(),a},a.check=function(){return o&&o(),a},a.play=function(){return o=a.step,a.status="running",a},a.pause=function(){return o=null,a.status="paused",a},a.destroy=function(){for(var e in o=null,clearInterval(n),n=null,a)a[e]=null,delete a[e];a.status="destroyed"},a.step=function(){return r=(new Date).getTime(),i=Math.max(0,a.interval-(r-s)),0===i&&(i=a.interval,s=(new Date).getTime(),t&&t()),a},a.slow=function(){return a.interval=1e3,a},a.fast=function(){return a.interval=e,a},n=setInterval(a.check,a.checker),a}class VideoND extends HTMLElement{constructor(){super(),this._root=this;const e=this,t={autoplay:!1,controls:!1,loop:!1,live:!1,width:"auto",height:"auto",poster:"",preload:"auto",src:"",cc:"auto",caption:"",fullscreen:!1,fps:"",speed:!1,autosize:"auto",sizes:{}||[],thumbs:"auto"},s={};for(let e in t)s[e]=this.getAttribute(e)||this.hasAttribute(e)||t[e];s.onstart=function(t){e.onstart&&e.onstart(t)},s.onload=function(t){e.onload&&e.onload(t)},s.onrender=function(t){e.onrender&&e.onrender(t,n.wrapper,n,n.player.canvas,n.player.ctx)},this.style.display="block",this.className="ndjp";const n=new NDJPlayer(s.src,this,s)}setCaption(e){this._root.querySelector("caption").innerText=e}static get observedAttributes(){return["width","height","caption"]}attributeChangedCallback(e,t,s){"caption"===e&&this.setCaption(s)}}document.addEventListener("DOMContentLoaded",(function(){window.customElements.define("video-nd",VideoND)}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm0yZDIuYWxsLnNyYy5qcyIsIm5kanNvbi1wbGF5ZXIuc3JjLmpzIiwibmRqc29uLXVpLnNyYy5qcyIsInRpbWVyLnNyYy5qcyIsInZpZGVvLW5kLnNyYy5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJtMmQyIiwidGhpcyIsIlV0aWxzIiwiaXNTdHJpbmciLCJ2IiwiaXNCb29sIiwiYiIsImlzTnVtZXJpYyIsIm4iLCJpc05hTiIsInBhcnNlRmxvYXQiLCJpc0Zpbml0ZSIsImlzU2VsZWN0b3JJRCIsInMiLCJ0cmltIiwiaW5kZXhPZiIsImlzUGxhaW5PYmplY3QiLCJvIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaXNPYmplY3QiLCJvYSIsImlzQXJyYXkiLCJhIiwiQXJyYXkiLCJpc0Z1bmN0aW9uIiwiZiIsImlzRWxlbWVudCIsIkhUTUxFbGVtZW50IiwiaXNOb2RlIiwiTm9kZSIsIkRvY3VtZW50RnJhZ21lbnQiLCJpc0h0bWwiLCJpc0VtcHR5Iiwib2JqIiwidW5kZWZpbmVkIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImlzVmlzaWJsZSIsImVsZW0iLCJjb25zb2xlIiwibG9nIiwiZGlzcGxheSIsInN0eWxlIiwibm90SGlkZGVuIiwidmlzaWJpbGl0eSIsImluVmlldyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJsZWZ0IiwiYm90dG9tIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsInJpZ2h0IiwiaW5uZXJXaWR0aCIsImNsaWVudFdpZHRoIiwid2lkdGgiLCJoZWlnaHQiLCJjbGVhbkFycmF5IiwiZmlsdGVyIiwiZSIsImlzVmFsaWRFbGVtZW50IiwidGFnTmFtZSIsIiRub2RlIiwibmV3RWxlbWVudCIsImV4aXN0cyIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImdldEF0dHJPclByb3AiLCJrZXkiLCJ2YWx1ZSIsImhhc0F0dHJPclByb3AiLCJoYXNBdHRyIiwiZ2V0QXR0cmlidXRlIiwiaGFzUHJvcCIsImF0dHIiLCJ0eXBlIiwiaGFzQXR0cmlidXRlIiwicHJvcCIsImhhcyIsInNldFByb3BPckF0dHIiLCJpZ25vcmUiLCJzZXRBdHRyIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiZGVmaW5lUHJvcCIsImRlZiIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiaHRtbEVsZW1lbnQiLCJodG1sIiwidGVtcGxhdGUiLCJpbm5lckhUTUwiLCJjb250ZW50IiwiZmlyc3RDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJuZXdFbXB0eU5vZGUiLCJnZXRNZXRob2RzIiwiUmVmbGVjdCIsImdldFByb3RvdHlwZU9mIiwieCIsIm93bktleXMiLCJpdCIsImFwcGVuZEFsbENoaWxkIiwiJHNyY05vZGUiLCIkdGd0Tm9kZSIsImFwcGVuZCIsInByZXBlbmRBbGxDaGlsZCIsInByZXBlbmQiLCJfc3RvcmVkIiwiZXZlbnRzIiwiZGF0YXNldE5vZGVzIiwiZGF0YXNldHMiLCJzdHlsZU5vZGVzIiwic3R5bGVzIiwic3RhdGljIiwib2JqZWN0Iiwibm9kZSIsImluc3RhbmNlIiwiZ2V0UHJveHlOb2RlIiwib25yZWFkeSIsInV0aWxzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uY2UiLCJzZXRUaW1lb3V0IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZm9yRWFjaCIsImkiLCJwdXNoIiwiayIsImNhbGxiYWNrIiwibWFpbiIsImV4dCIsImV4dGVuc2lvbnMiLCJhc3NpZ24iLCJleHREb20iLCIkcm9vdCIsImVycm9yIiwiX20yZDIiLCJoYXNPd25Qcm9wZXJ0eSIsImdldCIsImNoaWxkTm9kZXMiLCJpbm5lclRleHQiLCJ0ZXh0Q29udGVudCIsInNldCIsImZvdW5kIiwibm9kZVZhbHVlIiwiY3JlYXRlVGV4dE5vZGUiLCJjbGFzc0xpc3QiLCJjbGFzc05hbWUiLCJqb2luIiwiYyIsImFkZCIsInJlbW92ZSIsInNob3ciLCJjc3NEaXNwbGF5IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRlZmF1bHREaXNwbGF5IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0IiwiX20yZDJfZGlzcGxheSIsInJlbW92ZVByb3BlcnR5IiwiZGVmYXVsdFNob3ciLCJkYXRhc2V0Iiwib25zaG93Iiwic3RvcmVkIiwiZXh0ZW5kIiwibmV4dCIsIm5leHRFbGVtZW50U2libGluZyIsInByZXYiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwicGFyZW50IiwicGFyZW50RWxlbWVudCIsInNpYmxpbmciLCJzZWwiLCJmaW5kIiwiZmluZEFsbCIsIm5vZGVMaXN0IiwiZnJvbSIsImNoaWxkcmVuIiwicXVlcnlTZWxlY3RvckFsbCIsImluZGV4IiwicGFyZW50Tm9kZSIsIm9uaW5wdXQiLCJnZXREYXRhIiwiaW5jbHVkZU5vdFZpc2libGUiLCJkYXRhIiwiZmQiLCJGb3JtRGF0YSIsImluY2x1ZGUiLCJwYWlyIiwiZW50cmllcyIsImZpbGVzIiwiZG9Eb20iLCJ3YXJuIiwicGxhaW5Ub09iamVjdCIsImluY2x1ZGVzIiwib3JpZ1ZhbHVlIiwidXBkYXRlVmFsdWUiLCJpc1Byb3AiLCJmb3VuZE1hdGNoIiwiRGF0ZSIsIm9wdGlvbnMiLCJtYXRjaCIsImVsZW1zIiwiaXRlbXMiLCJpdGVtIiwicmVuZGVyIiwibGlua05vZGUiLCJvcHQiLCJvcHRfa2V5IiwiZG9JdGVtcyIsInJlbmRlckFuZExpbmsiLCJpc0Z1bmMiLCIkbmV3Tm9kZSIsImFwcGVuZEVsZW1lbnQiLCJ2YWxUbXAiLCJkdCIsImRkIiwidGV4dCIsImlkIiwidXBkYXRlcyIsIm9ubG9hZCIsIm5hdGl2ZSIsImlucHV0SW1hZ2UiLCJpc1VwZGF0ZUxpbmsiLCJpc0xpbmsiLCJ0d29BcmdzIiwiYWNjZXB0ZWRUeXBlIiwiRE9NU3RyaW5nTWFwIiwiQ1NTU3R5bGVEZWNsYXJhdGlvbiIsIm90aGVyVHlwZXMiLCJ0bXBWYWwiLCJuZXdWYWx1ZSIsInNyYyIsIiRjaGlsZCIsIiRwcm94eSIsInByb3h5IiwiJG5ld0VsZW0iLCJnZXRJdGVtIiwiJHRlbXBsYXRlIiwiZ2V0VGVtcGxhdGUiLCIkbmV3SXRlbSIsImNsb25lTm9kZSIsImFkZFRlbXBsYXRlc1RvSXRlbSIsInNldFVuaXF1ZUF0dHJpYiIsImdldEl0ZW1XaXRoRXZlbnRzIiwiX190ZW1wbGF0ZSIsInNjYW4iLCJyZXN1bHQiLCJ0cmVlIiwidmFsdWVzIiwidmFsIiwiJHRlbXAiLCJyZW1vdmVDaGlsZCIsImV4dGVuZEl0ZW1zIiwiX3RlbXBsYXRlIiwiJGh0bWxUZW1wbGF0ZSIsIndyYXAiLCJjaGlsZEVsZW1lbnRDb3VudCIsIiR3cmFwIiwiY2hpbGRyZW5FbGVtZW50Q291bnQiLCIkc3BhbiIsInByZXZTZWwiLCJfdGhpcyIsIm9udXBkYXRlIiwiZXYiLCJkZXRhaWwiLCJwcm9wZXJ0eSIsInN0YXJ0c1dpdGgiLCJzZXRTaG9ydFZhbHVlIiwic2hvcnQiLCJnZXRTaG9ydFZhbHVlIiwic2FtcGxlIiwiZm9yY2UiLCJfcHJveHkiLCJQcm94eSIsInRhcmdldCIsImJpbmQiLCJvbGRWYWx1ZSIsImNsZWFyIiwib25PYnNlcnZlIiwibXV0YXRpb25zTGlzdCIsIm9ic2VydmVyIiwibSIsInNwbGljZSIsInN0b3JlZEV2ZW50c1RpbWVvdXQiLCJhdHRyaWJ1dGVOYW1lIiwiYWRkZWROb2RlcyIsInJlbW92ZWROb2RlcyIsIm5vZGVOYW1lIiwib2JzZXJ2ZSIsIm11dGF0aW9uT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiYXR0cmlidXRlT2xkVmFsdWUiLCJ0b09ic2VydmUiLCJyZWF0dGFjaCIsIml0bSIsImRldGF0Y2hlZEl0ZW0iLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwicHJvdG90eXBlIiwiY29uY2F0IiwibWV0aG9kIiwiZnVuYyIsImFyZ3MiLCJyZXRPYmoiLCJzb21lIiwic2FtZUlkIiwiYXBwZW5kQ2hpbGQiLCJjb21wYXJlRnVuYyIsInNvcnQiLCJsb2NhbGVDb21wYXJlIiwiYXJyTWV0aG9kIiwiYXJyRnVuYyIsInByb3hpZXMiLCJqIiwibG9hZCIsIiQiLCJjbG9zZSIsImFmdGVyQ2xvc2UiLCJjc3MiLCJmYUljb25zIiwicXVlc3Rpb24iLCJpbmZvIiwib2siLCJpbnB1dCIsIndhaXQiLCJtYXRlcmlhbCIsImRlZmF1bHRDc3MiLCJtZXNzYWdlIiwibWVzc2FnZUljb25zIiwibTJkMkFsZXJ0IiwiYmFjayIsInBvc2l0aW9uIiwiYmFja2dyb3VuZENvbG9yIiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwiZnJvbnQiLCJpY29uIiwiekluZGV4Iiwic3BhbiIsInRpdGxlIiwic3VibXNnIiwiZmllbGRzZXQiLCJyZXBsYWNlIiwiZm9jdXMiLCJvbnN1Ym1pdCIsImJ1dHRvbiIsIm9iIiwibmV3QnV0dG9ucyIsImJ1dHRvbnMiLCJ0b0xvd2VyQ2FzZSIsImRpY3QiLCJhdXRvZm9jdXMiLCJmb3JtTm9WYWxpZGF0ZSIsIm9uY2xpY2siLCJjbG9zZXN0IiwiaGlkZSIsImFsZXJ0Iiwic3VjY2VzcyIsImZhaWx1cmUiLCJjb25maXJtIiwicHJvbXB0IiwiY2xvc2VBbGwiLCJsYW5ndWFnZSIsImxvY2FsU3RvcmFnZSIsIm5hdmlnYXRvciIsImxhbmciLCJrZXl3b3JkIiwidmFycyIsIm1zZyIsInBhaXJzIiwic3BsaXQiLCJwIiwicGFydCIsImt3ZCIsImRpY3Rpb25hcnkiLCJyZXBvcnQiLCJ0cmFuc2xhdGlvbiIsImJhc2VMYW5nIiwibGFuZ0V2ZW50cyIsIm5ld0xhbmciLCJzZXRJdGVtIiwidHh0IiwiY29udGFpbnMiLCJrdyIsImdldEtleXdvcmQiLCJ0aXRsZUt3IiwicGxhY2Vob2xkZXIiLCJyZWFkeSIsIm1hbnVhbExhbmciLCJib2R5TGFuZyIsImh0bWxMYW5nIiwiU3RvcmFnZSIsInN0b3JlIiwic2Vzc2lvblN0b3JhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwicGFyc2UiLCJkZWwiLCJyZW1vdmVJdGVtIiwidG1wIiwic2hpZnQiLCJsb2NhbCIsInNlc3Npb24iLCJnZXRSZXNwb25zZSIsInJlc3BvbnNlIiwicm93IiwiZmlsZSIsIkZpbGVVcGxvYWQiLCJmaWVsZE5hbWUiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInVwbG9hZCIsImxlbmd0aENvbXB1dGFibGUiLCJvbmVCeU9uZSIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJsb2FkZWQiLCJ0b3RhbCIsIm9uVXBkYXRlIiwic2l6ZUFjY3VtIiwic2l6ZSIsInJlc3BvbnNlVGV4dCIsInJlYXNvbiIsImVyciIsInN0YXR1cyIsIm9uUmVzcG9uc2UiLCJvbkVycm9yIiwib3BlbiIsImZpbGwiLCJmb3JtIiwiZ2V0RmlsZUZvcm0iLCJsb2FkSW5kZXgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiZXZ0Iiwic2VuZCIsInJlYWRBc0JpbmFyeVN0cmluZyIsIm9wdHMiLCJhY2NlcHQiLCJwYXJhbGxlbCIsImZpZWxkIiwibXVsdGlwbGUiLCJtYXhGaWxlcyIsIm1heFNpemVNYiIsImVsIiwiX3Byb3RlY3RlZF9yZWZlcmVuY2UiLCJvbkRvbmUiLCJhbGxEb25lIiwicGN0IiwicmVzIiwib25TZWxlY3QiLCJzcmNzIiwidG90U2l6ZSIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm1icyIsImNlaWwiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZpbGVEb25lIiwidGhlbiIsImNsaWNrIiwid3MiLCJyZXF1ZXN0Iiwid2ViU29ja2V0Iiwib25lcnJvciIsImdldFNvY2tldCIsIm9uTWVzc2FnZSIsIm9uT3BlbiIsIm9uQ2xvc2UiLCJXZWJTb2NrZXQiLCJwYXRoIiwib25vcGVuIiwib25jbG9zZSIsIm9ubWVzc2FnZSIsIndzayIsInJlYWR5U3RhdGUiLCJjb25uZWN0IiwiaW5pdFJlcXVlc3QiLCJvbkNvbm5lY3QiLCJjb25uZWN0ZWQiLCJvbkRpc2Nvbm5lY3QiLCJkaXNjb25uZWN0ZWQiLCJyZWNvbm5lY3QiLCJob3N0IiwibG9jYXRpb24iLCJob3N0bmFtZSIsInNlY3VyZSIsInBvcnQiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImRpc2Nvbm5lY3QiLCJYSFIiLCJ1cmwiLCJlcnJvcl9jYWxsYmFjayIsImpzb24iLCJ0b1VwcGVyQ2FzZSIsIm1hcCIsInNldFJlcXVlc3RIZWFkZXIiLCJhcmd1bWVudHMiLCJOZEpzb25QbGF5ZXIiLCJmcHMiLCJsb29wIiwic2hvd2ZpcnN0IiwiYXV0b3BsYXkiLCJsaXZlIiwicGxheWluZyIsImJhY2t3YXJkcyIsInN0YXJ0ZWQiLCJvblN0YXJ0Iiwib25Mb2FkIiwib25SZW5kZXIiLCJvblBsYXkiLCJvblN0b3AiLCJvbkZpbmlzaCIsIndyYXBwZXIiLCJjYW52YXMiLCJjdHgiLCJ0aW1lciIsImZyYW1lIiwibXVsdGlwbGllciIsIl9udW1GcmFtZXMiLCJfdG90VGltZSIsIl9mcmFtZXMiLCJfZnJhbWVCYXNlIiwiX3RodW1iQmFzZSIsIl9zdGFydFRpbWVTdGFtcCIsImVsZW1lbnQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJub0V2ZW50Iiwib25zdGFydCIsIm9ucmVuZGVyIiwib25wbGF5Iiwib25zdG9wIiwib25maW5pc2giLCJwbGF5ZXIiLCJpbnNlcnRCZWZvcmUiLCJoYXNDaGlsZE5vZGVzIiwiZ2V0Q29udGV4dCIsIlRpbWVyU3JjIiwiZmV0Y2giLCJyZWxvYWQiLCJwbGF5IiwiX3Jlc2V0IiwibmV3U3JjIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwiYnVmZmVyIiwicmVzcCIsImJvZHkiLCJnZXRSZWFkZXIiLCJyZWFkIiwicHJvY2VzcyIsImRvbmUiLCJsYXN0IiwicHJvY2Vzc0ZyYW1lIiwibGluZXMiLCJkZWNvZGUiLCJzdHJlYW0iLCJwb3AiLCJjYXRjaCIsImZyYW1lcyIsImZzIiwidW5zaGlmdCIsInciLCJoIiwiZmIiLCJ0aGIiLCJ0ZiIsInR0IiwidHMiLCJzdGVwIiwiX3JlbmRlciIsIl9kaXNwbGF5SW1nIiwiY2FsbCIsIl9pbmNyZW1lbnQiLCJub2NhbGwiLCJfaW1hZ2UiLCJwYXVzZSIsInRvdGFsRnJhbWVzIiwiX2RyYXciLCJpbWciLCJjbGVhclJlY3QiLCJkcmF3SW1hZ2UiLCJpbWFnZSIsIkltYWdlIiwiY3Jvc3NPcmlnaW4iLCJkcmF3biIsImZyYW1lQmFzZSIsImN1cnJlbnRGcmFtZSIsInRvdGFsVGltZSIsImZyYW1lQXQiLCJpbmRleEF0IiwicGxheWVyTm9kZSIsInN0YXJ0RnJhbWUiLCJwbGF5Rm9yd2FyZCIsInBsYXlCYWNrd2FyZHMiLCJzdG9wIiwianVtcFRvIiwic3RlcEZvcndhcmRzIiwic3RlcEJhY2t3YXJkcyIsInJlc2V0IiwiTkRKUGxheWVyIiwidWkiLCJpc01lZGlhIiwic3RyIiwiaXNTZWxlY3RvciIsImNvbnRyb2xzIiwicmVzaXplIiwib25hY3Rpb24iLCJhY3Rpb24iLCJuZGpQbGF5ZXIiLCJ1aVBsYXllciIsIl9jcmVhdGUiLCJfYWRqdXN0U2l6ZSIsIl9vblVwZGF0ZSIsInBhbmVsIiwibGFwc2UiLCJkIiwiX2Zvcm1hdE1pbGxpcyIsIl9mbXRUaW1lIiwicHJvZ3Jlc3MiLCJyYXRpb1ciLCJyYXRpb0giLCJfZ2V0VUkiLCJfZ2V0QmFzaWNVSSIsImV2ZW50IiwiZnVsbHNjcmVlbkVsZW1lbnQiLCJjYXB0aW9uIiwidGh1bWIiLCJyZWMiLCJocmVmIiwibWF4Iiwib25tb3VzZW1vdmUiLCJvZmZzZXRXaWR0aCIsInRoIiwibmF0dXJhbFdpZHRoIiwidGMiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0WCIsIm9ubW91c2VsZWF2ZSIsImZ1bGxzY3JlZW4iLCJleGl0RnVsbHNjcmVlbiIsInJlcXVlc3RGdWxsc2NyZWVuIiwidGltZSIsImRlY2ltYWwiLCJ0b0ZpeGVkIiwicGFkU3RhcnQiLCJtaWxsaXMiLCJwYWQiLCJudW0iLCJkaWdpdHMiLCJzbGljZSIsImZsb29yIiwibXMiLCJwYXJzZUludCIsIm9yaWdpbmFsX21zIiwic3RhcnRUaW1lIiwiY2hlY2tlciIsIm5vd1RpbWUiLCJnZXRUaW1lIiwiZXhlYyIsImNoZWNrIiwiZGVzdHJveSIsInNsb3ciLCJmYXN0IiwiVmlkZW9ORCIsInN1cGVyIiwiX3Jvb3QiLCJkZWZhdWx0T3B0aW9ucyIsInBvc3RlciIsInByZWxvYWQiLCJjYyIsInNwZWVkIiwiYXV0b3NpemUiLCJzaXplcyIsInRodW1icyIsInNldENhcHRpb24iLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2siLCJjdXN0b21FbGVtZW50cyJdLCJtYXBwaW5ncyI6IkNBUUEsU0FBQUEsRUFBQUMsR0FDQSxtQkFBQUMsUUFBQUEsT0FBQUMsSUFDQUQsT0FBQSxHQUFBRCxHQUNBLGlCQUFBRyxRQUNBQyxPQUFBRCxRQUFBSCxJQUVBRCxFQUFBTSxLQUFBTCxJQU5BLENBUUFNLE1BQUEsV0FFQSxhQXVDQSxNQUFBQyxFQU1BQyxTQUFBQyxHQUNBLE1BQUEsaUJBQUFBLEVBT0FDLE9BQUFDLEdBQ0EsTUFBQSxrQkFBQUEsRUFPQUMsVUFBQUMsR0FDQSxPQUFBQyxNQUFBQyxXQUFBRixLQUFBRyxTQUFBSCxHQU9BSSxhQUFBQyxHQUNBLE9BQUEsS0FBQUEsRUFBQSxJQUFBQyxPQUFBQyxRQUFBLEtBT0FDLGNBQUFDLEdBQ0EsTUFBQSxXQUFBQSxFQUFBQyxZQUFBQyxLQU9BQyxTQUFBQyxHQUNBLE1BQUEsaUJBQUFBLEVBT0FDLFFBQUFDLEdBQ0EsT0FBQUMsTUFBQUYsUUFBQUMsR0FPQUUsV0FBQUMsR0FDQSxNQUFBLG1CQUFBQSxFQU9BQyxVQUFBbkIsR0FDQSxPQUFBQSxhQUFBb0IsWUFRQUMsT0FBQXJCLEdBQ0EsT0FBQUEsYUFBQXNCLE1BQUF0QixhQUFBdUIsaUJBT0FDLE9BQUFuQixHQUNBLE9BQUEsS0FBQUEsRUFBQSxJQUFBQyxPQUFBQyxRQUFBLEtBT0FrQixRQUFBQyxHQUNBLFlBQUFDLElBQUFELEdBQUFqQyxLQUFBbUIsU0FBQWMsSUFBQSxJQUFBRSxPQUFB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QUNBLE1BQUFvZCxFQUFBLElBQUFULFVBQUF0WixFQUFBZ0MsSUFBQWhQLEtBQUFnTixHQUdBaWUsV0FBQWpELEdBQ0Fob0IsS0FBQXdxQixNQUFBam1CLGNBQUEsV0FBQTZFLFVBQUE0ZSxFQUdBa0QsZ0NBQ0EsTUFBQSxDQUFBLFFBQUEsU0FBQSxXQUdBQyx5QkFBQWpxQixFQUFBMlEsRUFBQTlDLEdBQ0EsWUFBQTdOLEdBQ0FsQixLQUFBaXJCLFdBQUFsYyxJQUlBekwsU0FBQXlFLGlCQUFBLG9CQUFBLFdBQ0EzRSxPQUFBZ29CLGVBQUF6ckIsT0FBQSxXQUFBMnFCIiwiZmlsZSI6Im5kanNvbi1wbGF5ZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBdXRob3IgOiBBLkxlcGUgKGRldkBhbGVwZS5jb20pIC0gaW50ZWxsaXNyYy5jb21cbiAqIExpY2Vuc2U6IE1JVFxuICogVmVyc2lvbjogMi4xLjFcbiAqIFVwZGF0ZWQ6IDIwMjItMDItMjRcbiAqIENvbnRlbnQ6IEZ1bGwgQnVuZGxlIChEZWJ1ZylcbiAqL1xuXG47KGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5tMmQyID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uKCkge1xuLy8gLS0tLS0tLSBGdW5jdGlvbnMgLS0tLS0tLVxuXCJ1c2Ugc3RyaWN0XCI7XG4vKipcbiAqIEZ1bmN0aW9ucyB1c2VmdWwgdG8gd29yayB3aXRoIEphdmFzY3JpcHQgZGF0YSBhbmQgRE9NXG4gKiBVc2VkIG1haW5seSBpbiBNMkQyIGNvcmUgbGlicmFyeSBidXQgZXhwb3NlZCB0byB0aGVcbiAqIGNvbnN1bWVyLlxuICogQEF1dGhvcjogQS5MZXBlIDxkZXZAYWxlcGUuY29tPlxuICpcbiAqIFRoaXMgZXh0ZW5zaW9uIHByb3ZpZGVzOlxuICogJC5pc1N0cmluZ1xuICogJC5pc0Jvb2xcbiAqICQuaXNOdW1lcmljXG4gKiAkLmlzU2VsZWN0b3JJRFxuICogJC5pc1BsYWluT2JqZWN0XG4gKiAkLmlzT2JqZWN0XG4gKiAkLmlzQXJyYXlcbiAqICQuaXNGdW5jdGlvblxuICogJC5pc0VsZW1lbnRcbiAqICQuaXNOb2RlXG4gKiAkLmlzSHRtbFxuICogJC5pc0VtcHR5XG4gKiAkLmlzVmlzaWJsZVxuICogJC5pblZpZXdcbiAqICQuY2xlYW5BcnJheVxuICogJC5pc1ZhbGlkRWxlbWVudFxuICogJC5leGlzdHNcbiAqICQuZ2V0QXR0ck9yUHJvcFxuICogJC5oYXNBdHRyT3JQcm9wXG4gKiAkLmhhc0F0dHJcbiAqICQuaGFzUHJvcFxuICogJC5zZXRQcm9wT3JBdHRyXG4gKiAkLnNldEF0dHJcbiAqICQuZGVmaW5lUHJvcFxuICogJC5odG1sRWxlbWVudFxuICogJC5uZXdFbGVtZW50XG4gKiAkLm5ld0VtcHR5Tm9kZVxuICogJC5nZXRNZXRob2RzXG4gKiAkLmFwcGVuZEFsbENoaWxkXG4gKiAkLnByZXBlbmRBbGxDaGlsZFxuICovXG5jbGFzcyBVdGlscyB7XG5cdC8qKlxuXHQgKiBSZXR1cm4gdHJ1ZSBpZiB2YXJpYWJsZSBpcyBzdHJpbmdcblx0ICogQHBhcmFtIHsqfSB2XG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc1N0cmluZyh2KSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdiA9PT0gJ3N0cmluZyc7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybiB0cnVlIGlmIHZhcmlhYmxlIGlzIGEgYm9vbGVhblxuXHQgKiBAcGFyYW0geyp9IGJcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzQm9vbChiKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYiA9PT0gJ2Jvb2xlYW4nO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm4gdHJ1ZSBpZiB2YXJpYWJsZSBpcyBhIG51bWJlclxuXHQgKiBAcGFyYW0geyp9IG5cblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzTnVtZXJpYyhuKSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChuKSkgJiYgaXNGaW5pdGUobik7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybiB0cnVlIGlmIHNlbGVjdG9yIHVzIGFuIGlkIHNlbGVjdG9yXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc1NlbGVjdG9ySUQocykge1xuICAgICAgICByZXR1cm4gKHMgKyBcIlwiKS50cmltKCkuaW5kZXhPZihcIiNcIikgPT09IDA7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYSBcInBsYWluXCIgb2JqZWN0IChub3QgYW4gYXJyYXkpXG5cdCAqIEBwYXJhbSBvXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc1BsYWluT2JqZWN0KG8pIHtcbiAgICAgICAgcmV0dXJuIG8uY29uc3RydWN0b3IubmFtZSA9PT0gXCJPYmplY3RcIjtcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIHZhcmlhYmxlIGlzIGFuIG9iamVjdCAoYW55IGtpbmQsIGUuZy4gQXJyYXkpXG5cdCAqIEBwYXJhbSB7Kn0gb2Fcblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzT2JqZWN0KG9hKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygb2EgPT09ICdvYmplY3QnO1xuICAgIH07XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgb2JqZWN0IGlzIGFuIGFycmF5XG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBhXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc0FycmF5KGEpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYSk7XG4gICAgfTtcblx0LyoqXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiBvYmplY3QgaXMgYSBmdW5jdGlvblxuXHQgKiBAcGFyYW0ge29iamVjdH0gZlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNGdW5jdGlvbihmKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9O1xuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIG9iamVjdCBpcyBhbiBIVE1MRWxlbWVudFxuXHQgKiBAcGFyYW0ge29iamVjdH0gblxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNFbGVtZW50KG4pIHtcbiAgICAgICAgcmV0dXJuIG4gaW5zdGFuY2VvZiBIVE1MRWxlbWVudDtcbiAgICB9O1xuXG5cdC8qKlxuXHQgKiBSZXR1cm4gdHJ1ZSBpZiBvYmplY3QgaXMgYSBOb2RlIG9yIERvY3VtZW50RnJhZ21lbnRcblx0ICogQHBhcmFtIHtvYmplY3R9IG5cblx0ICogQHJldHVybnMge2Jvb2xlYW59XG5cdCAqL1xuICAgIGlzTm9kZShuKSB7XG4gICAgXHRyZXR1cm4gKG4gaW5zdGFuY2VvZiBOb2RlIHx8IG4gaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KTtcblx0fVxuXHQvKipcblx0ICogUmV0dXJuIHRydWUgaWYgc3RyaW5nIHNlZW1zIHRvIGJlIGFuIEhUTUwgY29kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc1xuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNIdG1sKHMpIHtcbiAgICAgICAgcmV0dXJuIChzICsgXCJcIikudHJpbSgpLmluZGV4T2YoXCI8XCIpICE9PSAtMTtcbiAgICB9O1xuXHQvKipcblx0ICogQ2hlY2tzIGlmIGFuIG9iamVjdCBpcyBlbXB0eVxuXHQgKiBAcGFyYW0ge29iamVjdH0gb2JqXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxuXHQgKi9cbiAgICBpc0VtcHR5KG9iaikge1xuICAgICAgICByZXR1cm4gb2JqID09PSB1bmRlZmluZWQgfHwgKHRoaXMuaXNPYmplY3Qob2JqKSAmJiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMCkgfHwgb2JqID09PSBcIlwiO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGFuIGVsZW1lbnQgaXMgdmlzaWJsZVxuICAgICAqIEBwYXJhbSB7SHRtbEVsZW1lbnR9XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNWaXNpYmxlKGVsZW0pIHtcbiAgICAgICAgaWYoISB0aGlzLmlzRWxlbWVudChlbGVtKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCIoaXNWaXNpYmxlKSBOb3QgYW4gZWxlbWVudDogXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZWxlbSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzcGxheSA9IGVsZW0uc3R5bGUuZGlzcGxheSAhPT0gXCJub25lXCI7XG4gICAgICAgIGNvbnN0IG5vdEhpZGRlbiA9IGVsZW0uc3R5bGUudmlzaWJpbGl0eSAhPT0gXCJoaWRkZW5cIjtcbiAgICAgICAgcmV0dXJuIGRpc3BsYXkgJiYgbm90SGlkZGVuO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGVsZW1lbnQgaXMgaW4gdmlld1xuICAgICAqIEBwYXJhbSB7SHRtbEVsZW1lbnR9XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgaW5WaWV3KGVsZW0pIHtcbiAgICAgICAgY29uc3QgcmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHJldHVybiByZWN0LnRvcCA+PSAwICYmIHJlY3QubGVmdCA+PSAwICYmXG4gICAgICAgICAgICAgICByZWN0LmJvdHRvbSA8PSAod2luZG93LmlubmVySGVpZ2h0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpICYmXG4gICAgICAgICAgICAgICByZWN0LnJpZ2h0IDw9ICh3aW5kb3cuaW5uZXJXaWR0aCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpICYmXG4gICAgICAgICAgICAgICByZWN0LndpZHRoID4gMCAmJiByZWN0LmhlaWdodCA+IDBcbiAgICB9XG5cdC8qKlxuXHQgKiBSZW1vdmUgbnVsbCwgZW1wdHkgb3IgdW5kZWZpbmVkIHZhbHVlcyBmcm9tIGFuIGFycmF5XG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFcblx0ICogQHJldHVybnMge0FycmF5fVxuXHQgKi9cbiAgICBjbGVhbkFycmF5KGEpIHtcbiAgICAgICAgcmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGUpeyByZXR1cm4gZSA9PT0gMCB8fCBlIH0pO1xuICAgIH07XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYSB0YWcgbmFtZSBpcyBhIHZhbGlkIEhUTUwgZWxlbWVudFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZVxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG4gICAgaXNWYWxpZEVsZW1lbnQodGFnTmFtZSkge1xuICAgICAgICBjb25zdCAkbm9kZSA9IHRoaXMubmV3RWxlbWVudCh0YWdOYW1lKTtcbiAgICAgICAgcmV0dXJuIHRhZ05hbWUgIT09IFwidGVtcGxhdGVcIiAmJiAkbm9kZS5jb25zdHJ1Y3Rvci5uYW1lICE9PSBcIkhUTUxVbmtub3duRWxlbWVudFwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgZWxlbWVudCBleGlzdHMgaW4gRE9NIGJhc2VkIG9uIHNlbGVjdG9yXG4gICAgICovXG4gICAgZXhpc3RzKHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSAhPT0gbnVsbDtcbiAgICB9XG5cdC8qKlxuXHQgKiBHZXQgYXR0cmlidXRlIG9yIHByb3BlcnR5XG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcblx0ICogQHJldHVybnMgeyp9XG5cdCAqL1xuXHRnZXRBdHRyT3JQcm9wICgkbm9kZSwga2V5KSB7XG5cdFx0bGV0IHZhbHVlID0gXCJcIjtcblx0XHRpZih0aGlzLmhhc0F0dHJPclByb3AoJG5vZGUsICBrZXkpKSB7XG5cdFx0XHR2YWx1ZSA9IHRoaXMuaGFzQXR0cigkbm9kZSwga2V5KSA/ICRub2RlLmdldEF0dHJpYnV0ZShrZXkpOiAkbm9kZVtrZXldO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWVcblx0fVxuXHQvKipcblx0ICogSWYgYSBub2RlIGNvbnRhaW5zIGVpdGhlciBhIHByb3BlcnR5IG9yIGFuIGF0dHJpYnV0ZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAqL1xuXHRoYXNBdHRyT3JQcm9wICgkbm9kZSwga2V5KSB7XG5cdFx0cmV0dXJuIHRoaXMuaGFzQXR0cigkbm9kZSwga2V5KSB8fCB0aGlzLmhhc1Byb3AoJG5vZGUsIGtleSk7XG5cdH1cblx0LyoqXG5cdCAqIElmIGEgbm9kZSBoYXMgYW4gYXR0cmlidXRlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyXG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59XG5cdCAqL1xuXHRoYXNBdHRyICgkbm9kZSwgYXR0cikge1xuXHRcdGxldCBoYXNBdHRyID0gZmFsc2U7XG5cdFx0aWYoJG5vZGUgJiYgIXRoaXMuaXNOdW1lcmljKGF0dHIpKSB7XG5cdFx0XHRzd2l0Y2goYXR0cikge1xuXHRcdFx0XHRjYXNlIFwiY2hlY2tlZFwiOlxuXHRcdFx0XHRcdGhhc0F0dHIgPSAoJG5vZGUudHlwZSAhPT0gdW5kZWZpbmVkICYmICgkbm9kZS50eXBlID09PSBcInJhZGlvXCIgfHwgJG5vZGUudHlwZSA9PT0gXCJjaGVja2JveFwiKSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0aGFzQXR0ciA9ICRub2RlLmhhc0F0dHJpYnV0ZSAhPT0gdW5kZWZpbmVkID8gJG5vZGUuaGFzQXR0cmlidXRlKGF0dHIpIDogZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBoYXNBdHRyO1xuXHR9XG5cdC8qKlxuXHQgKiBJZiBhIG5vZGUgaGFzIGEgcHJvcGVydHkgd2hpY2ggaXMgbm90IGFuIGF0dHJpYnV0ZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcHJvcFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cblx0ICovXG5cdGhhc1Byb3AgKCRub2RlLCBwcm9wKSB7XG5cdFx0bGV0IGhhc1Byb3AgPSBmYWxzZTtcblx0XHRpZigkbm9kZSAmJiAhdGhpcy5pc051bWVyaWMocHJvcCkpIHtcblx0XHQgICAgbGV0IGhhcyA9ICRub2RlW3Byb3BdICE9PSB1bmRlZmluZWQ7XG5cdFx0ICAgIGlmKGhhcyAmJiAkbm9kZVtwcm9wXSA9PT0gbnVsbCAmJiBwcm9wID09PSBcInZhbHVlXCIpIHtcblx0XHRcdFx0aGFzID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRoYXNQcm9wID0gKGhhcyAmJiEgKCRub2RlW3Byb3BdIGluc3RhbmNlb2YgTm9kZSkpICYmISAkbm9kZS5oYXNBdHRyaWJ1dGUocHJvcCk7XG5cdFx0fVxuXHRcdHJldHVybiBoYXNQcm9wO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eSB3aGljaCBpcyB0cnVlL2ZhbHNlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0c2V0UHJvcE9yQXR0ciAoJG5vZGUsIGtleSwgdmFsdWUpIHtcblx0ICAgIGlmKHRoaXMuaGFzUHJvcCgkbm9kZSwga2V5KSkge1xuXHQgICAgXHR0cnkge1xuXHRcdFx0XHQkbm9kZVtrZXldID0gdmFsdWU7XG5cdFx0XHR9IGNhdGNoKGlnbm9yZSkgeyAvL0lmIGZhaWxzLCBzZXQgaXQgYXMgYXR0cmlidXRlOiAoZS5nLiBpbnB1dC5saXN0KVxuXHRcdFx0XHR0aGlzLnNldEF0dHIoJG5vZGUsIGtleSwgdmFsdWUpO1xuXHRcdFx0fVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnNldEF0dHIoJG5vZGUsIGtleSwgdmFsdWUpO1xuICAgIFx0fVxuXHR9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYXR0cmlidXRlIHRvIG5vZGUuIElmIHZhbHVlIGlzIGZhbHNlLCB3aWxsIHJlbW92ZSBpdC5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICovXG5cdHNldEF0dHIgKCRub2RlLCBrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmKHZhbHVlKSB7XG4gICAgICAgICAgICAkbm9kZS5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkbm9kZS5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgfVxuXHR9XG5cdC8qKlxuXHQgKiBEZWZpbmUgYSBwcm9wZXJ0eSB0byBhbiBvYmplY3Rcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcHJvcFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gZGVmXG5cdCAqL1xuXHRkZWZpbmVQcm9wIChvYmosIHByb3AsIGRlZikge1xuXHRcdGlmKHRoaXMuaXNPYmplY3Qob2JqKSkge1xuXHRcdFx0aWYob2JqW3Byb3BdID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwge1xuXHRcdFx0XHRcdGVudW1lcmFibGU6IGZhbHNlLFxuXHRcdFx0XHRcdHdyaXRhYmxlOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRvYmpbcHJvcF0gPSBkZWY7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgTm9kZSB1c2luZyBIVE1MIGNvZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGh0bWxcblx0ICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuXHQgKi9cblx0aHRtbEVsZW1lbnQoaHRtbCkge1xuXHRcdC8vcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGh0bWwpOyBGSVhNRVxuXHRcdGNvbnN0IHRlbXBsYXRlID0gdGhpcy5uZXdFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGh0bWwudHJpbSgpO1xuICAgICAgICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkO1xuXHR9O1xuXHQvKipcblx0ICogQ3JlYXRlcyBhIE5vZGUgd2l0aCBhIHRhZyBuYW1lXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cblx0ICovXG5cdG5ld0VsZW1lbnQodGFnTmFtZSkge1xuXHRcdHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuXHR9O1xuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBlbXB0eSBub2RlIChEb2N1bWVudEZyYWdtZW50KVxuXHQgKiBAcmV0dXJucyB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdG5ld0VtcHR5Tm9kZSgpIHtcblx0XHRyZXR1cm4gbmV3IERvY3VtZW50RnJhZ21lbnQoKVxuXHR9XG5cdC8qKlxuXHQgKiBHZXQgYWxsIG1ldGhvZHMgb2YgY2xhc3Mgb2JqZWN0XG5cdCAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS82NzI2MDEzMS8xOTY1MDdcblx0ICogQHBhcmFtIHtvYmplY3R9IG9ialxuXHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAqL1xuXHRnZXRNZXRob2RzKG9iaikge1xuXHRcdGNvbnN0IG8gPSBSZWZsZWN0LmdldFByb3RvdHlwZU9mKG9iaik7XG5cdFx0Y29uc3QgeCA9IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2Yobyk7XG5cdFx0cmV0dXJuIFJlZmxlY3Qub3duS2V5cyhvKS5maWx0ZXIoaXQgPT4gUmVmbGVjdC5vd25LZXlzKHgpLmluZGV4T2YoaXQpIDwgMCk7XG5cdH07XG5cdC8qKlxuXHQgKiBBcHBlbmQgYWxsIGNoaWxkIGZyb20gb25lIG5vZGUgdG8gYW5vdGhlclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkc3JjTm9kZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkdGd0Tm9kZVxuXHQgKi9cblx0YXBwZW5kQWxsQ2hpbGQoJHNyY05vZGUsICR0Z3ROb2RlKSB7XG5cdFx0Ly9VcGRhdGUgYWxsIGF0IG9uY2Vcblx0XHQvLyRub2RlLmFwcGVuZCguLi4kb3V0RWxlbS5jaGlsZE5vZGVzKTsgLy88LS0gd29ya3MgYnV0IGl0IGlzIHNsb3dlclxuXHRcdHdoaWxlICgkc3JjTm9kZS5maXJzdENoaWxkKSB7XG5cdFx0XHQkdGd0Tm9kZS5hcHBlbmQoJHNyY05vZGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQgKiBQcmVwZW5kIGFsbCBjaGlsZCBmcm9tIG9uZSBub2RlIHRvIGFub3RoZXJcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJHNyY05vZGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJHRndE5vZGVcblx0ICovXG5cdHByZXBlbmRBbGxDaGlsZCgkc3JjTm9kZSwgJHRndE5vZGUpIHtcblx0XHQvL1VwZGF0ZSBhbGwgYXQgb25jZVxuXHRcdC8vJG5vZGUuYXBwZW5kKC4uLiRvdXRFbGVtLmNoaWxkTm9kZXMpOyAvLzwtLSB3b3JrcyBidXQgaXQgaXMgc2xvd2VyXG5cdFx0d2hpbGUgKCRzcmNOb2RlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdCR0Z3ROb2RlLnByZXBlbmQoJHNyY05vZGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQGF1dGhvcjogQS4gTGVwZVxuICogQHVybCA6IGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvXG4gKiBAc2luY2U6IE1heSwgMjAxOFxuICogQHZlcnNpb246IDIuMC4wXG4gKiBAdXBkYXRlZDogMjAyMS0wNC0xNlxuICpcbiAqXG4gKiBNMkQyIENsYXNzXG4gKi9cbmNsYXNzIG0yZDIge1xuICAgICd1c2Ugc3RyaWN0Jztcblx0X3N0b3JlZCA9IHtcblx0XHRldmVudHMgOiBbXSxcblx0XHRkYXRhc2V0Tm9kZXMgOiBbXSxcblx0XHRkYXRhc2V0cyA6IFtdLFxuXHRcdHN0eWxlTm9kZXMgOiBbXSxcblx0XHRzdHlsZXMgOiBbXVxuXHR9XG5cdHN0YXRpYyBzdG9yZWRFdmVudHNUaW1lb3V0ID0gNTA7IC8vbXMgdG8gZ3JvdXAgc2FtZSBldmVudHNcblx0c3RhdGljIHNob3J0ID0gdHJ1ZTsgLy9FbmFibGUgc2hvcnQgYXNzaWduYXRpb24gKGZhbHNlID0gYmV0dGVyIHBlcmZvcm1hbmNlKSBUT0RPOiBkb2N1bWVudCAodXNlIFByb3h5IGxpa2U6IG9iai5hID0gXCJ0ZXh0XCIpXG5cdHN0YXRpYyB1cGRhdGVzID0gdHJ1ZTsgLy9FbmFibGUgXCJvbnVwZGF0ZVwiIChmYWxzZSA9IGJldHRlciBwZXJmb3JtYW5jZSkgVE9ETzogZG9jdW1lbnQgKHVzZSBNdXRhdGlvbk9ic2VydmVyKVxuXHRzdGF0aWMgdXRpbHMgPSBuZXcgVXRpbHMoKTtcblxuXHRjb25zdHJ1Y3RvcigpIHt9XG5cdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTVEFUSUMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0c3RhdGljIGluc3RhbmNlID0gbmV3IG0yZDIoKTtcblx0c3RhdGljIGV4dGVuc2lvbnMgPSB7fTsgLy8gQWRkaXRpb25hbCBwcm9wZXJ0aWVzIGZvciBET01cblx0c3RhdGljIG1haW4gPSAoKCkgPT4ge1xuXHRcdGNvbnN0IGYgPSAoc2VsZWN0b3IsIG9iamVjdCkgPT4ge1xuXHRcdFx0Y29uc3Qgbm9kZSA9IHRoaXMuaW5zdGFuY2UuZ2V0UHJveHlOb2RlKHNlbGVjdG9yLCBvYmplY3QpO1xuXHRcdFx0Ly8gVEVTVDogMTNcblx0XHRcdGlmKG5vZGUgJiYgbm9kZS5vbnJlYWR5ICYmIG0yZDIudXRpbHMuaXNGdW5jdGlvbihub2RlLm9ucmVhZHkpKSB7XG5cdFx0XHRcdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5XCIsIG5vZGUub25yZWFkeSwgeyBvbmNlIDogdHJ1ZSB9KTtcblx0XHRcdFx0Ly8gVGhpcyB3aWxsIGJlIGNhbGxlZCBqdXN0IGFmdGVyIHRoZSBvYmplY3QgaGFzIGJlZW4gcmV0dXJuZWQgKHRvIGJlIHN1cmUgaXQgd2FzIGNyZWF0ZWQpXG5cdFx0XHRcdC8vIFdpdGhvdXQgc2V0VGltZW91dCBcIm9ucmVhZHlcIiB3b3VsZCBiZSB0aGUgc2FtZSBhcyBcIm9ubG9hZFwiLlxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgncmVhZHknKSk7XG5cdFx0XHRcdH0sIDEwKTsgLy9UT0RPOiBEb2N1bWVudFxuXHRcdFx0fVxuXHRcdFx0Ly8gU3RvcmUgcmVmZXJlbmNlcyB0byBkYXRhc2V0cyAodXNlZCBsYXRlciBpbiBvbnB1ZGF0ZSBkYXRhc2V0LCBzdHlsZSk6XG5cdFx0XHRbXCJkYXRhc2V0XCIsXCJzdHlsZVwiXS5mb3JFYWNoKGkgPT4ge1xuXHRcdFx0ICAgIGlmKG5vZGUgJiYgbm9kZVtpXSkge1xuXHRcdFx0XHQgICAgdGhpcy5pbnN0YW5jZS5fc3RvcmVkW2kgKyBcInNcIl0ucHVzaChub2RlW2ldKTtcblx0XHRcdFx0ICAgIHRoaXMuaW5zdGFuY2UuX3N0b3JlZFtpICsgXCJOb2Rlc1wiXS5wdXNoKG5vZGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0cmV0dXJuIG5vZGU7XG5cdFx0fVxuXHQgICAgLy8gRXh0ZW5kcyBVdGlsczpcblx0ICAgIG0yZDIudXRpbHMuZ2V0TWV0aG9kcyhtMmQyLnV0aWxzKS5mb3JFYWNoKGsgPT4geyBmW2tdID0gbTJkMi51dGlsc1trXSB9KTtcblx0XHRyZXR1cm4gZjtcblx0fSkoKTtcblx0LyoqXG5cdCAqIEluaXRpYWxpemF0aW9uLiBVc2U6IG0yZDIucmVhZHkoKVxuXHQgKiBAcGFyYW0geyBmdW5jdGlvbiB9IGNhbGxiYWNrXG5cdCAqL1xuXHRzdGF0aWMgcmVhZHkoY2FsbGJhY2spIHtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhtMmQyLm1haW4pO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEV4ZWN1dGUgc29tZXRoaW5nIG9uIGxvYWQuIEl0IHdpbGwgc2VhcmNoIGZvciBleHRlbnNpb25zLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuXHQgKiBURVNUOiAwMFxuXHQgKi9cblx0c3RhdGljIGxvYWQoY2FsbGJhY2spIHtcblx0ICAgIGlmKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dCA9IGNhbGxiYWNrKG0yZDIubWFpbik7IC8vbWFpbiBjYW4gYmUgZXh0ZW5kZWQgaGVyZVxuICAgICAgICAgICAgaWYobTJkMi51dGlscy5pc09iamVjdChleHQpICYmICFtMmQyLnV0aWxzLmlzRW1wdHkoZXh0KSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dCkuZm9yRWFjaChrID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5pc1ZhbGlkRWxlbWVudChrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi5leHRlbnNpb25zW2tdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtMmQyLmV4dGVuc2lvbnNba10gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgd2UgYXJlIG5vdCByZXBsYWNpbmcgYW55IGV4aXN0aW5nIHByb3BlcnR5OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgJG5vZGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhleHRba10pLmZvckVhY2goaXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaGFzUHJvcCgkbm9kZSwgaXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiV2FybmluZzogcHJvcGVydHkgW1wiICsgaXQgKyBcIl0gYWxyZWFkeSBleGlzdHMgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpbiBub2RlOiBbXCIgKyBrICsgXCJdIHdoaWxlIHRyeWluZyB0byBleHRlbmQgaXQuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiVW5leHBlY3RlZCBiZWhhdmlvdXIgbWF5IGhhcHBlbi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG0yZDIuZXh0ZW5zaW9uc1trXSwgZXh0W2tdKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG0yZDIuZXh0ZW5zaW9uc1tcIipcIl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0yZDIuZXh0ZW5zaW9uc1tcIipcIl0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICRub2RlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZXh0W2tdKS5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtMmQyLnV0aWxzLmhhc1Byb3AoJG5vZGUsIGl0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIldhcm5pbmc6IHByb3BlcnR5IFtcIiArIGl0ICsgXCJdIGFscmVhZHkgZXhpc3RzIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaW4gTm9kZSB3aGlsZSB0cnlpbmcgdG8gZXh0ZW5kIGl0LiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlVuZXhwZWN0ZWQgYmVoYXZpb3VyIG1heSBoYXBwZW4uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihtMmQyLmV4dGVuc2lvbnNbXCIqXCJdLCBleHRba10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cdFx0fVxuXHRcdHJldHVybiBtMmQyLm1haW47IC8vVE9ETzogZG9jdW1lbnRhdGlvbiA6IGNvbnN0ICQgPSBtMmQyLmxvYWQoKTtcblx0fVxuXHQvKipcblx0ICogTTJEMiBXaWxsIHNldCBhbGwgZXh0ZW5zaW9ucyB0byBET00gb2JqZWN0cyAvL1RPRE86IGRvY3VtZW50YXRpb25cblx0ICogQHBhcmFtIHtzdHJpbmcsIEhUTUxFbGVtZW50fSBzZWxlY3RvclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSBbJHJvb3RdXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cblx0ICogVEVTVDogMDFcblx0ICovXG5cdGV4dERvbShzZWxlY3RvciwgJHJvb3QpIHtcblx0XHRpZighIHNlbGVjdG9yKSB7ICAvLyBEbyBub3QgcHJvY2VlZCBpZiBzZWxlY3RvciBpcyBudWxsLCBlbXB0eSBvciB1bmRlZmluZWRcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJTZWxlY3RvciB3YXMgZW1wdHlcIik7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdFx0aWYoJHJvb3QgPT09IHVuZGVmaW5lZCkgeyAkcm9vdCA9IGRvY3VtZW50IH1cblx0XHRjb25zdCAkbm9kZSA9IG0yZDIudXRpbHMuaXNOb2RlKHNlbGVjdG9yKSA/IHNlbGVjdG9yIDogJHJvb3QucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG5cdFx0aWYoISAkbm9kZSkge1xuXHRcdFx0aWYobTJkMi51dGlscy5pc1N0cmluZyhzZWxlY3RvcikpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIlNlbGVjdG9yOiBcIiArIHNlbGVjdG9yICsgXCIgZGlkbid0IG1hdGNoIGFueSBlbGVtZW50IGluIG5vZGU6XCIpO1xuXHRcdFx0XHRjb25zb2xlLmxvZygkcm9vdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiTm9kZSB3YXMgbnVsbFwiKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRpZigkbm9kZS5fbTJkMiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHQkbm9kZS5fbTJkMiA9IHRydWU7IC8vZmxhZyB0byBwcmV2ZW50IGl0IGZyb20gcmUtYXNzaWduIG1ldGhvZHNcblx0XHRcdFtcInBhcmVudFwiLFwic2libGluZ1wiLFwibmV4dFwiLFwicHJldlwiLFwiZmluZFwiLFwiZmluZEFsbFwiLFwib251cGRhdGVcIixcIm9ucmVhZHlcIixcInNob3dcIixcIm9uc2hvd1wiLFwiaW5WaWV3XCIsXCJjc3NcIixcInRleHRcIixcImh0bWxcIixcImdldERhdGFcIixcImluZGV4XCJdLmZvckVhY2goZiA9PiB7XG5cdFx0XHRcdGlmKCRub2RlLmhhc093blByb3BlcnR5KGYpKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJOb2RlIGFscmVhZHkgaGFkIFtcIitmK1wiXSBwcm9wZXJ0eS4gSXQgbWlnaHQgY2F1c2UgdW5leHBlY3RlZCBiZWhhdmlvdXIuXCIpXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJZb3UgbWF5IG5lZWQgdG8gdXBkYXRlIHRoZSBNMkQyIHZlcnNpb24gb3IgcmVwb3J0IGl0IHRvOiBnaXRodWIuY29tL2ludGVsbGlzcmMvbTJkMi9cIilcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQvLyBQcm9wZXJ0aWVzOlxuXHRcdFx0Ly8gVEVTVDogMDEsIC4uLlxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCRub2RlLCBcInRleHRcIiwge1xuXHRcdFx0XHRnZXQoKSB7IHJldHVybiB0aGlzLmNoaWxkTm9kZXMubGVuZ3RoID8gdGhpcy5pbm5lclRleHQgOiB0aGlzLnRleHRDb250ZW50OyB9LFxuXHRcdFx0XHRzZXQodmFsdWUpIHtcblx0XHRcdFx0XHQvLyB0ZXh0IHNob3VsZCBvbmx5IGNoYW5nZSBUZXh0IG5vZGVzIGFuZCBub3QgY2hpbGRyZW46IC8vVE9ETzogZG9jdW1lbnRhdGlvblxuXHRcdFx0XHRcdGlmKHRoaXMuY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGxldCBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0dGhpcy5jaGlsZE5vZGVzLmZvckVhY2gobiA9PiB7XG5cdFx0XHRcdFx0XHRcdGlmKG4uY29uc3RydWN0b3IubmFtZSA9PT0gXCJUZXh0XCIpIHtcblx0XHRcdFx0XHRcdFx0XHRuLm5vZGVWYWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRpZighIGZvdW5kKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucHJlcGVuZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh2YWx1ZSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRleHRDb250ZW50ID0gdmFsdWVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Ly8gVEVTVDogNDMsMTMsMjcsLi4uXG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoJG5vZGUsIFwiaHRtbFwiLCB7XG5cdFx0XHRcdGdldCgpIHsgcmV0dXJuIHRoaXMuaW5uZXJIVE1MOyB9LFxuXHRcdFx0XHRzZXQodmFsdWUpIHsgdGhpcy5pbm5lckhUTUwgPSB2YWx1ZTsgIH1cblx0XHRcdH0pO1xuXHRcdFx0Ly8gVEVTVDogMDJcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgkbm9kZSwgXCJjc3NcIiwgeyAgIC8vVE9ETzogZG9jdW1lbnQgbmV3IGJlaGF2aW91clxuXHRcdFx0XHRnZXQoKSB7XG5cdFx0XHRcdCAgICByZXR1cm4gdGhpcy5jbGFzc0xpc3Q7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHNldCh2YWx1ZSkge1xuXHRcdFx0XHQgICAgaWYobTJkMi51dGlscy5pc0FycmF5KHZhbHVlKSkge1xuICAgIFx0XHRcdFx0ICAgIHRoaXMuY2xhc3NOYW1lID0gdmFsdWUuam9pbihcIiBcIik7XG5cdFx0XHRcdCAgICB9IGVsc2UgaWYobTJkMi51dGlscy5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICBcdFx0XHRcdCAgICB0aGlzLmNsYXNzTmFtZSA9IHZhbHVlO1xuXHRcdFx0XHQgICAgfSBlbHNlIGlmKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0XHRcdFx0ICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaChjID0+IHtcblx0XHRcdFx0ICAgICAgICAgICAgaWYodmFsdWVbY10pIHtcblx0XHRcdFx0ICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZChjKTtcblx0XHRcdFx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0XHRcdFx0ICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZShjKTtcblx0XHRcdFx0ICAgICAgICAgICAgfVxuXHRcdFx0XHQgICAgICAgIH0pO1xuXHRcdFx0XHQgICAgfSBlbHNlIHtcblx0XHRcdFx0ICAgICAgICBjb25zb2xlLmVycm9yKFwiVHJ5aW5nIHRvIGFzc2lnbiBhIHdyb25nIHZhbHVlIHRvIGNzcyA6IFwiICsgdmFsdWUpO1xuXHRcdFx0XHQgICAgfVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdC8vIFRFU1Q6IDE2XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoJG5vZGUsIFwic2hvd1wiLCB7XG5cdFx0XHRcdGdldCgpIHsgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHQgICAgcmV0dXJuIG0yZDIudXRpbHMuaXNWaXNpYmxlKHRoaXMpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXQoc2hvdykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjc3NEaXNwbGF5ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldENvbXB1dGVkU3R5bGUodGhpcywgbnVsbCkuZGlzcGxheTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdERpc3BsYXkgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMudGFnTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LmFwcGVuZChuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIuYXBwZW5kKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheSA9IGdldENvbXB1dGVkU3R5bGUobiwgbnVsbCkuZGlzcGxheTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGxheTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYoc2hvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3NzRGlzcGxheSgpID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuX20yZDJfZGlzcGxheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSB0aGlzLl9tMmQyX2Rpc3BsYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImRpc3BsYXlcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNzc0Rpc3BsYXkoKSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRTaG93ID0gZGVmYXVsdERpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IHRoaXMuZGF0YXNldC5kaXNwbGF5IHx8IChkZWZhdWx0U2hvdyAhPT0gXCJub25lXCIgPyBkZWZhdWx0U2hvdyA6IFwiYmxvY2tcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVEVTVDogMTZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLm9uc2hvdyAhPT0gdW5kZWZpbmVkICYmIG0yZDIudXRpbHMuaXNGdW5jdGlvbih0aGlzLm9uc2hvdykpIHsgLy9UT0RPOiBkb2N1bWVudCBvbnNob3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbnNob3codGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVkID0gdGhpcy5zdHlsZS5kaXNwbGF5ICE9PSBcIm5vbmVcIiA/IHRoaXMuc3R5bGUuZGlzcGxheSA6IGNzc0Rpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0b3JlZCAhPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tMmQyX2Rpc3BsYXkgPSBzdG9yZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0Ly9UT0RPOiBkb2N1bWVudCBob3cgdG8gZXh0ZW5kXG5cdFx0XHQvL1RPRE86IHRlc3Rcblx0XHRcdGxldCBleHRlbmQgPSB7fTtcblx0XHRcdGlmKG0yZDIuZXh0ZW5zaW9uc1tcIipcIl0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRPYmplY3QuYXNzaWduKGV4dGVuZCwgbTJkMi5leHRlbnNpb25zW1wiKlwiXSk7XG5cdFx0XHR9XG5cdFx0XHRpZihtMmQyLmV4dGVuc2lvbnNbJG5vZGUudGFnTmFtZV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRPYmplY3QuYXNzaWduKGV4dGVuZCwgbTJkMi5leHRlbnNpb25zWyRub2RlLnRhZ05hbWVdKTtcblx0XHRcdH1cblx0XHRcdC8vIEZ1bmN0aW9uczpcblx0XHRcdE9iamVjdC5hc3NpZ24oJG5vZGUsIHtcblx0XHRcdCAgICBpblZpZXc6ICgpID0+IHsgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0ICAgICAgICByZXR1cm4gbTJkMi51dGlscy5pblZpZXcoJG5vZGUpO1xuXHRcdFx0ICAgIH0sXG5cdFx0XHRcdG5leHQ6ICgpID0+IHsgLy9URVNUOiAwN1xuXHRcdFx0XHQgICAgcmV0dXJuICRub2RlLm5leHRFbGVtZW50U2libGluZztcblx0XHRcdFx0fSxcblx0XHRcdFx0cHJldjogKCkgPT4geyAvL1RFU1Q6IDA3XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkbm9kZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRwYXJlbnQ6ICgpID0+IHsgLy9UT0RPOiB0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuZXh0RG9tKCRub2RlLnBhcmVudEVsZW1lbnQpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzaWJsaW5nOiAoc2VsKSA9PiB7IC8vVE9ETzogdGVzdFxuXHRcdFx0XHRcdHJldHVybiAkbm9kZS5wYXJlbnRFbGVtZW50LmZpbmQoc2VsKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZmluZDogKGl0KSA9PiB7IC8vIFRlc3Q6IDA0XG5cdFx0XHRcdFx0Y29uc3Qgbm9kZSA9ICRub2RlLnF1ZXJ5U2VsZWN0b3IoaXQpXG5cdFx0XHRcdFx0cmV0dXJuIG5vZGUgPyB0aGlzLmV4dERvbShub2RlKSA6IG51bGw7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZpbmRBbGw6IChpdCkgPT4geyAvL1RFU1Q6IDA1XG5cdFx0XHRcdFx0Y29uc3Qgbm9kZUxpc3QgPSBpdCA9PT0gdW5kZWZpbmVkID8gQXJyYXkuZnJvbSgkbm9kZS5jaGlsZHJlbikgOiAkbm9kZS5xdWVyeVNlbGVjdG9yQWxsKGl0KTtcblx0XHRcdFx0XHRub2RlTGlzdC5mb3JFYWNoKG4gPT4geyB0aGlzLmV4dERvbShuKSB9KTtcblx0XHRcdFx0XHRyZXR1cm4gbm9kZUxpc3Q7XG5cdFx0XHRcdH0sXG5cdFx0XHR9LCBleHRlbmQpO1xuXHRcdFx0Ly8gU29tZSBlbGVtZW50cyBsaWtlIDxPUFRJT04+IGFscmVhZHkgaGF2ZSBpbmRleFxuXHRcdFx0aWYoJG5vZGUuaW5kZXggPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHQkbm9kZS5pbmRleCA9ICgpID0+IHsgLy9URVNUOiAwN1xuXHRcdFx0XHRcdHJldHVybiBBcnJheS5mcm9tKCRub2RlLnBhcmVudE5vZGUuY2hpbGRyZW4pLmluZGV4T2YoJG5vZGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBMZXQgYXR0cmlidXRlcyBrbm93IGFib3V0IGNoYW5nZXMgaW4gdmFsdWVzIC8vVE9ETzogdGVzdFxuXHRcdFx0aWYoW1wiSU5QVVRcIiwgXCJURVhUQVJFQVwiLCBcIlNFTEVDVFwiXS5pbmRleE9mKCRub2RlLnRhZ05hbWUpID49IDAgJiYgbTJkMi51dGlscy5oYXNBdHRyT3JQcm9wKCRub2RlLCBcInZhbHVlXCIpKSB7XG5cdFx0XHRcdCRub2RlLm9uaW5wdXQgPSBmdW5jdGlvbigpIHsgdGhpcy5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB0aGlzLnZhbHVlICl9XG5cdFx0XHR9XG5cdFx0XHQvLyBBZGQgZ2V0RGF0YSgpIHRvIGZvcm06IC8vVE9ETzogZG9jdW1lbnRcblx0XHRcdGlmKCRub2RlLnRhZ05hbWUgPT09IFwiRk9STVwiKSB7XG5cdFx0XHRcdCRub2RlLmdldERhdGEgPSBmdW5jdGlvbiAoaW5jbHVkZU5vdFZpc2libGUpIHsgLy9UT0RPIGRvY3VtZW50OiBpbmNsdWRlTm90VmlzaWJsZVxuXHRcdFx0XHRcdGNvbnN0IGRhdGEgPSB7fTtcblx0XHRcdFx0XHRjb25zdCBmZCA9IG5ldyBGb3JtRGF0YSh0aGlzKTtcblx0XHRcdFx0XHRjb25zdCBpbmNsdWRlID0gaW5jbHVkZU5vdFZpc2libGUgfHwgZmFsc2U7XG5cdFx0XHRcdFx0Zm9yIChsZXQgcGFpciBvZiBmZC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW0gPSAkbm9kZS5maW5kKFwiW25hbWU9J1wiK3BhaXJbMF0rXCInXVwiKTtcblx0XHRcdFx0XHRcdGlmKGluY2x1ZGUgfHwgZWxlbS50eXBlID09PSBcImhpZGRlblwiIHx8IGVsZW0uc2hvdykge1xuXHRcdFx0XHRcdFx0XHRkYXRhW3BhaXJbMF1dID0gZWxlbS50eXBlID09PSBcImZpbGVcIiA/IGVsZW0uZmlsZXMgOiBwYWlyWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuICRub2RlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gJG5vZGU7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQgKiBNMkQyIHdpbGwgY3JlYXRlIGN1c3RvbSBsaW5rcyBhbmQgcHJvcGVydGllc1xuXHQgKiBAcGFyYW0ge3N0cmluZywgSFRNTEVsZW1lbnQsIE5vZGV9IHNlbGVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3Rcblx0ICogQHJldHVybnMge0hUTUxFbGVtZW50LCBQcm94eX1cblx0ICogVEVTVDogMDMsLi4uXG5cdCAqL1xuXHRkb0RvbShzZWxlY3Rvciwgb2JqZWN0KSB7XG5cdFx0Ly8gV2hlbiBubyBzZWxlY3RvciBpcyBzcGVjaWZpZWQsIHNldCBcImJvZHlcIlxuXHRcdGlmKG0yZDIudXRpbHMuaXNPYmplY3Qoc2VsZWN0b3IpICYmIG9iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRvYmplY3QgPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gbTJkMi51dGlscy5uZXdFbXB0eU5vZGUoKTsgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0aWYob2JqZWN0Lndhcm4gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0ICAgIG9iamVjdC53YXJuID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKCEobTJkMi51dGlscy5pc1N0cmluZyhzZWxlY3RvcikgfHwgbTJkMi51dGlscy5pc0VsZW1lbnQoc2VsZWN0b3IpIHx8IG0yZDIudXRpbHMuaXNOb2RlKHNlbGVjdG9yKSkpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJTZWxlY3RvciBpcyBub3QgYSBzdHJpbmcgb3IgYSBOb2RlOlwiKVxuXHRcdFx0Y29uc29sZS5sb2coc2VsZWN0b3IpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGlmKG0yZDIudXRpbHMuaXNTdHJpbmcoc2VsZWN0b3IpICYmISBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSkge1xuXHRcdCAgICBjb25zb2xlLmxvZyhcIlNlbGVjdGVkIGVsZW1lbnQgZG9lc24ndCBleGlzdHM6IFwiICsgc2VsZWN0b3IpXG5cdFx0ICAgIHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRjb25zdCAkbm9kZSA9IHRoaXMuZXh0RG9tKHNlbGVjdG9yKTsgLy8gQmUgc3VyZSB0aGF0ICRub2RlIGlzIGFuIGV4dGVuZGVkIERPTSBvYmplY3Rcblx0XHQvLyBJZiB0aGVyZSBpcyBubyBvYmplY3QgcmV0dXJuIG9ubHkgZXh0ZW5zaW9uXG5cdFx0aWYob2JqZWN0ID09PSB1bmRlZmluZWQpIHsgLy9UT0RPOiBkb2N1bWVudGF0aW9uOiBleHRlbmRpbmcgbm9kZXNcblx0XHRcdHJldHVybiAkbm9kZTtcblx0XHR9XG5cdFx0b2JqZWN0ID0gdGhpcy5wbGFpblRvT2JqZWN0KCRub2RlLCBvYmplY3QpOyAvLyBCZSBzdXJlIGl0J3MgYW4gb2JqZWN0XG5cblx0XHQvLyBURVNUOiAwM1xuXHRcdC8vIFdlIGZpbHRlci1vdXQgc29tZSBrbm93biBrZXlzOlxuXHRcdE9iamVjdC5rZXlzKG9iamVjdCkuZmlsdGVyKGl0ID0+ICEgW1widGFnTmFtZVwiXS5pbmNsdWRlcyhpdCkpLmZvckVhY2goa2V5ID0+IHtcblx0XHRcdGxldCBvcmlnVmFsdWUgPSBvYmplY3Rba2V5XTtcblx0XHRcdGlmKG9yaWdWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IG9yaWdWYWx1ZSA9PT0gbnVsbCkge1xuXHRcdFx0ICAgIGNvbnNvbGUubG9nKFwiVmFsdWUgd2FzIG5vdCBzZXQgZm9yIGtleTogXCIgKyBrZXkgKyBcIiwgJ2VtcHR5JyB3YXMgdXNlZCBpbiBvYmplY3Q6IFwiKTtcblx0XHRcdCAgICBjb25zb2xlLmxvZyhvYmplY3QpO1xuXHRcdFx0ICAgIGNvbnNvbGUubG9nKFwiSW4gbm9kZTpcIik7XG5cdFx0XHQgICAgY29uc29sZS5sb2coJG5vZGUpO1xuXHRcdFx0ICAgIG9yaWdWYWx1ZSA9IFwiXCI7XG5cdCBcdFx0fVxuICAgICAgICAgICAgLy9Mb29rIGZvciBvbnVwZGF0ZSBpbmxpbmUgKFsgTm9kZSwgc3RyaW5nIF0pXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnVwZGF0ZVZhbHVlKCRub2RlLCBrZXksIG9yaWdWYWx1ZSk7XG5cdFx0XHQvL0xvb2sgZm9yIHByb3BlcnR5IGZpcnN0OlxuXHRcdFx0bGV0IGlzUHJvcCA9IG0yZDIudXRpbHMuaGFzUHJvcCgkbm9kZSwga2V5KTtcblx0XHRcdGxldCBpc0F0dHIgPSBtMmQyLnV0aWxzLmhhc0F0dHIoJG5vZGUsIGtleSk7XG5cdFx0XHQvL0lkZW50aWZ5IGlmIHZhbHVlIG1hdGNoZXMgcHJvcGVydHkgdHlwZTpcblx0XHRcdGxldCBmb3VuZE1hdGNoID0gZmFsc2U7XG5cdFx0XHRpZihpc0F0dHIgfHwgaXNQcm9wKSB7XG5cdFx0XHRcdC8vIG5vaW5zcGVjdGlvbiBGYWxsVGhyb3VnaEluU3dpdGNoU3RhdGVtZW50SlNcblx0XHRcdFx0c3dpdGNoKHRydWUpIHtcblx0XHRcdFx0XHQvLyBNYXRoIGZvdW5kOlxuXHRcdFx0XHRcdGNhc2Uga2V5ID09PSBcInZhbHVlXCIgJiYgbTJkMi51dGlscy5oYXNQcm9wKCRub2RlLCBcInZhbHVlQXNEYXRlXCIpICYmIHZhbHVlIGluc3RhbmNlb2YgRGF0ZTogLy8gRGF0ZXNcblx0XHRcdFx0XHRcdGtleSA9IFwidmFsdWVBc0RhdGVcIjsgLy9yZW5hbWVkIHZhbHVlIHRvIHZhbHVlQXNEYXRlXG5cdFx0XHRcdFx0Y2FzZSBrZXkgPT09IFwiY3NzXCI6IC8vIGNzcyBpcyBhIFByb3h5IHNvIGl0IGZhaWxzIHRvIHZlcmlmeTpcblx0XHRcdFx0XHRjYXNlIHR5cGVvZiB2YWx1ZSA9PT0gdHlwZW9mICRub2RlW2tleV06IC8vU2FtZSBUaW1lXG5cdFx0XHRcdFx0Y2FzZSBtMmQyLnV0aWxzLmlzU3RyaW5nKCRub2RlW2tleV0pICYmIG0yZDIudXRpbHMuaXNOdW1lcmljKHZhbHVlKTogLy9OdW1lcmljIHByb3BlcnRpZXNcblx0XHRcdFx0XHRjYXNlIChtMmQyLnV0aWxzLmlzRnVuY3Rpb24odmFsdWUpICYmIG0yZDIudXRpbHMuaXNPYmplY3QoJG5vZGVba2V5XSkpOiAvL0Z1bmN0aW9uc1xuXHRcdFx0XHRcdGNhc2UgbTJkMi51dGlscy5pc0Jvb2wodmFsdWUpICYmIG0yZDIudXRpbHMuaXNTdHJpbmcoJG5vZGVba2V5XSk6IC8vQm9vbGVhblxuXHRcdFx0XHRcdGNhc2UgdHlwZW9mICRub2RlW2tleV0gPT09IFwib2JqZWN0XCIgJiYgJG5vZGUudGFnTmFtZSA9PT0gXCJJTlBVVFwiOiAvL0Nhc2VzIGxpa2UgXCJsaXN0XCIgaW4gaW5wdXRcblx0XHRcdFx0XHRcdGZvdW5kTWF0Y2ggPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIFByb3BlcnRpZXMgYW5kIEF0dHJpYnV0ZXM6XG5cdFx0XHRpZihmb3VuZE1hdGNoKSB7XG5cdFx0XHRcdGxldCBlcnJvciA9IGZhbHNlO1xuXHRcdFx0XHRzd2l0Y2goa2V5KSB7XG5cdFx0XHRcdFx0Y2FzZSBcImNsYXNzTGlzdFwiOiAvL1RPRE86IHRlc3Rcblx0XHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdFx0XHRcdFx0dmFsdWUuZm9yRWFjaCh2ID0+IHtcblx0XHRcdFx0XHRcdFx0XHQkbm9kZVtrZXldLmFkZCh2KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYobTJkMi51dGlscy5pc1N0cmluZyh2YWx1ZSkpIHtcblx0XHRcdFx0XHRcdFx0JG5vZGVba2V5XS5hZGQodmFsdWUpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZXJyb3IgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0XHRjYXNlIFwic3R5bGVcIjogLy9UT0RPOiB0ZXN0XG5cdFx0XHRcdFx0Y2FzZSBcImRhdGFzZXRcIjogLy9UT0RPOiBhcyBpdCBpcyBhbHJlYWR5IGEgRE9NLCB3ZSBkb24ndCBuZWVkIGl0IG1heWJlP1xuXHRcdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0XHRPYmplY3Qua2V5cyh2YWx1ZSkuZm9yRWFjaChrID0+IHtcblx0XHRcdFx0XHRcdFx0XHQkbm9kZVtrZXldW2tdID0gdGhpcy51cGRhdGVWYWx1ZSgkbm9kZVtrZXldLCBrLCB2YWx1ZVtrXSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZXJyb3IgPSB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0c3dpdGNoKHRydWUpIHtcblx0XHRcdFx0XHRcdFx0Y2FzZSBtMmQyLnV0aWxzLmlzQm9vbCh2YWx1ZSk6IC8vIGJvb2xlYW4gcHJvcGVydGllc1xuXHRcdFx0XHRcdFx0XHRjYXNlIG0yZDIudXRpbHMuaGFzQXR0ck9yUHJvcCgkbm9kZSwga2V5KTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbTJkMi51dGlscy5zZXRQcm9wT3JBdHRyKCRub2RlLCBrZXksIHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0XHRicmVha1xuXHRcdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRcdCRub2RlW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZihlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIHZhbHVlIHBhc3NlZCB0byAnXCIgKyBrZXkgKyBcIic6IFwiKVxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHZhbHVlKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkludG8gTm9kZTpcIik7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJG5vZGUpO1xuXHRcdFx0XHR9XG5cdFx0XHQvLyBMb29rIGZvciBlbGVtZW50czpcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHQgICAgY29uc3Qgb3B0aW9ucyA9IFtdO1xuXHRcdFx0ICAgIHRyeSB7XG5cdFx0XHQgICAgICAgIC8vIFRFU1Q6IDAzXG5cdFx0XHQgICAgICAgIC8vIEZ1bmN0aW9ucyBjYW4gbm90IGJlIHBsYWNlZCBkaXJlY3RseSBpbnRvIGVsZW1lbnRzLCBzbyB3ZSBza2lwXG5cdFx0XHQgICAgICAgIGlmKGtleSAhPT0gXCJ0ZW1wbGF0ZVwiICYmISBtMmQyLnV0aWxzLmlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0xvb2sgZm9yIElEOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoa2V5ICYmIGtleS5tYXRjaCgvXlxcdy8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVsZW0gPSAkbm9kZS5maW5kKFwiI1wiICsga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtICYmIG9wdGlvbnMuaW5kZXhPZihlbGVtKSA9PT0gLTEpIHsgb3B0aW9ucy5wdXNoKGVsZW0pOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Mb29rIGZvciBuYW1lOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0gPSAkbm9kZS5maW5kKFwiW25hbWU9J1wiK2tleStcIiddXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVsZW0gJiYgb3B0aW9ucy5pbmRleE9mKGVsZW0pID09PSAtMSkgeyBvcHRpb25zLnB1c2goZWxlbSk7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0xvb2sgZm9yIGNsYXNzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1zID0gQXJyYXkuZnJvbSgkbm9kZS5maW5kQWxsKFwiLlwiICsga2V5KSkuZmlsdGVyKGkgPT4gb3B0aW9ucy5pbmRleE9mKGkpIDwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlbGVtcy5sZW5ndGggPiAwKSB7IGVsZW1zLmZvckVhY2goZSA9PiBvcHRpb25zLnB1c2goZSkpIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTG9vayBmb3IgZWxlbWVudCBvciBmcmVlIHNlbGVjdG9yIChlLmc6IFwiZGl2ID4gc3BhblwiKTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1zID0gIEFycmF5LmZyb20oJG5vZGUuZmluZEFsbChrZXkpKS5maWx0ZXIoaSA9PiBvcHRpb25zLmluZGV4T2YoaSkgPCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZWxlbXMubGVuZ3RoID4gMCkgeyBlbGVtcy5mb3JFYWNoKGUgPT4gb3B0aW9ucy5wdXNoKGUpKSB9XG4gICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdCAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBzZWxlY3RvcjogXCIgKyBrZXkpO1xuXHRcdFx0XHQgICAgY29uc29sZS5sb2coZSk7XG5cdFx0XHRcdCAgICByZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYob3B0aW9ucy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0Y29uc3QgaXRlbXMgPSBbXTtcblx0XHRcdFx0XHRvcHRpb25zLmZvckVhY2goaXRlbSA9PiB7XG5cdFx0XHRcdFx0XHRpdGVtcy5wdXNoKHRoaXMucmVuZGVyKGl0ZW0sIGtleSwgdmFsdWUpKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aGlzLmxpbmtOb2RlKCRub2RlLCBrZXksIGl0ZW1zKTtcblx0XHRcdFx0XHRpZih2YWx1ZS53YXJuID09PSB1bmRlZmluZWQgfHwgdmFsdWUud2FybiAhPT0gZmFsc2UpIHsgLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJNdWx0aXBsZSBlbGVtZW50cyB3ZXJlIGFzc2lnbmVkIHdpdGgga2V5OiBbXCIgKyBrZXkgKyBcIl0gdW5kZXIgbm9kZTogXCIpXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygkbm9kZSk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkl0IG1pZ2h0IGJlIHdoYXQgd2UgZXhwZWN0LCBidXQgaWYgaXQgaXMgbm90IGV4cGVjdGVkIGl0IGNvdWxkIHJlc3VsdCBcIiArXG5cdFx0XHRcdFx0XHRcdFx0XHRcIm9uIHNvbWUgZWxlbWVudHMgbWlzdGFrZW5seSByZW5kZXJlZC4gWW91IGNhbiBzcGVjaWZ5IFwiICtcblx0XHRcdFx0XHRcdFx0XHRcdFwiJ3dhcm4gOiBmYWxzZScgdW5kZXIgdGhhdCBlbGVtZW50IHRvIGhpZGUgdGhpcyBtZXNzYWdlLlwiKSAvL1RPRE86IGFkZCBsaW5rIHRvIHJlZmVyZW5jZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmKG9wdGlvbnMubGVuZ3RoID09PSAxKSB7IC8vIEZvdW5kIHNpbmdsZSBvcHRpb246IHBsYWNlIHZhbHVlc1xuXHRcdFx0XHRcdGNvbnN0IG9wdCA9IG9wdGlvbnNbMF07XG5cdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc0VsZW1lbnQob3B0KSkgeyAvL1RPRE86IHRlc3QgKG5vIHRlbXBsYXRlIG9yIG5vIGl0ZW1zKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5wbGFpblRvT2JqZWN0KG9wdCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0X2tleSA9IG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdChvYmopICYmIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID49IDEgPyBPYmplY3Qua2V5cyhvYmopWzBdIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9wdF9rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMudXBkYXRlVmFsdWUob3B0LCBvcHRfa2V5LCBvcmlnVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdFx0aWYobTJkMi51dGlscy5pc0FycmF5KHZhbHVlKSkgeyAvLyBQcm9jZXNzIEFycmF5XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHRlbXBsYXRlID0gb2JqZWN0W1widGVtcGxhdGVcIl07XG5cdFx0XHRcdFx0XHRcdHRoaXMuZG9JdGVtcyhvcHQsIHZhbHVlLCB0ZW1wbGF0ZSk7XG5cdFx0XHRcdFx0XHRcdHRoaXMubGlua05vZGUoJG5vZGUsIGtleSwgb3B0KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7IC8vIE5vcm1hbCBPYmplY3RzOlxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlckFuZExpbmsoJG5vZGUsIG9wdCwga2V5LCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJCVUc6IEl0IHNob3VsZCBoYXZlIGJlZW4gYSBub2RlIGJ1dCBnb3Q6IFwiKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKG9wdCk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBhcmVudCBub2RlOlwiKVxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJG5vZGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmKG9wdGlvbnMubGVuZ3RoID09PSAwKSB7IC8vTm8gb3B0aW9ucyBmb3VuZDogY3JlYXRlIG5vZGVzXG5cdFx0XHRcdCAgICAvLyBNYWtlIFwiaXRlbXNcIiBvcHRpb25hbDogLy9UT0RPOiBkb2N1bWVudFxuXHRcdFx0XHRcdGlmKGtleSA9PT0gXCJ0ZW1wbGF0ZVwiICYmIG9iamVjdFtcIml0ZW1zXCJdID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHQgICAga2V5ID0gXCJpdGVtc1wiO1xuXHRcdFx0XHRcdCAgICB2YWx1ZSA9IFtdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBpc0Z1bmMgPSBtMmQyLnV0aWxzLmlzRnVuY3Rpb24odmFsdWUpO1xuXHRcdFx0XHRcdGlmKHZhbHVlLnRhZ05hbWUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgJG5ld05vZGUgPSB0aGlzLmFwcGVuZEVsZW1lbnQoJG5vZGUsIHZhbHVlLnRhZ05hbWUpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJBbmRMaW5rKCRub2RlLCAkbmV3Tm9kZSwga2V5LCB2YWx1ZSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNWYWxpZEVsZW1lbnQoa2V5KSAmJiEgaXNGdW5jKSB7XG5cdFx0XHRcdFx0XHRjb25zdCAkbmV3Tm9kZSA9IHRoaXMuYXBwZW5kRWxlbWVudCgkbm9kZSwga2V5KTtcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyQW5kTGluaygkbm9kZSwgJG5ld05vZGUsIGtleSwgdmFsdWUpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihrZXkgPT09IFwiaXRlbXNcIikgeyAvL0l0ZW1zIGNyZWF0aW9uXG5cdFx0XHRcdFx0XHRjb25zdCB0ZW1wbGF0ZSA9IG9iamVjdFtcInRlbXBsYXRlXCJdO1xuXHRcdFx0XHRcdFx0Ly8gQWxsb3cgdXNlIG9mIHBsYWluIG9iamVjdCB0byBzcGVjaWZ5IHZhbHVlIC0+IHRleHQgLy9UT0RPOiBkb2N1bWVudGF0aW9uXG5cdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHQgICAgY29uc3QgdmFsVG1wID0gW107XG5cdFx0XHRcdFx0XHQgICAgT2JqZWN0LmtleXModmFsdWUpLmZvckVhY2gobyA9PiB7XG5cdFx0XHRcdFx0XHQgICAgXHRsZXQgb2JqO1xuXHRcdFx0XHRcdFx0ICAgIFx0aWYoJG5vZGUudGFnTmFtZSA9PT0gXCJETFwiKSB7IC8vVE9ETzogZG9jdW1lbnQgRExcblx0XHRcdFx0XHRcdFx0XHRcdG9iaiA9IHsgZHQgOiBvLCBkZCA6IHZhbHVlW29dIH1cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0b2JqID0geyB0ZXh0OiB2YWx1ZVtvXSB9O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG0yZDIudXRpbHMuaGFzQXR0ck9yUHJvcCgkbm9kZSwgXCJ2YWx1ZVwiKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRvYmoudmFsdWUgPSBvO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqLmRhdGFzZXQgPSB7aWQ6IG99O1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR2YWxUbXAucHVzaChvYmopO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdCAgICB2YWx1ZSA9IHZhbFRtcDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIFByb2Nlc3MgQXJyYXk6XG5cdFx0XHRcdFx0XHRpZihtMmQyLnV0aWxzLmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZG9JdGVtcygkbm9kZSwgdmFsdWUsIHRlbXBsYXRlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiV2FybmluZzogJ2l0ZW1zJyBzcGVjaWZpZWQgYnV0IHZhbHVlIGlzIG5vdCBhbmQgYXJyYXksIGluIGVsZW1lbnQ6IFwiKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJG5vZGUpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlBhc3NlZCB2YWx1ZXMgYXJlOiBcIik7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHZhbHVlKTtcblx0XHRcdFx0XHRcdH1cbiAgICBcdFx0XHRcdH0gZWxzZSBpZihpc0Z1bmMpIHtcblx0XHRcdFx0XHRcdGlmKG0yZDIudXBkYXRlcykge1xuXHRcdFx0XHRcdFx0ICAgIC8vIEJ5IHVzaW5nIGFkZEV2ZW50TGlzdGVuZXIgd2UgY2FuIGFzc2lnbiBtdWx0aXBsZSBsaXN0ZW5lcnMgdG8gYSBzaW5nbGUgbm9kZSAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRcdFx0XHRcdGlmIChrZXkgPT09IFwib251cGRhdGVcIikge1xuXHRcdFx0XHRcdFx0XHRcdCRub2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJ1cGRhdGVcIiwgdmFsdWUsIHRydWUpOyAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCRub2RlW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHR9IGVsc2UgaWYoa2V5ICE9PSBcInRlbXBsYXRlXCIgJiYgKGtleSAhPT0gXCJ3YXJuXCIgJiYgdmFsdWUgIT09IGZhbHNlKSkgeyAvL1dlIGhhbmRsZSB0ZW1wbGF0ZXMgaW5zaWRlIGl0ZW1zXG5cdFx0XHRcdFx0XHRpZihvYmplY3Qud2FybiA9PT0gdW5kZWZpbmVkIHx8IG9iamVjdC53YXJuICE9PSBmYWxzZSkgeyAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJOb3Qgc3VyZSB3aGF0IHlvdSB3YW50IHRvIGRvIHdpdGgga2V5OiBcIiArIGtleSArIFwiIHVuZGVyIGVsZW1lbnQ6IFwiKTtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJG5vZGUpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIkFuZCBvYmplY3Q6XCIpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhvYmplY3QpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIk1vc3QgbGlrZWx5IHRoZSBlbGVtZW50J3MgcHJvcGVydHkgb3IgY2hpbGQgbm8gbG9uZ2VyIGV4aXN0cyBvciB0aGUgdmFsdWVcIiArXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwiIHBhc3NlZCB0byBpdCBpcyBpbmNvcnJlY3QuXCIpO1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIllvdSBjYW4gc2V0ICd3YXJuIDogZmFsc2UnIHByb3BlcnR5IHRvIHRoZSBlbGVtZW50IHRvIGRpc21pc3MgdGhpcyBtZXNzYWdlLlwiKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCRub2RlW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHQvLyBEaXNwYXRjaCBvbmxvYWQgZXZlbnQgKGlmIGl0cyBub3QgbmF0aXZlKTogLy9UT0RPOiBEb2N1bWVudFxuXHRcdGlmKCRub2RlLm9ubG9hZCkge1xuXHRcdCAgICBjb25zdCBuYXRpdmUgPSBbXCJCT0RZXCIsXCJGUkFNRVwiLFwiSUZSQU1FXCIsXCJJTUdcIixcIkxJTktcIixcIlNDUklQVFwiLFwiU1RZTEVcIl0uaW5kZXhPZigkbm9kZS50YWdOYW1lKSA+PSAwO1xuXHRcdCAgICBjb25zdCBpbnB1dEltYWdlID0gJG5vZGUudGFnTmFtZSA9PT0gXCJJTlBVVFwiICYmICRub2RlLnR5cGUgPT09IFwiaW1hZ2VcIjtcblx0XHQgICAgaWYoISAobmF0aXZlIHx8IGlucHV0SW1hZ2UpKSB7XG5cdFx0ICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGFkZCB0aGUgZXZlbnQgYXMgaXQgZXhpc3RzIG5hdGl2ZWx5IGFuZCBpdCB3YXMgYXNzaWduZWQgZHVyaW5nOiAkbm9kZS5vbmxvYWQgPSAuLi47XG4gICAgICAgICAgICAgICAgJG5vZGUuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2xvYWQnKSk7XG5cdFx0ICAgIH1cblx0XHR9XG5cdFx0cmV0dXJuICRub2RlO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBJZGVudGlmeSBpZiB2YWx1ZSBpcyBhbiB1cGRhdGUgbGluayAoaW5saW5lIG9udXBkYXRlKVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNVcGRhdGVMaW5rKHZhbHVlKSB7XG4gICAgICAgIGxldCBpc0xpbmsgPSBmYWxzZVxuICAgICAgICBpZihtMmQyLnV0aWxzLmlzQXJyYXkodmFsdWUpICYmICh2YWx1ZS5sZW5ndGggPT09IDIgfHwgdmFsdWUubGVuZ3RoID09PSAzKSkge1xuICAgICAgICAgICAgY29uc3QgdHdvQXJncyA9IHZhbHVlLmxlbmd0aCA9PT0gMjtcbiAgICAgICAgICAgIC8vIEZpcnN0IGVsZW1lbnQgaW4gYXJyYXkgbXVzdCBiZSBOb2RlIHx8IERvbVN0cmluZ01hcCAoZGF0YXNldCkgfHwgQ1NTU3R5bGVEZWNsYXJhdGlvbiAoc3R5bGUpXG4gICAgICAgICAgICBjb25zdCBhY2NlcHRlZFR5cGUgPSBtMmQyLnV0aWxzLmlzTm9kZSh2YWx1ZVswXSkgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZVswXSBpbnN0YW5jZW9mIERPTVN0cmluZ01hcCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlWzBdIGluc3RhbmNlb2YgQ1NTU3R5bGVEZWNsYXJhdGlvblxuICAgICAgICAgICAgLy8gU2Vjb25kIG11c3QgYmUgJ3N0cmluZycgYW5kIFRoaXJkIGNhbiBiZSBhICdmdW5jdGlvbidcbiAgICAgICAgICAgIGNvbnN0IG90aGVyVHlwZXMgPSB0d29BcmdzID8gbTJkMi51dGlscy5pc1N0cmluZyh2YWx1ZVsxXSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBtMmQyLnV0aWxzLmlzU3RyaW5nKHZhbHVlWzFdKSAmJiBtMmQyLnV0aWxzLmlzRnVuY3Rpb24odmFsdWVbMl0pO1xuICAgICAgICAgICAgLy8gSWYgb25seSB0d28gYXJncyBhcmUgaW4gYXJyYXksIGFkZCBhbiBlbXB0eSBmdW5jdGlvbjpcbiAgICAgICAgICAgIGlzTGluayA9IGFjY2VwdGVkVHlwZSAmJiBvdGhlclR5cGVzO1xuICAgICAgICAgICAgaWYoaXNMaW5rICYmIHR3b0FyZ3MpIHsgdmFsdWUucHVzaCh2ID0+IHsgcmV0dXJuIHY7IH0pIH0gLy9UT0RPOiBEb2N1bWVudCBmdW5jdGlvblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0xpbmtcbiAgICB9XG5cbiAgICAvKipcblx0ICogQ29udmVydCBwbGFpbiB2YWx1ZSBpbnRvIG9iamVjdCBpZiBuZWVkZWRcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudCwgTm9kZX0gJG5vZGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cbiAgICBwbGFpblRvT2JqZWN0KCRub2RlLCB2YWx1ZSkge1xuXHRcdGlmKCFtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3QodmFsdWUpICYmISBtMmQyLnV0aWxzLmlzRnVuY3Rpb24odmFsdWUpICYmISBtMmQyLnV0aWxzLmlzRWxlbWVudCh2YWx1ZSkpIHtcblx0XHRcdC8vIFdoZW4gc2V0dGluZyB2YWx1ZXMgdG8gdGhlIG5vZGUgKHNpbXBsaWZpZWQgdmVyc2lvbik6XG5cdFx0XHRpZihtMmQyLnV0aWxzLmlzSHRtbCh2YWx1ZSkpIHtcblx0XHRcdFx0dmFsdWUgPSB7IGh0bWwgOiB2YWx1ZSB9O1xuXHRcdCAgICB9IGVsc2UgaWYodGhpcy5pc1VwZGF0ZUxpbmsodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqICA9IHZhbHVlWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB2YWx1ZVsxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWxsYmFjayA9IHZhbHVlWzJdO1xuXHRcdCAgICAgICAgbGV0IHRtcFZhbCA9IHRoaXMucGxhaW5Ub09iamVjdCgkbm9kZSwgY2FsbGJhY2sob2JqW3Byb3BdKSk7XG5cdFx0ICAgICAgICBpZihtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3QodG1wVmFsKSkge1xuXHRcdCAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0ge307XG5cdFx0ICAgICAgICAgICAgT2JqZWN0LmtleXModG1wVmFsKS5mb3JFYWNoKGsgPT4ge1xuXHRcdCAgICAgICAgICAgICAgICBuZXdWYWx1ZVtrXSA9IHZhbHVlO1xuXHRcdCAgICAgICAgICAgIH0pO1xuXHRcdCAgICAgICAgICAgIHZhbHVlID0gbmV3VmFsdWU7XG5cdFx0ICAgICAgICB9XG5cdFx0XHR9IGVsc2UgaWYobTJkMi51dGlscy5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0ICAgIHZhbHVlID0geyBpdGVtcyA6IHZhbHVlIH07XG5cdFx0XHR9IGVsc2UgaWYobTJkMi51dGlscy5oYXNBdHRyT3JQcm9wKCRub2RlLCBcInZhbHVlXCIpKSB7XG5cdFx0XHRcdC8vIElmIHRoZSBwYXJlbnQgaXMgPHNlbGVjdD4gc2V0IGFsc28gYXMgdGV4dCB0byBpdGVtOlxuXHRcdFx0XHRpZigkbm9kZS50YWdOYW1lID09PSBcIlNFTEVDVFwiKSB7XG5cdFx0XHRcdCAgICB2YWx1ZSA9IHtcblx0XHRcdFx0ICAgICAgICB2YWx1ZSA6IHZhbHVlLFxuXHRcdFx0XHQgICAgICAgIHRleHQgIDogdmFsdWVcblx0XHRcdFx0ICAgIH07XG5cdFx0XHRcdH0gZWxzZSBpZigkbm9kZS50YWdOYW1lID09PSBcIkJVVFRPTlwiKSB7XG5cdFx0XHRcdCAgICB2YWx1ZSA9IHsgdGV4dCA6IHZhbHVlIH07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCAgICB2YWx1ZSA9IHsgdmFsdWUgOiB2YWx1ZSB9O1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYobTJkMi51dGlscy5pc1N0cmluZyh2YWx1ZSkgJiYgJG5vZGUudGFnTmFtZSA9PT0gXCJJTUdcIikge1xuXHRcdFx0ICAgIHZhbHVlID0geyBzcmMgOiB2YWx1ZSB9O1xuXHRcdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaXNTdHJpbmcodmFsdWUpIHx8IG0yZDIudXRpbHMuaXNOdW1lcmljKHZhbHVlKSkge1xuXHRcdFx0XHR2YWx1ZSA9IHsgdGV4dCA6IHZhbHVlIH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcbiAgICB9XG5cdC8qKlxuXHQgKiBSZW5kZXIgYW5kIExpbmsgYSBub2RlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRyb290XG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0cmVuZGVyQW5kTGluaygkcm9vdCwgJG5vZGUsIGtleSwgdmFsdWUpIHtcblx0XHRjb25zdCAkY2hpbGQgPSB0aGlzLnJlbmRlcigkbm9kZSwga2V5LCB2YWx1ZSk7XG5cdFx0dGhpcy5saW5rTm9kZSgkcm9vdCwga2V5LCAkY2hpbGQpO1xuXHR9XG5cdC8qKlxuXHQgKiBSZW5kZXIgc29tZSB2YWx1ZSBpbiBhIG5vZGVcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm5zIHtQcm94eSwgSFRNTEVsZW1lbnR9XG5cdCAqL1xuXHRyZW5kZXIoJG5vZGUsIGtleSwgdmFsdWUpIHtcblx0ICAgIHZhbHVlID0gdGhpcy5wbGFpblRvT2JqZWN0KCRub2RlLCB2YWx1ZSk7XG5cdFx0cmV0dXJuIHRoaXMuZG9Eb20oJG5vZGUsIHZhbHVlKTsgLy8gUmVjdXJzaXZlIGZvciBlYWNoIGVsZW1lbnRcblx0fVxuXG5cdC8qKlxuXHQgKiBMaW5rcyBhIHByb3BlcnR5IHRvIGEgY2hpbGQgbm9kZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRjaGlsZFxuXHQgKi9cblx0bGlua05vZGUoJG5vZGUsIGtleSwgJGNoaWxkKSB7XG5cdFx0aWYoJG5vZGVba2V5XSA9PT0gJGNoaWxkKSB7XG5cdFx0XHRjb25zdCAkcHJveHkgPSB0aGlzLnByb3h5KCRjaGlsZCk7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHQkbm9kZVtrZXldID0gJHByb3h5O1xuXHRcdFx0fSBjYXRjaChpZ25vcmUpIHtcblx0XHRcdFx0Ly9OT1RFOiBhbHRob3VnaCBpdCBmYWlscyB3aGVuIHVzaW5nIGZvcm1zLCBmb3JtIGlzIGEgcHJveHkgc28gaXQgc3RpbGwgd29ya3MuXG5cdFx0XHR9XG5cdFx0XHQkbm9kZVtcIiRcIiArIGtleV0gPSAkcHJveHk7XG5cdFx0fSBlbHNlIGlmKG0yZDIudXRpbHMuaGFzQXR0ck9yUHJvcCgkbm9kZSwga2V5KSkgeyAvLyBPbmx5IGlmIGl0cyBub3QgYW4gYXR0cmlidXRlIG9yIHByb3BlcnR5LCB3ZSBcImxpbmtcIiBpdC5cblx0XHRcdCRub2RlW1wiJFwiICsga2V5XSA9ICRjaGlsZDsgLy9SZXBsYWNlIG5hbWUgd2l0aCBcIiRcIiArIG5hbWVcblx0XHRcdGNvbnNvbGUubG9nKFwiUHJvcGVydHkgOiBcIiArIGtleSArIFwiIGV4aXN0ZWQgaW4gbm9kZTogXCIgKyAkbm9kZS50YWdOYW1lICtcblx0XHRcdFwiLiBVc2luZyAkXCIgKyBrZXkgKyBcIiBpbnN0ZWFkIGZvciBub2RlOiBcIiArICRjaGlsZC50YWdOYW1lICsgXCIuXCIpXG5cdFx0fSBlbHNlIHtcblx0XHRcdCRub2RlW2tleV0gPSB0aGlzLnByb3h5KCRjaGlsZCk7XG5cdFx0fVxuXHR9XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZG9tIGVsZW1lbnQgaW5zaWRlICRub2RlXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cblx0ICovXG5cdGFwcGVuZEVsZW1lbnQgKCRub2RlLCB0YWdOYW1lKSB7XG5cdFx0Y29uc3QgJG5ld0VsZW0gPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQodGFnTmFtZSk7XG5cdFx0JG5vZGUuYXBwZW5kKCRuZXdFbGVtKTtcblx0XHRyZXR1cm4gJG5ld0VsZW07XG5cdH1cblxuICAgIC8qKlxuXHQgKiBHZXQgYW4gaXRlbSB0byBiZSBhZGRlZFxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fG51bGx9ICRub2RlXG5cdCAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gaW5kZXhcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJHRlbXBsYXRlXG5cdCAqL1xuXHRnZXRJdGVtKCRub2RlLCBpbmRleCwgb2JqLCAkdGVtcGxhdGUpIHtcblx0ICAgIGlmKCEkdGVtcGxhdGUpIHtcblx0XHQgICAgJHRlbXBsYXRlID0gdGhpcy5nZXRUZW1wbGF0ZSgkbm9kZSk7XG5cdFx0fVxuICAgICAgICBjb25zdCAkbmV3SXRlbSA9ICR0ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgICAvLyBDb3B5IHRlbXBsYXRlcyB0byBuZXcgaXRlbTpcblx0ICAgIHRoaXMuYWRkVGVtcGxhdGVzVG9JdGVtKCR0ZW1wbGF0ZSwgJG5ld0l0ZW0pO1xuICAgICAgICAkbmV3SXRlbS5kYXRhc2V0LmlkID0gaW5kZXg7XG4gICAgICAgIC8vIEFkZCBcInNlbGVjdGVkXCIgcHJvcGVydHlcbiAgICAgICAgdGhpcy5zZXRVbmlxdWVBdHRyaWIoJG5ld0l0ZW0sIFwic2VsZWN0ZWRcIik7IC8vVE9ETzogRG9jdW1lbnRcbiAgICAgICAgLy8gU2V0IHZhbHVlcyBhbmQgbGlua3Ncblx0XHRsZXQgJG5ld05vZGUgPSB0aGlzLmRvRG9tKCRuZXdJdGVtLCBvYmopO1xuXHRcdC8vIFBsYWNlIEV2ZW50czpcblx0XHRyZXR1cm4gdGhpcy5nZXRJdGVtV2l0aEV2ZW50cygkbm9kZSwgJG5ld05vZGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlYXNzaWduIHRlbXBsYXRlc1xuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50LCBOb2RlfSAkdGVtcGxhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudCwgTm9kZX0gJG5ld05vZGVcblx0ICogQHJldHVybnMge0hUTUxFbGVtZW50fFByb3h5fVxuXHQgLy8gVE9ETzogdGhpcyBkb2VzIG5vdCBzdXBwb3J0IGRlZXAgbG9jYXRpb24gb2YgdGVtcGxhdGVzXG5cdCAqL1xuXHRhZGRUZW1wbGF0ZXNUb0l0ZW0oJHRlbXBsYXRlLCAkbmV3Tm9kZSkge1xuXHQgICAgW1wiX3RlbXBsYXRlXCIsXCJfX3RlbXBsYXRlXCJdLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGlmKCR0ZW1wbGF0ZVtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkbmV3Tm9kZVtrZXldID0gJHRlbXBsYXRlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYSBOb2RlIHdpdGggZXZlbnRzXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnQsIE5vZGV9ICRub2RlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnQsIE5vZGV9ICRuZXdOb2RlXG5cdCAqIEByZXR1cm5zIHtIVE1MRWxlbWVudHxQcm94eX1cblx0IC8vRklYTUU6IEkgdGhpbmsgYHRoaXMuZG9Eb21gIGNvdWxkIGJlIHJlbW92ZWQgZnJvbSBoZXJlIGFuZCBvbmx5IFwibGlua1wiIGV2ZW50c1xuXHQgKi9cblx0Z2V0SXRlbVdpdGhFdmVudHMoJG5vZGUsICRuZXdOb2RlKSB7XG5cdFx0aWYoJG5vZGUuX190ZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRjb25zdCBzY2FuID0gKG9iamVjdCwgcmVzdWx0KSA9PiB7XG5cdFx0XHRcdHJlc3VsdCA9IHJlc3VsdCB8fCB7fTtcblx0XHRcdFx0T2JqZWN0LmtleXMob2JqZWN0KS5mb3JFYWNoKGtleT0+IHtcblx0XHRcdFx0XHRpZiAobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KG9iamVjdFtrZXldKSkge1xuXHRcdFx0XHRcdFx0cmVzdWx0W2tleV0gPSBzY2FuKG9iamVjdFtrZXldKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYobTJkMi51dGlscy5pc0Z1bmN0aW9uKG9iamVjdFtrZXldKSkge1xuXHRcdFx0XHRcdFx0cmVzdWx0W2tleV0gPSBvYmplY3Rba2V5XTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdFx0bGV0IHRyZWUgPSBzY2FuKCRub2RlLl9fdGVtcGxhdGUpO1xuXHRcdFx0aWYoIW0yZDIudXRpbHMuaXNFbXB0eSh0cmVlKSkge1xuXHRcdFx0XHR0cmVlID0gdHJlZVtPYmplY3Qua2V5cyh0cmVlKVswXV07XG5cdFx0XHRcdCRuZXdOb2RlID0gdGhpcy5kb0RvbSgkbmV3Tm9kZSwgdHJlZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAkbmV3Tm9kZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQcm9jZXNzIGl0ZW1zXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9ICRub2RlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHZhbHVlc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gdGVtcGxhdGVcblx0ICovXG5cdGRvSXRlbXMgKCRub2RlLCB2YWx1ZXMsIHRlbXBsYXRlKSB7XG5cdCAgICAvLyBDcmVhdGUgdGhlIHN0cnVjdHVyZSBmb3IgdGhlIGl0ZW06XG5cdFx0Y29uc3QgJHRlbXBsYXRlID0gdGhpcy5nZXRUZW1wbGF0ZSgkbm9kZSwgdGVtcGxhdGUpO1xuXHRcdGlmKCR0ZW1wbGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiVGVtcGxhdGUgbm90IGZvdW5kLiBQcm9iYWJseSBhbiBhcnJheSBpcyBiZWluZyB1c2VkIHdoZXJlIGl0IGlzIG5vdCBleHBlY3RlZC4gTm9kZTpcIik7XG5cdFx0XHRjb25zb2xlLmxvZygkbm9kZSk7XG5cdFx0XHRjb25zb2xlLmxvZyhcIlZhbHVlIChtaXN0YWtlbj8pOlwiKVxuXHRcdFx0Y29uc29sZS5sb2codmFsdWVzKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gRmlsbCB0aGUgdGVtcGxhdGUgd2l0aCBkYXRhOlxuXHRcdGxldCBpID0gMDtcblx0XHR2YWx1ZXMuZm9yRWFjaCh2YWwgPT4ge1xuXHRcdCAgICB2YWwgPSB0aGlzLnBsYWluVG9PYmplY3QoJG5vZGUsIHZhbCk7XG5cdFx0ICAgIGNvbnN0ICRuZXdJdGVtID0gdGhpcy5nZXRJdGVtKCRub2RlLCBpKyssIHZhbCwgJHRlbXBsYXRlKTtcblx0XHQgICAgaWYoJG5ld0l0ZW0pIHtcblx0XHRcdCAgICAkbm9kZS5hcHBlbmQoJG5ld0l0ZW0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vIENsZWFudXBcblx0XHRjb25zdCAkdGVtcCA9ICRub2RlLmZpbmQoXCJ0ZW1wbGF0ZVwiKTtcblx0XHRpZigkdGVtcCkgeyAkbm9kZS5yZW1vdmVDaGlsZCgkdGVtcCk7IH1cblx0XHQvLyBTZXQgXCJpdGVtc1wiIGxpbms6XG5cdFx0JG5vZGUuaXRlbXMgPSAkbm9kZS5jaGlsZHJlbjtcblx0XHR0aGlzLmV4dGVuZEl0ZW1zKCRub2RlKTtcblx0fVxuXHQvKiogUmV0dXJucyBhbiBIVE1MRWxlbWVudCB3aXRoIHRoZSBzdHJ1Y3R1cmUgd2l0aG91dCBldmVudHNcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gJG5vZGVcblx0ICogQHBhcmFtIHtPYmplY3QsIHN0cmluZ30gW3RlbXBsYXRlXVxuXHQgKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG5cdCAqL1xuXHRnZXRUZW1wbGF0ZSAoJG5vZGUsIHRlbXBsYXRlKSB7XG5cdFx0Ly8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSB0ZW1wbGF0ZSwgcmV0dXJuIGl0OlxuXHRcdGlmKCRub2RlLl90ZW1wbGF0ZSAhPT0gdW5kZWZpbmVkICYmICRub2RlLl90ZW1wbGF0ZSAhPT0gXCJcIikge1xuXHRcdFx0cmV0dXJuICRub2RlLl90ZW1wbGF0ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGV0ICR0ZW1wbGF0ZTtcblx0XHRcdGNvbnN0ICRodG1sVGVtcGxhdGUgPSAkbm9kZS5xdWVyeVNlbGVjdG9yKFwidGVtcGxhdGVcIik7IC8vIGxvb2sgaW50byBIVE1MIHVuZGVyIG5vZGVcblx0XHRcdGlmKCRodG1sVGVtcGxhdGUpIHtcblx0XHRcdFx0JHRlbXBsYXRlID0gbTJkMi51dGlscy5odG1sRWxlbWVudCgkaHRtbFRlbXBsYXRlLmlubmVySFRNTC50cmltKCkpO1xuXHRcdFx0fSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKCRub2RlLnRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlNFTEVDVFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiREFUQUxJU1RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVUxcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIk9MXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJsaVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJETFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwiZGRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBPYmplY3Qua2V5cyh0ZW1wbGF0ZSkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNoaWxkcmVuID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGVtcGxhdGUudGFnTmFtZSAhPT0gdW5kZWZpbmVkKSB7IC8vVE9ETzogZG9jdW1lbnQgKG9wdGlvbmFsIHRvcCBjaGlsZCB3aGVuIHVzaW5nIHRhZ05hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdyYXAgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwW3RlbXBsYXRlLnRhZ05hbWVdID0gdGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUgPSB3cmFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRlbXBsYXRlIGhhcyBtb3JlIHRoYW4gb25lIHRvcCBlbGVtZW50cy4gVXNpbmcgdGhlIGZpcnN0IG9uZS4gSW46IFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJOb2RlOiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKHRlbXBsYXRlKVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdGVtcGxhdGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobTJkMi51dGlscy5pc1ZhbGlkRWxlbWVudChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHZhbC50YWdOYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudCh2YWwudGFnTmFtZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZVt2YWwudGFnTmFtZV0gPSB2YWw7XG5cdFx0XHRcdFx0XHRcdFx0XHRkZWxldGUodGVtcGxhdGVba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVGVtcGxhdGUgZGVmaW5lZCBhbiBlbGVtZW50IHdoaWNoIGNhbiBub3QgYmUgaWRlbnRpZmllZDogW1wiICsga2V5ICsgXCJdLCB1c2luZyA8c3Bhbj4gaW46XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJOb2RlOiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkbm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLm5ld0VsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRlbXBsYXRlIGhhcyBubyBkZWZpbml0aW9uLCBhbmQgaXQgY2FuIG5vdCBiZSBndWVzc2VkLiBVc2luZyA8c3Bhbj4uIFRlbXBsYXRlOiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJOb2RlOiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRlbXBsYXRlID0gbTJkMi51dGlscy5uZXdFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5vdCB0ZW1wbGF0ZSBpcyBmb3VuZCwgdXNlIGh0bWwgYXMgb2YgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRub2RlLmNoaWxkRWxlbWVudENvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGVtcGxhdGUgPSBtMmQyLnV0aWxzLmh0bWxFbGVtZW50KCRub2RlLmlubmVySFRNTC50cmltKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblx0XHRcdGlmICh0ZW1wbGF0ZSkge1xuXHRcdFx0XHRpZiAobTJkMi51dGlscy5pc1BsYWluT2JqZWN0KHRlbXBsYXRlKSkge1xuXHRcdFx0XHQgICAgY29uc3QgJHdyYXAgPSBtMmQyLnV0aWxzLm5ld0VtcHR5Tm9kZSgpO1xuXHRcdFx0XHQgICAgJHdyYXAuYXBwZW5kKCR0ZW1wbGF0ZSk7XG5cdFx0XHRcdFx0Y29uc3QgJGZyYWdtZW50ID0gdGhpcy5kb0RvbSgkd3JhcCwgdGVtcGxhdGUpO1xuXHRcdFx0XHRcdCR0ZW1wbGF0ZSA9ICRmcmFnbWVudC5jaGlsZHJlblswXTtcblx0XHRcdFx0XHRtMmQyLnV0aWxzLmRlZmluZVByb3AoJG5vZGUsIFwiX190ZW1wbGF0ZVwiLCB0ZW1wbGF0ZSk7IC8vIFRoaXMgaXMgdGhlIG9yaWdpbmFsIHRlbXBsYXRlIHdpdGggZXZlbnRzXG5cdFx0XHRcdH0gZWxzZSBpZiAobTJkMi51dGlscy5pc0h0bWwodGVtcGxhdGUpKSB7XG5cdFx0XHRcdFx0JHRlbXBsYXRlID0gbTJkMi51dGlscy5odG1sRWxlbWVudCh0ZW1wbGF0ZSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAobTJkMi51dGlscy5pc1NlbGVjdG9ySUQodGVtcGxhdGUpKSB7IC8vT25seSBJRHMgYXJlIGFsbG93ZWQgLy9UT0RPIGRvY3VtZW50XG5cdFx0XHRcdFx0JHRlbXBsYXRlID0gbTJkMi51dGlscy5odG1sRWxlbWVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRlbXBsYXRlKS5pbm5lckhUTUwpO1xuXHRcdFx0XHR9IGVsc2UgeyAvL1doZW4gaXRzIGp1c3QgYSB0YWcgbmFtZVxuXHRcdFx0XHRcdCR0ZW1wbGF0ZSA9IG0yZDIudXRpbHMubmV3RWxlbWVudCh0ZW1wbGF0ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKCR0ZW1wbGF0ZS5jaGlsZHJlbkVsZW1lbnRDb3VudCA+IDEpIHtcblx0XHRcdCAgICBjb25zb2xlLmxvZyhcIlRlbXBsYXRlcyBvbmx5IHN1cHBvcnRzIGEgc2luZ2xlIGNoaWxkLiBNdWx0aXBsZSBjaGlsZHJlbiB3ZXJlIGRldGVjdGVkLCB3cmFwcGluZyB0aGVtIHdpdGggPHNwYW4+LiBUZW1wbGF0ZTpcIik7XG5cdFx0XHQgICAgY29uc29sZS5sb2coJHRlbXBsYXRlKTtcblx0XHRcdCAgICBjb25zdCAkc3BhbiA9IG0yZDIudXRpbHMubmV3RWxlbWVudChcInNwYW5cIik7XG5cdFx0XHQgICAgJHNwYW4uYXBwZW5kKCR0ZW1wbGF0ZSk7XG5cdFx0XHQgICAgJHRlbXBsYXRlID0gJHNwYW47XG5cdFx0XHR9XG5cdFx0XHRpZiAoJHRlbXBsYXRlKSB7XG5cdFx0XHRcdG0yZDIudXRpbHMuZGVmaW5lUHJvcCgkbm9kZSwgXCJfdGVtcGxhdGVcIiwgJHRlbXBsYXRlKTsgLy8gVGhpcyBpcyB0aGUgRE9NXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gJHRlbXBsYXRlO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBJdCB3aWxsIHNldCBhIHVuaXF1ZSBhdHRyaWJ1dGUgYW1vbmcgYSBncm91cCBvZiBub2RlcyAoZ3JvdXBlZCBieSBwYXJlbnQpXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnQsIE5vZGV9ICRub2RlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcblx0ICovXG5cdHNldFVuaXF1ZUF0dHJpYigkbm9kZSwga2V5KSB7XG4gICAgICAgIGlmKCEgJG5vZGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KCRub2RlLCBrZXksIHtcbiAgICAgICAgICAgICAgICBnZXQgOiBmdW5jdGlvbigpICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKGtleSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQgOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldlNlbCA9IHRoaXMucGFyZW50Tm9kZSA/IHRoaXMucGFyZW50Tm9kZS5maW5kKFwiW1wiK2tleStcIl1cIikgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZihwcmV2U2VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2VsLnJlbW92ZUF0dHJpYnV0ZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdFx0bTJkMi51dGlscy5zZXRBdHRyKHRoaXMsIGtleSwgdmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXHR9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgWyBOb2RlLCBzdHJpbmcgXSB2YWx1ZXMgKGlubGluZSBvbnVwZGF0ZSlcbiAgICAgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSAkbm9kZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgKi9cbiAgICB1cGRhdGVWYWx1ZSgkbm9kZSwga2V5LCB2YWx1ZSkge1xuXHRcdC8vIFRFU1Q6IDA2XG4gICAgICAgIGlmKHRoaXMuaXNVcGRhdGVMaW5rKHZhbHVlKSkge1xuXHRcdFx0Y29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgY29uc3Qgb2JqICA9IHZhbHVlWzBdO1xuICAgICAgICAgICAgY29uc3QgcHJvcCA9IHZhbHVlWzFdO1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSB2YWx1ZVsyXTtcblx0XHRcdHZhbHVlID0gb2JqW3Byb3BdO1xuXHRcdFx0aWYob2JqIGluc3RhbmNlb2YgQ1NTU3R5bGVEZWNsYXJhdGlvbiAmJiB0aGlzLl9zdG9yZWQuc3R5bGVzLmluY2x1ZGVzKG9iaikpIHtcblx0XHRcdFx0Y29uc3QgcGFyZW50ID0gdGhpcy5fc3RvcmVkLnN0eWxlTm9kZXNbdGhpcy5fc3RvcmVkLnN0eWxlcy5pbmRleE9mKG9iaildO1xuXHRcdFx0XHRpZihtMmQyLnVwZGF0ZXMpIHtcblx0XHRcdFx0XHRwYXJlbnQub251cGRhdGUgPSBmdW5jdGlvbiAoZXYpIHtcblx0XHRcdFx0XHRcdGlmIChldi5kZXRhaWwgJiYgZXYuZGV0YWlsLnByb3BlcnR5ID09PSBcInN0eWxlXCIgJiYgZXYuZGV0YWlsLm5ld1ZhbHVlLnN0YXJ0c1dpdGgocHJvcCArIFwiOlwiKSkge1xuXHRcdFx0XHRcdFx0XHRfdGhpcy5zZXRTaG9ydFZhbHVlKCRub2RlLCBrZXksIGNhbGxiYWNrKHRoaXMuc3R5bGVbcHJvcF0pKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZihvYmogaW5zdGFuY2VvZiBET01TdHJpbmdNYXAgJiYgdGhpcy5fc3RvcmVkLmRhdGFzZXRzLmluY2x1ZGVzKG9iaikpIHtcblx0XHRcdFx0Y29uc3QgcGFyZW50ID0gdGhpcy5fc3RvcmVkLmRhdGFzZXROb2Rlc1t0aGlzLl9zdG9yZWQuZGF0YXNldHMuaW5kZXhPZihvYmopXTtcblx0XHRcdFx0aWYobTJkMi51cGRhdGVzKSB7XG5cdFx0XHRcdFx0cGFyZW50Lm9udXBkYXRlID0gKGV2KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZXYuZGV0YWlsICYmIGV2LmRldGFpbC5wcm9wZXJ0eSA9PT0gXCJkYXRhLVwiICsgcHJvcCkge1xuXHRcdFx0XHRcdFx0XHRfdGhpcy5zZXRTaG9ydFZhbHVlKCRub2RlLCBrZXksIGNhbGxiYWNrKGV2LmRldGFpbC5uZXdWYWx1ZSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYobTJkMi51cGRhdGVzKSB7XG5cdFx0XHRcdFx0b2JqLm9udXBkYXRlID0gKGV2KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZXYuZGV0YWlsICYmIGV2LmRldGFpbC5wcm9wZXJ0eSA9PT0gcHJvcCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIW0yZDIudXRpbHMuaXNPYmplY3QoJG5vZGVba2V5XSkpIHtcblx0XHRcdFx0XHRcdFx0XHRfdGhpcy5zZXRTaG9ydFZhbHVlKCRub2RlLCBrZXksIGNhbGxiYWNrKGV2LmRldGFpbC5uZXdWYWx1ZSkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBQbGFjZSBhIHZhbHVlIGVpdGhlciBpbiBhIHByb3BlcnR5IG9yIGluIGEgbm9kZSAoc2hvcnQpXG5cdCAqIEBwYXJhbSAkbm9kZSB7Tm9kZX1cblx0ICogQHBhcmFtIGtleSB7c3RyaW5nfVxuXHQgKiBAcGFyYW0gdmFsdWUgeyp9XG5cdCAqL1xuXHRzZXRTaG9ydFZhbHVlKCRub2RlLCBrZXksIHZhbHVlKSB7XG5cdFx0aWYobTJkMi51dGlscy5pc05vZGUoJG5vZGVba2V5XSkpIHtcblx0XHRcdGlmKG0yZDIuc2hvcnQpIHtcblx0XHRcdFx0Y29uc3QgbyA9IHRoaXMucGxhaW5Ub09iamVjdCgkbm9kZVtrZXldLCB2YWx1ZSk7XG5cdFx0XHRcdGNvbnN0IGsgPSBtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3QobykgJiYgT2JqZWN0LmtleXMobykubGVuZ3RoID49IDEgPyBPYmplY3Qua2V5cyhvKVswXSA6IG51bGw7XG5cdFx0XHRcdGlmIChrKSB7XG5cdFx0XHRcdFx0JG5vZGVba2V5XVtrXSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlNob3J0IGlzIGRpc2FibGVkLiBUcnlpbmcgdG8gc2V0IGEgdmFsdWUgKFwiK3ZhbHVlK1wiKSBpbiBhIG5vZGU6XCIpXG5cdFx0XHRcdGNvbnNvbGUubG9nKCRub2RlW2tleV0pO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkVpdGhlciB0dXJuIG9uICdzaG9ydCcgZnVuY3Rpb25hbGl0eSwgb3IgYmUgc3VyZSB5b3Ugc3BlY2lmeSB0aGUgcHJvcGVydHksIGxpa2U6ICdub2RlLnRleHQnXCIpXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdCRub2RlW2tleV0gPSB2YWx1ZVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBQbGFjZSBhIHZhbHVlIGVpdGhlciBpbiBhIHByb3BlcnR5IG9yIGluIGEgbm9kZSAoc2hvcnQpXG5cdCAqIEBwYXJhbSAkbm9kZSB7Tm9kZX1cblx0ICogQHBhcmFtIGtleSB7c3RyaW5nfVxuXHQgKiBAcGFyYW0gc2FtcGxlIHsqfSBTYW1wbGUgdmFsdWUgKHRvIGF1dG9tYXRpY2FsbHkgZ3Vlc3MgcHJvcGVydHkpXG5cdCAqIEByZXR1cm5zIHsqfSBjdXJyZW50IHZhbHVlXG5cdCAqL1xuXHRnZXRTaG9ydFZhbHVlKCRub2RlLCBrZXksIHNhbXBsZSkge1xuXHRcdGxldCB2YWx1ZSA9IG51bGw7XG5cdFx0aWYobTJkMi51dGlscy5pc05vZGUoJG5vZGVba2V5XSkpIHtcblx0XHRcdGlmKG0yZDIuc2hvcnQpIHtcblx0XHRcdFx0Y29uc3QgbyA9IHRoaXMucGxhaW5Ub09iamVjdCgkbm9kZVtrZXldLCBzYW1wbGUgfHwgXCJcIik7XG5cdFx0XHRcdGNvbnN0IGsgPSBtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3QobykgJiYgT2JqZWN0LmtleXMobykubGVuZ3RoID49IDEgPyBPYmplY3Qua2V5cyhvKVswXSA6IG51bGw7XG5cdFx0XHRcdGlmIChrKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSAkbm9kZVtrZXldW2tdO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlNob3J0IGlzIGRpc2FibGVkLiBUcnlpbmcgdG8gZ2V0IGEgdmFsdWUgZnJvbSBub2RlOlwiKVxuXHRcdFx0XHRjb25zb2xlLmxvZygkbm9kZVtrZXldKTtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJFaXRoZXIgdHVybiBvbiAnc2hvcnQnIGZ1bmN0aW9uYWxpdHksIG9yIGJlIHN1cmUgeW91IHNwZWNpZnkgdGhlIHByb3BlcnR5LCBsaWtlOiAnbm9kZS50ZXh0J1wiKVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YWx1ZSA9ICRub2RlW2tleV07XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBCYXNpYyBQcm94eSB0byBlbmFibGUgYXNzaWduIHZhbHVlcyB0byBlbGVtZW50c1xuXHQgKiBmb3IgZXhhbXBsZTogZGl2LmEgPSBcIkNsaWNrIG1lXCIgKGluc3RlYWQgb2YgdXNpbmc6IGRpdi5hLnRleHQpXG5cdCAqIE5PVEU6IGZvciByZWFkaW5nLCBcImRpdi5hXCIgd2lsbCByZXR1cm4gYSBOb2RlIGFuZCBub3QgdGhlIHZhbHVlLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ZvcmNlXSBGb3JjZSB0byB1cGRhdGVcblx0ICogQHJldHVybnMge1Byb3h5LCBPYmplY3R9XG5cdCAqL1xuXHRwcm94eSAob2JqLCBmb3JjZSkge1xuXHQgICAgaWYoIW0yZDIuc2hvcnQgfHwgKG9iaiA9PT0gbnVsbCB8fCAob2JqLl9wcm94eSAhPT0gdW5kZWZpbmVkICYmIGZvcmNlID09PSB1bmRlZmluZWQpKSkge1xuXHQgICAgICAgIHJldHVybiBvYmo7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIG9iai5fcHJveHkgPSBvYmo7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVyID0ge1xuICAgICAgICAgICAgICAgIGdldDogKHRhcmdldCwgcHJvcGVydHkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRhcmdldFtwcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodHJ1ZSkge1xuXHRcdFx0XHRcdFx0Y2FzZSB0ID09PSBudWxsIHx8IHQgPT09IHVuZGVmaW5lZDogcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIFx0Ly8gRnVuY3Rpb25zIHNob3VsZCBiaW5kIHRhcmdldCBhcyBcInRoaXNcIlxuXHRcdFx0XHRcdFx0Y2FzZSBtMmQyLnV0aWxzLmlzRnVuY3Rpb24odCk6IHJldHVybiB0LmJpbmQodGFyZ2V0KTtcblx0XHRcdFx0XHRcdC8vIElmIHRoZXJlIHdhcyBhIGZhaWxlZCBhdHRlbXB0IHRvIHNldCBwcm94eSwgcmV0dXJuIGl0IG9uIHJlYWQ6XG5cdFx0XHRcdFx0XHRjYXNlIHQuX3Byb3h5ICYmIHRhcmdldFtcIiRcIiArIHByb3BlcnR5XSAhPT0gdW5kZWZpbmVkOiByZXR1cm4gdGFyZ2V0W1wiJFwiICsgcHJvcGVydHldO1xuXHRcdFx0XHRcdFx0Y2FzZSB0Ll9wcm94eSA9PT0gdW5kZWZpbmVkICYmIG0yZDIudXRpbHMuaXNFbGVtZW50KHQpOiByZXR1cm4gdGhpcy5wcm94eSh0KTtcblx0XHRcdFx0XHRcdGRlZmF1bHQ6IHJldHVybiB0O1xuXHRcdFx0XHRcdH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNldDogKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBvbGRWYWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmKG0yZDIudXRpbHMuaXNFbGVtZW50KHRhcmdldFtwcm9wZXJ0eV0pKSB7XG5cdFx0XHRcdFx0XHRvbGRWYWx1ZSA9IHRoaXMuZ2V0U2hvcnRWYWx1ZSh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHR0aGlzLnNldFNob3J0VmFsdWUodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYocHJvcGVydHkgPT09IFwib251cGRhdGVcIikge1xuICAgICAgICAgICAgICAgICAgICBcdGlmKG0yZDIudXBkYXRlcykge1xuXHRcdFx0XHRcdFx0XHRpZiAobTJkMi51dGlscy5pc0Z1bmN0aW9uKHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0ICAgICAgICAvLyBCeSB1c2luZyBhZGRFdmVudExpc3RlbmVyIHdlIGNhbiBhc3NpZ24gbXVsdGlwbGUgbGlzdGVuZXJzIHRvIGEgc2luZ2xlIG5vZGVcblx0XHRcdFx0XHRcdFx0XHR0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInVwZGF0ZVwiLCB2YWx1ZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0b2xkVmFsdWUgPSB0YXJnZXRbcHJvcGVydHldO1xuXHRcdFx0XHRcdFx0XHRcdHRhcmdldFtwcm9wZXJ0eV0gPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiVmFsdWUgcGFzc2VkIHRvICdvbnVwZGF0ZScgaXMgaW5jb3JyZWN0LCBpbiBub2RlOlwiKTtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyh0YXJnZXQpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiVmFsdWU6IChub3QgYSBmdW5jdGlvbilcIik7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2codmFsdWUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBcdFx0Y29uc29sZS5sb2coXCJVcGRhdGVzIGFyZSBub3QgYXZhaWxhYmxlIHdoZW4gYG0yZDIudXBkYXRlcyA9PSBmYWxzZWA6XCIpXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKHRhcmdldCk7XG5cdFx0XHRcdFx0XHR9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihwcm9wZXJ0eSA9PT0gXCJpdGVtc1wiKSB7IC8vUmVzZXQgaXRlbXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5pdGVtcy5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb0l0ZW1zKHRhcmdldCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgPSB0YXJnZXRbcHJvcGVydHldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnVwZGF0ZVZhbHVlKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdC8vIENoZWNrIGZvciBvbnVwZGF0ZSAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIG9ic2VydmUgY2hhbmdlcyBvbiB2YWx1ZXNcblx0XHRcdFx0XHRpZihtMmQyLnVwZGF0ZXMgJiYgdGFyZ2V0Lm9udXBkYXRlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHQgICAgaWYodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwidXBkYXRlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlICAgICA6IHR5cGVvZiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5IDogcHJvcGVydHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgOiBvbGRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXHRcdFx0XHRcdCAgICB9XG5cdFx0XHRcdFx0fVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm94eShvYmosIGhhbmRsZXIpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBGdW5jdGlvbiBwYXNzZWQgdG8gTXV0YXRpb25PYnNlcnZlclxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge011dGF0aW9uUmVjb3JkfSBtdXRhdGlvbnNMaXN0XG5cdCAqIEBwYXJhbSB7TXV0YXRpb25PYnNlcnZlcn0gb2JzZXJ2ZXJcblx0ICovXG5cdG9uT2JzZXJ2ZShtdXRhdGlvbnNMaXN0LCBvYnNlcnZlcikge1xuXHRcdG11dGF0aW9uc0xpc3QuZm9yRWFjaChtID0+IHtcblx0XHRcdGNvbnN0IHRhcmdldCA9IG0udGFyZ2V0O1xuXHRcdFx0Ly8gV2Ugc3RvcmUgdGhlIGV2ZW50cyB0byByZW1vdmUgaW1tZWRpYXRlbHkgcmVwZWF0ZWQgZXZlbnRzLlxuXHRcdFx0Ly8gRm9ybXMgd2lsbCBsaW5rIGVsZW1lbnRzIHdoaWNoIGNhbiBub3QgYmUgc2V0IGFzIHByb3h5IHNvIHdlXG5cdFx0XHQvLyBhZGQgYSBsaW5rIG5hbWVkIGBcIiRcIiArIGtleWAgYnV0IHRoaXMgaGF2ZSB0aGUgc2lkZSBlZmZlY3QgdG9cblx0XHRcdC8vIGdlbmVyYXRlIHR3byB0cmlnZ2VycyAob25lIGZvciB0aGUgZWxlbWVudCBhbmQgb25lIGZvciB0aGUgUHJveHkpLlxuXHRcdFx0aWYodGhpcy5fc3RvcmVkLmV2ZW50cy5pbmRleE9mKG0pID49IDApIHsgcmV0dXJuIH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuX3N0b3JlZC5ldmVudHMucHVzaChtKTtcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgaSA9IHRoaXMuX3N0b3JlZC5ldmVudHMuaW5kZXhPZihtKTtcblx0XHRcdFx0XHRpZihpID49IDApIHsgdGhpcy5fc3RvcmVkLmV2ZW50cy5zcGxpY2UoaSwgMSk7IH1cblx0XHRcdFx0fSwgbTJkMi5zdG9yZWRFdmVudHNUaW1lb3V0KTsgLy9UT0RPOiB0aGlzIHdpbGwgcHJldmVudCByZXBlYXRlZCBldmVudHMgdG8gYmUgdHJpZ2dlcmVkIGluIGxlc3MgdGhhbiA1MG1zIDogZG9jdW1lbnRcblx0XHRcdH1cblx0XHRcdC8vIENoZWNrIGZvciBvbnVwZGF0ZSAvL1RPRE86IGRvY3VtZW50XG5cdFx0XHRpZih0YXJnZXQub251cGRhdGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRpZihtLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSBtMmQyLnV0aWxzLmdldEF0dHJPclByb3AodGFyZ2V0LCBtLmF0dHJpYnV0ZU5hbWUpO1xuXHRcdFx0XHRcdGlmKHZhbHVlICE9PSBtLm9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJ1cGRhdGVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlICAgICA6IHR5cGVvZiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHkgOiBtLmF0dHJpYnV0ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlIDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlIDogbS5vbGRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHR9IGVsc2UgaWYobS50eXBlID09PSBcImNoaWxkTGlzdFwiKSB7IC8vVE9ETzogaW1wcm92ZSBmb3Igb3RoZXIgdHlwZXNcblx0XHRcdFx0ICAgIGNvbnN0ICRjaGlsZCA9IG0uYWRkZWROb2Rlc1swXSB8fCBtLnJlbW92ZWROb2Rlc1swXTtcblx0XHRcdFx0XHRpZigkY2hpbGQubm9kZU5hbWUgPT09IFwiI3RleHRcIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSBtLmFkZGVkTm9kZXNbMF0udGV4dENvbnRlbnQ7XG5cdFx0XHRcdFx0XHRjb25zdCBvbGRWYWx1ZSA9IG0ucmVtb3ZlZE5vZGVzLmxlbmd0aCA/IG0ucmVtb3ZlZE5vZGVzWzBdLnRleHRDb250ZW50IDogbnVsbDtcblx0XHRcdFx0XHRcdGlmKHZhbHVlICE9PSBvbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInVwZGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlICAgICA6IHR5cGVvZiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlIDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgOiBvbGRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdH0gZWxzZSBpZih0YXJnZXQuaXRlbXMgIT09IHVuZGVmaW5lZCkgeyAvL0l0ZW1zIHVwZGF0ZWRcblx0XHRcdFx0XHQgICAgLy9UT0RPOiBEb2N1bWVudDogaW4gY2FzZSBvZiBpdGVtcywgXCJuZXcgPSBhZGRlZFwiLCBcIm9sZCA9IHJlbW92ZWRcIlxuXHRcdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSBtLmFkZGVkTm9kZXM7XG5cdFx0XHRcdFx0XHRjb25zdCBvbGRWYWx1ZSA9IG0ucmVtb3ZlZE5vZGVzO1xuXHRcdFx0XHRcdFx0aWYodmFsdWUgIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwidXBkYXRlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgICAgIDogdHlwZW9mIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnR5IDogXCJpdGVtc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlIDogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgOiBvbGRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQgKiBBZGQgTXV0YXRpb25PYnNlcnZlciB0byBvYmplY3Rcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsgSFRNTEVsZW1lbnQgfSAkbm9kZVxuXHQgKi9cblx0b2JzZXJ2ZSgkbm9kZSkge1xuXHRcdGlmKG0yZDIudXBkYXRlcykge1xuXHRcdFx0Y29uc3QgbXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMub25PYnNlcnZlLmJpbmQodGhpcykpXG5cdFx0XHRjb25zdCBvcHRpb25zID0ge1xuXHRcdFx0XHRhdHRyaWJ1dGVPbGRWYWx1ZTogdHJ1ZVxuXHRcdFx0fVxuXHRcdFx0b3B0aW9ucy5zdWJ0cmVlID0gdHJ1ZTtcblx0XHRcdG9wdGlvbnMuY2hpbGRMaXN0ID0gdHJ1ZTtcblx0XHRcdGNvbnN0IHRvT2JzZXJ2ZSA9ICRub2RlLl9wcm94eSB8fCAkbm9kZTtcblx0XHRcdG11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0b09ic2VydmUsIG9wdGlvbnMpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIHJvb3Qgbm9kZSBhcyBwcm94eVxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge3N0cmluZ3xIVE1MRWxlbWVudH0gc2VsZWN0b3Jcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKi9cblx0Z2V0UHJveHlOb2RlKHNlbGVjdG9yLCBvYmopIHtcblx0XHRjb25zdCAkbm9kZSA9IHRoaXMuZG9Eb20oc2VsZWN0b3IsIG9iaik7XG5cdFx0aWYoJG5vZGUpIHtcblx0XHQgICAgdGhpcy5vYnNlcnZlKCRub2RlKTtcblx0XHQgICAgcmV0dXJuIHRoaXMucHJveHkoJG5vZGUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBFeHRlbmRzIFwiaXRlbXNcIlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge05vZGVMaXN0LCBIVE1MQ29sbGVjdGlvbn0gJG5vZGVcblx0ICovXG5cdGV4dGVuZEl0ZW1zKCRub2RlKSB7XG5cdFx0Ly8gV2UgdHJ5IHRvIGFkZCBtb3N0IG9mIHRoZSBhcnJheSBmdW5jdGlvbnMgaW50byBOb2RlTGlzdCBhbmQgSFRNTENvbGxlY3Rpb246XG5cdFx0Ly8gTk9URTogTm90IGFsbCB3aWxsIHdvcmsgYXMgZXhwZWN0ZWQuXG5cdFx0Ly8gTk9URTogZnVuY3Rpb24oKSB7fSBpcyBub3QgdGhlIHNhbWUgaGVyZSBhcyAoKSA9PiB7fSBhcyBcInRoaXNcIiBpcyBub3QgYXMgZXhwZWN0ZWRcblx0XHRmdW5jdGlvbiByZWF0dGFjaChpdGVtcykge1xuXHRcdFx0aXRlbXMuZm9yRWFjaChpdG0gPT4ge1xuXHRcdFx0XHRjb25zdCBwYXJlbnQgPSBpdG0ucGFyZW50Tm9kZTtcblx0XHRcdFx0Y29uc3QgZGV0YXRjaGVkSXRlbSA9IHBhcmVudC5yZW1vdmVDaGlsZChpdG0pO1x0Ly9XZSBkZXRhY2ggZnJvbSBvcmlnaW5hbCBwYXJlbnRcblx0XHRcdFx0JG5vZGUuYXBwZW5kKGRldGF0Y2hlZEl0ZW0pOyAvL0F0dGFjaCB0byAkbm9kZSAod29ya3Mgd2l0aCBub24tZXhpc3RpbmcgZWxlbWVudHMpXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Y29uc3QgaXRlbXMgPSAkbm9kZS5pdGVtcztcblx0XHQvLyBOb24tU3RhbmRhcmQgb3Igbm9uLWV4aXN0ZW50IGluIEFycmF5OlxuXHRcdGNvbnN0IG5vblN0ZCA9IFtcImNsZWFyXCIsIFwiZ2V0XCIsIFwicmVtb3ZlXCIsIFwic2VsZWN0ZWRcIiwgXCJmaXJzdFwiLCBcImxhc3RcIiwgXCJmaW5kQWxsXCJdO1xuXHRcdC8vIEFycmF5IHByb3BlcnRpZXM6XG5cdFx0T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoQXJyYXkucHJvdG90eXBlKS5jb25jYXQobm9uU3RkKS5mb3JFYWNoKG1ldGhvZCA9PiB7XG5cdFx0XHRpZihpdGVtc1ttZXRob2RdID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0bGV0IGZ1bmMgPSBudWxsO1xuXHRcdFx0XHRjb25zdCBfdGhpcyA9IHRoaXM7XG5cdFx0XHRcdHN3aXRjaCAobWV0aG9kKSB7XG5cdFx0XHRcdCAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tIFNhbWUgYXMgaW4gQXJyYXkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdFx0XHRjYXNlIFwiY29weVdpdGhpblwiOiAvLyBjb3B5IGVsZW1lbnQgZnJvbSBpbmRleCB0byBpbmRleFxuXHRcdFx0XHRcdGNhc2UgXCJmaWxsXCI6IC8vIHJlcGxhY2UgTiBlbGVtZW50cyBpbiBhcnJheVxuXHRcdFx0XHRcdGNhc2UgXCJzcGxpY2VcIjogLy8gYWRkIG9yIHJlbW92ZSBlbGVtZW50c1xuXHRcdFx0XHRcdCAgICBmdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICAgICAgICBjb25zb2xlLmxvZyhcIk5vdCBhdmFpbGFibGUgeWV0OiBcIiArIG1ldGhvZCk7XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInJldmVyc2VcIjogLy8gcmV2ZXJzZSB0aGUgb3JkZXJcblx0XHRcdFx0XHRcdGZ1bmMgPSBmdW5jdGlvbiguLi5hcmdzKSB7XG5cdFx0XHRcdFx0ICAgICAgICBpZih0aGlzLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20odGhpcy5pdGVtcyk7IC8vS2VlcCBhIGNvcHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0T2JqID0gaXRlbXNbbWV0aG9kXSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhdHRhY2goaXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0T2JqO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLSBTcGVjaWFsIEltcGxlbWVudGF0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRcdFx0Y2FzZSBcImNsZWFyXCI6IC8vIHBhcmVudE5vZGUucmVwbGFjZUNoaWxkcmVuKCkgY2FuIGFsc28gYmUgdXNlZFxuXHRcdFx0XHRcdFx0ZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHR3aGlsZSh0aGlzLml0ZW1zWzBdKSB0aGlzLml0ZW1zWzBdLnJlbW92ZSgpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiZ2V0XCI6IC8vIHdpbGwgcmV0dXJuIHRoZSBpdGVtIHdpdGggZGF0YS1pZDpcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRcdFx0ICAgICAgICBsZXQgZm91bmQgPSBudWxsO1xuXHRcdFx0XHRcdCAgICAgICAgaWYodGhpcy5pdGVtcy5sZW5ndGgpIHtcblx0XHRcdFx0XHQgICAgICAgICAgICB0aGlzLml0ZW1zLnNvbWUoaXRlbSA9PiB7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgIGNvbnN0IHNhbWVJZCA9IG0yZDIudXRpbHMuaXNOdW1lcmljKGlkKSA/IChpdGVtLmRhdGFzZXQuaWQgKiAxKSA9PT0gaWQgKiAxIDogaXRlbS5kYXRhc2V0LmlkID09PSBpZDtcblx0XHRcdFx0XHQgICAgICAgICAgICAgICAgaWYoaXRlbS5kYXRhc2V0ICYmIHNhbWVJZCkge1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBpdGVtO1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHQgICAgICAgICAgICB9KTtcblx0XHRcdFx0XHQgICAgICAgIH1cblx0XHRcdFx0XHQgICAgICAgIHJldHVybiBmb3VuZDtcblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdCAgICBicmVhaztcblx0XHRcdFx0XHRjYXNlIFwic2VsZWN0ZWRcIjogLy8gd2lsbCByZXR1cm4gdGhlIHNlbGVjdGVkIGl0ZW0gaW4gbGlzdFxuXHRcdFx0XHRcdCAgICBmdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICAgICAgICByZXR1cm4gX3RoaXMucHJveHkodGhpcy5maW5kKFwiOnNjb3BlID4gXCIgKyBcIltzZWxlY3RlZF1cIikpOyAvL29ubHkgZGlyZWN0IGNoaWxkcmVuXG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImZpcnN0XCI6IC8vIHJldHVybnMgdGhlIGZpcnN0IGl0ZW0gaW4gbGlzdFxuXHRcdFx0XHRcdCAgICBmdW5jID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICAgICAgICByZXR1cm4gX3RoaXMucHJveHkodGhpcy5pdGVtc1swXSk7XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImxhc3RcIjogLy8gcmV0dXJucyB0aGUgbGFzdCBpdGVtIGluIGxpc3Rcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgICAgICAgcmV0dXJuIF90aGlzLnByb3h5KHRoaXMuaXRlbXNbdGhpcy5pdGVtcy5sZW5ndGggLSAxXSk7XG5cdFx0XHRcdFx0ICAgIH1cblx0XHRcdFx0XHQgICAgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInBvcFwiIDogLy9SZW1vdmUgYW5kIHJldHVybiBsYXN0IGVsZW1lbnQ6XG5cdFx0XHRcdFx0ICAgIGZ1bmMgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQgICAgICAgIGlmKHRoaXMuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXNbMF0ucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb3h5KHBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLml0ZW1zW3RoaXMuaXRlbXMubGVuZ3RoIC0gMV0pKTtcblx0XHRcdFx0XHQgICAgICAgIH1cblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdCAgICBicmVhaztcblx0XHRcdFx0XHRjYXNlIFwicHVzaFwiOiAvLyBBZGQgb25lIGl0ZW0gYXQgdGhlIGVuZDpcblx0XHRcdFx0XHRcdGZ1bmMgPSBmdW5jdGlvbihvYmopIHtcblx0XHRcdFx0XHRcdCAgICBvYmogPSBfdGhpcy5wbGFpblRvT2JqZWN0KHRoaXMsIG9iaik7XG5cdFx0XHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNFbGVtZW50KG9iaikpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmFwcGVuZChvYmopO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdChvYmopKSB7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zdCBpbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc3QgJGNoaWxkID0gX3RoaXMuZ2V0SXRlbSh0aGlzLCBpbmRleCwgb2JqKTtcblx0XHRcdFx0XHRcdFx0ICAgIHRoaXMuYXBwZW5kQ2hpbGQoJGNoaWxkKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKFwiVHJ5aW5nIHRvIHB1c2ggYW4gdW5rbm93biB2YWx1ZSBpbnRvIGEgbGlzdDpcIik7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zb2xlLmxvZyhvYmopXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJyZW1vdmVcIjogLy8gd2lsbCByZXR1cm4gdGhlIGl0ZW0gd2l0aCBkYXRhLWlkOlxuXHRcdFx0XHRcdCAgICBmdW5jID0gZnVuY3Rpb24oaWQpIHtcblx0XHRcdFx0XHQgICAgICAgIGlmKHRoaXMuaXRlbXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0ICAgICAgICAgICAgY29uc3QgZWxlbSA9IHRoaXMuaXRlbXMuZ2V0KGlkKTtcblx0XHRcdFx0XHQgICAgICAgICAgICBpZihlbGVtLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZSgpO1xuXHRcdFx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdFx0XHQgICAgICAgIH1cblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdCAgICBicmVhaztcblx0XHRcdFx0XHRjYXNlIFwic2hpZnRcIjogLy8gcmVtb3ZlIGFuZCByZXR1cm4gZmlyc3QgaXRlbTpcblx0XHRcdFx0XHQgICAgZnVuYyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgICAgICAgaWYodGhpcy5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5pdGVtc1swXS5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucHJveHkocGFyZW50LnJlbW92ZUNoaWxkKHRoaXMuaXRlbXNbMF0pKTtcblx0XHRcdFx0XHQgICAgICAgIH1cblx0XHRcdFx0XHQgICAgfVxuXHRcdFx0XHRcdCAgICBicmVhaztcblx0XHRcdFx0XHRjYXNlIFwic29ydFwiOiAvLyBZb3UgY2FuIHBhc3MgYSBmdW5jdGlvbiB0byBjb21wYXJlIGl0ZW1zOlxuXHRcdFx0XHRcdFx0ZnVuYyA9IGZ1bmN0aW9uKGNvbXBhcmVGdW5jKSB7XG5cdFx0XHRcdFx0ICAgICAgICBpZih0aGlzLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20odGhpcy5pdGVtcyk7IC8vS2VlcCBjb3B5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnNvcnQoY29tcGFyZUZ1bmMgfHwgKChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS50ZXh0LmxvY2FsZUNvbXBhcmUoYi50ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWF0dGFjaChpdGVtcyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJ1bnNoaWZ0XCI6IC8vIEFkZCBhbiBpdGVtIHRvIHRoZSBiZWdpbm5pbmdcblx0XHRcdFx0XHRcdGZ1bmMgPSBmdW5jdGlvbihvYmopIHtcblx0XHRcdFx0XHRcdCAgICBvYmogPSBfdGhpcy5wbGFpblRvT2JqZWN0KHRoaXMsIG9iaik7XG5cdFx0XHRcdFx0XHRcdGlmKG0yZDIudXRpbHMuaXNFbGVtZW50KG9iaikpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnByZXBlbmQob2JqKTtcblx0XHRcdFx0XHRcdCAgICB9IGVsc2UgaWYgKG0yZDIudXRpbHMuaXNQbGFpbk9iamVjdChvYmopKSB7XG5cdFx0XHRcdFx0XHRcdCAgICBjb25zdCBpbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc3QgJGNoaWxkID0gX3RoaXMuZ2V0SXRlbSh0aGlzLCBpbmRleCwgb2JqKTtcblx0XHRcdFx0XHRcdFx0ICAgIHRoaXMucHJlcGVuZCgkY2hpbGQpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQgICAgY29uc29sZS5sb2coXCJUcnlpbmcgdG8gdW5zaGlmdCBhbiB1bmtub3duIHZhbHVlIGludG8gYSBsaXN0OlwiKTtcblx0XHRcdFx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKG9iailcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCAgICBicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OiAvLy0tLS0tLS0tLS0tLS0tLS0tIExpbmsgdG8gQXJyYXkgLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFx0XHRcdCAgICBsZXQgYXJyTWV0aG9kID0gbWV0aG9kO1xuXHRcdFx0XHRcdFx0Ly8gbm9pbnNwZWN0aW9uIEZhbGxUaHJvdWdoSW5Td2l0Y2hTdGF0ZW1lbnRKU1xuXHRcdFx0XHRcdFx0c3dpdGNoKHRydWUpIHtcblx0XHRcdFx0XHQgICAgICAgIGNhc2UgbWV0aG9kID09PSBcImZpbmRBbGxcIjpcblx0XHRcdFx0XHQgICAgICAgICAgICBhcnJNZXRob2QgPSBcImZpbHRlclwiOyAvLyBVc2UgXCJmaWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgbTJkMi51dGlscy5pc0Z1bmN0aW9uKEFycmF5LnByb3RvdHlwZVttZXRob2RdKTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCBub2RlcyB0byBwcm94eSBzbyB3ZSBjYW4gdXNlIHNob3J0IGFzc2lnbm1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXQsIGNvbmNhdCwgZXZlcnksIGZpbHRlciwgZmluZCwgZmluZEluZGV4LCBmb3JFYWNoLCBpbmNsdWRlcywgaW5kZXhPZiwgam9pbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2V5cywgbGFzdEluZGV4T2YsIG1hcCwgcmVkdWNlLCByZWR1Y2VSaWdodCwgc2xpY2UsIHNvbWUsIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJGdW5jID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3hpZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oJG5vZGUuaXRlbXMpLmZvckVhY2gobiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJveGllcy5wdXNoKF90aGlzLnByb3h5KG4pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ocHJveGllcylbYXJyTWV0aG9kXSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2gobWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGFuZ2UgYmVoYXZpb3VyIG9mIGZpbmQ6IC8vVE9ETzogZG9jdW1lbnRhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZpbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtMmQyLnV0aWxzLmlzU3RyaW5nKGFyZ3NbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kKGFyZ3NbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyckZ1bmMoLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmaW5kQWxsXCI6ICAvL1RPRE86IGRvY3VtZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gZnVuY3Rpb24oLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZEFsbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYobTJkMi51dGlscy5pc1N0cmluZyhhcmdzWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZEFsbChhcmdzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJGdW5jKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29uY2F0XCI6IC8vVE9ETzogZG9jdW1lbnRhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihtMmQyLnV0aWxzLmlzQXJyYXkoYXJnc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgYXJnc1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb2JqID0gYXJnc1tpXVtqXTtcblx0XHRcdFx0XHRcdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEgbTJkMi51dGlscy5pc0VsZW1lbnQob2JqKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gX3RoaXMucGxhaW5Ub09iamVjdCh0aGlzLCBhcmdzW2ldW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtMmQyLnV0aWxzLmlzUGxhaW5PYmplY3Qob2JqKSkge1xuXHRcdFx0XHRcdFx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IF90aGlzLmdldEl0ZW0odGhpcywgaW5kZXgsIG9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSBhcnJGdW5jO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZihmdW5jKSB7XG5cdFx0XHRcdFx0bTJkMi51dGlscy5kZWZpbmVQcm9wKGl0ZW1zLCBtZXRob2QsIGZ1bmMuYmluZCgkbm9kZSkpOyAvL2JpbmQ6IHNwZWNpZnkgdGhlIFwidGhpc1wiIHZhbHVlXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuLyoqXG4gKiBNMkQyIEFsZXJ0cyBFeHRlbnNpb25cbiAqIEBzaW5jZSAyMDIxLTA1LTIwXG4gKlxuICogQSByZXBsYWNlbWVudCBvZiBgYWxlcnRgLGBwcm9tcHRgIGFuZCBgY29uZmlybWAuIEluc3BpcmVkIGJ5IGBTd2VldEFsZXJ0YCwgd2l0aFxuICogY3VzdG9taXphYmxlIHRoZW1lIGFuZCBiZXR0ZXIgTTJEMiBpbnRlZ3JhdGlvbi5cbiAqXG4gKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAqICQud2FpdCAgICAgICA6IERpc3BsYXlzIGEgc3Bpbm5lciB3aXRob3V0IGFueSBidXR0b24gaW4gaXQuXG4gKiAkLmFsZXJ0ICAgICAgOiBEaXNwbGF5cyBhIHNpbXBsZSBtZXNzYWdlIHdpdGggXCJva1wiIGJ1dHRvbi5cbiAqICQuc3VjY2VzcyAgICA6IFNhbWUgYXMgJC5hbGVydCwgYnV0IHNob3cgYSBcImNoZWNrXCIgaWNvbi5cbiAqICQuZmFpbHVyZSAgICA6IFNhbWUgYXMgJC5hbGVydCwgYnV0IHNob3dzIGEgXCJ3YXJuaW5nXCIgaWNvbi5cbiAqICQuY29uZmlybSAgICA6IERpc3BsYXlzIGEgY29uZmlybWF0aW9uIG1lc3NhZ2Ugd2l0aCBcInllc1wiIGFuZCBcIm5vXCIgYnV0dG9ucy5cbiAqICQucHJvbXB0ICAgICA6IERpc3BsYXlzIGFuIGlucHV0IHByb21wdCB3aXRoIFwiY2FuY2VsXCIgYW5kIFwic2VuZFwiIGJ1dHRvbnMuXG4gKiAkLm1lc3NhZ2UgICAgOiBGcmVlIGZvcm0gbWVzc2FnZSAoYWxsIHRoZSBwcmV2aW91cyBpbXBsZW1lbnRhdGlvbnMgdXNlcyB0aGlzIGZ1bmN0aW9uKVxuICogJC5jbG9zZUFsbCAgIDogQ2xvc2UgYW55IG1lc3NhZ2UgdGhhdCBtaWdodCBiZSBvcGVuXG5cbiAqIERvY3VtZW50YXRpb24gOlxuICogaHR0cHM6Ly9naXRsYWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL2FsZXJ0Lm1kXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vYWxlcnQubWRcbiAqL1xubTJkMi5sb2FkKCQgPT4ge1xuICAgIGZ1bmN0aW9uIGNsb3NlKGFmdGVyQ2xvc2UpIHtcbiAgICAgICAgbGV0IHdpbkV4aXN0cyA9ICQuZXhpc3RzKFwiI20yZDItYWxlcnQgLm0yZDItYWxlcnQtZnJvbnRcIik7XG4gICAgICAgIGlmKHdpbkV4aXN0cykge1xuICAgICAgICAgICAgbGV0IHdpbiA9ICQoXCIjbTJkMi1hbGVydCAubTJkMi1hbGVydC1mcm9udFwiKTtcbiAgICAgICAgICAgIHdpbi5jc3MuYWRkKFwidmFuaXNoXCIpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHdpbkV4aXN0cyA9ICQuZXhpc3RzKFwiI20yZDItYWxlcnQgLm0yZDItYWxlcnQtZnJvbnRcIik7XG4gICAgICAgICAgICAgICAgaWYod2luRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjbTJkMi1hbGVydFwiKS5yZW1vdmUoKTsgLy8gQmUgc3VyZSBpdCBleGlzdHMgYmVmb3JlIHRyeWluZyB0byByZW1vdmVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoYWZ0ZXJDbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICBhZnRlckNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgNDAwKTsgLy9BbmltYXRpb24gdGFrZXMgNTAwLCBhZnRlciB0aGF0IHdpbGwgYmUgcmVzdG9yZWQsIHNvIHdlIG5lZWQgdG8gcmVtb3ZlIGl0IGJlZm9yZSB0aGF0IHRpbWUuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZihhZnRlckNsb3NlKSB7XG4gICAgICAgICAgICAgICAgYWZ0ZXJDbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGZhSWNvbnMgPSB7XG4gICAgICAgIHdyYXAgICAgIDogZmFsc2UsXG4gICAgICAgIHF1ZXN0aW9uIDogW1wiZmFcIiwgXCJmYS1xdWVzdGlvbi1jaXJjbGVcIl0sXG4gICAgICAgIGluZm8gICAgIDogW1wiZmFcIiwgXCJmYS1leGNsYW1hdGlvbi1jaXJjbGVcIl0sXG4gICAgICAgIGVycm9yICAgIDogW1wiZmFcIiwgXCJmYS1leGNsYW1hdGlvbi10cmlhbmdsZVwiXSxcbiAgICAgICAgb2sgICAgICAgOiBbXCJmYVwiLCBcImZhLWNoZWNrXCJdLFxuICAgICAgICBpbnB1dCAgICA6IFtcImZhXCIsIFwiZmEtZWRpdFwiXSxcbiAgICAgICAgd2FpdCAgICAgOiBbXCJmYVwiLCBcImZhLWNvZ1wiLCBcImZhLXNwaW5cIl1cbiAgICB9XG4gICAgY29uc3QgbWF0ZXJpYWwgPSB7XG4gICAgICAgIHdyYXAgICAgIDogXCJtYXRlcmlhbC1pY29uc1wiLFxuICAgICAgICBxdWVzdGlvbiA6IFwiaGVscFwiLFxuICAgICAgICBpbmZvICAgICA6IFwiaW5mb1wiLFxuICAgICAgICBlcnJvciAgICA6IFwiZXJyb3JcIixcbiAgICAgICAgb2sgICAgICAgOiBcImRvbmVcIixcbiAgICAgICAgaW5wdXQgICAgOiBcImVkaXRcIixcbiAgICAgICAgd2FpdCAgICAgOiBcInBlbmRpbmdcIlxuICAgIH1cbiAgICBjb25zdCBkZWZhdWx0Q3NzID0ge1xuICAgICAgICB3cmFwICAgICA6IGZhbHNlLFxuICAgICAgICBxdWVzdGlvbiA6IFwiaWNvbl9xdWVzdGlvblwiLFxuICAgICAgICBpbmZvICAgICA6IFwiaWNvbl9pbmZvXCIsXG4gICAgICAgIGVycm9yICAgIDogXCJpY29uX2Vycm9yXCIsXG4gICAgICAgIG9rICAgICAgIDogXCJpY29uX29rXCIsXG4gICAgICAgIGlucHV0ICAgIDogXCJpY29uX2lucHV0XCIsXG4gICAgICAgIHdhaXQgICAgIDogXCJpY29uX3dhaXRcIlxuICAgIH1cbiAgICAkLm1lc3NhZ2UgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGxldCBjc3MgPSBkZWZhdWx0Q3NzO1xuICAgICAgICBzd2l0Y2ggKCQubWVzc2FnZUljb25zKSB7XG4gICAgICAgICAgICBjYXNlIFwiZmFcIjogY3NzID0gZmFJY29uczsgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgXCJtYXRlcmlhbFwiIDogY3NzID0gbWF0ZXJpYWw7IGJyZWFrXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmKCQuaXNPYmplY3QoJC5tZXNzYWdlSWNvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNzcyA9ICQubWVzc2FnZUljb25zO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihvcHRpb25zKSB7XG4gICAgICAgICAgICBpZighICQuaXNGdW5jdGlvbihvcHRpb25zLmNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIGlmKG9wdGlvbnMuY2FsbGJhY2sgJiYhIG9wdGlvbnMudGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnRleHQgPSBvcHRpb25zLmNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrID0gKCkgPT4ge31cbiAgICAgICAgICAgIH1cbiBcdFx0ICAgIGlmKCEgb3B0aW9ucy50ZXh0KSB7IG9wdGlvbnMudGV4dCA9IFwiXCIgfVxuICAgICAgICB9XG4gICAgICAgIGNsb3NlKCgpID0+IHsgLy8gQmUgc3VyZSB3ZSBoYXZlIG5vIG90aGVyIGFsZXJ0XG4gICAgICAgICAgICAkKFwiYm9keVwiLCB7XG4gICAgICAgICAgICAgICAgbTJkMkFsZXJ0IDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgaWQgOiBcIm0yZDItYWxlcnRcIixcbiAgICAgICAgICAgICAgICAgICAgYmFjayA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogXCJtMmQyLWFsZXJ0LWJhY2tcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgOjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3R0b20gOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA6IFwiIzAwMDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJjZW50ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbnQgOiBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJmb3JtXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogKG9wdGlvbnMuY3NzID8gKCQuaXNBcnJheShvcHRpb25zLmNzcykgPyBvcHRpb25zLmNzcyA6IFtvcHRpb25zLmNzc10pIDogW10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChbXCJtMmQyLWFsZXJ0LWZyb250XCIsIFwicG9wdXBcIiwgb3B0aW9ucy5pY29uXSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpJbmRleCA6IDEwMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbiA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwic3BhblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBbXCJpY29uXCIsIG9wdGlvbnMuaWNvbl0uY29uY2F0KGNzcy53cmFwID8gW2Nzcy53cmFwXSA6IGNzc1tvcHRpb25zLmljb25dKS5jb25jYXQob3B0aW9ucy5pY29uID09PSBcIndhaXRcIiA/IFwic3BpblwiIDogXCJcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgOiBjc3Mud3JhcCA/IGNzc1tvcHRpb25zLmljb25dIDogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFwibTJkMi1hbGVydC10aXRsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFuIDogb3B0aW9ucy50aXRsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VibXNnIDogKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByb3BzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogXCJtMmQyLWFsZXJ0LXRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvcHRpb25zLmljb24gPT09IFwiaW5wdXRcIiAmJiEgb3B0aW9ucy50ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc2V0IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBcIm0yZDItYWxlcnQtZmllbGRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlIDogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogXCJhbnN3ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ubG9hZCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKCQuaXNQbGFpbk9iamVjdChvcHRpb25zLnRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc2V0IDogT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNzcyA6IFwibTJkMi1hbGVydC1maWVsZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgb3B0aW9ucy50ZXh0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IHsgc3BhbiA6IG9wdGlvbnMudGV4dC5yZXBsYWNlKFwiXFxuXCIsXCI8YnI+XCIpIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm9wcywgY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkob3B0aW9ucy5pY29uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbnN1Ym1pdCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXREYXRhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmdW5jO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goZGF0YS5idXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJva1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInllc1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSAoKSA9PiB7IG9wdGlvbnMuY2FsbGJhY2sodHJ1ZSwgZGF0YSkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm9cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gKCkgPT4geyBvcHRpb25zLmNhbGxiYWNrKGZhbHNlLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjYW5jZWxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gKCkgPT4geyBvcHRpb25zLmNhbGxiYWNrKG51bGwsIGRhdGEpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayhkYXRhW09iamVjdC5rZXlzKGRhdGEpWzBdXSwgZGF0YSkgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMgPSAoKSA9PiB7IG9wdGlvbnMuY2FsbGJhY2soZGF0YVtPYmplY3Qua2V5cyhkYXRhKS5maW5kKGl0ID0+IGl0ICE9PSBcImJ1dHRvblwiKV0sIGRhdGEpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gSWYgd2UgaGF2ZSBtb3JlIHRoYW4gb25lIGZpZWxkLCB3ZSBzZW5kIGFsbDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyA9ICgpID0+IHsgb3B0aW9ucy5jYWxsYmFjayhkYXRhLCBkYXRhKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAvLyBXaGVuIHNldHRpbmcgY3VzdG9taXplZCBidXR0b25zLCB3ZSBzZW5kIGFsbDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jID0gKCkgPT4geyBvcHRpb25zLmNhbGxiYWNrKGRhdGEsIGRhdGEpIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlKGZ1bmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQgOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZiA9IHRoaXMuZmluZChcIlthdXRvZm9jdXNdXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihkZWYpIHsgZGVmLmZvY3VzKCk7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAob2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3QnV0dG9ucyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdCdXR0b25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9ucyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJkaXZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MgOiBcIm0yZDItYWxlcnQtYnV0dG9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iLmZvckVhY2goYiA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBiLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15hLXogXS9nLFwiXCIpLnJlcGxhY2UoXCIgXCIsXCJfXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3QnV0dG9ucy5idXR0b25zW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA6IFwic3VibWl0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgOiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzIDogW1wiY29sb3JcIiwga2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0IDogJC5kaWN0ICE9PSB1bmRlZmluZWQgPyAkLmRpY3QoYikgOiBiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9mb2N1cyA6IFtcIm9rXCIsXCJ5ZXNcIl0uaW5jbHVkZXMoYiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybU5vVmFsaWRhdGUgOiBbXCJjYW5jZWxcIl0uaW5jbHVkZXMoYiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXBwZW5kIGEgaGlkZGVuIGlucHV0IHdpdGggdGhlIHZhbHVlIG9mIHRoZSBidXR0b24gY2xpY2tlZDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcy5jbG9zZXN0KFwiZm9ybVwiKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJpbnB1dFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiBcImhpZGRlblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgOiBcImJ1dHRvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlIDogdGhpcy52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3QnV0dG9ucztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0ob3B0aW9ucy5idXR0b25zKVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBBZGQgYXV0b21hdGljYWxseSBuYW1lIHRvIGZpZWxkcyBpbiBjYXNlIGl0IGlzIG5vdCBzcGVjaWZpZWQ6XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgJChcIiNtMmQyLWFsZXJ0IC5tMmQyLWFsZXJ0LWZyb250XCIpLmZpbmRBbGwoXCJpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYVwiKS5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgaWYoZWxlbS5uYW1lID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5uYW1lID0gXCJmaWVsZF9cIiArIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IGNsb3NlIDogY2xvc2UgfTtcbiAgICB9XG4gICAgJC53YWl0ID0gKHRpdGxlLCB0ZXh0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gJC5tZXNzYWdlKHtcbiAgICAgICAgICAgIGljb24gOiBcIndhaXRcIixcbiAgICAgICAgICAgIHRpdGxlIDogdGl0bGUsXG4gICAgICAgICAgICBidXR0b25zIDogW10sXG4gICAgICAgICAgICB0ZXh0IDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0ZXh0LFxuICAgICAgICAgICAgY2FsbGJhY2sgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdGV4dCA6IGNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkLmFsZXJ0ID0gKHRpdGxlLCB0ZXh0LCBjYWxsYmFjaykgPT4ge1xuICAgICAgICByZXR1cm4gJC5tZXNzYWdlKHtcbiAgICAgICAgICAgIGljb24gOiBcImluZm9cIixcbiAgICAgICAgICAgIHRpdGxlIDogdGl0bGUsXG4gICAgICAgICAgICBidXR0b25zIDogW1wib2tcIl0sXG4gICAgICAgICAgICB0ZXh0IDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0ZXh0LFxuICAgICAgICAgICAgY2FsbGJhY2sgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdGV4dCA6IGNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkLnN1Y2Nlc3MgPSAodGl0bGUsIHRleHQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHJldHVybiAkLm1lc3NhZ2Uoe1xuICAgICAgICAgICAgaWNvbiA6IFwib2tcIixcbiAgICAgICAgICAgIHRpdGxlIDogdGl0bGUsXG4gICAgICAgICAgICBidXR0b25zIDogW1wib2tcIl0sXG4gICAgICAgICAgICB0ZXh0IDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0ZXh0LFxuICAgICAgICAgICAgY2FsbGJhY2sgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdGV4dCA6IGNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkLmZhaWx1cmUgPSAodGl0bGUsIHRleHQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHJldHVybiAkLm1lc3NhZ2Uoe1xuICAgICAgICAgICAgaWNvbiA6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpdGxlIDogdGl0bGUsXG4gICAgICAgICAgICBidXR0b25zIDogW1wib2tcIl0sXG4gICAgICAgICAgICB0ZXh0IDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0ZXh0LFxuICAgICAgICAgICAgY2FsbGJhY2sgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdGV4dCA6IGNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkLmNvbmZpcm0gPSAodGl0bGUsIHRleHQsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIHJldHVybiAkLm1lc3NhZ2Uoe1xuICAgICAgICAgICAgaWNvbiA6IFwicXVlc3Rpb25cIixcbiAgICAgICAgICAgIHRpdGxlIDogdGl0bGUsXG4gICAgICAgICAgICBidXR0b25zIDogW1wieWVzXCIsIFwibm9cIl0sXG4gICAgICAgICAgICB0ZXh0IDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0ZXh0LFxuICAgICAgICAgICAgY2FsbGJhY2sgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdGV4dCA6IGNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkLnByb21wdCA9ICh0aXRsZSwgdGV4dCwgY2FsbGJhY2spID0+IHtcbiAgICAgICAgcmV0dXJuICQubWVzc2FnZSh7XG4gICAgICAgICAgICBpY29uIDogXCJpbnB1dFwiLFxuICAgICAgICAgICAgdGl0bGUgOiB0aXRsZSxcbiAgICAgICAgICAgIGJ1dHRvbnMgOiBbXCJjYW5jZWxcIixcInNlbmRcIl0sXG4gICAgICAgICAgICB0ZXh0IDogY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0ZXh0LFxuICAgICAgICAgICAgY2FsbGJhY2sgOiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdGV4dCA6IGNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkLmNsb3NlQWxsID0gKCkgPT4ge1xuICAgICAgICBjbG9zZSgpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIE0yRDIgTGFuZ3VhZ2UgRXh0ZW5zaW9uXG4gKiBAc2luY2UgMjAyMS0wNi0wMVxuICpcbiAqIEFkZCBzdXBwb3J0cyBmb3IgbXVsdGktbGFuZ3VhZ2UgaW50ZXJmYWNlc1xuICpcbiAqIFRoaXMgZXh0ZW5zaW9uIHByb3ZpZGVzOlxuICogJC5kaWN0KGtleXdvcmQsIFt2YXJpYWJsZXNdKSAgOiBUbyBnZXQgdHJhbnNsYXRpb25zIGZyb20gZGljdGlvbmFyeVxuICogJC5sYW5nKGxhbmcpICAgICAgICAgICAgICAgICAgOiBTZXQgbmV3IGxhbmd1YWdlXG4gKlxuICogRG9jdW1lbnRhdGlvbiA6XG4gKiBodHRwczovL2dpdGxhYi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vbGFuZy5tZFxuICogaHR0cHM6Ly9naXRodWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL2xhbmcubWRcbiAqL1xubTJkMi5sb2FkKCQgPT4ge1xuICAgIGxldCBtYW51YWxMYW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtMmQyLmxhbmdcIikgfHwgXCJcIlxuICAgIGxldCBsYW5ndWFnZSA9IG1hbnVhbExhbmcgfHwgbmF2aWdhdG9yLmxhbmd1YWdlO1xuICAgIGZ1bmN0aW9uIERpY3Rpb25hcnkobGFuZykge1xuICAgICAgICBjb25zdCBvYmogPSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihrZXl3b3JkLCB2YXJzKSB7XG4gICAgICAgICAgICBpZihrZXl3b3JkID09PSB1bmRlZmluZWQpIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgbGV0IG1zZyA9IG9iai52YWwoa2V5d29yZCx0cnVlKTtcbiAgICAgICAgICAgIGlmKHZhcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB2YXJzID09IFwic3RyaW5nXCIpe1xuICAgICAgICAgICAgICAgICAgICBpZih2YXJzICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJzID0gdmFycy5yZXBsYWNlKC87JC8sXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWlycyA9IHZhcnMuc3BsaXQoXCI7XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFycyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFpcnMuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ID0gcGFpcnNbcF0uc3BsaXQoXCI6XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcnNbcGFydFswXV0gPSBwYXJ0WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIHZhcnMgPT0gXCJvYmplY3RcIil7XG4gICAgICAgICAgICAgICAgICAgIHZhcnMuZm9yRWFjaCh2ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBrd2QgPSB2YXJzW3ZdICsgXCJcIjsgLy9CZSBzdXJlIGl0cyBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGt3ZCA9IG9iai52YWwoa3dkLGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IG1zZy5yZXBsYWNlKHYsa3dkKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbXNnO1xuICAgICAgICB9XG4gICAgICAgIG9iai5sYW5nID0gbGFuZyB8fCBcImVuXCI7XG4gICAgICAgIG9iai5kYXRhID0ge307XG4gICAgICAgIG9iai5zZXQgPSBmdW5jdGlvbihkaWN0aW9uYXJ5KSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEgPSBkaWN0aW9uYXJ5O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIG9iai5oYXMgPSBmdW5jdGlvbihrZXl3b3JkLCBsYW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFuZyA9PT0gdW5kZWZpbmVkID8gdGhpcy5kYXRhW2tleXdvcmRdICE9PSB1bmRlZmluZWQgOiB0aGlzLmRhdGFba2V5d29yZF1bbGFuZ10gIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgb2JqLnZhbCA9IGZ1bmN0aW9uKGtleXdvcmQsIHJlcG9ydCl7XG4gICAgICAgICAgICBpZigkLmlzRW1wdHkob2JqLmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkRpY3Rpb25hcnkgaXMgZW1wdHkuIFlvdSBuZWVkIHRvIGFkZCBhIGRpY3Rpb25hcnksIGZvciBleGFtcGxlOiBgJC5kaWN0LnNldCh7XFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInNhdmUgICA6IHsgZW4gOiAnU2F2ZScsIGVzIDogJ0d1YXJkYXInIH0sXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICBcImNhbmNlbCA6IHsgZW4gOiAnQ2FuY2VsJywgZXMgOiAnQ2FuY2VsYXInIH1cXG5cIiArXG4gICAgICAgICAgICAgICAgICAgIFwieWVzICAgIDogeyBlbiA6ICdZZXMnLCBlcyA6ICdTaScgfSxcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgIFwibm8gICAgIDogeyBlbiA6ICdObycsIGVzIDogJ05vJyB9XFxuXCIgK1xuICAgICAgICAgICAgICAgIFwifSlgXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIWtleXdvcmQpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBrZXl3b3JkIHNwZWNpZmllZC5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdHJhbnNsYXRpb24gPSBrZXl3b3JkO1xuICAgICAgICAgICAgaWYocmVwb3J0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXBvcnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleXdvcmQgPSBrZXl3b3JkLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBpZih0aGlzLmhhcyhrZXl3b3JkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VMYW5nID0gdGhpcy5sYW5nLnNwbGl0KFwiLVwiKVswXTtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmhhcyhrZXl3b3JkLCB0aGlzLmxhbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uID0gdGhpcy5kYXRhW2tleXdvcmRdW3RoaXMubGFuZ107XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMuaGFzKGtleXdvcmQsYmFzZUxhbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uID0gdGhpcy5kYXRhW2tleXdvcmRdW2Jhc2VMYW5nXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZihyZXBvcnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJNaXNzaW5nIHRyYW5zbGF0aW9uIGZvciBsYW5nIFtcIit0aGlzLmxhbmcrXCJdOiBcIitrZXl3b3JkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYocmVwb3J0KXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJNaXNzaW5nIGtleXdvcmQ6IFwiK2tleXdvcmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGlvbjtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICAvLyBJbml0aWFsaXplIGRpY3Rpb25hcnlcbiAgICAkLmRpY3QgPSBuZXcgRGljdGlvbmFyeShsYW5ndWFnZSk7XG5cbiAgICBjb25zdCBsYW5nRXZlbnRzID0gW107XG4gICAgJC5sYW5nID0gZnVuY3Rpb24obmV3TGFuZykge1xuICAgICAgICBpZihuZXdMYW5nKSB7XG4gICAgICAgICAgICAkLmRpY3QubGFuZyA9IG5ld0xhbmc7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm0yZDIubGFuZ1wiLCAkLmRpY3QubGFuZyk7XG4gICAgICAgIH1cbiAgICAgICAgJChcImJvZHlcIikuZmluZEFsbChcIltsYW5nXVwiKS5mb3JFYWNoKChlbGVtKSA9PiB7XG4gICAgICAgICAgICBsZXQgdHh0ID0gZWxlbS50ZXh0O1xuICAgICAgICAgICAgLy8gV2hlbiBlbGVtZW50IGhhcyBjb250ZW50IGFuZCAob3B0aW9uYWwpIHRpdGxlXG4gICAgICAgICAgICBpZih0eHQgJiYhIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwibm90eHRcIikpIHtcbiAgICAgICAgICAgICAgICBpZihlbGVtLmRhdGFzZXQua3cgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLmRhdGFzZXQua3cgPSAkLmxhbmcuZ2V0S2V5d29yZCh0eHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbGVtLnRleHQgPSAkLmRpY3QoZWxlbS5kYXRhc2V0Lmt3KTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZUt3ID0gZWxlbS5kYXRhc2V0Lmt3ICsgXCJfdGl0bGVcIjtcbiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSAkLmRpY3QuaGFzKHRpdGxlS3cpID8gJC5kaWN0KHRpdGxlS3cpIDogXCJcIjtcbiAgICAgICAgICAgICAgICBpZih0aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnRpdGxlID0gdGl0bGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdoZW4gZWxlbWVudCBvbmx5IGhhcyB0aXRsZTpcbiAgICAgICAgICAgIH0gZWxzZSBpZihlbGVtLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRpdGxlID0gXCJcIlxuICAgICAgICAgICAgICAgIGlmKGVsZW0uZGF0YXNldC5rdykge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9ICQuZGljdChlbGVtLmRhdGFzZXQua3cpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uZGF0YXNldC5rdyA9ICQubGFuZy5nZXRLZXl3b3JkKGVsZW0udGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9ICQuZGljdChlbGVtLmRhdGFzZXQua3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih0aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnRpdGxlID0gdGl0bGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmKGVsZW0ucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGxhY2Vob2xkZXIgPSBcIlwiXG4gICAgICAgICAgICAgICAgaWYoZWxlbS5kYXRhc2V0Lmt3KSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5kYXRhc2V0Lmt3ID0gJC5sYW5nLmdldEtleXdvcmQoZWxlbS5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gJC5kaWN0KGVsZW0uZGF0YXNldC5rdyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYoZWxlbS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IFwiXCJcbiAgICAgICAgICAgICAgICBpZihlbGVtLmRhdGFzZXQua3cpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAkLmRpY3QoZWxlbS5kYXRhc2V0Lmt3KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLmRhdGFzZXQua3cgPSAkLmxhbmcuZ2V0S2V5d29yZChlbGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAkLmRpY3QoZWxlbS5kYXRhc2V0Lmt3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxhbmdFdmVudHMuZm9yRWFjaChjYWxsYmFjayA9PiB7XG4gICAgICAgICAgICBjYWxsYmFjayhuZXdMYW5nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgdGV4dCB0byBrZXl3b3JkXG4gICAgICovXG4gICAgJC5sYW5nLmdldEtleXdvcmQgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICAgIHJldHVybiB0ZXh0LnRvTG93ZXJDYXNlKCkudHJpbSgpLnJlcGxhY2UoLyAvZyxcIl9cIikucmVwbGFjZSgvW15cXHddL2csXCJcIikucmVwbGFjZSgvXyQvLFwiXCIpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoJC5sYW5nLCBcIm9uY2hhbmdlXCIsIHtcbiAgICAgICAgZ2V0KCkgeyByZXR1cm4gdGhpcyB9LFxuICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIGlmKCQuaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBsYW5nRXZlbnRzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVuYWJsZSB0byBzZXQgbGFuZy5vbmNoYW5nZSwgYmVjYXVzZSBpdCBpcyBub3QgYSBmdW5jdGlvbjogXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG59KTtcbi8vIFRyYW5zbGF0ZSBIVE1MIG9uIHJlYWR5OlxubTJkMi5yZWFkeSgkID0+IHtcbiAgICBjb25zdCBtYW51YWxMYW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtMmQyLmxhbmdcIikgfHwgXCJcIlxuICAgIGNvbnN0IGJvZHlMYW5nID0gJChcImJvZHlcIikuZmluZChcIltsYW5nXVwiKTtcbiAgICBjb25zdCBodG1sTGFuZyA9ICQoXCJodG1sXCIpLmxhbmcgfHwgKGJvZHlMYW5nID8gYm9keUxhbmcubGFuZyA6IG51bGwpIHx8IFwiZW5cIjtcbiAgICBjb25zdCBpc0RpZmZlcmVudCA9IG1hbnVhbExhbmcgPyBodG1sTGFuZyAhPT0gbWFudWFsTGFuZyA6IGh0bWxMYW5nICE9PSBuYXZpZ2F0b3IubGFuZ3VhZ2Uuc3BsaXQoXCItXCIpWzBdO1xuICAgIGlmKGlzRGlmZmVyZW50KSB7ICQubGFuZygpIH1cbn0pO1xubTJkMi5sb2FkKCQgPT4ge1xuICAgIC8qXG4gICAgICogTTJEMiBTdG9yYWdlIEV4dGVuc2lvblxuICAgICAqIEBhdXRob3I6IEEuIExlcGVcbiAgICAgKiBAc2luY2UgMjAyMS0wNi0wMlxuICAgICAqXG4gICAgICogV3JhcHBlciBmb3IgZGlmZmVyZW50IGtpbmRzIG9mIHN0b3JhZ2UuXG4gICAgICogT25lIGFkdmFudGFnZSBpcyB0aGF0IG9iamVjdHMgYXJlIHN0b3JlZCB3aXRoIHR5cGUgaW5zdGVhZCBvZiBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAgICAgKiAkLmxvY2FsIDogVG8gZ2V0L3NldCB2YWx1ZXMgaW4gbG9jYWxTdG9yYWdlXG4gICAgICogJC5zZXNzaW9uIDogVG8gZ2V0L3NldCB2YWx1ZXMgaW4gc2Vzc2lvblN0b3JhZ2VcbiAgICAgKlxuICAgICAqIERvY3VtZW50YXRpb246XG4gICAgICogaHR0cHM6Ly9naXRsYWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL3N0b3JhZ2UubWRcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vaW50ZWxsaXNyYy9tMmQyL3RyZWUvbWFzdGVyL2RvY3VtZW50YXRpb24vc3RvcmFnZS5tZFxuICAgICAqXG4gICAgICovXG4gICAgZnVuY3Rpb24gU3RvcmFnZSh0eXBlKSB7XG4gICAgICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdsb2NhbCcgIDogaWYod2luZG93LmxvY2FsU3RvcmFnZSkgICAgIHRoaXMuc3RvcmUgPSBsb2NhbFN0b3JhZ2U7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc2Vzc2lvbic6IGlmKHdpbmRvdy5zZXNzaW9uU3RvcmFnZSkgICB0aGlzLnN0b3JlID0gc2Vzc2lvblN0b3JhZ2U7IGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuc3RvcmUgPT0gdW5kZWZpbmVkKSB0aGlzLnN0b3JlID0gbG9jYWxTdG9yYWdlOyAvL0RlZmF1bHRcbiAgICAgICAgdGhpcy5zZXQgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgaWYodHlwZW9mKHZhbCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFsID0geyAnJCcgOiB2YWwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RvcmUuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICBsZXQgdmFsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWwgPSBKU09OLnBhcnNlKHRoaXMuc3RvcmUuZ2V0SXRlbShrZXkpKSB8fCB7fTtcbiAgICAgICAgICAgIH0gY2F0Y2goaWdub3JlKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gdGhpcy5zdG9yZS5nZXRJdGVtKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih2YWxbXCIkXCJdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSB2YWxbXCIkXCJdO1xuICAgICAgICAgICAgfSBlbHNlIGlmKE9iamVjdC5rZXlzKHZhbCkubGVuZ3RoID09PSAwICYmIHZhbC5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFsID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWwgPSBmdW5jdGlvbihrZXkpIHsgdGhpcy5zdG9yZS5yZW1vdmVJdGVtKGtleSk7IH1cbiAgICAgICAgdGhpcy5rZXlzID0gZnVuY3Rpb24oKSB7IHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0b3JlKS5zb3J0KCk7IH1cbiAgICAgICAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uKCkgeyB0aGlzLnN0b3JlLmNsZWFyKCk7IH1cbiAgICAgICAgdGhpcy5leGlzdHMgPSBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHRoaXMuc3RvcmUuaGFzT3duUHJvcGVydHkoa2V5KTsgfVxuICAgICAgICB0aGlzLmxvZyA9IGZ1bmN0aW9uKGtleSwgdmFsLCBuKSB7XG4gICAgICAgICAgICBpZihuID09IHVuZGVmaW5lZCkgbiA9IDEwO1xuICAgICAgICAgICAgY29uc3QgdG1wID0gdGhpcy5nZXQoa2V5KSB8fCBbXTtcbiAgICAgICAgICAgIHRtcC5wdXNoKHZhbCk7XG4gICAgICAgICAgICB3aGlsZSh0bXAubGVuZ3RoID4gbikgdG1wLnNoaWZ0KCk7XG4gICAgICAgICAgICB0aGlzLnNldChrZXksdG1wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAkLmxvY2FsID0gbmV3IFN0b3JhZ2UoXCJsb2NhbFwiKTtcbiAgICAkLnNlc3Npb24gPSBuZXcgU3RvcmFnZShcInNlc3Npb25cIik7XG59KTtcbi8qKlxuICpcbiAqIE0yRDIgVXBsb2FkIFBsdWdpblxuICogdmVyLiAyMDIxLTEyLTAzXG4gKlxuICogVGhpcyBleHRlbnNpb24gcHJvdmlkZXM6XG4gKiAkLnVwbG9hZFxuICpcbiAqIERvY3VtZW50YXRpb24gOlxuICogaHR0cHM6Ly9naXRsYWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL3VwbG9hZC5tZFxuICogaHR0cHM6Ly9naXRodWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL3VwbG9hZC5tZFxuICovXG4gbTJkMi5sb2FkKCQgPT4ge1xuICAgICQudXBsb2FkID0gZnVuY3Rpb24oZXYsIG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IG9wdHMgPSBPYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgICAgICAvLyB1cGxvYWQgICA6IFwiaHR0cDovL2xvY2FsaG9zdC9wYWdlXCIsXG4gICAgICAgICAgICAvLyBvblNlbGVjdCA6IChmaWxlcywgc291cmNlcykgPT4geyAuLi4gfSxcbiAgICAgICAgICAgIC8vIG9uVXBkYXRlIDogKHByb2dyZXNzX3BjdCwgZmlsZSwgaW5kZXgpID0+IHsgLi4uIH0sXG4gICAgICAgICAgICAvLyBvbkRvbmUgICA6IChyZXNwb25zZSwgYWxsRG9uZSkgPT4geyAuLi4gfSwgLy8gcmVzcG9uc2U6IGNvbnRhaW5zIHJlc3VsdCBmcm9tIHRoZSBzZXJ2ZXIgKEpTT04pLCBpbiAoUykgd2lsbCB0cmlnZ2VyIGVhY2ggZmlsZS5cbiAgICAgICAgICAgIC8vIG9uRXJyb3IgIDogKHJlc3BvbnNlKSA9PiB7IC4uLiB9LCAvLyByZXNwb25zZTogb2JqZWN0IHdpdGggcmVsZXZhbnQgaW5mb3JtYXRpb24uIEluIChTKSB3aWxsIHRyaWdnZXIgaW5kZXBlbmRlbnRseS5cbiAgICAgICAgICAgIC8vIG9uUmVzcG9uc2UgOiAocmVzcG9uc2UpID0+IHsgLi4uIH0sIC8vIE1vZGlmeSByZXNwb25zZSBmcm9tIHNlcnZlciAoaWYgbmVlZGVkKVxuICAgICAgICAgICAgYWNjZXB0ICAgOiBcIiovKlwiLCAvLyBZb3UgY2FuIGxpbWl0IHRoZSBmaWxlIHR5cGUsIGZvciBleGFtcGxlOiBcImltYWdlLypcIiwgXCJpbWFnZS9qcGdcIiwgZXRjLlxuICAgICAgICAgICAgcGFyYWxsZWwgOiBmYWxzZSwgLy8gSWYgZmFsc2UsIGl0IHdpbGwgc2VuZCBhbGwgZmlsZXMgaW4gYSBzZXF1ZW5jZSAoUylcbiAgICAgICAgICAgIGZpZWxkICAgIDogXCJmaWxlXCIsIC8vRmllbGQgbmFtZVxuICAgICAgICAgICAgbXVsdGlwbGUgOiB0cnVlLCAvLyBBbGxvdyBtdWx0aXBsZSBmaWxlcyB0byBiZSBzZWxlY3RlZCB0byB1cGxvYWQsXG4gICAgICAgICAgICBtYXhGaWxlcyA6IDAsIC8vIE1heGltdW0gbnVtYmVyIG9mIGZpbGVzIHRvIGFsbG93IHRvIHVwbG9hZC4gMCA9IHVubGltaXRlZFxuICAgICAgICAgICAgbWF4U2l6ZU1iOiAwLCAvLyBNYXhpbXVtIHNpemUgcGVyIGZpbGUgKFApIG9yIHRvdGFsIChTKSB0byBhbGxvd1xuICAgICAgfSwgb3B0aW9ucyk7XG4gICAgICBvcHRpb25zID0gbnVsbDsgLy8gRG8gbm90IHVzZSBpdCBsYXRlcjpcbiAgICAgIGxldCBlbCA9IHdpbmRvdy5fcHJvdGVjdGVkX3JlZmVyZW5jZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJJTlBVVFwiKTtcbiAgICAgIGVsLm5hbWUgPSBvcHRzLmZpZWxkO1xuICAgICAgZWwudHlwZSA9IFwiZmlsZVwiO1xuICAgICAgaWYob3B0cy5tdWx0aXBsZSA9PSB0cnVlKSB7XG4gICAgICAgIGVsLm11bHRpcGxlID0gXCJtdWx0aXBsZVwiO1xuICAgICAgICAvL2VsLm5hbWUgKz0gXCJbXVwiOyAgLy9FbmFibGUgaWYgeW91IGFyZSB1c2luZyBQSFBcbiAgICAgIH1cbiAgICAgIGlmKCEgb3B0cy51cGxvYWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJVcGxvYWQgbm90IHNwZWNpZmllZC4gVXNpbmcgY3VycmVudCBwYWdlLlwiKVxuICAgICAgICBvcHRzLnVwbG9hZCA9IFwiXCI7XG4gICAgICB9XG4gICAgICBpZihvcHRzLm9uRG9uZSA9PSB1bmRlZmluZWQpICAgICAgeyBvcHRzLm9uRG9uZSA9IChyZXNwb25zZSwgYWxsRG9uZSkgPT4geyBjb25zb2xlLmxvZyhyZXNwb25zZSkgfX1cbiAgICAgIGlmKG9wdHMub25FcnJvciAgPT0gdW5kZWZpbmVkKSAgICB7IG9wdHMub25FcnJvciAgPSAocmVzcG9uc2UpID0+IHsgY29uc29sZS5sb2coXCJFcnJvciA6IFwiKTsgY29uc29sZS5sb2cocmVzcG9uc2UpOyB9fVxuICAgICAgaWYob3B0cy5vblVwZGF0ZSA9PSB1bmRlZmluZWQpICAgIHsgb3B0cy5vblVwZGF0ZSA9IChwY3QsIGZpbGUsIGluZGV4KSA9PiB7IGNvbnNvbGUubG9nKFwiVXBsb2FkaW5nIDogXCIgKyBwY3QgKyBcIiUgXCIgKyAob3B0cy5vbmVCeU9uZSA/IFwiWyBcIiArIGZpbGUubmFtZSArIFwiIF1cIiA6IFwiXCIpKSB9IH1cbiAgICAgIGlmKG9wdHMub25SZXNwb25zZSA9PSB1bmRlZmluZWQpICB7IG9wdHMub25SZXNwb25zZSA9IChyZXMpID0+IHsgcmV0dXJuIHJlcyB9IH0gLy8gUmV0dXJuIGl0IHdpdGhvdXQgbW9kaWZ5aW5nIGl0XG5cbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgaWYgKGVsLmZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYob3B0cy5tYXhGaWxlcyA9PT0gMCB8IGVsLmZpbGVzLmxlbmd0aCA8PSBvcHRzLm1heEZpbGVzKSB7XG4gICAgICAgICAgICAgICAgaWYob3B0cy5vblNlbGVjdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGxldCB0b3RTaXplID0gMDtcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbShlbC5maWxlcykuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY3MucHVzaChVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdG90U2l6ZSArPSBmaWxlLnNpemU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYnMgPSB0b3RTaXplIC8gKDEwMjQgKiAxMDI0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYob3B0cy5tYXhTaXplTWIgJiYgbWJzID4gb3B0cy5tYXhTaXplTWIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMub25FcnJvcihcIk1heGltdW0gc2l6ZSBleGNlZWRlZDogXCIgKyBNYXRoLmNlaWwobWJzKSArIFwiTUIgPiBcIiArIG9wdHMubWF4U2l6ZU1iICsgXCJNQlwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5vblNlbGVjdChlbC5maWxlcywgc3Jjcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKG9wdHMub25lQnlPbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlRG9uZSA9IEFycmF5KGVsLmZpbGVzLmxlbmd0aCkuZmlsbChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGVsLmZpbGVzKS5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBGaWxlVXBsb2FkKGVsLm5hbWUsIFtmaWxlXSwgaW5kZXgrKywgb3B0cywgKGRhdGEsIGZpbGVzLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlRG9uZVtpbmRleF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxEb25lID0gZmlsZURvbmUuaW5kZXhPZihmYWxzZSkgPT09IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRzLm9uRG9uZShnZXRSZXNwb25zZShkYXRhLCBmaWxlcywgaW5kZXgpLCBhbGxEb25lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYWxsRG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBGaWxlVXBsb2FkKGVsLm5hbWUsIGVsLmZpbGVzLCAwLCBvcHRzLCAoZGF0YSwgZmlsZXMsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5vbkRvbmUoZ2V0UmVzcG9uc2UoZGF0YSwgZmlsZXMsIGluZGV4KSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsgLy8gY2xlYXIgLyBmcmVlIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgICAgZWwgPSB3aW5kb3cuX3Byb3RlY3RlZF9yZWZlcmVuY2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdHMub25FcnJvcihcIk1heCBmaWxlIGxpbWl0IGV4Y2VlZGVkLiBNYXhpbXVtIGZpbGVzOiBcIiArIG9wdHMubWF4RmlsZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBlbC5jbGljaygpOyAvLyBvcGVuIGRpYWxvZ1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFJlc3BvbnNlKGRhdGEsIGZpbGVzLCBpbmRleCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IFtdO1xuICAgICAgICBkYXRhID0gZGF0YSB8fCB7fTtcbiAgICAgICAgZmlsZXMuZm9yRWFjaChmID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9ICh0eXBlb2YgZGF0YSA9PSBcIkFycmF5XCIpID8gKGRhdGEubGVuZ3RoID09IGZpbGVzLmxlbmd0aCA/IGRhdGFbaW5kZXhdIDogZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChkYXRhW2YubmFtZV0gIT09IHVuZGVmaW5lZCA/IGRhdGFbZi5uYW1lXSA6IGRhdGEpXG4gICAgICAgICAgICByZXNwb25zZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBmaWxlICA6IGYsXG4gICAgICAgICAgICAgICAgZGF0YSAgOiByb3csXG4gICAgICAgICAgICAgICAgaW5kZXggOiBpbmRleCsrLCAgICAvLyBpbiBjYXNlIG9mIDF4MSBpdCB3aWxsIGJlIGNhbGxlZCBvbmx5IG9uY2UsIG90aGVyd2lzZSwgaXQgd2lsbCBiZSBpbmNyZW1lbnRlZC5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGxvYWQgZmlsZSB1c2luZyBYSFJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBGaWxlVXBsb2FkKGZpZWxkTmFtZSwgZmlsZXMsIGluZGV4LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgY29uc3QgeGhyICAgICA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgZmlsZXMgICAgICAgICA9IEFycmF5LmZyb20oZmlsZXMpO1xuXG4gICAgICB4aHIudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoXCJwcm9ncmVzc1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICBpZihvcHRpb25zLm9uZUJ5T25lKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKChlLmxvYWRlZCAqIDEwMCkgLyBlLnRvdGFsKTtcbiAgICAgICAgICAgICAgb3B0aW9ucy5vblVwZGF0ZShwZXJjZW50YWdlLCBmaWxlc1swXSwgaW5kZXgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxldCBzaXplQWNjdW0gPSAwO1xuICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgIGZpbGVzLnNvbWUoZiA9PiB7XG4gICAgICAgICAgICAgICAgICBzaXplQWNjdW0gKz0gZi5zaXplO1xuICAgICAgICAgICAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IGUubG9hZGVkID49IHNpemVBY2N1bSA/IDEwMCA6IDEwMCAtIE1hdGgucm91bmQoKChzaXplQWNjdW0gLSBlLmxvYWRlZCkgKiAxMDApIC8gZi5zaXplKTtcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJGaWxlOiBcIiArIGYubmFtZSArIFwiIFNpemU6IFwiICsgZi5zaXplKTtcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJMb2FkZWQ6IFwiICsgZS5sb2FkZWQgKyBcIiBBY2N1bTogXCIgKyBzaXplQWNjdW0gKyBcIiBUb3RhbDogXCIgKyBlLnRvdGFsICsgXCIgUGN0OiBcIiArIHBlcmNlbnRhZ2UpXG4gICAgICAgICAgICAgICAgICBvcHRpb25zLm9uVXBkYXRlKHBlcmNlbnRhZ2UsIGYsIGkrKyk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZUFjY3VtID49IGUubG9hZGVkO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbGV0IGRhdGEgPSB7fTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRhdGEgPSB4aHIucmVzcG9uc2VUZXh0ID8gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSA6IHtcbiAgICAgICAgICAgICAgICBlcnJvcjoge3R5cGU6IFwiVW5rbm93blwiLCByZWFzb246IFwiVW5rbm93biBFcnJvclwifVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgICAgIGRhdGEuZXJyb3IgPSB7IHR5cGUgOiBcIlBhcnNlIEVycm9yXCIsIHJlYXNvbiA6IGVyci5tZXNzYWdlIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDQwMCkge1xuICAgICAgICAgICAgY2FsbGJhY2sob3B0aW9ucy5vblJlc3BvbnNlKGRhdGEpLCBmaWxlcywgaW5kZXgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYodHlwZW9mIGRhdGEuZXJyb3IgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGRhdGEuZXJyb3IgPSB7IHR5cGUgOiBcIkV4Y2VwdGlvblwiLCByZWFzb24gOiBkYXRhLmVycm9yIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbnMub25FcnJvcihkYXRhLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICB4aHIub3BlbihcIlBPU1RcIiwgb3B0aW9ucy51cGxvYWQpO1xuXG4gICAgICBjb25zdCBsb2FkZWQgPSBBcnJheShmaWxlcy5sZW5ndGgpLmZpbGwoZmFsc2UpO1xuICAgICAgY29uc3QgZm9ybSAgICA9IGdldEZpbGVGb3JtKGZpZWxkTmFtZSwgZmlsZXMpO1xuICAgICAgbGV0IGxvYWRJbmRleCA9IDA7XG4gICAgICBmaWxlcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlYWRlciAgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIGxvYWRlZFtsb2FkSW5kZXgrK10gPSB0cnVlO1xuICAgICAgICAgICAgaWYobG9hZGVkLmluZGV4T2YoZmFsc2UpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHhoci5zZW5kKGZvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhmKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmVwYXJlcyBmb3JtXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RmlsZUZvcm0oZmllbGROYW1lLCBmaWxlcykge1xuICAgICAgICBjb25zdCBmb3JtICAgID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kKGZpZWxkTmFtZSwgZmlsZSwgZmlsZS5uYW1lKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZvcm1cbiAgICB9XG4gfSk7XG5cbm0yZDIubG9hZCgkID0+IHtcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBXUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8qKlxuICAgICAqIEBhdXRob3I6IEEuTGVwZVxuICAgICAqIEB2ZXJzaW9uOiAyMTA0MjUgOiBBZGRlZCBzZWN1cmUsIGhvc3QgYW5kIGNvbnZlcnRlZCB0byBtMmQyIGV4dGVuc2lvblxuICAgICAqICAgICAgICAgICAyMTA0MDYgOiBSZXRyeSB1bnRpbCByZWNvbm5lY3RcbiAgICAgKiBAc2luY2UgOiAyMDE4XG4gICAgICogV2ViU29ja2V0IHdyYXBwZXJcbiAgICAgKlxuICAgICAqIFRoaXMgZXh0ZW5zaW9uIHByb3ZpZGVzOlxuICAgICAqICQud3NcbiAgICAgKlxuICAgICAqIERvY3VtZW50YXRpb24gOlxuICAgICAqIGh0dHBzOi8vZ2l0bGFiLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi93cy5tZFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi93cy5tZFxuICAgICAqL1xuICAgIGNsYXNzIHdzIHtcbiAgICAgICAgcmVxdWVzdChtc2cpIHtcbiAgICAgICAgICAgIGlmIChtc2cpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndlYlNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndlYlNvY2tldC5vbmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ29ubmVjdCBhbmQgcmV0dXJuIHRoZSB3ZWJzb2NrZXQgb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICBnZXRTb2NrZXQob25NZXNzYWdlLCBvbk9wZW4sIG9uQ2xvc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHdlYlNvY2tldCA9IG5ldyBXZWJTb2NrZXQodGhpcy5wYXRoKTtcbiAgICAgICAgICAgIHdlYlNvY2tldC5vbm9wZW4gPSBvbk9wZW47XG4gICAgICAgICAgICB3ZWJTb2NrZXQub25jbG9zZSA9IG9uQ2xvc2U7XG4gICAgICAgICAgICB3ZWJTb2NrZXQub25tZXNzYWdlID0gKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25NZXNzYWdlKEpTT04ucGFyc2UocmVzLmRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWJTb2NrZXQub25lcnJvcihlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdlYlNvY2tldC5vbmVycm9yID0gKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NvY2tldCBlbmNvdW50ZXJlZCBlcnJvcjogJywgZXJyID8gZXJyLm1lc3NhZ2UgOiAnVW5rbm93bicsICdDbG9zaW5nIHNvY2tldCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdzayA9IHdlYlNvY2tldCB8fCB0aGlzO1xuICAgICAgICAgICAgICAgIGlmKHdzay5yZWFkeVN0YXRlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHdzay5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3ZWJTb2NrZXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29ubmVjdChvcHRpb25zLCBvbk1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdFJlcXVlc3QgPSBvcHRpb25zLnJlcXVlc3QgfHwgbnVsbDtcbiAgICAgICAgICAgIHRoaXMub25Db25uZWN0ID0gb3B0aW9ucy5jb25uZWN0ZWQgfHwgKCgpID0+IHt9KTtcbiAgICAgICAgICAgIHRoaXMub25EaXNjb25uZWN0ID0gb3B0aW9ucy5kaXNjb25uZWN0ZWQgfHwgKCgpID0+IHt9KTtcbiAgICAgICAgICAgIHRoaXMucmVjb25uZWN0ID0gb3B0aW9ucy5yZWNvbm5lY3QgIT09IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5ob3N0ID0gb3B0aW9ucy5ob3N0IHx8IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTtcbiAgICAgICAgICAgIHRoaXMuc2VjdXJlID0gb3B0aW9ucy5zZWN1cmUgPT09IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBvcnQgPSBvcHRpb25zLnBvcnQgfHwgKHRoaXMuc2VjdXJlID8gNDQzIDogODApO1xuICAgICAgICAgICAgdGhpcy5wYXRoID0gXCJ3c1wiICsgKHRoaXMuc2VjdXJlID8gXCJzXCIgOiBcIlwiKSArIFwiOi8vXCIgKyB0aGlzLmhvc3QgKyBcIjpcIiArIHRoaXMucG9ydCArIFwiL1wiICsgKG9wdGlvbnMucGF0aCB8fCBcIlwiKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgIC8vLS0tLS0tLS0gQ29ubmVjdCAtLS0tLS0tLS0tXG4gICAgICAgICAgICBjb25zdCBvbk9wZW4gPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3QodGhpcy5pbml0UmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNvbm5lY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9uQ2xvc2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBpZighdGhpcy5pbnRlcnZhbCAmJiB0aGlzLnJlY29ubmVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlY29ubmVjdGVkLi4uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWNvbm5lY3RpbmcuLi5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQgPSB0aGlzLmdldFNvY2tldChvbk1lc3NhZ2UsIG9uT3Blbiwgb25DbG9zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChpZ25vcmUpIHt9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0ID0gdGhpcy5nZXRTb2NrZXQob25NZXNzYWdlLCBvbk9wZW4sIG9uQ2xvc2UpO1xuICAgICAgICB9XG4gICAgICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgICAgICB0aGlzLnJlY29ubmVjdCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAkLndzID0gbmV3IHdzKCk7XG59KTtcbm0yZDIubG9hZCgkID0+IHtcbiAgICAvKipcbiAgICAgKiBAdmVyc2lvbiAyMDIwLTA1LTA5XG4gICAgICogQGF1dGhvciBBLkxlcGUgKGRldkBhbGVwZS5jb20pXG4gICAgICogWEhSIGltcGxlbWVudGF0aW9uXG4gICAgICpcbiAgICAgKiBUaGlzIGV4dGVuc2lvbiBwcm92aWRlczpcbiAgICAgKiAkLmdldFxuICAgICAqICQucG9zdFxuICAgICAqICQucHV0XG4gICAgICogJC5kZWxldGVcbiAgICAgKiAkLmNvbm5lY3RcbiAgICAgKiAkLm9wdGlvbnNcbiAgICAgKiAkLnRyYWNlXG4gICAgICogJC5wYXRjaFxuICAgICAqXG4gICAgICogRG9jdW1lbnRhdGlvbiA6XG4gICAgICogaHR0cHM6Ly9naXRsYWIuY29tL2ludGVsbGlzcmMvbTJkMi90cmVlL21hc3Rlci9kb2N1bWVudGF0aW9uL3hoci5tZFxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pbnRlbGxpc3JjL20yZDIvdHJlZS9tYXN0ZXIvZG9jdW1lbnRhdGlvbi94aHIubWRcbiAgICAgKi9cblxuICAgICAvKipcbiAgICAgKiBAcGFyYW0gbWV0aG9kOiBIVFRQIG1ldGhvZCAoR0VULCBQT1NULCBQVVQsIERFTEVURSlcbiAgICAgKiBAcGFyYW0gdXJsOiBzZXJ2aWNlIFVSTFxuICAgICAqIEBwYXJhbSBkYXRhOiBEYXRhIG9iamVjdCB0byBzZW5kIChpbiBjYXNlIG9mIFBPU1QgYW5kIFBVVClcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2s6IENhbGxiYWNrIG9uIFN1Y2Nlc3MgKGl0IHdpbGwgcmV0dXJuIGRhdGEpXG4gICAgICogQHBhcmFtIGVycm9yX2NhbGxiYWNrOiBDYWxsYmFjayBvbiBGYWlsdXJlXG4gICAgICogQHBhcmFtIGpzb24gOiBCb29sZWFuIChpZiBzZXQsIGl0IHdpbGwgc2V0IHJlcXVlc3QgY29udGVudC10eXBlIGFzIGpzb24gYW5kIGluIGNhc2Ugb2YgR0VULCBpdCB3aWxsIHNlbmQgaXQgYXMgYm9keSBpbnN0ZWFkIG9mIHF1ZXJ5KVxuICAgICAqL1xuICAgIGNvbnN0IFhIUiA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBkYXRhLCBjYWxsYmFjaywgZXJyb3JfY2FsbGJhY2ssIGpzb24pIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICBpZihqc29uID09PSB1bmRlZmluZWQpIHsganNvbiA9IGZhbHNlIH1cbiAgICAgICAgaWYoZXJyb3JfY2FsbGJhY2sgPT09IHVuZGVmaW5lZCkgeyBlcnJvcl9jYWxsYmFjayA9IGZ1bmN0aW9uKGUpIHsgY29uc29sZS5sb2coZSk7IH0gfVxuICAgICAgICBpZihkYXRhICYmIE9iamVjdC5lbnRyaWVzKGRhdGEpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZGF0YSA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYoZGF0YSkge1xuICAgICAgICAgICAgaWYoanNvbikge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKG1ldGhvZC50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJHRVRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCArPSAodXJsLmluZGV4T2YoXCI/XCIpICE9PSAtMSA/IFwiJlwiIDogXCI/XCIpICsgKE9iamVjdC5rZXlzKGRhdGEpLm1hcChrZXkgPT4ga2V5ICsgJz0nICsgZGF0YVtrZXldKS5qb2luKCcmJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IChPYmplY3Qua2V5cyhkYXRhKS5tYXAoa2V5ID0+IGtleSArICc9JyArIGRhdGFba2V5XSkuam9pbignJicpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVxdWVzdC5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgICAgaWYoanNvbikge1xuICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGVycm9yX2NhbGxiYWNrKHt0eXBlIDogXCJDb25uZWN0aW9uXCIsIHJlYXNvbjogXCJDb25uZWN0aW9uIFJlZnVzZWRcIn0pO1xuICAgICAgICB9XG4gICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IHt9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdC5yZXNwb25zZVRleHQgPyBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KSA6IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHt0eXBlOiBcIlVua25vd25cIiwgcmVhc29uOiBcIlVua25vd24gRXJyb3JcIn1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgICAgICAgICBkYXRhLmVycm9yID0geyB0eXBlIDogXCJQYXJzZSBFcnJvclwiLCByZWFzb24gOiBlcnIubWVzc2FnZSB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPj0gMjAwICYmIHJlcXVlc3Quc3RhdHVzIDwgNDAwKSB7XG4gICAgICAgICAgICAgICAgaWYoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmKGVycm9yX2NhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGRhdGEuZXJyb3IgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5lcnJvciA9IHsgdHlwZSA6IFwiRXhjZXB0aW9uXCIsIHJlYXNvbiA6IGRhdGEuZXJyb3IgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVycm9yX2NhbGxiYWNrKGRhdGEuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5zZW5kKGRhdGEpO1xuICAgICAgICByZXR1cm4gcmVxdWVzdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNob3J0IG1ldGhvZC4gSXQgYWxzbyB2YWxpZGF0ZXMgYXJndW1lbnRzIGFuZCBhbGxvdyBvbWl0dGluZyBzb21lLCBlZy46XG4gICAgICogeGhyLmdldCh1cmwsIGRhdGEsIGNhbGxiYWNrLCBlcnJvcl9jYWxsYmFjaywganNvbik7XG4gICAgICogeGhyLmdldCh1cmwsIGNhbGxiYWNrLCBlcnJvcl9jYWxsYmFjaywganNvbik7XG4gICAgICogeGhyLmdldCh1cmwsIGRhdGEsIGNhbGxiYWNrLCBqc29uKTtcbiAgICAgKiB4aHIuZ2V0KHVybCwgZGF0YSwganNvbik7XG4gICAgICogeGhyLmdldCh1cmwsIGNhbGxiYWNrLCBqc29uKTtcbiAgICAgKi9cbiAgICBjb25zdCB4aHIgPSB7fTtcbiAgICBbXCJnZXRcIixcInBvc3RcIixcInB1dFwiLFwiZGVsZXRlXCIsXCJjb25uZWN0XCIsXCJvcHRpb25zXCIsXCJ0cmFjZVwiLFwicGF0Y2hcIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgeGhyW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxldCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBlcnJvcl9jYWxsYmFjaywganNvbjtcbiAgICAgICAgICAgIC8vIG5vaW5zcGVjdGlvbiBGYWxsVGhyb3VnaEluU3dpdGNoU3RhdGVtZW50SlNcbiAgICAgICAgICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJndW1lbnRzWzRdID09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uID0gYXJndW1lbnRzWzRdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXNzZWQgSlNPTiBhcmd1bWVudDogXCIgKyBhcmd1bWVudHNbNF0gKyBcIiBpcyBub3QgYm9vbGVhbi5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmd1bWVudHNbM10gPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jYWxsYmFjayA9IGFyZ3VtZW50c1szXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKGFyZ3VtZW50cy5sZW5ndGggPT09IDQgJiYgdHlwZW9mIGFyZ3VtZW50c1szXSA9PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBlcnJvciBjYWxsYmFjayBvcHRpb25hbDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSBhcmd1bWVudHNbM107XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhc3NlZCBhcmd1bWVudCA0OiBcIiArIGFyZ3VtZW50c1szXSArIFwiIGlzIG1pc3Rha2VuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJndW1lbnRzWzJdID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIGFyZ3VtZW50c1sxXSA9PSBcImZ1bmN0aW9uXCIgJiYgYXJndW1lbnRzLmxlbmd0aCA8IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9jYWxsYmFjayA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoID09PSAzICYmIHR5cGVvZiBhcmd1bWVudHNbMl0gPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgY2FsbGJhY2sgYW5kIGVycm9yIGNhbGxiYWNrIG9wdGlvbmFsOlxuICAgICAgICAgICAgICAgICAgICAgICAganNvbiA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGFzc2VkIGFyZ3VtZW50IDM6IFwiICsgYXJndW1lbnRzWzJdICsgXCIgaXMgbWlzdGFrZW5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBhcmd1bWVudHNbMV0gPT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgYXJndW1lbnRzWzFdID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0eXBlb2YgYXJndW1lbnRzWzFdID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBkYXRhIG9wdGlvbmFsOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBhc3NlZCBhcmd1bWVudCAyOiBcIiArIGFyZ3VtZW50c1sxXSArIFwiIGlzIG1pc3Rha2VuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgYXJndW1lbnRzWzBdID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gYXJndW1lbnRzWzBdLmpvaW4oXCIvXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJQYXNzZWQgVVJMOiBcIithcmd1bWVudHNbMF0rXCIgd2FzIG5vdCBhIHN0cmluZy5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbmNvcnJlY3QgbnVtYmVyIG9mIGFyZ3VtZW50cyBwYXNzZWQgdG8geGhyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZGF0YSA9PT0gdW5kZWZpbmVkKSB7IGRhdGEgPSB7fSB9XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVUkw6IFwiICsgdXJsKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiREFUQTogXCIgKyBkYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ0FMTEJBQ0s6IFwiICsgY2FsbGJhY2spO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiBDQUxMQkFDSzogXCIgKyBlcnJvcl9jYWxsYmFjayk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkpTT046IFwiICsganNvbik7XG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmV0dXJuIFhIUihtZXRob2QudG9VcHBlckNhc2UoKSwgdXJsLCBkYXRhLCBjYWxsYmFjaywgZXJyb3JfY2FsbGJhY2ssIGpzb24pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbigkLCB4aHIpO1xufSk7XG5yZXR1cm4gbTJkMjtcbn0pKTtcbiIsIi8qKlxuICBUaGlzIHBsYXllciB1c2VzIE5ESlNPTiBmaWxlcyB0byBwbGF5IGluIHNlcXVlbmNlIGFzIGEgdmlkZW9cbiAgQWRkaXRpb25hbGx5LCBpdCBtYXkgY29udGFpbiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZnJhbWVcbiAgSW5zcGlyZWQgaW4gaHR0cHM6Ly9naXRodWIuY29tL2xlcGUvZnJhbWUtcGxheWVyLyAoYnkgVmFnbmVyIFNhbnRhbmEpXG5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXBlL25kanNvbi1wbGF5ZXJcbiAqIEBhdXRob3IgQS5MZXBlXG4gKiBAU2luY2UgMjAyMC0wNC0xOVxuICovXG5jbGFzcyBOZEpzb25QbGF5ZXIge1xuICAgIC8vIE9wdGlvbnNcbiAgICBmcHM7ICAgICAgICAvL2RlZmF1bHQ6IDI0RlBTXG4gICAgbG9vcDsgICAgICAgLy9kZWZhdWx0OiBmYWxzZVxuICAgIHNob3dmaXJzdDsgIC8vZGVmYXVsdDogdHJ1ZSA6IHNob3cgZmlyc3QgaW1hZ2VcbiAgICBhdXRvcGxheTsgICAvL2RlZmF1bHQ6IGZhbHNlXG4gICAgbGl2ZTsgICAgICAgLy9kZWZhdWx0OiBmYWxzZSAvLyBTb3VyY2UgaXMgYSBsaXZlIGZlZWRcbiAgICBwYXRoOyAgICAgICAvL2RlZmF1bHQ6IFwiXCIgOiBTcGVjaWZ5IGNvbW1vbiBwYXRoIGZvciBpbWFnZXMgaW4gY2FzZSBVUkwgaXMgdXNlZC5cbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgRm9yIGV4YW1wbGU6IHBhdGggPSBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9pbWFnZXMvXCJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgdGhlbiwgdXNlIFwiaW1nMTIzMzQuanBnXCIgYXMgZnJhbWUgaW4gTkRKU09OICh0byByZWR1Y2Ugc2l6ZSBvZiBmaWxlKVxuXG4gICAgLy8gU3RhdHVzXG4gICAgcGxheWluZyA9IGZhbHNlOyAgIC8vIFN0YXR1c1xuICAgIGxvYWRlZCAgPSBmYWxzZTsgICAvLyBJZiBhIGZyYW1lIGhhcyBiZWVuIGxvYWRlZCBvciBub3RcbiAgICBiYWNrd2FyZHMgPSBmYWxzZTsgLy8gSWYgcGxheWluZyBiYWNrd2FyZHNcbiAgICBzdGFydGVkID0gZmFsc2U7IC8vIElmIHRoZSBwbGF5ZXIgYWxyZWFkeSBzdGFydCBwbGF5aW5nIGF0IGxlYXN0IDEgZnJhbWVcblxuICAgIC8vIEV2ZW50c1xuICAgIG9uU3RhcnQ7ICAgIC8vIENhbGxiYWNrIHdoZW4gd2UgcHJvY2Vzc2VkIGZpcnN0IGltYWdlXG4gICAgb25Mb2FkOyAgICAgLy8gQ2FsbGJhY2sgd2hlbiBkYXRhIGlzIGNvbXBsZXRlZCBsb2FkaW5nXG4gICAgb25SZW5kZXI7ICAgLy8gQ2FsbGJhY2sgdG8gcmV0dXJuIG1ldGFkYXRhIHdoZW4gYSBmcmFtZSBpcyByZW5kZXJlZFxuICAgIG9uUGxheTsgICAgIC8vIENhbGxiYWNrIHdoZW4gd2Ugc3RhcnQgcGxheWluZ1xuICAgIG9uU3RvcDsgICAgIC8vIENhbGxiYWNrIHdoZW4gd2Ugc3RvcCBwbGF5aW5nXG4gICAgb25GaW5pc2g7ICAgLy8gQ2FsbGJhY2sgd2hlbiB2aWRlbyByZWFjaGVzIHRoZSBsYXN0IGZyYW1lXG4gICAgb25FcnJvcjsgICAgLy8gQ2FsbGJhY2sgd2hlbiB0aGVyZSBpcyBhbiBlcnJvciB3aXRoIHRoZSBzb3VyY2VcblxuICAgIC8vIEludGVybmFsIHVzZSBtYWlubHlcbiAgICB3cmFwcGVyID0gbnVsbDsgICAgIC8vIERPTSBlbGVtZW50IHdoaWNoIGNvbnRhaW5zIHRoZSA8Y2FudmFzPiBub2RlXG4gICAgY2FudmFzID0gbnVsbDsgICAgIC8vIDxjYW52YXM+IERPTSBvYmplY3RcbiAgICBjdHggPSBudWxsOyAgICAgICAgLy8gY2FudmFzLmN0eCBvYmplY3RcbiAgICB0aW1lciA9IG51bGw7ICAgICAgLy8gVGltZXJTcmMgdXNlZCB0byBtYW5hZ2UgRlBTXG4gICAgc3JjID0gXCJcIjsgICAgICAgICAgLy8gVmlkZW8gc291cmNlIFVSSSAoTkRKU09OKVxuICAgIGZyYW1lID0gMDsgICAgICAgICAvLyBDdXJyZW50IGZyYW1lIGJlaW5nIHBsYXllZFxuICAgIG11bHRpcGxpZXIgPSAxOyAgICAvLyBNdWx0aXBsaWVyIHRvIGNvbnRyb2wgc3BlZWRcblxuICAgIC8vIFByaXZhdGVcbiAgICBfbnVtRnJhbWVzID0gMDsgICAgIC8vIE51bWJlciBvZiB0b3RhbCBmcmFtZXMgKGluIGhlYWRlcilcbiAgICBfdG90VGltZSAgID0gMDsgICAgIC8vIE51bWJlciBvZiB0b3RhbCB0aW1lIChpbiBoZWFkZXIpXG4gICAgX2ZyYW1lcyA9IFtdOyAgICAgICAvLyBWaWRlbyBjb250ZW50IGluY2x1ZGluZyBtZXRhZGF0YSAoYXJyYXkpXG4gICAgX2ZyYW1lQmFzZSA9IFwiXCIgICAgIC8vIEJhc2UgZm9yIGFsbCBmcmFtZXMgJ2ZiJ1xuICAgIF90aHVtYkJhc2UgPSBcIlwiICAgICAvLyBCYXNlIGZvciBhbGwgdGh1bWJuYWlscyAndGhiJ1xuICAgIF9zdGFydFRpbWVTdGFtcCA9IDA7Ly8gU3RhcnRpbmcgdGltZSBzdGFtcFxuXG4gICAgLyoqXG4gICAgICogRXhhbXBsZXM6XG4gICAgICogbmV3IE5kSnNvblBsYXllcihcIi92aWRlb3MvdGVzdC5uZGpzb25cIixcImNhbnZhc1wiLCB7IGxvb3A6IHRydWUgfSlcbiAgICAgKiBuZXcgTmRKc29uUGxheWVyKFwiL3ZpZGVvcy90ZXN0Lm5kanNvblwiLCB7IGxvb3A6IHRydWUgfSlcbiAgICAgKiBuZXcgTmRKc29uUGxheWVyKFwiL3ZpZGVvcy90ZXN0Lm5kanNvblwiKVxuICAgICAqXG4gICAgICogQHBhcmFtIHNyYyAgICAgLm5kanNvbiBmaWxlIChzZWUgZm9ybWF0KVxuICAgICAqIEBwYXJhbSBlbGVtZW50IDogTm9kZSwgSFRNTCBlbGVtZW50IChtdXN0IGJlIGEgY2FudmFzKS4gSWYgbm90IHNldCwgaXQgd2lsbCB1c2UgJzxjYW52YXM+J1xuICAgICAqIEBwYXJhbSBvcHRpb25zIDogT2JqZWN0IHJlcGxhY2luZyBkZWZhdWx0IHZhbHVlc1xuICAgICAqIEBwYXJhbSBldmVudHMgIDogT2JqZWN0IGNvbnRhaW5pbmcgZXZlbnRzOiAob25zdGFydCwgb25sb2FkLCBvbnJlbmRlciwgb25wbGF5LCBvbnN0b3AsIG9uZmluaXNoLCBvbmVycm9yKVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNyYywgZWxlbWVudCwgb3B0aW9ucywgZXZlbnRzKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgX3RoaXMuc3JjID0gc3JjO1xuICAgICAgICBpZiAoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm9FdmVudCA9ICgoKSA9PiB7fSk7XG4gICAgICAgIGV2ZW50cyA9IE9iamVjdC5hc3NpZ24oe30sIGV2ZW50cyk7XG4gICAgICAgIC8vIEFkZCBldmVudHM6XG4gICAgICAgIF90aGlzLm9uU3RhcnQgICAgPSBldmVudHMub25zdGFydCAgfHwgbm9FdmVudDtcbiAgICAgICAgX3RoaXMub25Mb2FkICAgICA9IGV2ZW50cy5vbmxvYWQgICB8fCBub0V2ZW50O1xuICAgICAgICBfdGhpcy5vblJlbmRlciAgID0gZXZlbnRzLm9ucmVuZGVyIHx8IG5vRXZlbnQ7XG4gICAgICAgIF90aGlzLm9uUGxheSAgICAgPSBldmVudHMub25wbGF5ICAgfHwgbm9FdmVudDtcbiAgICAgICAgX3RoaXMub25TdG9wICAgICA9IGV2ZW50cy5vbnN0b3AgICB8fCBub0V2ZW50O1xuICAgICAgICBfdGhpcy5vbkZpbmlzaCAgID0gZXZlbnRzLm9uZmluaXNoIHx8IG5vRXZlbnQ7XG4gICAgICAgIF90aGlzLm9uRXJyb3IgICAgPSBldmVudHMub25lcnJvciAgfHwgKGUgPT4geyBjb25zb2xlLmxvZyhlKTsgfSlcbiAgICAgICAgLy8gRml4IGFuZCBjaGVjayBhcmd1bWVudHNcbiAgICAgICAgbGV0IHBsYXllciA9IG51bGw7XG4gICAgICAgIGlmKGVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgICBwbGF5ZXIgPSBlbGVtZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50ID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gZWxlbWVudDtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gXCJjYW52YXNcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVsZW1lbnQgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHRocm93IFwiSW5jb3JyZWN0IHBhcmFtZXRlciBwYXNzZWQgdG8gY29uc3RydWN0b3Igb2YgTmRKc29uUGxheWVyXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBMb29rIGZvciBjYW52YXNcbiAgICAgICAgICAgIHBsYXllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCB8fCBcImNhbnZhc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGxheWVyKSB7XG4gICAgICAgICAgICBpZiAocGxheWVyLnRhZ05hbWUgPT09IFwiQ0FOVkFTXCIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5jYW52YXMgPSBwbGF5ZXI7XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIHdyYXBwZXIgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHBsYXllci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLCBwbGF5ZXIpO1xuICAgICAgICAgICAgICAgIHdyYXBwZXIucHJlcGVuZChwbGF5ZXIpO1xuICAgICAgICAgICAgICAgIHBsYXllciA9IHdyYXBwZXI7XG4gICAgICAgICAgICB9IGVsc2UgaWYocGxheWVyLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgICAgIF90aGlzLmNhbnZhcyA9IHBsYXllci5xdWVyeVNlbGVjdG9yKFwiY2FudmFzXCIpO1xuICAgICAgICAgICAgICAgIGlmKCFfdGhpcy5jYW52YXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJObyBjYW52YXMgZm91bmQgaW4gZWxlbWVudFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkNBTlZBU1wiKTtcbiAgICAgICAgICAgICAgICBwbGF5ZXIucHJlcGVuZChfdGhpcy5jYW52YXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgXCJDYW52YXMgZWxlbWVudCB3YXMgbm90IGZvdW5kIGluIERPTTogXCIgKyBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLndyYXBwZXIgPSBwbGF5ZXI7XG4gICAgICAgIF90aGlzLmNhbnZhcy5oZWlnaHQgPSBfdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0O1xuICAgICAgICBfdGhpcy5jYW52YXMud2lkdGggID0gX3RoaXMuY2FudmFzLmNsaWVudFdpZHRoO1xuICAgICAgICAvLyBTZXQgY2xhc3NuYW1lIGZvciBzdHlsZVxuICAgICAgICBwbGF5ZXIuY2xhc3NMaXN0LmFkZChcIm5kanBcIik7XG5cbiAgICAgICAgLy8gU2V0IGNvbnRleHRcbiAgICAgICAgX3RoaXMuY3R4ID0gX3RoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICAvLyBPcHRpb25zOlxuICAgICAgICBfdGhpcy5mcHMgICAgICAgID0gb3B0aW9ucy5mcHMgfHwgMjQ7XG4gICAgICAgIF90aGlzLmxvb3AgICAgICAgPSBvcHRpb25zLmxvb3AgfHwgZmFsc2U7XG4gICAgICAgIF90aGlzLmxpdmUgICAgICAgPSBvcHRpb25zLmxpdmUgfHwgZmFsc2U7XG4gICAgICAgIF90aGlzLmF1dG9wbGF5ICAgPSBvcHRpb25zLmF1dG9wbGF5IHx8IF90aGlzLmxpdmUgfHwgZmFsc2U7XG4gICAgICAgIF90aGlzLnNob3dmaXJzdCAgPSBvcHRpb25zLnNob3dmaXJzdCAhPT0gZmFsc2U7XG4gICAgICAgIF90aGlzLnBhdGggICAgICAgPSBvcHRpb25zLnBhdGggfHwgXCJcIjtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHRpbWVyOlxuICAgICAgICBfdGhpcy50aW1lciA9IG5ldyBUaW1lclNyYygxMDAwIC8gX3RoaXMuZnBzKTtcblxuICAgICAgICAvLyBMb2FkIHZpZGVvOlxuICAgICAgICBpZihfdGhpcy5saXZlKSB7XG4gICAgICAgICAgICBuZXcgVGltZXJTcmMoMTAwMCAvIF90aGlzLmZwcywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZldGNoKF90aGlzLnNyYykudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihmcmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbG9hZChmcmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KS5wbGF5KCk7XG4gICAgICAgIH0gZWxzZSBpZihfdGhpcy5zcmMpIHtcbiAgICAgICAgICAgIF90aGlzLmxvYWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIHdpdGhvdXQgc291cmNlLi4uXCIpXG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgZnJhbWVzIGluZm9ybWF0aW9uXG4gICAgICovXG4gICAgX3Jlc2V0KCkge1xuICAgICAgICB0aGlzLl9mcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fdG90VGltZSA9IDA7ICAgICAgICAvLyBOdW1iZXIgb2YgdG90YWwgdGltZSAoaW4gaGVhZGVyKVxuICAgICAgICB0aGlzLl9udW1GcmFtZXMgPSAwOyAgICAgIC8vIE51bWJlciBvZiB0b3RhbCBmcmFtZXMgKGluIGhlYWRlcilcbiAgICAgICAgdGhpcy5fc3RhcnRUaW1lU3RhbXAgPSAwOyAvLyBTdGFydGluZyB0aW1lIHN0YW1wXG4gICAgICAgIHRoaXMubG9hZGVkID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWQgYSB2aWRlbyBmaWxlIG9yIGNoYW5nZSBjdXJyZW50IHZpZGVvIGZpbGUuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIHdoZW4gZWFjaCBmcmFtZSBpcyByZWFkeVxuICAgICAqIEBwYXJhbSBuZXdTcmMgb3B0aW9uYWwgKGlmIG5vdCBzZXQgd2lsbCByZWFkIFwic3JjXCIgcGFzc2VkIGluIGNvbnN0cnVjdG9yKVxuICAgICAqL1xuICAgIGxvYWQoY2FsbGJhY2ssIG5ld1NyYykge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmKG5ld1NyYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNyYyA9IG5ld1NyYztcbiAgICAgICAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgICBsZXQgYnVmZmVyID0gJyc7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIHJldHVybiBmZXRjaChfdGhpcy5zcmMpXG4gICAgICAgICAgICAudGhlbihyZXNwID0+IHJlc3AuYm9keS5nZXRSZWFkZXIoKSlcbiAgICAgICAgICAgIC50aGVuKHJlYWRlciA9PiByZWFkZXIucmVhZCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gcHJvY2VzcyAoeyB2YWx1ZSwgZG9uZSB9KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0ID0gSlNPTi5wYXJzZShidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0ZyYW1lKGxhc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhsYXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBkb25lIGxvYWRpbmcgYWxsIGZyYW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub25Mb2FkKF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciArIGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICAgICApLnNwbGl0KC9bXFxyXFxuXSg/PS4pLyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGxpbmVzLnBvcCgpOyAvLyBCdWZmZXIgaXMgdXNlZCB0byBrZWVwIHRoZSBcInVuZmluaXNoZWRcIiBsaW5lcyB0b2dldGhlclxuICAgICAgICAgICAgICAgICAgICBsaW5lcy5tYXAoSlNPTi5wYXJzZSkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByb2Nlc3NGcmFtZShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWFkZXIucmVhZCgpLnRoZW4ocHJvY2Vzcyk7XG4gICAgICAgICAgICB9KSkuY2F0Y2gocmVhc29uID0+IHRoaXMub25FcnJvcihyZWFzb24pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwbGFjZSBjdXJyZW50IGZyYW1lcyB3aXRoIG5ldyBvbmVzXG4gICAgICogQHBhcmFtIGZyYW1lcyA6IGNhbiBiZSBhbiBhcnJheSBvZiBvYmplY3RzIChqc29uKSwgYW4gb2JqZWN0IChzaW5nbGUgZnJhbWUpIG9yIGEgc3RyaW5nIChuZGpzb24pXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIDogY2FsbGJhY2sgd2hlbiBlYWNoIGZyYW1lIGlzIHJlYWR5XG4gICAgICovXG4gICAgcmVsb2FkKGZyYW1lcywgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjb25zdCBmcyA9IFtdXG4gICAgICAgIF90aGlzLl9yZXNldCgpO1xuXG4gICAgICAgIHN3aXRjaCh0cnVlKSB7XG4gICAgICAgICAgICBjYXNlICh0eXBlb2YgZnJhbWVzID09PSAnc3RyaW5nJyk6XG4gICAgICAgICAgICAgICAgZnMgPSBmcmFtZXMuc3BsaXQoL1tcXHJcXG5dKD89LikvLm1hcChKU09OLnBhcnNlKSk7XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQXJyYXkuaXNBcnJheShmcmFtZXMpOlxuICAgICAgICAgICAgICAgIGZzID0gZnJhbWVzXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgKGZyYW1lcy5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIk9iamVjdFwiKTpcbiAgICAgICAgICAgICAgICBmcy5wdXNoKGZyYW1lcylcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVuYWJsZSB0byByZWxvYWQgZnJhbWVzLiBcIilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGZzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBfdGhpcy5wcm9jZXNzRnJhbWUoaXRlbSk7XG4gICAgICAgICAgICBpZihjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGZyYW1lIGF0IHRoZSBlbmRcbiAgICAgKi9cbiAgICBhcHBlbmQoZnJhbWUpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBfdGhpcy5fZnJhbWVzLnB1c2goZnJhbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgZnJhbWUgYXQgdGhlIGJlZ2lubmluZ1xuICAgICAqL1xuICAgIHByZXBlbmQoZnJhbWUpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBfdGhpcy5fZnJhbWVzLnVuc2hpZnQoZnJhbWUpO1xuICAgICAgICBfdGhpcy5mcmFtZSArKzsgLy9UT0RPOiB0ZXN0XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3MgYSBmcmFtZVxuICAgICAqL1xuICAgIHByb2Nlc3NGcmFtZShpdGVtKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgaWYoaXRlbS53ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmNhbnZhcy53aWR0aCAgPSBpdGVtLnc7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS5oICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmNhbnZhcy5oZWlnaHQgPSBpdGVtLmg7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS5mYiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5fZnJhbWVCYXNlID0gaXRlbS5mYjtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLnRoYiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5fdGh1bWJCYXNlID0gaXRlbS50aGI7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS50ZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5fbnVtRnJhbWVzID0gaXRlbS50ZjtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLnR0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLl90b3RUaW1lID0gaXRlbS50dDtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmKCFfdGhpcy5fc3RhcnRUaW1lU3RhbXApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fc3RhcnRUaW1lU3RhbXAgPSBpdGVtLnRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGl0ZW0uZnBzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmZwcz0gaXRlbS5mcHM7XG4gICAgICAgICAgICBfdGhpcy50aW1lciA9IG5ldyBUaW1lclNyYygxMDAwIC8gX3RoaXMuZnBzKTtcbiAgICAgICAgfVxuICAgICAgICBpZihpdGVtLmYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuX2ZyYW1lcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgLy8gQXV0b1BsYXk6XG4gICAgICAgICAgICBpZiAoIV90aGlzLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmF1dG9wbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnNob3dmaXJzdCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdGVwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMub25SZW5kZXIoaXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoIV90aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIF90aGlzLm9uU3RhcnQoX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHZpZGVvXG4gICAgICogQHBhcmFtIG9uY2Ugc2luZ2xlIHN0ZXBcbiAgICAgKi9cbiAgICBfcmVuZGVyKG9uY2UpIHtcbiAgICAgICAgaWYgKHRoaXMudGltZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgXCJUaW1lclNyYyB3YXMgbm90IGluaXRpYWxpemVkXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5fZnJhbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgXCJWaWRlbyBpcyBlbXB0eSBvciBubyBmcmFtZXMgd2VyZSBmb3VuZFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5mcmFtZSA+PSB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMubG9vcCA/IDAgOiB0aGlzLl9mcmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmZyYW1lIDwgMCkge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMubG9vcCA/IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxOiAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Rpc3BsYXlJbWcob25jZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzcGxheSBuZXh0IGltYWdlXG4gICAgICogQHBhcmFtIG9uY2Ugc2luZ2xlIHN0ZXBcbiAgICAgKi9cbiAgICBfZGlzcGxheUltZyhvbmNlKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgY29uc3QgaXRlbSA9IF90aGlzLl9mcmFtZXNbX3RoaXMuZnJhbWVdO1xuICAgICAgICBjb25zdCBuZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy5vblJlbmRlcihpdGVtKTtcbiAgICAgICAgICAgIF90aGlzLnRpbWVyLmNhbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9pbmNyZW1lbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9uY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9EbyBub3QgZXhlY3V0ZSBhbnl0aGluZyB1bnRpbCBpdHMgbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRpbWVyLm5vY2FsbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5fZGlzcGxheUltZygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaXRlbS5mICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lID0gX3RoaXMuX2ZyYW1lQmFzZSArIGl0ZW0uZjtcbiAgICAgICAgICAgIF90aGlzLl9pbWFnZShmcmFtZSwgbmV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5vblJlbmRlcihpdGVtKTtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCBmcmFtZVxuICAgICAqL1xuICAgIF9pbmNyZW1lbnQoKSB7XG4gICAgICAgIHRoaXMuZnJhbWUgKz0gKHRoaXMubXVsdGlwbGllciAqICh0aGlzLmJhY2t3YXJkcyA/IC0xIDogMSkpO1xuICAgICAgICBpZih0aGlzLmZyYW1lIDwgMCkge1xuICAgICAgICAgICAgaWYodGhpcy5sb29wKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbmlzaCh0aGlzKTsgLy9CYWNrd2FyZHMgcGxheWluZ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuZnJhbWUgPiB0aGlzLnRvdGFsRnJhbWVzKCkgLSAxKSB7XG4gICAgICAgICAgICBpZih0aGlzLmxvb3ApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRmluaXNoKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgYW4gaW1hZ2Ugb2JqZWN0XG4gICAgICogQHBhcmFtIGltZ1xuICAgICAqIEBwYXJhbSBjYWxsYmFjayBzZW5kcyBcInRydWVcIiBvbiBzdWNjZXNzXG4gICAgICogQHJldHVybiB0aGlzXG4gICAgICovXG4gICAgX2RyYXcgPSBmdW5jdGlvbihpbWcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgLy8vIHNldCBzaXplIHByb3BvcnRpb25hbCB0byBpbWFnZVxuICAgICAgICBpZihpbWcud2lkdGggPT09IDAgJiYgaW1nLmhlaWdodCA9PT0gMCkge1xuICAgICAgICAgICAgaW1nLm9uZXJyb3IoKTtcbiAgICAgICAgICAgIGlmKGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIF90aGlzLmNhbnZhcy53aWR0aCwgX3RoaXMuY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICAvL190aGlzLmN0eC5zYXZlKCk7XG4gICAgICAgICAgICBfdGhpcy5jdHguZHJhd0ltYWdlKGltZywgMCwgMCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0LCAwLCAwLCBfdGhpcy5jYW52YXMud2lkdGgsIF90aGlzLmNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgLy9fdGhpcy5jdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgaWYoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkIGFuIGltYWdlIGludG8gY2FudmFzLlxuICAgICAqIEBwYXJhbSBpbWFnZSBwYXRoIG9yIHVybCBvZiBpbWFnZVxuICAgICAqIEBwYXJhbSBjYWxsYmFjayByZXR1cm5zIGltZyBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHRoaXNcbiAgICAgKi9cbiAgICBfaW1hZ2UgPSBmdW5jdGlvbihpbWFnZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJyc7XG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgX3RoaXMuX2RyYXcoaW1nLGZ1bmN0aW9uKGRyYXduKXtcbiAgICAgICAgICAgICAgICBpZihkcmF3bikge1xuICAgICAgICAgICAgICAgICAgICBpZihjYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhpbWcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBlcnIgPSBfdGhpcy5vbkVycm9yKCk7XG4gICAgICAgICAgICBpZihlcnIpIHtcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gaW1hZ2VbMF0gPT09IFwiL1wiIHx8IGltYWdlLm1hdGNoKC9eaHR0cHM/Oi8pIHx8IGltYWdlLm1hdGNoKC9eZGF0YTppbWFnZS8pID8gaW1hZ2UgOiBfdGhpcy5wYXRoICsgaW1hZ2U7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBmcmFtZSBiYXNlXG4gICAgICovXG4gICAgZnJhbWVCYXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnJhbWVCYXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBvc2UgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgZnJhbWVcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgY3VycmVudEZyYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gbnVtYmVyIG9mIGZyYW1lc1xuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0b3RhbEZyYW1lcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX251bUZyYW1lcyB8fCB0aGlzLl9mcmFtZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0b3RhbCB0aW1lIG9mIHZpZGVvXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRvdGFsVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvdFRpbWUgfHwgdGhpcy5jdXJyZW50RnJhbWUoKSAvIHRoaXMuZnBzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZyYW1lIGluIHBvc2l0aW9uXG4gICAgICogQHBhcmFtIGluZGV4IDogcG9zaXRpb25cbiAgICAgKi9cbiAgICBmcmFtZUF0KGluZGV4KSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgbGV0IGZyYW1lID0gKGluZGV4IDwgdGhpcy50b3RhbEZyYW1lcygpKSA/IF90aGlzLl9mcmFtZXNbaW5kZXhdIDogbnVsbDtcbiAgICAgICAgaWYoZnJhbWUpIHtcbiAgICAgICAgICAgIGZyYW1lLmZiID0gX3RoaXMuX2ZyYW1lQmFzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJhbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGluZGV4IG51bWJlciBhdCBwZXJjZW50YWdlIG9mIHZpZGVvXG4gICAgICogQHBhcmFtIHBlcmNlbnRhZ2VcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIGluZGV4QXQocGVyY2VudGFnZSkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB+figocGVyY2VudGFnZSAqIF90aGlzLnRvdGFsRnJhbWVzKCkpIC8gMTAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gcGxheWVyIE5vZGVcbiAgICAgKiBAcmV0dXJucyBET00gbm9kZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcGxheWVyTm9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5IHZpZGVvIGluIGN1cnJlbnQgZGlyZWN0aW9uXG4gICAgICogQHBhcmFtIHN0YXJ0RnJhbWVcbiAgICAgKi9cbiAgICBwbGF5KHN0YXJ0RnJhbWUpIHtcbiAgICAgICAgaWYgKHN0YXJ0RnJhbWUgPCAwKSB7XG4gICAgICAgICAgICBzdGFydEZyYW1lID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChzdGFydEZyYW1lID4gdGhpcy5fZnJhbWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3RhcnRGcmFtZSA9IHRoaXMuX2ZyYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0RnJhbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5mcmFtZSA9IHN0YXJ0RnJhbWUgKiAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGxheWluZyA9IHRydWU7XG4gICAgICAgIHRoaXMudGltZXIucGxheSgpO1xuICAgICAgICB0aGlzLl9yZW5kZXIoZmFsc2UpO1xuICAgICAgICB0aGlzLm9uUGxheSh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5IHZpZGVvIGluIGZvcndhcmQgZGlyZWN0aW9uXG4gICAgICogKHVzZWQgbWFpbmx5IHRvIGNoYW5nZSBkaXJlY3Rpb24pXG4gICAgICogQHBhcmFtIHN0YXJ0RnJhbWVcbiAgICAgKi9cbiAgICBwbGF5Rm9yd2FyZChzdGFydEZyYW1lKSB7XG4gICAgICAgIHRoaXMuYmFja3dhcmRzID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGxheShzdGFydEZyYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5IHZpZGVvIGluIGJhY2t3YXJkcyBkaXJlY3Rpb25cbiAgICAgKiBAcGFyYW0gc3RhcnRGcmFtZVxuICAgICAqL1xuICAgIHBsYXlCYWNrd2FyZHMoc3RhcnRGcmFtZSkge1xuICAgICAgICB0aGlzLmJhY2t3YXJkcyA9IHRydWU7XG4gICAgICAgIHRoaXMucGxheShzdGFydEZyYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSB0aGUgdmlkZW9cbiAgICAgKi9cbiAgICBwYXVzZSgpIHtcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGltZXIucGF1c2UoKTtcbiAgICAgICAgdGhpcy5vblN0b3AodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcCB0aGUgdmlkZW8gKGFuZCBnbyBiYWNrIHRvIHRoZSBiZWdpbm5pbmcpXG4gICAgICovXG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZnJhbWUgPSAwO1xuICAgICAgICB0aGlzLnRpbWVyLnBhdXNlKCk7XG4gICAgICAgIHRoaXMuX2Rpc3BsYXlJbWcodHJ1ZSk7XG4gICAgICAgIHRoaXMub25TdG9wKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmUgdGhlIHZpZGVvIG9uZSBmcmFtZSBpbiB0aGUgY3VycmVudCBkaXJlY3Rpb25cbiAgICAgKi9cbiAgICBzdGVwKCkge1xuICAgICAgICB0aGlzLm9uUGxheSh0aGlzKTtcbiAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGltZXIuc3RlcCgpO1xuICAgICAgICB0aGlzLl9yZW5kZXIodHJ1ZSk7XG4gICAgICAgIHRoaXMub25TdG9wKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEp1bXAgdG8gZnJhbWVcbiAgICAgKi9cbiAgICBqdW1wVG8oc3RhcnRGcmFtZSkge1xuICAgICAgICBpZiAoc3RhcnRGcmFtZSA8IDApIHtcbiAgICAgICAgICAgIHN0YXJ0RnJhbWUgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0RnJhbWUgPiB0aGlzLl9mcmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGFydEZyYW1lID0gdGhpcy5fZnJhbWVzLmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhcnRGcmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lID0gc3RhcnRGcmFtZSAqIDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVuZGVyKHRydWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vdmUgb25lIGZyYW1lIGZvcndhcmRzIChhbmQgY2hhbmdlIGRpcmVjdGlvbilcbiAgICAgKi9cbiAgICBzdGVwRm9yd2FyZHMoKSB7XG4gICAgICAgIHRoaXMuYmFja3dhcmRzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RlcCgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZSBvbmUgZnJhbWUgYmFja3dhcmRzIChhbmQgY2hhbmdlIGRpcmVjdGlvbilcbiAgICAgKi9cbiAgICBzdGVwQmFja3dhcmRzKCkge1xuICAgICAgICB0aGlzLmJhY2t3YXJkcyA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RlcCgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhpcyBvYmplY3RcbiAgICAgKiBAcmV0dXJucyB7TmRKc29uUGxheWVyfVxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICBpZiAodGhpcy5jdHgucmVzZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jdHgucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMuY3R4LmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICAgIC8vUmVzZXQgYWxsOiBUaGUgZm9sbG93aW5nIGxpbmUgaXMgYSBcImhhY2tcIiB0byBmb3JjZSBpdCB0byByZXNldDpcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBUaGlzIGNsYXNzIGNyZWF0ZXMgdGhlIHBsYXllciBVSVxuICogaHR0cHM6Ly9naXRodWIuY29tL2xlcGUvbmRqc29uLXBsYXllclxuICogQGF1dGhvciBBLkxlcGVcbiAqIEBzaW5jZSAwNC8yMDIwXG4gKi9cbmNsYXNzIE5ESlBsYXllciB7XG4gICAgcGxheWVyOyAgICAvL05kSnNvblBsYXllciBvYmplY3RcbiAgICBvcHRpb25zOyAgIC8vT3B0aW9ucyBmb3IgdGhlIFVJXG4gICAgdWk7ICAgICAgICAvL1RoZSBVSVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBOREpQbGF5ZXJcbiAgICAgKiBAcGFyYW0gc3JjIDogc3RyaW5nIChVUkwgb2YgTkRKU09OIGZpbGUgb3Igc3RyZWFtKSAob3B0aW9uYWwpXG4gICAgICogQHBhcmFtIGVsZW1lbnQgOiBET00gc2VsZWN0b3Igb3IgSFRNTEVsZW1lbnQgd2hlcmUgdG8gcGxhY2UgTkRKUGxheWVyIChvcHRpb25hbClcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyA6IE9iamVjdCAob3B0aW9uYWwpXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3JjLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgZnVuY3Rpb24gaXNNZWRpYShzdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHIuaW5kZXhPZihcIi5cIikgPiAwIHx8IHN0ci5pbmRleE9mKFwiL1wiKSAhPT0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaXNTZWxlY3RvcihzdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJbMF0gPT09IFwiLlwiIHx8IHN0clswXSA9PT0gXCIjXCIgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdHIpICE9PSBudWxsXG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBpZihhcmd1bWVudHNbMV0uY29uc3RydWN0b3IubmFtZSA9PT0gXCJPYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgICAgICAgICAgICBpZihpc01lZGlhKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoYXJndW1lbnRzWzBdIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgaXNTZWxlY3Rvcihhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHN3aXRjaCh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgYXJndW1lbnRzWzBdLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiT2JqZWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBpc01lZGlhKGFyZ3VtZW50c1swXSk6XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgYXJndW1lbnRzWzBdIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgaXNTZWxlY3Rvcihhcmd1bWVudHNbMF0pOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVbmtub3duIHBhcmFtZXRlciB3YXMgcGFzc2VkIHRvIE5ESlBsYXllciBjb25zdHJ1Y3Rvci5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBkZWZhdWx0OiAvLyBNb3JlIHRoYW4gMlxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgY29udHJvbHM6IGZhbHNlLFxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIGNvbnRyb2xzIDogeyAvL0V4YW1wbGUgb24gaG93IHRvIHNob3cvaGlkZSBlbGVtZW50c1xuICAgICAgICAgICAgICAgIGJhc2UgOiBcImZ1bGxcIiwgLy9XaGljaCBvbmUgdG8gdXNlIGFzIGJhc2VcbiAgICAgICAgICAgICAgICBwbGF5OiB0cnVlLCAvL3Nob3cgcGxheS9wYXVzZVxuICAgICAgICAgICAgICAgIHN0b3A6IHRydWUsXG4gICAgICAgICAgICAgICAgc3RlcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0aHVtYnM6IHRydWUsXG4gICAgICAgICAgICAgICAgZnVsbHNjcmVlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzcGVlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXBzZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmcmFtZXM6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmVzaXplOiB0cnVlLCAvL3NldCBpdCB0byBmYWxzZSB0byBkaXNhYmxlIGFkanVzdGluZyB0aGUgc2l6ZSBiZWZvcmUgc3RhcnRpbmdcbiAgICAgICAgICAgIG9uYWN0aW9uIDogKGFjdGlvbiwgbmRqUGxheWVyLCB1aVBsYXllcikgPT4ge30sXG4gICAgICAgICAgICBvbnBsYXkgOiAobmRqUGxheWVyKSA9PiB7fSxcbiAgICAgICAgICAgIG9uc3RvcCA6IChuZGpQbGF5ZXIpID0+IHt9XG4gICAgICAgIH0sIG9wdGlvbnMgfHwge30pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBVSVxuICAgICAgICB0aGlzLl9jcmVhdGUoZWxlbWVudCk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgcGxheWVyXG4gICAgICAgIHRoaXMucGxheWVyID0gbmV3IE5kSnNvblBsYXllcihzcmMsIGVsZW1lbnQsIF90aGlzLm9wdGlvbnMsIHtcbiAgICAgICAgICAgIG9uc3RhcnQgOiBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2FkanVzdFNpemUoKVxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLm9uc3RhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uc3RhcnQocGxheWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25sb2FkIDogZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgICAgIGlmKF90aGlzLm9wdGlvbnMub25sb2FkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbmxvYWQocGxheWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25yZW5kZXIgOiBmdW5jdGlvbiAoZnJhbWUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fb25VcGRhdGUoZnJhbWUpO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLm9ucmVuZGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbnJlbmRlcihmcmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9ucGxheSA6IGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgIGlmKF90aGlzLnVpLnBhbmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnBsYXkuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZighIF90aGlzLnVpLnN0ZXAuY3NzLmNvbnRhaW5zKFwiZGlzYWJsZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnN0ZXAuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnBhdXNlLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9ucGxheShwbGF5ZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uc3RvcCA6IGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgIGlmKF90aGlzLnVpLnBhbmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnBsYXkuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmKCEgX3RoaXMudWkuc3RlcC5jc3MuY29udGFpbnMoXCJkaXNhYmxlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkuc3RlcC5zaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5wYXVzZS5zaG93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMub25zdG9wKHBsYXllcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25maW5pc2g6IGZ1bmN0aW9uIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAvL3BsYXllci5zdG9wKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmVycm9yIDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgICAgICAvL1RPRE86IERpc3BsYXkgZXJyb3IgaW4gcGxheWVyXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgVUlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9vblVwZGF0ZShmcmFtZSkge1xuICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmKF90aGlzLnVpKSB7XG4gICAgICAgICAgICBpZihfdGhpcy51aS5mcmFtZXMpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5mcmFtZXMudGV4dCA9IChfdGhpcy5wbGF5ZXIuY3VycmVudEZyYW1lKCkgKyAxKSArIFwiL1wiICsgX3RoaXMucGxheWVyLnRvdGFsRnJhbWVzKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKF90aGlzLnVpLmxhcHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRleHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRzID0gX3RoaXMucGxheWVyLl9zdGFydFRpbWVTdGFtcCAmJiBmcmFtZS50cyAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBmcmFtZS50ICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgdHQgPSBfdGhpcy5wbGF5ZXIuX3RvdFRpbWUgPiAwO1xuICAgICAgICAgICAgICAgIGlmKGZyYW1lLmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IGZyYW1lLmQgKyBcIiBcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBfdGhpcy5fZm9ybWF0TWlsbGlzKGZyYW1lLnRzIC0gX3RoaXMucGxheWVyLl9zdGFydFRpbWVTdGFtcCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBmcmFtZS50LmluZGV4T2YoXCI6XCIpID4gMCA/IGZyYW1lLnQgOiBfdGhpcy5fZm10VGltZShmcmFtZS50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBcIi9cIiArIF90aGlzLnBsYXllci50b3RhbFRpbWUoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy51aS5sYXBzZS50ZXh0ID0gdGV4dFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoX3RoaXMudWkucHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy51aS5wcm9ncmVzcy52YWx1ZSA9ICgoX3RoaXMucGxheWVyLmN1cnJlbnRGcmFtZSgpICsgMSkgLyAoX3RoaXMucGxheWVyLnRvdGFsRnJhbWVzKCkpKSAqIDEwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEl0IHdpbGwgYWRqdXN0IHRoZSB2aWRlbyBhbmQgY2FudmFzIHNpemVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9hZGp1c3RTaXplKCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJlc2l6ZSkge1xuICAgICAgICAgICAgbGV0IHBsYXllciA9IHRoaXMucGxheWVyLndyYXBwZXI7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gcGxheWVyLnBhcmVudCgpO1xuICAgICAgICAgICAgaWYgKHBsYXllci5jbGllbnRIZWlnaHQgPiBwYXJlbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHJhdGlvVyA9IHRoaXMucGxheWVyLmNhbnZhcy5oZWlnaHQgLyB0aGlzLnBsYXllci5jYW52YXMud2lkdGg7XG4gICAgICAgICAgICAgICAgbGV0IHJhdGlvSCA9IDEgLyByYXRpb1c7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuY2FudmFzLmhlaWdodCA9IHBhcmVudC5jbGllbnRIZWlnaHQgLSAodGhpcy5vcHRpb25zLmNvbnRyb2xzID8gcGxheWVyLnF1ZXJ5U2VsZWN0b3IoXCIucGFuZWxcIikuY2xpZW50SGVpZ2h0IDogMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuY2FudmFzLndpZHRoID0gcGFyZW50LmNsaWVudFdpZHRoICogKHJhdGlvVyA8IDEgPyByYXRpb1cgOiByYXRpb0gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgVUlcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBTZWxlY3RvclxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2NyZWF0ZShlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IF90aGlzID0gdGhpcztcbiAgICAgICAgY29uc3QgJCA9IG0yZDIubG9hZCgpO1xuICAgICAgICBfdGhpcy51aSA9ICQoZWxlbWVudCwgX3RoaXMuX2dldFVJKGVsZW1lbnQpKTtcbiAgICAgICAgaWYoX3RoaXMudWkucGFuZWwpIHtcbiAgICAgICAgICAgIFtcInRodW1iXCIsIFwicGxheVwiLCBcInN0ZXBcIiwgXCJwYXVzZVwiLCBcInN0b3BcIiwgXCJsYXBzZVwiLCBcInByb2dyZXNzXCIsIFwiZnJhbWVzXCIsIFwiZnVsbHNjcmVlblwiXS5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICBfdGhpcy51aVtpdF0gPSBfdGhpcy51aS5wYW5lbFtpdF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENob29zZSB0aGUgVUkgdG8gZGlzcGxheVxuICAgICAqIEBwYXJhbSBlbGVtZW50IFNlbGVjdG9yXG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldFVJKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBsZXQgdWkgPSB7IGh0bWwgOiAoZWxlbWVudC5pbm5lckhUTUwgfHwgXCJcIikgfTsgLy8gSWYgbm8gY29udHJvbHMgYXJlIHNwZWNpZmllZFxuXG4gICAgICAgIC8vIG5vaW5zcGVjdGlvbiBGYWxsVGhyb3VnaEluU3dpdGNoU3RhdGVtZW50SlNcbiAgICAgICAgaWYoX3RoaXMub3B0aW9ucy5jb250cm9scykge1xuICAgICAgICAgICAgdWkgPSB0aGlzLl9nZXRCYXNpY1VJKCk7XG4gICAgICAgICAgICAvLyBOT1RFOiB2aXNpYmlsaXR5IGlzIGNvbnRyb2xsZWQgaW4gQ1NTXG4gICAgICAgICAgICBzd2l0Y2goX3RoaXMub3B0aW9ucy5jb250cm9scykge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJmdWxsXCI6XG4gICAgICAgICAgICAgICAgICAgIHVpLnBhbmVsLnN0ZXAuY3NzLnJlbW92ZShcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjb21tb25cIjpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlIFwibGl2ZVwiOlxuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5jb250cm9scyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIC8vVE9ETzogd2hhdCB0byBzaG93IGFuZCB3aGF0IG5vdCB0byBzaG93XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJvb3QgPSBlbGVtZW50IGluc3RhbmNlb2YgTm9kZSA/IGVsZW1lbnQgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQpO1xuICAgICAgICBpZiAocm9vdCkge1xuICAgICAgICAgICAgbGV0IGNhbnZhcyA9IHJvb3QucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTtcbiAgICAgICAgICAgIGlmICghY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgdWkgPSBPYmplY3QuYXNzaWduKHsgY2FudmFzIDogXCJcIiB9LCB1aSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJvb3QgZWxlbWVudDogXCIgKyBlbGVtZW50ICsgXCIgd2FzIG5vdCBmb3VuZCBpbiBkb2N1bWVudFwiKTtcbiAgICAgICAgICAgIHVpID0gT2JqZWN0LmFzc2lnbih7IGNhbnZhcyA6IFwiXCIgfSwgdWkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1aTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCYXNpYyBVSVxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0QmFzaWNVSSgpIHtcbiAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBfdGhpcy5wbGF5ZXIud3JhcHBlcjtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHBsYXllci5jbGFzc0xpc3QuYWRkKFwiZnVsbHNjcmVlblwiKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY2xhc3NMaXN0LnJlbW92ZShcImZ1bGxzY3JlZW5cIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYXB0aW9uIDogXCJcIixcbiAgICAgICAgICAgIGNzcyA6IF90aGlzLm9wdGlvbnMuY29udHJvbHMsXG4gICAgICAgICAgICBwYW5lbCA6IHtcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiBcImRpdlwiLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwicGFuZWxcIixcbiAgICAgICAgICAgICAgICB0aHVtYiA6IHsgLy9DcmVhdGUgXCJ0aHVtYlwiIGluc2lkZSBwYW5lbFxuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJmaWd1cmVcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJ0aHVtYlwiLFxuICAgICAgICAgICAgICAgICAgICBpbWcgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmMgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhcHRpb24gOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJmaWdDYXB0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2FwdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBCdXR0b25zXG4gICAgICAgICAgICAgICAgcmVjIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwicmVjXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkxpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBsYXkgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJwbGF5XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlBsYXlcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwicGxheVwiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXllci5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhdXNlIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJhXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwicGF1c2VcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiUGF1c2VcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCIsXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLm9uYWN0aW9uKFwicGF1c2VcIiwgX3RoaXMucGxheWVyLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wbGF5ZXIucGF1c2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RlcCA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICBjc3M6IFtcInN0ZXBcIiwgXCJkaXNhYmxlZFwiXSxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiU3RlcFwiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIixcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkub25hY3Rpb24oXCJzdGVwXCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGxheWVyLnN0ZXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RvcCA6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZSA6IFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcInN0b3BcIixcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiU3RvcFwiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIixcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkub25hY3Rpb24oXCJzdG9wXCIsIF90aGlzLnBsYXllciwgX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGxheWVyLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gVGltZSBMYXBzZVxuICAgICAgICAgICAgICAgIGxhcHNlIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJsYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcImxhcHNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlRpbWUgZWxhcHNlZCAvIFRpbWUgVG90YWxcIixcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCIwOjAwXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsaXZlIDoge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lIDogXCJsYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgOiBcImxpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJMaXZlIEZlZWRcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gUHJvZ3Jlc3MgYmFyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MgOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgICAgICAgICBtYXg6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgb25tb3VzZW1vdmU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSB+figoKGUub2Zmc2V0WCkgLyB0aGlzLm9mZnNldFdpZHRoKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZnJhbWUgPSBfdGhpcy5wbGF5ZXIuZnJhbWVBdChfdGhpcy5wbGF5ZXIuaW5kZXhBdChwb3NpdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuaW1nLnNyYyA9IF90aGlzLnBsYXllci5mcmFtZUJhc2UoKSArIChmcmFtZS50aCB8fCBmcmFtZS5mKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS50aHVtYi5pbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gX3RoaXMudWkudGh1bWIuaW1nLm5hdHVyYWxXaWR0aCB8fCBfdGhpcy51aS50aHVtYi5pbWcud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLnN0eWxlLndpZHRoID0gd2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZS50YyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLmNhcHRpb24gPSBmcmFtZS50YztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuc3R5bGUubGVmdCA9ICh0aGlzLm9mZnNldExlZnQgKyBlLm9mZnNldFggLSAoX3RoaXMudWkudGh1bWIuY2xpZW50V2lkdGggLyAyKSkgKyBcInB4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkudGh1bWIuc2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbm1vdXNlbGVhdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVpLnRodW1iLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbiA9IH5+KCgoZS5vZmZzZXRYKSAvIHRoaXMub2Zmc2V0V2lkdGgpICogMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IF90aGlzLnBsYXllci5pbmRleEF0KHBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBsYXllci5qdW1wVG8oaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudWkub25hY3Rpb24oXCJwcm9ncmVzc1wiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gRnJhbWUgY291bnRcbiAgICAgICAgICAgICAgICBmcmFtZXMgOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImxhYmVsXCIsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA6IFwiZnJhbWVzXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkN1cnJlbnQgRnJhbWUgLyBUb3RhbCBGcmFtZXNcIixcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCIwXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBGdWxsc2NyZWVuIHRvZ2dsZVxuICAgICAgICAgICAgICAgIGZ1bGxzY3JlZW4gOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgOiBcImFcIixcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogXCJmdWxsc2NyZWVuXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkZ1bGwgU2NyZWVuXCIsXG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IFwiI1wiLFxuICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYXllciA9IF90aGlzLnBsYXllci53cmFwcGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYocGxheWVyLmNsYXNzTGlzdC5jb250YWlucyhcImZ1bGxzY3JlZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5vbmFjdGlvbihcImV4aXQtZnVsbHNjcmVlblwiLCBfdGhpcy5wbGF5ZXIsIF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51aS5vbmFjdGlvbihcImZ1bGxzY3JlZW5cIiwgX3RoaXMucGxheWVyLCBfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vc2l6ZXMgOiBbXCJTRFwiLCBcIkhEXCIsIFwiNEtcIl0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25hY3Rpb24gOiBmdW5jdGlvbihhY3Rpb24sIG5kalBsYXllciwgdWlQbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uYWN0aW9uKGFjdGlvbiwgbmRqUGxheWVyLCB1aVBsYXllcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25wbGF5IDogZnVuY3Rpb24obmRqUGxheWVyKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMub3B0aW9ucy5vbnBsYXkobmRqUGxheWVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnN0b3AgOiBmdW5jdGlvbihuZGpQbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpb25zLm9uc3RvcChuZGpQbGF5ZXIsIHVpUGxheWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBhIHRpbWUsIGZvciBleGFtcGxlOiAxMjAuMzQgd2lsbCBiZSBjb252ZXJ0ZWQgaW50bzogMDI6MDAuMzRcbiAgICAgKiBAcGFyYW0gdGltZSBpbnRcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2ZtdFRpbWUodGltZSkge1xuICAgICAgICB0aW1lID0gdGltZS50b0ZpeGVkKDIpO1xuICAgICAgICBsZXQgZGVjaW1hbCA9IHRpbWUuc3BsaXQoXCIuXCIpWzFdIHx8IFwiMDBcIjtcbiAgICAgICAgcmV0dXJuICh+fih0aW1lIC8gNjApICsgXCJcIikucGFkU3RhcnQoMiwgJzAnKSArIFwiOlwiICsgKH5+KCh0aW1lIC8gNjApICUgMSAqIDYwKSArIFwiXCIpLnBhZFN0YXJ0KDIsICcwJykgKyBcIi5cIiArIGRlY2ltYWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdCBtaWxsaXNlY29uZHMsIGZvciBleGFtcGxlOiA5MDAwMCB3aWxsIGJlIGNvbnZlcnRlZCBpbnRvOiAwMDowMTozMC4wMDBcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9mb3JtYXRNaWxsaXMobWlsbGlzKSB7XG4gICAgICAgIGZ1bmN0aW9uIHBhZChudW0sIGRpZ2l0cykge1xuICAgICAgICAgICAgcmV0dXJuIChcIjAwXCIgKyBudW0pLnNsaWNlKChkaWdpdHMgfHwgMikgKiAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaCA9IE1hdGguZmxvb3IobWlsbGlzLzEwMDAvNjAvNjApO1xuICAgICAgICBjb25zdCBtID0gTWF0aC5mbG9vcigobWlsbGlzLzEwMDAvNjAvNjAgLSBoKSo2MCk7XG4gICAgICAgIGNvbnN0IHMgPSBNYXRoLmZsb29yKCgobWlsbGlzLzEwMDAvNjAvNjAgLSBoKSo2MCAtIG0pKjYwKTtcbiAgICAgICAgY29uc3QgbXMgPSBwYXJzZUludCgobWlsbGlzICUgMTAwMCkgLyAxMDApO1xuICAgICAgICByZXR1cm4gcGFkKGgpICsgXCI6XCIgKyBwYWQobSkgKyBcIjpcIiArIHBhZChzKSArIFwiLlwiICsgcGFkKG1zLCAzKTtcbiAgICB9XG59IiwiLyoqXG4gKiBAYXV0aG9yOiBBLiBMZXBlXG4gKiBNYW5hZ2UgVGltZXJzXG4gKiBVc2FnZTpcbiAqIGNvbnN0IHQgPSBuZXcgVGltZXJTcmMoMTAwMCk7XG4gKiB0LmNhbGwoZnVuY3Rpb24oKSB7IDxkbz4gfSk7XG4gKiBvcjpcbiAqIGNvbnN0IHQgPSBuZXcgVGltZXJTcmMoMTAwMCxmdW5jdGlvbigpeyA8ZG8+IH0pO1xuICogdC5wYXVzZSgpO1xuICogdC5kZXN0cm95KCk7XG4gKi9cbmZ1bmN0aW9uIFRpbWVyU3JjKG9yaWdpbmFsX21zLCBjYWxsYmFjaykge1xuXHRsZXQgc3RhcnRUaW1lLCB0aW1lciwgb2JqID0ge30sIGFjdGlvbiwgbXM7XG5cdG9iai5pbnRlcnZhbCA9IG9yaWdpbmFsX21zOyAvL1B1YmxpYy4gQ2FuIGJlIHVwZGF0ZWRcblx0b2JqLmNoZWNrZXIgPSA1MDsgLy8gYWRqdXN0IHRoaXMgbnVtYmVyIHRvIGFmZmVjdCBncmFudWxhcml0eVxuXHRvYmouc3RhdHVzID0gXCJpbml0XCI7XG5cdGxldCBub3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdHN0YXJ0VGltZSA9IG5vd1RpbWUgLSBvcmlnaW5hbF9tczsgLy9zdGFydCByaWdodCBhd2F5XG5cdG9iai5jYWxsID0gZnVuY3Rpb24oZnVuYykge1xuXHRcdGNhbGxiYWNrID0gZnVuYztcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuXHRvYmoubm9jYWxsID0gZnVuY3Rpb24oKSB7XG5cdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG5cdC8vRXhlY3V0ZSB0aGUgY2FsbGJhY2sgbWFudWFsbHkgYW5kIHJlc2V0IHRoZSB0aW1lclxuXHRvYmouZXhlYyA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuXHRcdHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG5cdC8vIENoZWNrcyB0aGUgc3RhdHVzIG9mIHRoZSB0aW1lclxuXHRvYmouY2hlY2sgPSBmdW5jdGlvbigpIHtcblx0XHRpZihhY3Rpb24pIGFjdGlvbigpO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG4gICAgb2JqLnBsYXkgPSBmdW5jdGlvbigpIHtcblx0XHRhY3Rpb24gPSBvYmouc3RlcDtcblx0XHRvYmouc3RhdHVzID0gXCJydW5uaW5nXCI7XG5cdFx0cmV0dXJuIG9iajtcbiAgICB9O1xuICAgIG9iai5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFjdGlvbiA9IG51bGw7XG5cdFx0b2JqLnN0YXR1cyA9IFwicGF1c2VkXCI7XG5cdFx0cmV0dXJuIG9iajtcbiAgICB9O1xuXHRvYmouZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuXHRcdGFjdGlvbiA9IG51bGw7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuXHRcdHRpbWVyID0gbnVsbDtcblx0XHRmb3IodmFyIG8gaW4gb2JqKSB7XG5cdFx0XHRvYmpbb10gPSBudWxsO1xuXHRcdFx0ZGVsZXRlIG9ialtvXTtcblx0XHR9XG5cdFx0b2JqLnN0YXR1cyA9IFwiZGVzdHJveWVkXCI7XG5cdH07XG4gICAgb2JqLnN0ZXAgPSBmdW5jdGlvbigpIHtcblx0XHRub3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIG1zID0gTWF0aC5tYXgoMCwgb2JqLmludGVydmFsIC0gKG5vd1RpbWUgLSBzdGFydFRpbWUpKTtcbiAgICAgICAgaWYobXMgPT09IDApIHtcblx0XHRcdG1zID0gb2JqLmludGVydmFsO1xuXHRcdFx0c3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdFx0XHRpZihjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG5cdG9iai5zbG93ID0gZnVuY3Rpb24oKSB7XG5cdFx0b2JqLmludGVydmFsID0gMTAwMDtcblx0XHRyZXR1cm4gb2JqO1xuXHR9O1xuXHRvYmouZmFzdCA9IGZ1bmN0aW9uKCkge1xuXHRcdG9iai5pbnRlcnZhbCA9IG9yaWdpbmFsX21zO1xuXHRcdHJldHVybiBvYmo7XG5cdH07XG4gICAgdGltZXIgPSBzZXRJbnRlcnZhbChvYmouY2hlY2ssIG9iai5jaGVja2VyKTtcbiAgICByZXR1cm4gb2JqO1xufVxuIiwiLyoqXG4gKiBIVE1MIGltcGxlbWVudGF0aW9uIG9mIG5kanNvbi1wbGF5ZXJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9sZXBlL25kanNvbi1wbGF5ZXJcbiAqIEBhdXRob3IgQS5MZXBlXG4gKiBAc2luY2UgMDQvMjAyMFxuICpcbiAqIEV4YW1wbGUgc3BlY2lmeWluZyBtdWx0aXBsZSBzaXplczpcbiAqIDx2aWRlby1uZCBzcmM9XCIvdmlkZW8vZGVtby5uZGpzb25cIiBjb250cm9scyBsb29wIGF1dG9wbGF5PlxuICogICAgICA8c291cmNlIHNyYz1cIi92aWRlby9kZW1vLVFWR0EubmRqc29uXCIgd2lkdGg9XCIzMjBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby1WR0EubmRqc29uXCIgd2lkdGg9XCI2NDBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby1TVkdBLm5kanNvblwiIHdpZHRoPVwiODAwXCI+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tSEQubmRqc29uXCIgd2lkdGg9XCIxMjgwXCIgaGVpZ2h0PVwiNzIwXCI+XG4gKiAgICAgIDxzb3VyY2Ugc3JjPVwiL3ZpZGVvL2RlbW8tRnVsbEhELm5kanNvblwiIHdpZHRoPVwiMTkyMFwiIGhlaWdodD1cIjEwODBcIj5cbiAqICAgICAgPHNvdXJjZSBzcmM9XCIvdmlkZW8vZGVtby00Sy5uZGpzb25cIiB3aWR0aD1cIjM4NDBcIiBoZWlnaHQ9XCIyMTYwXCI+XG4gKiA8L3ZpZGVvLW5kPlxuICpcbiAqIEV4YW1wbGUgc3BlY2lmeWluZyB0cmFja3M6XG4gKiAgKHRyeWluZyB0byBiZSBhcyBjbG9zZSB0bzogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L3RyYWNrKVxuICogTk9URTogVlRUIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkIGFzIGl0IGlzIGJhc2VkIGluIHRpbWVkIHRleHQsIHdoaWxlXG4gKiB3ZSBuZWVkIHRvIGJlIHN1cmUgdGhleSBhcmUgc3luYyB3aXRoIGltYWdlcyB1c2luZyBmcmFtZXMgaW5zdGVhZCBvZiB0aW1lLlxuICpcbiAqIDx2aWRlby1uZCBzcmM9XCIvdmlkZW8vZGVtby5uZGpzb25cIiBjb250cm9scyBsb29wIGF1dG9wbGF5PlxuICogICAgPHRyYWNrIHNyYz1cIi9pbmZvL2RhdGEudHh0XCIga2luZD1cImRlc2NyaXB0aW9uc1wiIGxhYmVsPVwiRGF0YVwiPlxuICogPC92aWRlby1uZD5cbiAqXG4gKiBUcmFjayB0eXBlczpcbiAqIGNhcHRpb25zICAgICA6IERpc3BsYXllZCBvbiB0aGUgY2VudGVyXG4gKiBjaGFwdGVycyAgICAgOiBJdCB3aWxsIGJlIGRpc3BsYXllZCBpbiB0aGUgdG9wIChhbHNvIHVzZWZ1bCBmb3IgbmF2aWdhdGlvbilcbiAqIGRlc2NyaXB0aW9ucyA6IERpc3BsYXllZCBvbiB0b3AgbGVmdCBjb3JuZXJcbiAqIG1ldGFkYXRhICAgICA6IERpc3BsYXllZCBvbiB0b3AgcmlnaHQgY29ybmVyXG4gKiBzdWJ0aXRsZXMgICAgOiBEaXNwbGF5ZWQgb24gdGhlIGJvdHRvbVxuICpcbiAqIFRoZSBmb3JtYXQgb2YgdGhlIFRYVCBmaWxlIGlzIFwiZnJhbWUtb3ItcmFuZ2UjIHNwYWNlLW9yLXRhYiB0ZXh0XCIsIGZvciBleGFtcGxlOlxuICogMjAtMzAgICAgT2JqZWN0czxicj5ieSBjb2xvcjpcbiAqIDM1ICAgQmx1ZTogMiwgUmVkOiAxXG4gKiAzNiAgIEJsdWU6IDMsIFJlZDogMVxuICogMzcgICBCbHVlOiAyLCBSZWQ6IDJcbiAqXG4gKiBBYm91dCBjaGFwdGVyczpcbiAqIEFkZGl0aW9uYWxseSB0byBiZWluZyBkaXNwbGF5ZWQgb24gdGhlIHRvcCBhcyBhIHRpdGxlLCBpZiB1c2VkLCBpdCB3aWxsIGRpc3BsYXkgbmV4dCBhbmQgcHJldiBidXR0b25zLlxuICogRm9yIGV4YW1wbGU6XG4gKiBgPHRyYWNrIHNyYz1cIi9jaGFwdGVycy9maWxlLnR4dFwiIGtpbmQ9XCJjaGFwdGVyc1wiPmBcbiAqXG4gKiBmaWxlLnR4dDpcbiAqIDAtMTAgQ2hhcHRlciAxOjxicj5UaGUgYmVnaW5uaW5nXG4gKiAzNTItMzYwIENoYXB0ZXIgMjo8YnI+VGhlIG1vbWVudFxuICogNjg5LTcxMCBMYXN0IENoYXB0ZXI6PGJyPlRoZSBlbmRcbiAqXG4gKiBXaGVuZXZlciB5b3UgY2xpY2sgb24gJ3ByZXYnIG9yICduZXh0JyBpdCB3aWxsIHVzZSB0aGUgYmVnaW5uaW5nIG9mIGVhY2ggY2hhcHRlciB0byBqdW1wIGludG8gc2NlbmVzLlxuICogVGhlIHJhbmdlIGlzIHVzZWQgdG8gZGlzcGxheSBpdC4gSWYgeW91IGRvbid0IHNldCBhIHJhbmdlIChqdXN0IGEgZnJhbWUgbnVtYmVyKSwgaXQgd2lsbCBiZSBkaXNwbGF5ZWQgZm9yIDNzLlxuICovXG5jbGFzcyBWaWRlb05EIGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICAvLyBjcmVhdGUgc2hhZG93IGRvbSByb290XG4gICAgICAgIHRoaXMuX3Jvb3QgPSB0aGlzOyAvL3RoaXMuYXR0YWNoU2hhZG93KHttb2RlOiAnb3Blbid9KTtcbiAgICAgICAgLy90aGlzLl9yb290LmlubmVySFRNTCA9IGBgO1xuICAgICAgICBjb25zdCByb290ID0gdGhpcztcblxuICAgICAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC8vIEF0dHJpYnV0ZXMgc2ltaWxhciB0byA8dmlkZW8+IHRhZzpcbiAgICAgICAgICAgIGF1dG9wbGF5IDogZmFsc2UsXG4gICAgICAgICAgICBjb250cm9scyA6IGZhbHNlLOOAgC8vdHJ1ZTogbW9zdCBiYXNpYyBVSSwgJ2NvbW1vbicsICdmdWxsJywgb3IgbGlzdCwgZm9yIGV4YW1wbGU6ICdwbGF5IHByb2dyZXNzIGxhcHNlIGZyYW1lcydcbiAgICAgICAgICAgIGxvb3AgICAgIDogZmFsc2UsXG4gICAgICAgICAgICBsaXZlICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgd2lkdGggICAgOiAnYXV0bycsXG4gICAgICAgICAgICBoZWlnaHQgICA6ICdhdXRvJyxcbiAgICAgICAgICAgIHBvc3RlciAgIDogJycsXG4gICAgICAgICAgICBwcmVsb2FkICA6ICdhdXRvJywgLy9PcHRpb25zIGFyZTogJ21ldGFkYXRhJywgJ25vbmUnLFxuICAgICAgICAgICAgc3JjICAgICAgOiAnJywgICAgIC8vVVJMICFpbXBvcnRhbnRcbiAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgYXR0cmlidXRlczpcbiAgICAgICAgICAgIGNjICAgICAgICAgIDogJ2F1dG8nLCAvL0VuYWJsZSBDQyBidXR0b25cbiAgICAgICAgICAgIGNhcHRpb24gICAgIDogJycsIC8vU2V0IHNvbWUgY2FwdGlvbiBvdmVyIHRoZSB2aWRlb1xuICAgICAgICAgICAgZnVsbHNjcmVlbiAgOiBmYWxzZSwgLy9Vc2UgJ2F1dG8nIHRvIG9ubHkgZGlzcGxheSBidXR0b24uIHRydWUgPSBzdGFydCBhcyBmdWxsc2NyZWVuXG4gICAgICAgICAgICBmcHMgICAgICAgICA6ICcnLCAvL3NwZWNpZnkgdmlkZW8gZnBzIChpZiBpdHMgbm90IGluIHRoZSBtZXRhZGF0YSlcbiAgICAgICAgICAgIHNwZWVkICAgICAgIDogZmFsc2UsIC8vRGlzcGxheSBzcGVlZCBtZW51XG4gICAgICAgICAgICBhdXRvc2l6ZSAgICA6ICdhdXRvJywgLy9BdXRvbWF0aWNhbGx5IGNob29zZSBiZXN0IHNpemUgZnJvbSBzaXplc1xuICAgICAgICAgICAgc2l6ZXMgICAgICAgOiB7fSB8fCBbXSwgLy9TcGVjaWZ5IGF2YWlsYWJsZSBzaXplcy4gRXhhbXBsZTogeyBIRCA6IDEyMDAgfSBvciBbODAwLCAxMjAwLCAxODAwXVxuICAgICAgICAgICAgdGh1bWJzICAgICAgOiAnYXV0bycsIC8vU2hvdyB0aHVtYm5haWxzIHdoZW4gcGxhY2luZyBtb3VzZSBvdmVyIHByb2dyZXNzXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgICAgICAgZm9yKGxldCBkIGluIGRlZmF1bHRPcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zW2RdID0gdGhpcy5nZXRBdHRyaWJ1dGUoZCkgfHwgdGhpcy5oYXNBdHRyaWJ1dGUoZCkgfHwgZGVmYXVsdE9wdGlvbnNbZF07XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5vbnN0YXJ0ID0gZnVuY3Rpb24gKHBsYXllcikge1xuICAgICAgICAgICAgaWYocm9vdC5vbnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcm9vdC5vbnN0YXJ0KHBsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5vbmxvYWQgPSBmdW5jdGlvbiAocGxheWVyKSB7XG4gICAgICAgICAgICBpZihyb290Lm9ubG9hZCkge1xuICAgICAgICAgICAgICAgIHJvb3Qub25sb2FkKHBsYXllcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5vbnJlbmRlciA9IGZ1bmN0aW9uKGZyYW1lKSB7XG4gICAgICAgICAgICBpZihyb290Lm9ucmVuZGVyKSB7XG4gICAgICAgICAgICAgICAgcm9vdC5vbnJlbmRlcihmcmFtZSwgbmRqUGxheWVyLndyYXBwZXIsIG5kalBsYXllciwgbmRqUGxheWVyLnBsYXllci5jYW52YXMsIG5kalBsYXllci5wbGF5ZXIuY3R4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBcIm5kanBcIjtcbiAgICAgICAgY29uc3QgbmRqUGxheWVyID0gbmV3IE5ESlBsYXllcihvcHRpb25zLnNyYywgdGhpcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgc2V0Q2FwdGlvbihjYXB0aW9uKSB7XG4gICAgICAgIHRoaXMuX3Jvb3QucXVlcnlTZWxlY3RvcihcImNhcHRpb25cIikuaW5uZXJUZXh0ID0gY2FwdGlvbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIFsgJ3dpZHRoJywgJ2hlaWdodCcsICdjYXB0aW9uJyBdO1xuICAgIH1cblxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdjYXB0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5zZXRDYXB0aW9uKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xuICAgIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3ZpZGVvLW5kJywgVmlkZW9ORCk7XG59KTtcbiJdfQ==

//# sourceMappingURL=ndjson-player.min.js.map
